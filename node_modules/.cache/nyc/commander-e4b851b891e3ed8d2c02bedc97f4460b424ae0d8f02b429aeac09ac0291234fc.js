"use strict";function cov_1zd1s657i9(){var path="/parse-server/lib/cli/utils/commander.js";var hash="981d1849e398521e5f5e12f0c6154294e3833c7c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/cli/utils/commander.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:25}},"2":{start:{line:8,column:17},end:{line:8,column:37}},"3":{start:{line:10,column:12},end:{line:10,column:51}},"4":{start:{line:12,column:18},end:{line:12,column:80}},"5":{start:{line:14,column:39},end:{line:14,column:93}},"6":{start:{line:23,column:0},end:{line:68,column:2}},"7":{start:{line:24,column:2},end:{line:24,column:29}},"8":{start:{line:25,column:2},end:{line:37,column:11}},"9":{start:{line:26,column:4},end:{line:34,column:5}},"10":{start:{line:27,column:32},end:{line:27,column:48}},"11":{start:{line:29,column:6},end:{line:33,column:7}},"12":{start:{line:30,column:8},end:{line:30,column:101}},"13":{start:{line:32,column:8},end:{line:32,column:101}},"14":{start:{line:36,column:4},end:{line:36,column:47}},"15":{start:{line:38,column:2},end:{line:50,column:9}},"16":{start:{line:39,column:16},end:{line:39,column:32}},"17":{start:{line:41,column:4},end:{line:43,column:5}},"18":{start:{line:42,column:6},end:{line:42,column:24}},"19":{start:{line:45,column:4},end:{line:47,column:5}},"20":{start:{line:46,column:6},end:{line:46,column:26}},"21":{start:{line:49,column:4},end:{line:49,column:18}},"22":{start:{line:51,column:2},end:{line:57,column:9}},"23":{start:{line:52,column:4},end:{line:54,column:5}},"24":{start:{line:53,column:6},end:{line:53,column:44}},"25":{start:{line:56,column:4},end:{line:56,column:16}},"26":{start:{line:71,column:2},end:{line:85,column:9}},"27":{start:{line:72,column:4},end:{line:82,column:5}},"28":{start:{line:73,column:26},end:{line:73,column:50}},"29":{start:{line:75,column:19},end:{line:75,column:35}},"30":{start:{line:75,column:29},end:{line:75,column:35}},"31":{start:{line:77,column:6},end:{line:79,column:7}},"32":{start:{line:78,column:8},end:{line:78,column:60}},"33":{start:{line:81,column:6},end:{line:81,column:59}},"34":{start:{line:84,column:4},end:{line:84,column:19}},"35":{start:{line:89,column:16},end:{line:89,column:18}},"36":{start:{line:91,column:2},end:{line:121,column:3}},"37":{start:{line:92,column:19},end:{line:92,column:34}},"38":{start:{line:93,column:4},end:{line:93,column:47}},"39":{start:{line:95,column:23},end:{line:95,column:40}},"40":{start:{line:97,column:4},end:{line:105,column:5}},"41":{start:{line:98,column:6},end:{line:100,column:7}},"42":{start:{line:99,column:8},end:{line:99,column:48}},"43":{start:{line:102,column:6},end:{line:102,column:35}},"44":{start:{line:104,column:6},end:{line:104,column:27}},"45":{start:{line:107,column:4},end:{line:119,column:7}},"46":{start:{line:108,column:20},end:{line:108,column:32}},"47":{start:{line:110,column:6},end:{line:112,column:7}},"48":{start:{line:111,column:8},end:{line:111,column:45}},"49":{start:{line:114,column:21},end:{line:114,column:45}},"50":{start:{line:116,column:6},end:{line:118,column:7}},"51":{start:{line:117,column:8},end:{line:117,column:37}},"52":{start:{line:120,column:4},end:{line:120,column:57}},"53":{start:{line:123,column:2},end:{line:123,column:17}},"54":{start:{line:126,column:0},end:{line:132,column:2}},"55":{start:{line:127,column:2},end:{line:131,column:5}},"56":{start:{line:128,column:4},end:{line:130,column:5}},"57":{start:{line:129,column:6},end:{line:129,column:31}},"58":{start:{line:134,column:0},end:{line:134,column:73}},"59":{start:{line:136,column:0},end:{line:151,column:2}},"60":{start:{line:137,column:2},end:{line:137,column:20}},"61":{start:{line:140,column:21},end:{line:140,column:42}},"62":{start:{line:141,column:19},end:{line:141,column:40}},"63":{start:{line:143,column:2},end:{line:143,column:37}},"64":{start:{line:145,column:2},end:{line:145,column:35}},"65":{start:{line:147,column:2},end:{line:147,column:51}},"66":{start:{line:150,column:2},end:{line:150,column:36}},"67":{start:{line:153,column:0},end:{line:161,column:2}},"68":{start:{line:154,column:2},end:{line:160,column:9}},"69":{start:{line:155,column:4},end:{line:157,column:5}},"70":{start:{line:156,column:6},end:{line:156,column:31}},"71":{start:{line:159,column:4},end:{line:159,column:19}},"72":{start:{line:163,column:15},end:{line:163,column:39}},"73":{start:{line:167,column:0},end:{line:167,column:27}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:14,column:9},end:{line:14,column:31}},loc:{start:{line:14,column:37},end:{line:14,column:95}},line:14},"1":{name:"(anonymous_1)",decl:{start:{line:23,column:47},end:{line:23,column:48}},loc:{start:{line:23,column:70},end:{line:68,column:1}},line:23},"2":{name:"(anonymous_2)",decl:{start:{line:25,column:34},end:{line:25,column:35}},loc:{start:{line:25,column:52},end:{line:37,column:3}},line:25},"3":{name:"(anonymous_3)",decl:{start:{line:38,column:56},end:{line:38,column:57}},loc:{start:{line:38,column:73},end:{line:50,column:3}},line:38},"4":{name:"(anonymous_4)",decl:{start:{line:51,column:46},end:{line:51,column:47}},loc:{start:{line:51,column:61},end:{line:57,column:3}},line:51},"5":{name:"parseEnvironment",decl:{start:{line:70,column:9},end:{line:70,column:25}},loc:{start:{line:70,column:36},end:{line:86,column:1}},line:70},"6":{name:"(anonymous_6)",decl:{start:{line:71,column:49},end:{line:71,column:50}},loc:{start:{line:71,column:67},end:{line:85,column:3}},line:71},"7":{name:"(anonymous_7)",decl:{start:{line:75,column:19},end:{line:75,column:20}},loc:{start:{line:75,column:29},end:{line:75,column:35}},line:75},"8":{name:"parseConfigFile",decl:{start:{line:88,column:9},end:{line:88,column:24}},loc:{start:{line:88,column:34},end:{line:124,column:1}},line:88},"9":{name:"(anonymous_9)",decl:{start:{line:107,column:33},end:{line:107,column:34}},loc:{start:{line:107,column:40},end:{line:119,column:5}},line:107},"10":{name:"(anonymous_10)",decl:{start:{line:126,column:49},end:{line:126,column:50}},loc:{start:{line:126,column:68},end:{line:132,column:1}},line:126},"11":{name:"(anonymous_11)",decl:{start:{line:127,column:31},end:{line:127,column:32}},loc:{start:{line:127,column:38},end:{line:131,column:3}},line:127},"12":{name:"(anonymous_12)",decl:{start:{line:136,column:37},end:{line:136,column:38}},loc:{start:{line:136,column:58},end:{line:151,column:1}},line:136},"13":{name:"(anonymous_13)",decl:{start:{line:153,column:42},end:{line:153,column:43}},loc:{start:{line:153,column:54},end:{line:161,column:1}},line:153},"14":{name:"(anonymous_14)",decl:{start:{line:154,column:42},end:{line:154,column:43}},loc:{start:{line:154,column:60},end:{line:160,column:3}},line:154}},branchMap:{"0":{loc:{start:{line:14,column:46},end:{line:14,column:92}},type:"cond-expr",locations:[{start:{line:14,column:70},end:{line:14,column:73}},{start:{line:14,column:76},end:{line:14,column:92}}],line:14},"1":{loc:{start:{line:14,column:46},end:{line:14,column:67}},type:"binary-expr",locations:[{start:{line:14,column:46},end:{line:14,column:49}},{start:{line:14,column:53},end:{line:14,column:67}}],line:14},"2":{loc:{start:{line:26,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:34,column:5}},{start:{line:26,column:4},end:{line:34,column:5}}],line:26},"3":{loc:{start:{line:29,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:29,column:6},end:{line:33,column:7}},{start:{line:29,column:6},end:{line:33,column:7}}],line:29},"4":{loc:{start:{line:41,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:43,column:5}},{start:{line:41,column:4},end:{line:43,column:5}}],line:41},"5":{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:45,column:4},end:{line:47,column:5}}],line:45},"6":{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:52,column:4},end:{line:54,column:5}}],line:52},"7":{loc:{start:{line:70,column:26},end:{line:70,column:34}},type:"default-arg",locations:[{start:{line:70,column:32},end:{line:70,column:34}}],line:70},"8":{loc:{start:{line:72,column:4},end:{line:82,column:5}},type:"if",locations:[{start:{line:72,column:4},end:{line:82,column:5}},{start:{line:72,column:4},end:{line:82,column:5}}],line:72},"9":{loc:{start:{line:77,column:6},end:{line:79,column:7}},type:"if",locations:[{start:{line:77,column:6},end:{line:79,column:7}},{start:{line:77,column:6},end:{line:79,column:7}}],line:77},"10":{loc:{start:{line:78,column:17},end:{line:78,column:59}},type:"binary-expr",locations:[{start:{line:78,column:17},end:{line:78,column:49}},{start:{line:78,column:53},end:{line:78,column:59}}],line:78},"11":{loc:{start:{line:91,column:2},end:{line:121,column:3}},type:"if",locations:[{start:{line:91,column:2},end:{line:121,column:3}},{start:{line:91,column:2},end:{line:121,column:3}}],line:91},"12":{loc:{start:{line:97,column:4},end:{line:105,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:105,column:5}},{start:{line:97,column:4},end:{line:105,column:5}}],line:97},"13":{loc:{start:{line:98,column:6},end:{line:100,column:7}},type:"if",locations:[{start:{line:98,column:6},end:{line:100,column:7}},{start:{line:98,column:6},end:{line:100,column:7}}],line:98},"14":{loc:{start:{line:110,column:6},end:{line:112,column:7}},type:"if",locations:[{start:{line:110,column:6},end:{line:112,column:7}},{start:{line:110,column:6},end:{line:112,column:7}}],line:110},"15":{loc:{start:{line:116,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:116,column:6},end:{line:118,column:7}},{start:{line:116,column:6},end:{line:118,column:7}}],line:116},"16":{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:128,column:4},end:{line:130,column:5}}],line:128},"17":{loc:{start:{line:155,column:4},end:{line:157,column:5}},type:"if",locations:[{start:{line:155,column:4},end:{line:157,column:5}},{start:{line:155,column:4},end:{line:157,column:5}}],line:155}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},inputSourceMap:{version:3,sources:["../../../src/cli/utils/commander.js"],names:["_definitions","_reverseDefinitions","_defaults","Command","prototype","loadDefinitions","definitions","Object","keys","reduce","program","opt","additionalOptions","required","option","help","action","object","key","value","env","defs","default","undefined","on","console","log","forEach","parseEnvironment","options","originalKey","parseConfigFile","args","length","jsonPath","path","resolve","jsonConfig","require","apps","setValuesIfNeeded","hasOwnProperty","call","_parse","parse","envOptions","fromFile","Deprecator","scanParseServerOptions","getOptions"],mappings:";;;;;;;AACA;;AACA;;AACA;;;;AAHA;AAKA,IAAIA,YAAJ;;AACA,IAAIC,mBAAJ;;AACA,IAAIC,SAAJ;;AAEAC,mBAAQC,SAAR,CAAkBC,eAAlB,GAAoC,UAAUC,WAAV,EAAuB;AACzDN,EAAAA,YAAY,GAAGM,WAAf;AAEAC,EAAAA,MAAM,CAACC,IAAP,CAAYF,WAAZ,EAAyBG,MAAzB,CAAgC,CAACC,OAAD,EAAUC,GAAV,KAAkB;AAChD,QAAI,OAAOL,WAAW,CAACK,GAAD,CAAlB,IAA2B,QAA/B,EAAyC;AACvC,YAAMC,iBAAiB,GAAGN,WAAW,CAACK,GAAD,CAArC;;AACA,UAAIC,iBAAiB,CAACC,QAAlB,KAA+B,IAAnC,EAAyC;AACvC,eAAOH,OAAO,CAACI,MAAR,CACJ,KAAIH,GAAI,KAAIA,GAAI,GADZ,EAELC,iBAAiB,CAACG,IAFb,EAGLH,iBAAiB,CAACI,MAHb,CAAP;AAKD,OAND,MAMO;AACL,eAAON,OAAO,CAACI,MAAR,CACJ,KAAIH,GAAI,KAAIA,GAAI,GADZ,EAELC,iBAAiB,CAACG,IAFb,EAGLH,iBAAiB,CAACI,MAHb,CAAP;AAKD;AACF;;AACD,WAAON,OAAO,CAACI,MAAR,CAAgB,KAAIH,GAAI,KAAIA,GAAI,GAAhC,CAAP;AACD,GAlBD,EAkBG,IAlBH;AAoBAV,EAAAA,mBAAmB,GAAGM,MAAM,CAACC,IAAP,CAAYF,WAAZ,EAAyBG,MAAzB,CAAgC,CAACQ,MAAD,EAASC,GAAT,KAAiB;AACrE,QAAIC,KAAK,GAAGb,WAAW,CAACY,GAAD,CAAvB;;AACA,QAAI,OAAOC,KAAP,IAAgB,QAApB,EAA8B;AAC5BA,MAAAA,KAAK,GAAGA,KAAK,CAACC,GAAd;AACD;;AACD,QAAID,KAAJ,EAAW;AACTF,MAAAA,MAAM,CAACE,KAAD,CAAN,GAAgBD,GAAhB;AACD;;AACD,WAAOD,MAAP;AACD,GATqB,EASnB,EATmB,CAAtB;AAWAf,EAAAA,SAAS,GAAGK,MAAM,CAACC,IAAP,CAAYF,WAAZ,EAAyBG,MAAzB,CAAgC,CAACY,IAAD,EAAOV,GAAP,KAAe;AACzD,QAAIX,YAAY,CAACW,GAAD,CAAZ,CAAkBW,OAAlB,KAA8BC,SAAlC,EAA6C;AAC3CF,MAAAA,IAAI,CAACV,GAAD,CAAJ,GAAYX,YAAY,CAACW,GAAD,CAAZ,CAAkBW,OAA9B;AACD;;AACD,WAAOD,IAAP;AACD,GALW,EAKT,EALS,CAAZ;AAOA;;AACA,OAAKG,EAAL,CAAQ,QAAR,EAAkB,YAAY;AAC5BC,IAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY,EAAZ;AACAnB,IAAAA,MAAM,CAACC,IAAP,CAAYP,mBAAZ,EAAiC0B,OAAjC,CAAyCT,GAAG,IAAI;AAC9CO,MAAAA,OAAO,CAACC,GAAR,CAAa,SAAQR,GAAI,KAAIjB,mBAAmB,CAACiB,GAAD,CAAM,GAAtD;AACD,KAFD;AAGAO,IAAAA,OAAO,CAACC,GAAR,CAAY,EAAZ;AACD,GAPD;AAQD,CAlDD;;AAoDA,SAASE,gBAAT,CAA0BR,GAAG,GAAG,EAAhC,EAAoC;AAClC,SAAOb,MAAM,CAACC,IAAP,CAAYP,mBAAZ,EAAiCQ,MAAjC,CAAwC,CAACoB,OAAD,EAAUX,GAAV,KAAkB;AAC/D,QAAIE,GAAG,CAACF,GAAD,CAAP,EAAc;AACZ,YAAMY,WAAW,GAAG7B,mBAAmB,CAACiB,GAAD,CAAvC;;AACA,UAAIF,MAAM,GAAGF,MAAM,IAAIA,MAAvB;;AACA,UAAI,OAAOd,YAAY,CAAC8B,WAAD,CAAnB,KAAqC,QAAzC,EAAmD;AACjDd,QAAAA,MAAM,GAAGhB,YAAY,CAAC8B,WAAD,CAAZ,CAA0Bd,MAA1B,IAAoCA,MAA7C;AACD;;AACDa,MAAAA,OAAO,CAAC5B,mBAAmB,CAACiB,GAAD,CAApB,CAAP,GAAoCF,MAAM,CAACI,GAAG,CAACF,GAAD,CAAJ,CAA1C;AACD;;AACD,WAAOW,OAAP;AACD,GAVM,EAUJ,EAVI,CAAP;AAWD;;AAED,SAASE,eAAT,CAAyBrB,OAAzB,EAAkC;AAChC,MAAImB,OAAO,GAAG,EAAd;;AACA,MAAInB,OAAO,CAACsB,IAAR,CAAaC,MAAb,GAAsB,CAA1B,EAA6B;AAC3B,QAAIC,QAAQ,GAAGxB,OAAO,CAACsB,IAAR,CAAa,CAAb,CAAf;AACAE,IAAAA,QAAQ,GAAGC,cAAKC,OAAL,CAAaF,QAAb,CAAX;;AACA,UAAMG,UAAU,GAAGC,OAAO,CAACJ,QAAD,CAA1B;;AACA,QAAIG,UAAU,CAACE,IAAf,EAAqB;AACnB,UAAIF,UAAU,CAACE,IAAX,CAAgBN,MAAhB,GAAyB,CAA7B,EAAgC;AAC9B,cAAM,iCAAN;AACD;;AACDJ,MAAAA,OAAO,GAAGQ,UAAU,CAACE,IAAX,CAAgB,CAAhB,CAAV;AACD,KALD,MAKO;AACLV,MAAAA,OAAO,GAAGQ,UAAV;AACD;;AACD9B,IAAAA,MAAM,CAACC,IAAP,CAAYqB,OAAZ,EAAqBF,OAArB,CAA6BT,GAAG,IAAI;AAClC,YAAMC,KAAK,GAAGU,OAAO,CAACX,GAAD,CAArB;;AACA,UAAI,CAAClB,YAAY,CAACkB,GAAD,CAAjB,EAAwB;AACtB,cAAO,yBAAwBA,GAAI,EAAnC;AACD;;AACD,YAAMF,MAAM,GAAGhB,YAAY,CAACkB,GAAD,CAAZ,CAAkBF,MAAjC;;AACA,UAAIA,MAAJ,EAAY;AACVa,QAAAA,OAAO,CAACX,GAAD,CAAP,GAAeF,MAAM,CAACG,KAAD,CAArB;AACD;AACF,KATD;AAUAM,IAAAA,OAAO,CAACC,GAAR,CAAa,6BAA4BQ,QAAS,EAAlD;AACD;;AACD,SAAOL,OAAP;AACD;;AAED1B,mBAAQC,SAAR,CAAkBoC,iBAAlB,GAAsC,UAAUX,OAAV,EAAmB;AACvDtB,EAAAA,MAAM,CAACC,IAAP,CAAYqB,OAAZ,EAAqBF,OAArB,CAA6BT,GAAG,IAAI;AAClC,QAAI,CAACX,MAAM,CAACH,SAAP,CAAiBqC,cAAjB,CAAgCC,IAAhC,CAAqC,IAArC,EAA2CxB,GAA3C,CAAL,EAAsD;AACpD,WAAKA,GAAL,IAAYW,OAAO,CAACX,GAAD,CAAnB;AACD;AACF,GAJD;AAKD,CAND;;AAQAf,mBAAQC,SAAR,CAAkBuC,MAAlB,GAA2BxC,mBAAQC,SAAR,CAAkBwC,KAA7C;;AAEAzC,mBAAQC,SAAR,CAAkBwC,KAAlB,GAA0B,UAAUZ,IAAV,EAAgBZ,GAAhB,EAAqB;AAC7C,OAAKuB,MAAL,CAAYX,IAAZ,EAD6C,CAE7C;;;AACA,QAAMa,UAAU,GAAGjB,gBAAgB,CAACR,GAAD,CAAnC;AACA,QAAM0B,QAAQ,GAAGf,eAAe,CAAC,IAAD,CAAhC,CAJ6C,CAK7C;;AACA,OAAKS,iBAAL,CAAuBK,UAAvB,EAN6C,CAO7C;;AACA,OAAKL,iBAAL,CAAuBM,QAAvB,EAR6C,CAS7C;;AACAC,sBAAWC,sBAAX,CAAkC,IAAlC,EAV6C,CAW7C;;;AACA,OAAKR,iBAAL,CAAuBtC,SAAvB;AACD,CAbD;;AAeAC,mBAAQC,SAAR,CAAkB6C,UAAlB,GAA+B,YAAY;AACzC,SAAO1C,MAAM,CAACC,IAAP,CAAYR,YAAZ,EAA0BS,MAA1B,CAAiC,CAACoB,OAAD,EAAUX,GAAV,KAAkB;AACxD,QAAI,OAAO,KAAKA,GAAL,CAAP,KAAqB,WAAzB,EAAsC;AACpCW,MAAAA,OAAO,CAACX,GAAD,CAAP,GAAe,KAAKA,GAAL,CAAf;AACD;;AACD,WAAOW,OAAP;AACD,GALM,EAKJ,EALI,CAAP;AAMD,CAPD;;eASe,IAAI1B,kBAAJ,E;AACf",sourcesContent:["/* eslint-disable no-console */\nimport { Command } from 'commander';\nimport path from 'path';\nimport Deprecator from '../../Deprecator/Deprecator';\n\nlet _definitions;\nlet _reverseDefinitions;\nlet _defaults;\n\nCommand.prototype.loadDefinitions = function (definitions) {\n  _definitions = definitions;\n\n  Object.keys(definitions).reduce((program, opt) => {\n    if (typeof definitions[opt] == 'object') {\n      const additionalOptions = definitions[opt];\n      if (additionalOptions.required === true) {\n        return program.option(\n          `--${opt} <${opt}>`,\n          additionalOptions.help,\n          additionalOptions.action\n        );\n      } else {\n        return program.option(\n          `--${opt} [${opt}]`,\n          additionalOptions.help,\n          additionalOptions.action\n        );\n      }\n    }\n    return program.option(`--${opt} [${opt}]`);\n  }, this);\n\n  _reverseDefinitions = Object.keys(definitions).reduce((object, key) => {\n    let value = definitions[key];\n    if (typeof value == 'object') {\n      value = value.env;\n    }\n    if (value) {\n      object[value] = key;\n    }\n    return object;\n  }, {});\n\n  _defaults = Object.keys(definitions).reduce((defs, opt) => {\n    if (_definitions[opt].default !== undefined) {\n      defs[opt] = _definitions[opt].default;\n    }\n    return defs;\n  }, {});\n\n  /* istanbul ignore next */\n  this.on('--help', function () {\n    console.log('  Configure From Environment:');\n    console.log('');\n    Object.keys(_reverseDefinitions).forEach(key => {\n      console.log(`    $ ${key}='${_reverseDefinitions[key]}'`);\n    });\n    console.log('');\n  });\n};\n\nfunction parseEnvironment(env = {}) {\n  return Object.keys(_reverseDefinitions).reduce((options, key) => {\n    if (env[key]) {\n      const originalKey = _reverseDefinitions[key];\n      let action = option => option;\n      if (typeof _definitions[originalKey] === 'object') {\n        action = _definitions[originalKey].action || action;\n      }\n      options[_reverseDefinitions[key]] = action(env[key]);\n    }\n    return options;\n  }, {});\n}\n\nfunction parseConfigFile(program) {\n  let options = {};\n  if (program.args.length > 0) {\n    let jsonPath = program.args[0];\n    jsonPath = path.resolve(jsonPath);\n    const jsonConfig = require(jsonPath);\n    if (jsonConfig.apps) {\n      if (jsonConfig.apps.length > 1) {\n        throw 'Multiple apps are not supported';\n      }\n      options = jsonConfig.apps[0];\n    } else {\n      options = jsonConfig;\n    }\n    Object.keys(options).forEach(key => {\n      const value = options[key];\n      if (!_definitions[key]) {\n        throw `error: unknown option ${key}`;\n      }\n      const action = _definitions[key].action;\n      if (action) {\n        options[key] = action(value);\n      }\n    });\n    console.log(`Configuration loaded from ${jsonPath}`);\n  }\n  return options;\n}\n\nCommand.prototype.setValuesIfNeeded = function (options) {\n  Object.keys(options).forEach(key => {\n    if (!Object.prototype.hasOwnProperty.call(this, key)) {\n      this[key] = options[key];\n    }\n  });\n};\n\nCommand.prototype._parse = Command.prototype.parse;\n\nCommand.prototype.parse = function (args, env) {\n  this._parse(args);\n  // Parse the environment first\n  const envOptions = parseEnvironment(env);\n  const fromFile = parseConfigFile(this);\n  // Load the env if not passed from command line\n  this.setValuesIfNeeded(envOptions);\n  // Load from file to override\n  this.setValuesIfNeeded(fromFile);\n  // Scan for deprecated Parse Server options\n  Deprecator.scanParseServerOptions(this);\n  // Last set the defaults\n  this.setValuesIfNeeded(_defaults);\n};\n\nCommand.prototype.getOptions = function () {\n  return Object.keys(_definitions).reduce((options, key) => {\n    if (typeof this[key] !== 'undefined') {\n      options[key] = this[key];\n    }\n    return options;\n  }, {});\n};\n\nexport default new Command();\n/* eslint-enable no-console */\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"981d1849e398521e5f5e12f0c6154294e3833c7c"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1zd1s657i9=function(){return actualCoverage;};}return actualCoverage;}cov_1zd1s657i9();cov_1zd1s657i9().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1zd1s657i9().s[1]++;exports.default=void 0;var _commander=(cov_1zd1s657i9().s[2]++,require("commander"));var _path=(cov_1zd1s657i9().s[3]++,_interopRequireDefault(require("path")));var _Deprecator=(cov_1zd1s657i9().s[4]++,_interopRequireDefault(require("../../Deprecator/Deprecator")));function _interopRequireDefault(obj){cov_1zd1s657i9().f[0]++;cov_1zd1s657i9().s[5]++;return(cov_1zd1s657i9().b[1][0]++,obj)&&(cov_1zd1s657i9().b[1][1]++,obj.__esModule)?(cov_1zd1s657i9().b[0][0]++,obj):(cov_1zd1s657i9().b[0][1]++,{default:obj});}/* eslint-disable no-console */let _definitions;let _reverseDefinitions;let _defaults;cov_1zd1s657i9().s[6]++;_commander.Command.prototype.loadDefinitions=function(definitions){cov_1zd1s657i9().f[1]++;cov_1zd1s657i9().s[7]++;_definitions=definitions;cov_1zd1s657i9().s[8]++;Object.keys(definitions).reduce((program,opt)=>{cov_1zd1s657i9().f[2]++;cov_1zd1s657i9().s[9]++;if(typeof definitions[opt]=='object'){cov_1zd1s657i9().b[2][0]++;const additionalOptions=(cov_1zd1s657i9().s[10]++,definitions[opt]);cov_1zd1s657i9().s[11]++;if(additionalOptions.required===true){cov_1zd1s657i9().b[3][0]++;cov_1zd1s657i9().s[12]++;return program.option(`--${opt} <${opt}>`,additionalOptions.help,additionalOptions.action);}else{cov_1zd1s657i9().b[3][1]++;cov_1zd1s657i9().s[13]++;return program.option(`--${opt} [${opt}]`,additionalOptions.help,additionalOptions.action);}}else{cov_1zd1s657i9().b[2][1]++;}cov_1zd1s657i9().s[14]++;return program.option(`--${opt} [${opt}]`);},this);cov_1zd1s657i9().s[15]++;_reverseDefinitions=Object.keys(definitions).reduce((object,key)=>{cov_1zd1s657i9().f[3]++;let value=(cov_1zd1s657i9().s[16]++,definitions[key]);cov_1zd1s657i9().s[17]++;if(typeof value=='object'){cov_1zd1s657i9().b[4][0]++;cov_1zd1s657i9().s[18]++;value=value.env;}else{cov_1zd1s657i9().b[4][1]++;}cov_1zd1s657i9().s[19]++;if(value){cov_1zd1s657i9().b[5][0]++;cov_1zd1s657i9().s[20]++;object[value]=key;}else{cov_1zd1s657i9().b[5][1]++;}cov_1zd1s657i9().s[21]++;return object;},{});cov_1zd1s657i9().s[22]++;_defaults=Object.keys(definitions).reduce((defs,opt)=>{cov_1zd1s657i9().f[4]++;cov_1zd1s657i9().s[23]++;if(_definitions[opt].default!==undefined){cov_1zd1s657i9().b[6][0]++;cov_1zd1s657i9().s[24]++;defs[opt]=_definitions[opt].default;}else{cov_1zd1s657i9().b[6][1]++;}cov_1zd1s657i9().s[25]++;return defs;},{});/* istanbul ignore next */this.on('--help',function(){console.log('  Configure From Environment:');console.log('');Object.keys(_reverseDefinitions).forEach(key=>{console.log(`    $ ${key}='${_reverseDefinitions[key]}'`);});console.log('');});};function parseEnvironment(env=(cov_1zd1s657i9().b[7][0]++,{})){cov_1zd1s657i9().f[5]++;cov_1zd1s657i9().s[26]++;return Object.keys(_reverseDefinitions).reduce((options,key)=>{cov_1zd1s657i9().f[6]++;cov_1zd1s657i9().s[27]++;if(env[key]){cov_1zd1s657i9().b[8][0]++;const originalKey=(cov_1zd1s657i9().s[28]++,_reverseDefinitions[key]);cov_1zd1s657i9().s[29]++;let action=option=>{cov_1zd1s657i9().f[7]++;cov_1zd1s657i9().s[30]++;return option;};cov_1zd1s657i9().s[31]++;if(typeof _definitions[originalKey]==='object'){cov_1zd1s657i9().b[9][0]++;cov_1zd1s657i9().s[32]++;action=(cov_1zd1s657i9().b[10][0]++,_definitions[originalKey].action)||(cov_1zd1s657i9().b[10][1]++,action);}else{cov_1zd1s657i9().b[9][1]++;}cov_1zd1s657i9().s[33]++;options[_reverseDefinitions[key]]=action(env[key]);}else{cov_1zd1s657i9().b[8][1]++;}cov_1zd1s657i9().s[34]++;return options;},{});}function parseConfigFile(program){cov_1zd1s657i9().f[8]++;let options=(cov_1zd1s657i9().s[35]++,{});cov_1zd1s657i9().s[36]++;if(program.args.length>0){cov_1zd1s657i9().b[11][0]++;let jsonPath=(cov_1zd1s657i9().s[37]++,program.args[0]);cov_1zd1s657i9().s[38]++;jsonPath=_path.default.resolve(jsonPath);const jsonConfig=(cov_1zd1s657i9().s[39]++,require(jsonPath));cov_1zd1s657i9().s[40]++;if(jsonConfig.apps){cov_1zd1s657i9().b[12][0]++;cov_1zd1s657i9().s[41]++;if(jsonConfig.apps.length>1){cov_1zd1s657i9().b[13][0]++;cov_1zd1s657i9().s[42]++;throw'Multiple apps are not supported';}else{cov_1zd1s657i9().b[13][1]++;}cov_1zd1s657i9().s[43]++;options=jsonConfig.apps[0];}else{cov_1zd1s657i9().b[12][1]++;cov_1zd1s657i9().s[44]++;options=jsonConfig;}cov_1zd1s657i9().s[45]++;Object.keys(options).forEach(key=>{cov_1zd1s657i9().f[9]++;const value=(cov_1zd1s657i9().s[46]++,options[key]);cov_1zd1s657i9().s[47]++;if(!_definitions[key]){cov_1zd1s657i9().b[14][0]++;cov_1zd1s657i9().s[48]++;throw`error: unknown option ${key}`;}else{cov_1zd1s657i9().b[14][1]++;}const action=(cov_1zd1s657i9().s[49]++,_definitions[key].action);cov_1zd1s657i9().s[50]++;if(action){cov_1zd1s657i9().b[15][0]++;cov_1zd1s657i9().s[51]++;options[key]=action(value);}else{cov_1zd1s657i9().b[15][1]++;}});cov_1zd1s657i9().s[52]++;console.log(`Configuration loaded from ${jsonPath}`);}else{cov_1zd1s657i9().b[11][1]++;}cov_1zd1s657i9().s[53]++;return options;}cov_1zd1s657i9().s[54]++;_commander.Command.prototype.setValuesIfNeeded=function(options){cov_1zd1s657i9().f[10]++;cov_1zd1s657i9().s[55]++;Object.keys(options).forEach(key=>{cov_1zd1s657i9().f[11]++;cov_1zd1s657i9().s[56]++;if(!Object.prototype.hasOwnProperty.call(this,key)){cov_1zd1s657i9().b[16][0]++;cov_1zd1s657i9().s[57]++;this[key]=options[key];}else{cov_1zd1s657i9().b[16][1]++;}});};cov_1zd1s657i9().s[58]++;_commander.Command.prototype._parse=_commander.Command.prototype.parse;cov_1zd1s657i9().s[59]++;_commander.Command.prototype.parse=function(args,env){cov_1zd1s657i9().f[12]++;cov_1zd1s657i9().s[60]++;this._parse(args);// Parse the environment first
const envOptions=(cov_1zd1s657i9().s[61]++,parseEnvironment(env));const fromFile=(cov_1zd1s657i9().s[62]++,parseConfigFile(this));// Load the env if not passed from command line
cov_1zd1s657i9().s[63]++;this.setValuesIfNeeded(envOptions);// Load from file to override
cov_1zd1s657i9().s[64]++;this.setValuesIfNeeded(fromFile);// Scan for deprecated Parse Server options
cov_1zd1s657i9().s[65]++;_Deprecator.default.scanParseServerOptions(this);// Last set the defaults
cov_1zd1s657i9().s[66]++;this.setValuesIfNeeded(_defaults);};cov_1zd1s657i9().s[67]++;_commander.Command.prototype.getOptions=function(){cov_1zd1s657i9().f[13]++;cov_1zd1s657i9().s[68]++;return Object.keys(_definitions).reduce((options,key)=>{cov_1zd1s657i9().f[14]++;cov_1zd1s657i9().s[69]++;if(typeof this[key]!=='undefined'){cov_1zd1s657i9().b[17][0]++;cov_1zd1s657i9().s[70]++;options[key]=this[key];}else{cov_1zd1s657i9().b[17][1]++;}cov_1zd1s657i9().s[71]++;return options;},{});};var _default=(cov_1zd1s657i9().s[72]++,new _commander.Command());/* eslint-enable no-console */cov_1zd1s657i9().s[73]++;exports.default=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jbGkvdXRpbHMvY29tbWFuZGVyLmpzIl0sIm5hbWVzIjpbIl9kZWZpbml0aW9ucyIsIl9yZXZlcnNlRGVmaW5pdGlvbnMiLCJfZGVmYXVsdHMiLCJDb21tYW5kIiwicHJvdG90eXBlIiwibG9hZERlZmluaXRpb25zIiwiZGVmaW5pdGlvbnMiLCJPYmplY3QiLCJrZXlzIiwicmVkdWNlIiwicHJvZ3JhbSIsIm9wdCIsImFkZGl0aW9uYWxPcHRpb25zIiwicmVxdWlyZWQiLCJvcHRpb24iLCJoZWxwIiwiYWN0aW9uIiwib2JqZWN0Iiwia2V5IiwidmFsdWUiLCJlbnYiLCJkZWZzIiwiZGVmYXVsdCIsInVuZGVmaW5lZCIsIm9uIiwiY29uc29sZSIsImxvZyIsImZvckVhY2giLCJwYXJzZUVudmlyb25tZW50Iiwib3B0aW9ucyIsIm9yaWdpbmFsS2V5IiwicGFyc2VDb25maWdGaWxlIiwiYXJncyIsImxlbmd0aCIsImpzb25QYXRoIiwicGF0aCIsInJlc29sdmUiLCJqc29uQ29uZmlnIiwicmVxdWlyZSIsImFwcHMiLCJzZXRWYWx1ZXNJZk5lZWRlZCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIl9wYXJzZSIsInBhcnNlIiwiZW52T3B0aW9ucyIsImZyb21GaWxlIiwiRGVwcmVjYXRvciIsInNjYW5QYXJzZVNlcnZlck9wdGlvbnMiLCJnZXRPcHRpb25zIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFIQTtBQUtBLElBQUlBLFlBQUo7O0FBQ0EsSUFBSUMsbUJBQUo7O0FBQ0EsSUFBSUMsU0FBSjs7QUFFQUMsbUJBQVFDLFNBQVIsQ0FBa0JDLGVBQWxCLEdBQW9DLFVBQVVDLFdBQVYsRUFBdUI7QUFDekROLEVBQUFBLFlBQVksR0FBR00sV0FBZjtBQUVBQyxFQUFBQSxNQUFNLENBQUNDLElBQVAsQ0FBWUYsV0FBWixFQUF5QkcsTUFBekIsQ0FBZ0MsQ0FBQ0MsT0FBRCxFQUFVQyxHQUFWLEtBQWtCO0FB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RUFSNkMsQ0FTN0M7O0FBQ0FDLHNCQUFXQyxzQkFBWCxDQUFrQyxJQUFsQyxFQVY2QyxDQVc3Qzs7O0FBQ0EsT0FBS1IsaUJBQUwsQ0FBdUJ0QyxTQUF2QjtBQUNELENBYkQ7O0FBZUFDLG1CQUFRQyxTQUFSLENBQWtCNkMsVUFBbEIsR0FBK0IsWUFBWTtBQUN6QyxTQUFPMUMsTUFBTSxDQUFDQyxJQUFQLENBQVlSLFlBQVosRUFBMEJTLE1BQTFCLENBQWlDLENBQUNvQixPQUFELEVBQVVYLEdBQVYsS0FBa0I7QUFDeEQsUUFBSSxPQUFPLEtBQUtBLEdBQUwsQ0FBUCxLQUFxQixXQUF6QixFQUFzQztBQUNwQ1csTUFBQUEsT0FBTyxDQUFDWCxHQUFELENBQVAsR0FBZSxLQUFLQSxHQUFMLENBQWY7QUFDRDs7QUFDRCxXQUFPVyxPQUFQO0FBQ0QsR0FMTSxFQUtKLEVBTEksQ0FBUDtBQU1ELENBUEQ7O2VBU2UsSUFBSTFCLGtCQUFKLEU7QUFDZiIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tICdjb21tYW5kZXInO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgRGVwcmVjYXRvciBmcm9tICcuLi8uLi9EZXByZWNhdG9yL0RlcHJlY2F0b3InO1xuXG5sZXQgX2RlZmluaXRpb25zO1xubGV0IF9yZXZlcnNlRGVmaW5pdGlvbnM7XG5sZXQgX2RlZmF1bHRzO1xuXG5Db21tYW5kLnByb3RvdHlwZS5sb2FkRGVmaW5pdGlvbnMgPSBmdW5jdGlvbiAoZGVmaW5pdGlvbnMpIHtcbiAgX2RlZmluaXRpb25zID0gZGVmaW5pdGlvbnM7XG5cbiAgT2JqZWN0LmtleXMoZGVmaW5pdGlvbnMpLnJlZHVjZSgocHJvZ3JhbSwgb3B0KSA9PiB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbml0aW9uc1tvcHRdID09ICdvYmplY3QnKSB7XG4gICAgICBjb25zdCBhZGRpdGlvbmFsT3B0aW9ucyA9IGRlZmluaXRpb25zW29wdF07XG4gICAgICBpZiAoYWRkaXRpb25hbE9wdGlvbnMucmVxdWlyZWQgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHByb2dyYW0ub3B0aW9uKFxuICAgICAgICAgIGAtLSR7b3B0fSA8JHtvcHR9PmAsXG4gICAgICAgICAgYWRkaXRpb25hbE9wdGlvbnMuaGVscCxcbiAgICAgICAgICBhZGRpdGlvbmFsT3B0aW9ucy5hY3Rpb25cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwcm9ncmFtLm9wdGlvbihcbiAgICAgICAgICBgLS0ke29wdH0gWyR7b3B0fV1gLFxuICAgICAgICAgIGFkZGl0aW9uYWxPcHRpb25zLmhlbHAsXG4gICAgICAgICAgYWRkaXRpb25hbE9wdGlvbnMuYWN0aW9uXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcm9ncmFtLm9wdGlvbihgLS0ke29wdH0gWyR7b3B0fV1gKTtcbiAgfSwgdGhpcyk7XG5cbiAgX3JldmVyc2VEZWZpbml0aW9ucyA9IE9iamVjdC5rZXlzKGRlZmluaXRpb25zKS5yZWR1Y2UoKG9iamVjdCwga2V5KSA9PiB7XG4gICAgbGV0IHZhbHVlID0gZGVmaW5pdGlvbnNba2V5XTtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09ICdvYmplY3QnKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLmVudjtcbiAgICB9XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBvYmplY3RbdmFsdWVdID0ga2V5O1xuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0O1xuICB9LCB7fSk7XG5cbiAgX2RlZmF1bHRzID0gT2JqZWN0LmtleXMoZGVmaW5pdGlvbnMpLnJlZHVjZSgoZGVmcywgb3B0KSA9PiB7XG4gICAgaWYgKF9kZWZpbml0aW9uc1tvcHRdLmRlZmF1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZGVmc1tvcHRdID0gX2RlZmluaXRpb25zW29wdF0uZGVmYXVsdDtcbiAgICB9XG4gICAgcmV0dXJuIGRlZnM7XG4gIH0sIHt9KTtcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICB0aGlzLm9uKCctLWhlbHAnLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS5sb2coJyAgQ29uZmlndXJlIEZyb20gRW52aXJvbm1lbnQ6Jyk7XG4gICAgY29uc29sZS5sb2coJycpO1xuICAgIE9iamVjdC5rZXlzKF9yZXZlcnNlRGVmaW5pdGlvbnMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGAgICAgJCAke2tleX09JyR7X3JldmVyc2VEZWZpbml0aW9uc1trZXldfSdgKTtcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygnJyk7XG4gIH0pO1xufTtcblxuZnVuY3Rpb24gcGFyc2VFbnZpcm9ubWVudChlbnYgPSB7fSkge1xuICByZXR1cm4gT2JqZWN0LmtleXMoX3JldmVyc2VEZWZpbml0aW9ucykucmVkdWNlKChvcHRpb25zLCBrZXkpID0+IHtcbiAgICBpZiAoZW52W2tleV0pIHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsS2V5ID0gX3JldmVyc2VEZWZpbml0aW9uc1trZXldO1xuICAgICAgbGV0IGFjdGlvbiA9IG9wdGlvbiA9PiBvcHRpb247XG4gICAgICBpZiAodHlwZW9mIF9kZWZpbml0aW9uc1tvcmlnaW5hbEtleV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGFjdGlvbiA9IF9kZWZpbml0aW9uc1tvcmlnaW5hbEtleV0uYWN0aW9uIHx8IGFjdGlvbjtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnNbX3JldmVyc2VEZWZpbml0aW9uc1trZXldXSA9IGFjdGlvbihlbnZba2V5XSk7XG4gICAgfVxuICAgIHJldHVybiBvcHRpb25zO1xuICB9LCB7fSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ29uZmlnRmlsZShwcm9ncmFtKSB7XG4gIGxldCBvcHRpb25zID0ge307XG4gIGlmIChwcm9ncmFtLmFyZ3MubGVuZ3RoID4gMCkge1xuICAgIGxldCBqc29uUGF0aCA9IHByb2dyYW0uYXJnc1swXTtcbiAgICBqc29uUGF0aCA9IHBhdGgucmVzb2x2ZShqc29uUGF0aCk7XG4gICAgY29uc3QganNvbkNvbmZpZyA9IHJlcXVpcmUoanNvblBhdGgpO1xuICAgIGlmIChqc29uQ29uZmlnLmFwcHMpIHtcbiAgICAgIGlmIChqc29uQ29uZmlnLmFwcHMubGVuZ3RoID4gMSkge1xuICAgICAgICB0aHJvdyAnTXVsdGlwbGUgYXBwcyBhcmUgbm90IHN1cHBvcnRlZCc7XG4gICAgICB9XG4gICAgICBvcHRpb25zID0ganNvbkNvbmZpZy5hcHBzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zID0ganNvbkNvbmZpZztcbiAgICB9XG4gICAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBvcHRpb25zW2tleV07XG4gICAgICBpZiAoIV9kZWZpbml0aW9uc1trZXldKSB7XG4gICAgICAgIHRocm93IGBlcnJvcjogdW5rbm93biBvcHRpb24gJHtrZXl9YDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFjdGlvbiA9IF9kZWZpbml0aW9uc1trZXldLmFjdGlvbjtcbiAgICAgIGlmIChhY3Rpb24pIHtcbiAgICAgICAgb3B0aW9uc1trZXldID0gYWN0aW9uKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhgQ29uZmlndXJhdGlvbiBsb2FkZWQgZnJvbSAke2pzb25QYXRofWApO1xuICB9XG4gIHJldHVybiBvcHRpb25zO1xufVxuXG5Db21tYW5kLnByb3RvdHlwZS5zZXRWYWx1ZXNJZk5lZWRlZCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goa2V5ID0+IHtcbiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLCBrZXkpKSB7XG4gICAgICB0aGlzW2tleV0gPSBvcHRpb25zW2tleV07XG4gICAgfVxuICB9KTtcbn07XG5cbkNvbW1hbmQucHJvdG90eXBlLl9wYXJzZSA9IENvbW1hbmQucHJvdG90eXBlLnBhcnNlO1xuXG5Db21tYW5kLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChhcmdzLCBlbnYpIHtcbiAgdGhpcy5fcGFyc2UoYXJncyk7XG4gIC8vIFBhcnNlIHRoZSBlbnZpcm9ubWVudCBmaXJzdFxuICBjb25zdCBlbnZPcHRpb25zID0gcGFyc2VFbnZpcm9ubWVudChlbnYpO1xuICBjb25zdCBmcm9tRmlsZSA9IHBhcnNlQ29uZmlnRmlsZSh0aGlzKTtcbiAgLy8gTG9hZCB0aGUgZW52IGlmIG5vdCBwYXNzZWQgZnJvbSBjb21tYW5kIGxpbmVcbiAgdGhpcy5zZXRWYWx1ZXNJZk5lZWRlZChlbnZPcHRpb25zKTtcbiAgLy8gTG9hZCBmcm9tIGZpbGUgdG8gb3ZlcnJpZGVcbiAgdGhpcy5zZXRWYWx1ZXNJZk5lZWRlZChmcm9tRmlsZSk7XG4gIC8vIFNjYW4gZm9yIGRlcHJlY2F0ZWQgUGFyc2UgU2VydmVyIG9wdGlvbnNcbiAgRGVwcmVjYXRvci5zY2FuUGFyc2VTZXJ2ZXJPcHRpb25zKHRoaXMpO1xuICAvLyBMYXN0IHNldCB0aGUgZGVmYXVsdHNcbiAgdGhpcy5zZXRWYWx1ZXNJZk5lZWRlZChfZGVmYXVsdHMpO1xufTtcblxuQ29tbWFuZC5wcm90b3R5cGUuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKF9kZWZpbml0aW9ucykucmVkdWNlKChvcHRpb25zLCBrZXkpID0+IHtcbiAgICBpZiAodHlwZW9mIHRoaXNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG9wdGlvbnNba2V5XSA9IHRoaXNba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH0sIHt9KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBDb21tYW5kKCk7XG4vKiBlc2xpbnQtZW5hYmxlIG5vLWNvbnNvbGUgKi9cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jbGkvdXRpbHMvY29tbWFuZGVyLmpzIl0sIm5hbWVzIjpbIkNvbW1hbmQiLCJfZGVmaW5pdGlvbnMiLCJPYmplY3QiLCJkZWZpbml0aW9ucyIsImFkZGl0aW9uYWxPcHRpb25zIiwicHJvZ3JhbSIsIm9wdCIsIl9yZXZlcnNlRGVmaW5pdGlvbnMiLCJ2YWx1ZSIsIm9iamVjdCIsIl9kZWZhdWx0cyIsImRlZnMiLCJjb25zb2xlIiwia2V5IiwiZW52Iiwib3JpZ2luYWxLZXkiLCJhY3Rpb24iLCJvcHRpb24iLCJvcHRpb25zIiwianNvblBhdGgiLCJwYXRoIiwianNvbkNvbmZpZyIsInJlcXVpcmUiLCJlbnZPcHRpb25zIiwicGFyc2VFbnZpcm9ubWVudCIsImZyb21GaWxlIiwicGFyc2VDb25maWdGaWxlIiwiRGVwcmVjYXRvciJdLCJtYXBwaW5ncyI6Im95bkJBQUE7Mk5BQ0EsR0FBQSxDQUFBLFVBQUEsMEJBQUEsT0FBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBLENBQ0EsR0FBQSxDQUFBLEtBQUEsMEJBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsTUFBQSxDQUFBLENBQUEsQ0FBQSxDQUNBLEdBQUEsQ0FBQSxXQUFBLDBCQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLDZCQUFBLENBQUEsQ0FBQSxDQUFBLEMsc1BBSEEsK0JBS0EsR0FBQSxDQUFBLFlBQUEsQ0FDQSxHQUFBLENBQUEsbUJBQUEsQ0FDQSxHQUFBLENBQUEsU0FBQSxDLHdCQUVBQSxVQUFBQSxDQUFBQSxPQUFBQSxDQUFBQSxTQUFBQSxDQUFBQSxlQUFBQSxDQUFvQyxTQUFBLFdBQUEsQ0FBdUIsaURBQ3pEQyxZQUFZLENBQVpBLFdBQUFBLENBRHlELHdCQUd6REMsTUFBTSxDQUFOQSxJQUFBQSxDQUFBQSxXQUFBQSxFQUFBQSxNQUFBQSxDQUFnQyxDQUFBLE9BQUEsQ0FBQSxHQUFBLEdBQWtCLGlEQUNoRCxHQUFJLE1BQU9DLENBQUFBLFdBQVcsQ0FBbEIsR0FBa0IsQ0FB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bGUgbm8tY29uc29sZSAqL1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gJ2NvbW1hbmRlcic7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBEZXByZWNhdG9yIGZyb20gJy4uLy4uL0RlcHJlY2F0b3IvRGVwcmVjYXRvcic7XG5cbmxldCBfZGVmaW5pdGlvbnM7XG5sZXQgX3JldmVyc2VEZWZpbml0aW9ucztcbmxldCBfZGVmYXVsdHM7XG5cbkNvbW1hbmQucHJvdG90eXBlLmxvYWREZWZpbml0aW9ucyA9IGZ1bmN0aW9uIChkZWZpbml0aW9ucykge1xuICBfZGVmaW5pdGlvbnMgPSBkZWZpbml0aW9ucztcblxuICBPYmplY3Qua2V5cyhkZWZpbml0aW9ucykucmVkdWNlKChwcm9ncmFtLCBvcHQpID0+IHtcbiAgICBpZiAodHlwZW9mIGRlZmluaXRpb25zW29wdF0gPT0gJ29iamVjdCcpIHtcbiAgICAgIGNvbnN0IGFkZGl0aW9uYWxPcHRpb25zID0gZGVmaW5pdGlvbnNbb3B0XTtcbiAgICAgIGlmIChhZGRpdGlvbmFsT3B0aW9ucy5yZXF1aXJlZCA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gcHJvZ3JhbS5vcHRpb24oXG4gICAgICAgICAgYC0tJHtvcHR9IDwke29wdH0+YCxcbiAgICAgICAgICBhZGRpdGlvbmFsT3B0aW9ucy5oZWxwLFxuICAgICAgICAgIGFkZGl0aW9uYWxPcHRpb25zLmFjdGlvblxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHByb2dyYW0ub3B0aW9uKFxuICAgICAgICAgIGAtLSR7b3B0fSBbJHtvcHR9XWAsXG4gICAgICAgICAgYWRkaXRpb25hbE9wdGlvbnMuaGVscCxcbiAgICAgICAgICBhZGRpdGlvbmFsT3B0aW9ucy5hY3Rpb25cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHByb2dyYW0ub3B0aW9uKGAtLSR7b3B0fSBbJHtvcHR9XWApO1xuICB9LCB0aGlzKTtcblxuICBfcmV2ZXJzZURlZmluaXRpb25zID0gT2JqZWN0LmtleXMoZGVmaW5pdGlvbnMpLnJlZHVjZSgob2JqZWN0LCBrZXkpID0+IHtcbiAgICBsZXQgdmFsdWUgPSBkZWZpbml0aW9uc1trZXldO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUuZW52O1xuICAgIH1cbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIG9iamVjdFt2YWx1ZV0gPSBrZXk7XG4gICAgfVxuICAgIHJldHVybiBvYmplY3Q7XG4gIH0sIHt9KTtcblxuICBfZGVmYXVsdHMgPSBPYmplY3Qua2V5cyhkZWZpbml0aW9ucykucmVkdWNlKChkZWZzLCBvcHQpID0+IHtcbiAgICBpZiAoX2RlZmluaXRpb25zW29wdF0uZGVmYXVsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkZWZzW29wdF0gPSBfZGVmaW5pdGlvbnNbb3B0XS5kZWZhdWx0O1xuICAgIH1cbiAgICByZXR1cm4gZGVmcztcbiAgfSwge30pO1xuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHRoaXMub24oJy0taGVscCcsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmxvZygnICBDb25maWd1cmUgRnJvbSBFbnZpcm9ubWVudDonKTtcbiAgICBjb25zb2xlLmxvZygnJyk7XG4gICAgT2JqZWN0LmtleXMoX3JldmVyc2VEZWZpbml0aW9ucykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYCAgICAkICR7a2V5fT0nJHtfcmV2ZXJzZURlZmluaXRpb25zW2tleV19J2ApO1xuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKCcnKTtcbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBwYXJzZUVudmlyb25tZW50KGVudiA9IHt9KSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhfcmV2ZXJzZURlZmluaXRpb25zKS5yZWR1Y2UoKG9wdGlvbnMsIGtleSkgPT4ge1xuICAgIGlmIChlbnZba2V5XSkge1xuICAgICAgY29uc3Qgb3JpZ2luYWxLZXkgPSBfcmV2ZXJzZURlZmluaXRpb25zW2tleV07XG4gICAgICBsZXQgYWN0aW9uID0gb3B0aW9uID0+IG9wdGlvbjtcbiAgICAgIGlmICh0eXBlb2YgX2RlZmluaXRpb25zW29yaWdpbmFsS2V5XSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgYWN0aW9uID0gX2RlZmluaXRpb25zW29yaWdpbmFsS2V5XS5hY3Rpb24gfHwgYWN0aW9uO1xuICAgICAgfVxuICAgICAgb3B0aW9uc1tfcmV2ZXJzZURlZmluaXRpb25zW2tleV1dID0gYWN0aW9uKGVudltrZXldKTtcbiAgICB9XG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH0sIHt9KTtcbn1cblxuZnVuY3Rpb24gcGFyc2VDb25maWdGaWxlKHByb2dyYW0pIHtcbiAgbGV0IG9wdGlvbnMgPSB7fTtcbiAgaWYgKHByb2dyYW0uYXJncy5sZW5ndGggPiAwKSB7XG4gICAgbGV0IGpzb25QYXRoID0gcHJvZ3JhbS5hcmdzWzBdO1xuICAgIGpzb25QYXRoID0gcGF0aC5yZXNvbHZlKGpzb25QYXRoKTtcbiAgICBjb25zdCBqc29uQ29uZmlnID0gcmVxdWlyZShqc29uUGF0aCk7XG4gICAgaWYgKGpzb25Db25maWcuYXBwcykge1xuICAgICAgaWYgKGpzb25Db25maWcuYXBwcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRocm93ICdNdWx0aXBsZSBhcHBzIGFyZSBub3Qgc3VwcG9ydGVkJztcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMgPSBqc29uQ29uZmlnLmFwcHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnMgPSBqc29uQ29uZmlnO1xuICAgIH1cbiAgICBPYmplY3Qua2V5cyhvcHRpb25zKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IG9wdGlvbnNba2V5XTtcbiAgICAgIGlmICghX2RlZmluaXRpb25zW2tleV0pIHtcbiAgICAgICAgdGhyb3cgYGVycm9yOiB1bmtub3duIG9wdGlvbiAke2tleX1gO1xuICAgICAgfVxuICAgICAgY29uc3QgYWN0aW9uID0gX2RlZmluaXRpb25zW2tleV0uYWN0aW9uO1xuICAgICAgaWYgKGFjdGlvbikge1xuICAgICAgICBvcHRpb25zW2tleV0gPSBhY3Rpb24odmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKGBDb25maWd1cmF0aW9uIGxvYWRlZCBmcm9tICR7anNvblBhdGh9YCk7XG4gIH1cbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5cbkNvbW1hbmQucHJvdG90eXBlLnNldFZhbHVlc0lmTmVlZGVkID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChrZXkgPT4ge1xuICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMsIGtleSkpIHtcbiAgICAgIHRoaXNba2V5XSA9IG9wdGlvbnNba2V5XTtcbiAgICB9XG4gIH0pO1xufTtcblxuQ29tbWFuZC5wcm90b3R5cGUuX3BhcnNlID0gQ29tbWFuZC5wcm90b3R5cGUucGFyc2U7XG5cbkNvbW1hbmQucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGFyZ3MsIGVudikge1xuICB0aGlzLl9wYXJzZShhcmdzKTtcbiAgLy8gUGFyc2UgdGhlIGVudmlyb25tZW50IGZpcnN0XG4gIGNvbnN0IGVudk9wdGlvbnMgPSBwYXJzZUVudmlyb25tZW50KGVudik7XG4gIGNvbnN0IGZyb21GaWxlID0gcGFyc2VDb25maWdGaWxlKHRoaXMpO1xuICAvLyBMb2FkIHRoZSBlbnYgaWYgbm90IHBhc3NlZCBmcm9tIGNvbW1hbmQgbGluZVxuICB0aGlzLnNldFZhbHVlc0lmTmVlZGVkKGVudk9wdGlvbnMpO1xuICAvLyBMb2FkIGZyb20gZmlsZSB0byBvdmVycmlkZVxuICB0aGlzLnNldFZhbHVlc0lmTmVlZGVkKGZyb21GaWxlKTtcbiAgLy8gU2NhbiBmb3IgZGVwcmVjYXRlZCBQYXJzZSBTZXJ2ZXIgb3B0aW9uc1xuICBEZXByZWNhdG9yLnNjYW5QYXJzZVNlcnZlck9wdGlvbnModGhpcyk7XG4gIC8vIExhc3Qgc2V0IHRoZSBkZWZhdWx0c1xuICB0aGlzLnNldFZhbHVlc0lmTmVlZGVkKF9kZWZhdWx0cyk7XG59O1xuXG5Db21tYW5kLnByb3RvdHlwZS5nZXRPcHRpb25zID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gT2JqZWN0LmtleXMoX2RlZmluaXRpb25zKS5yZWR1Y2UoKG9wdGlvbnMsIGtleSkgPT4ge1xuICAgIGlmICh0eXBlb2YgdGhpc1trZXldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgb3B0aW9uc1trZXldID0gdGhpc1trZXldO1xuICAgIH1cbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfSwge30pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbmV3IENvbW1hbmQoKTtcbi8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqL1xuIl19