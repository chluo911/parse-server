"use strict";// Helper functions for accessing the instagram API.
function cov_1lx6ruioes(){var path="/parse-server/lib/Adapters/Auth/instagram.js";var hash="eb9a7e3d28a23754767f5879cbf00d3b12d62a18";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Adapters/Auth/instagram.js",statementMap:{"0":{start:{line:4,column:12},end:{line:4,column:39}},"1":{start:{line:6,column:21},end:{line:6,column:46}},"2":{start:{line:8,column:19},end:{line:8,column:49}},"3":{start:{line:11,column:17},end:{line:11,column:46}},"4":{start:{line:12,column:15},end:{line:12,column:76}},"5":{start:{line:13,column:2},end:{line:21,column:5}},"6":{start:{line:14,column:17},end:{line:14,column:57}},"7":{start:{line:16,column:4},end:{line:18,column:5}},"8":{start:{line:17,column:6},end:{line:17,column:13}},"9":{start:{line:20,column:4},end:{line:20,column:100}},"10":{start:{line:26,column:2},end:{line:26,column:27}},"11":{start:{line:29,column:0},end:{line:32,column:2}}},fnMap:{"0":{name:"validateAuthData",decl:{start:{line:10,column:9},end:{line:10,column:25}},loc:{start:{line:10,column:36},end:{line:22,column:1}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:37},end:{line:13,column:38}},loc:{start:{line:13,column:49},end:{line:21,column:3}},line:13},"2":{name:"validateAppId",decl:{start:{line:25,column:9},end:{line:25,column:22}},loc:{start:{line:25,column:25},end:{line:27,column:1}},line:25}},branchMap:{"0":{loc:{start:{line:11,column:17},end:{line:11,column:46}},type:"binary-expr",locations:[{start:{line:11,column:17},end:{line:11,column:32}},{start:{line:11,column:36},end:{line:11,column:46}}],line:11},"1":{loc:{start:{line:14,column:17},end:{line:14,column:57}},type:"cond-expr",locations:[{start:{line:14,column:33},end:{line:14,column:46}},{start:{line:14,column:49},end:{line:14,column:57}}],line:14},"2":{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:16,column:4},end:{line:18,column:5}}],line:16},"3":{loc:{start:{line:16,column:8},end:{line:16,column:38}},type:"binary-expr",locations:[{start:{line:16,column:8},end:{line:16,column:12}},{start:{line:16,column:16},end:{line:16,column:38}}],line:16}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},inputSourceMap:{version:3,sources:["../../../src/Adapters/Auth/instagram.js"],names:["Parse","require","httpsRequest","defaultURL","validateAuthData","authData","apiURL","path","access_token","get","then","response","user","data","id","Error","OBJECT_NOT_FOUND","validateAppId","Promise","resolve","module","exports"],mappings:";;AAAA;AACA,IAAIA,KAAK,GAAGC,OAAO,CAAC,YAAD,CAAP,CAAsBD,KAAlC;;AACA,MAAME,YAAY,GAAGD,OAAO,CAAC,gBAAD,CAA5B;;AACA,MAAME,UAAU,GAAG,8BAAnB,C,CAEA;;AACA,SAASC,gBAAT,CAA0BC,QAA1B,EAAoC;AAClC,QAAMC,MAAM,GAAGD,QAAQ,CAACC,MAAT,IAAmBH,UAAlC;AACA,QAAMI,IAAI,GAAI,GAAED,MAAO,6BAA4BD,QAAQ,CAACG,YAAa,EAAzE;AACA,SAAON,YAAY,CAACO,GAAb,CAAiBF,IAAjB,EAAuBG,IAAvB,CAA4BC,QAAQ,IAAI;AAC7C,UAAMC,IAAI,GAAGD,QAAQ,CAACE,IAAT,GAAgBF,QAAQ,CAACE,IAAzB,GAAgCF,QAA7C;;AACA,QAAIC,IAAI,IAAIA,IAAI,CAACE,EAAL,IAAWT,QAAQ,CAACS,EAAhC,EAAoC;AAClC;AACD;;AACD,UAAM,IAAId,KAAK,CAACe,KAAV,CAAgBf,KAAK,CAACe,KAAN,CAAYC,gBAA5B,EAA8C,0CAA9C,CAAN;AACD,GANM,CAAP;AAOD,C,CAED;;;AACA,SAASC,aAAT,GAAyB;AACvB,SAAOC,OAAO,CAACC,OAAR,EAAP;AACD;;AAEDC,MAAM,CAACC,OAAP,GAAiB;AACfJ,EAAAA,aADe;AAEfb,EAAAA;AAFe,CAAjB",sourcesContent:["// Helper functions for accessing the instagram API.\nvar Parse = require('parse/node').Parse;\nconst httpsRequest = require('./httpsRequest');\nconst defaultURL = 'https://graph.instagram.com/';\n\n// Returns a promise that fulfills if this user id is valid.\nfunction validateAuthData(authData) {\n  const apiURL = authData.apiURL || defaultURL;\n  const path = `${apiURL}me?fields=id&access_token=${authData.access_token}`;\n  return httpsRequest.get(path).then(response => {\n    const user = response.data ? response.data : response;\n    if (user && user.id == authData.id) {\n      return;\n    }\n    throw new Parse.Error(Parse.Error.OBJECT_NOT_FOUND, 'Instagram auth is invalid for this user.');\n  });\n}\n\n// Returns a promise that fulfills iff this app id is valid.\nfunction validateAppId() {\n  return Promise.resolve();\n}\n\nmodule.exports = {\n  validateAppId,\n  validateAuthData,\n};\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"eb9a7e3d28a23754767f5879cbf00d3b12d62a18"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1lx6ruioes=function(){return actualCoverage;};}return actualCoverage;}cov_1lx6ruioes();var Parse=(cov_1lx6ruioes().s[0]++,require('parse/node').Parse);const httpsRequest=(cov_1lx6ruioes().s[1]++,require('./httpsRequest'));const defaultURL=(cov_1lx6ruioes().s[2]++,'https://graph.instagram.com/');// Returns a promise that fulfills if this user id is valid.
function validateAuthData(authData){cov_1lx6ruioes().f[0]++;const apiURL=(cov_1lx6ruioes().s[3]++,(cov_1lx6ruioes().b[0][0]++,authData.apiURL)||(cov_1lx6ruioes().b[0][1]++,defaultURL));const path=(cov_1lx6ruioes().s[4]++,`${apiURL}me?fields=id&access_token=${authData.access_token}`);cov_1lx6ruioes().s[5]++;return httpsRequest.get(path).then(response=>{cov_1lx6ruioes().f[1]++;const user=(cov_1lx6ruioes().s[6]++,response.data?(cov_1lx6ruioes().b[1][0]++,response.data):(cov_1lx6ruioes().b[1][1]++,response));cov_1lx6ruioes().s[7]++;if((cov_1lx6ruioes().b[3][0]++,user)&&(cov_1lx6ruioes().b[3][1]++,user.id==authData.id)){cov_1lx6ruioes().b[2][0]++;cov_1lx6ruioes().s[8]++;return;}else{cov_1lx6ruioes().b[2][1]++;}cov_1lx6ruioes().s[9]++;throw new Parse.Error(Parse.Error.OBJECT_NOT_FOUND,'Instagram auth is invalid for this user.');});}// Returns a promise that fulfills iff this app id is valid.
function validateAppId(){cov_1lx6ruioes().f[2]++;cov_1lx6ruioes().s[10]++;return Promise.resolve();}cov_1lx6ruioes().s[11]++;module.exports={validateAppId,validateAuthData};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9BdXRoL2luc3RhZ3JhbS5qcyJdLCJuYW1lcyI6WyJQYXJzZSIsInJlcXVpcmUiLCJodHRwc1JlcXVlc3QiLCJkZWZhdWx0VVJMIiwidmFsaWRhdGVBdXRoRGF0YSIsImF1dGhEYXRhIiwiYXBpVVJMIiwicGF0aCIsImFjY2Vzc190b2tlbiIsImdldCIsInRoZW4iLCJyZXNwb25zZSIsInVzZXIiLCJkYXRhIiwiaWQiLCJFcnJvciIsIk9CSkVDVF9OT1RfRk9VTkQiLCJ2YWxpZGF0ZUFwcElkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0EsSUFBSUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsWUFBRCxDQUFQLENBQXNCRCxLQUFsQzs7QUFDQSxNQUFNRSxZQUFZLEdBQUdELE9BQU8sQ0FBQyxnQkFBRCxDQUE1Qjs7QUFDQSxNQUFNRSxVQUFVLEdBQUcsOEJBQW5CLEMsQ0FFQTs7QUFDQSxTQUFTQyxnQkFBVCxDQUEwQkMsUUFBMUIsRUFBb0M7QUFDbEMsUUFBTUMsTUFBTSxHQUFHRCxRQUFRLENBQUNDLE1BQVQsSUFBbUJILFVBQWxDO0FBQ0EsUUFBTUksSUFBSSxHQUFJLEdBQUVELE1BQU8sNkJBQTRCRCxRQUFRLENBQUNHLFlBQWEsRUFBekU7QUFDQSxTQUFPTixZQUFZLENBQUNPLEdBQWIsQ0FBaUJGLElBQWpCLEVBQXVCRyxJQUF2QixDQUE0QkMsUUFBUSxJQUFJO0FBQzdDLFVBQU1DLElBQUksR0FBR0QsUUFBUSxDQUFDRSxJQUFULEdBQWdCRixRQUFRLENBQUNFLElBQXpCLEdBQWdDRixRQUE3Qzs7QUFDQSxRQUFJQyxJQUFJLElBQUlBLElBQUksQ0FBQ0UsRUFBTCxJQUFXVCxRQUFRLENBQUNTLEVBQWhDLEVBQW9DO0FBQ2xDO0FBQ0Q7O0FBQ0QsVUFBTSxJQUFJZCxLQUFLLENBQUNlLEtBQVYsQ0FBZ0JmLEtBQUssQ0FBQ2UsS0FBTixDQUFZQyxnQkFBNUIsRUFBOEMsMENBQTlDLENBQU47QUFDRCxHQU5NLENBQVA7QUFPRCxDLENBRUQ7OztBQUNBLFNBQVNDLGFBQVQsR0FBeUI7QUFDdkIsU0FBT0MsT0FBTyxDQUFDQyxPQUFSLEVBQVA7QUFDRDs7QUFFREMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBQ2ZKLEVBQUFBLGFBRGU7QUFFZmIsRUFBQUE7QUFGZSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIGFjY2Vzc2luZyB0aGUgaW5zdGFncmFtIEFQSS5cbnZhciBQYXJzZSA9IHJlcXVpcmUoJ3BhcnNlL25vZGUnKS5QYXJzZTtcbmNvbnN0IGh0dHBzUmVxdWVzdCA9IHJlcXVpcmUoJy4vaHR0cHNSZXF1ZXN0Jyk7XG5jb25zdCBkZWZhdWx0VVJMID0gJ2h0dHBzOi8vZ3JhcGguaW5zdGFncmFtLmNvbS8nO1xuXG4vLyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIGlmIHRoaXMgdXNlciBpZCBpcyB2YWxpZC5cbmZ1bmN0aW9uIHZhbGlkYXRlQXV0aERhdGEoYXV0aERhdGEpIHtcbiAgY29uc3QgYXBpVVJMID0gYXV0aERhdGEuYXBpVVJMIHx8IGRlZmF1bHRVUkw7XG4gIGNvbnN0IHBhdGggPSBgJHthcGlVUkx9bWU/ZmllbGRzPWlkJmFjY2Vzc190b2tlbj0ke2F1dGhEYXRhLmFjY2Vzc190b2tlbn1gO1xuICByZXR1cm4gaHR0cHNSZXF1ZXN0LmdldChwYXRoKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICBjb25zdCB1c2VyID0gcmVzcG9uc2UuZGF0YSA/IHJlc3BvbnNlLmRhdGEgOiByZXNwb25zZTtcbiAgICBpZiAodXNlciAmJiB1c2VyLmlkID09IGF1dGhEYXRhLmlkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihQYXJzZS5FcnJvci5PQkpFQ1RfTk9UX0ZPVU5ELCAnSW5zdGFncmFtIGF1dGggaXMgaW52YWxpZCBmb3IgdGhpcyB1c2VyLicpO1xuICB9KTtcbn1cblxuLy8gUmV0dXJucyBhIHByb21pc2UgdGhhdCBmdWxmaWxscyBpZmYgdGhpcyBhcHAgaWQgaXMgdmFsaWQuXG5mdW5jdGlvbiB2YWxpZGF0ZUFwcElkKCkge1xuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICB2YWxpZGF0ZUFwcElkLFxuICB2YWxpZGF0ZUF1dGhEYXRhLFxufTtcbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9BdXRoL2luc3RhZ3JhbS5qcyJdLCJuYW1lcyI6WyJQYXJzZSIsInJlcXVpcmUiLCJodHRwc1JlcXVlc3QiLCJkZWZhdWx0VVJMIiwiYXBpVVJMIiwiYXV0aERhdGEiLCJwYXRoIiwiYWNjZXNzX3Rva2VuIiwicmVzcG9uc2UiLCJ1c2VyIiwiUHJvbWlzZSIsIm1vZHVsZSIsInZhbGlkYXRlQXV0aERhdGEiXSwibWFwcGluZ3MiOiJhQUFBO3loSkFXWTsyRkFWWixHQUFJQSxDQUFBQSxLQUFLLDBCQUFHQyxPQUFPLENBQVBBLFlBQU8sQ0FBUEEsQ0FBWixLQUFTLENBQVQsQ0FDQSxLQUFNQyxDQUFBQSxZQUFZLDBCQUFHRCxPQUFPLENBQTVCLGdCQUE0QixDQUFWLENBQWxCLENBQ0EsS0FBTUUsQ0FBQUEsVUFBVSwwQkFBaEIsOEJBQWdCLENBQWhCLENBRUE7QUFDQSxRQUFBLENBQUEsZ0JBQUEsQ0FBQSxRQUFBLENBQW9DLHlCQUNsQyxLQUFNQyxDQUFBQSxNQUFNLDBCQUFHQyw0QkFBQUEsUUFBUSxDQUFSQSxNQUFBQSwrQkFBZixVQUFlQSxDQUFILENBQVosQ0FDQSxLQUFNQyxDQUFBQSxJQUFJLDBCQUFJLEdBQUVGLE1BQU8sNkJBQTRCQyxRQUFRLENBQUNFLFlBQTVELEVBQVUsQ0FBVixDQUZrQyx3QkFHbEMsTUFBTyxDQUFBLFlBQVksQ0FBWixHQUFBLENBQUEsSUFBQSxFQUFBLElBQUEsQ0FBNEJDLFFBQVEsRUFBSSx5QkFDN0MsS0FBTUMsQ0FBQUEsSUFBSSwwQkFBR0QsUUFBUSxDQUFSQSxJQUFBQSw2QkFBZ0JBLFFBQVEsQ0FBeEJBLElBQUFBLDhCQUFiLFFBQWFBLENBQUgsQ0FBVixDQUQ2Qyx3QkFFN0MsR0FBSUMsNEJBQUFBLElBQUksK0JBQUlBLElBQUksQ0FBSkEsRUFBQUEsRUFBV0osUUFBUSxDQUEvQixFQUFRLENBQVIsQ0FBb0Msb0RBQ2xDLE9BQ0QsQ0FGRCxpQ0FGNkMsd0JBSzdDLEtBQU0sSUFBSUwsQ0FBQUEsS0FBSyxDQUFULEtBQUEsQ0FBZ0JBLEtBQUssQ0FBTEEsS0FBQUEsQ0FBaEIsZ0JBQUEsQ0FBTiwwQ0FBTSxDQUFOLENBTEYsQ0FBTyxDQUFQLEMsQ0FTRjtBQUNBLFFBQUEsQ0FBQSxhQUFBLEVBQXlCLGtEQUN2QixNQUFPVSxDQUFBQSxPQUFPLENBQWQsT0FBT0EsRUFBUCxDQUNELEMseUJBRURDLE1BQU0sQ0FBTkEsT0FBQUEsQ0FBaUIsQ0FBQSxhQUFBLENBRWZDLGdCQUZlLENBQWpCRCxDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgYWNjZXNzaW5nIHRoZSBpbnN0YWdyYW0gQVBJLlxudmFyIFBhcnNlID0gcmVxdWlyZSgncGFyc2Uvbm9kZScpLlBhcnNlO1xuY29uc3QgaHR0cHNSZXF1ZXN0ID0gcmVxdWlyZSgnLi9odHRwc1JlcXVlc3QnKTtcbmNvbnN0IGRlZmF1bHRVUkwgPSAnaHR0cHM6Ly9ncmFwaC5pbnN0YWdyYW0uY29tLyc7XG5cbi8vIFJldHVybnMgYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgaWYgdGhpcyB1c2VyIGlkIGlzIHZhbGlkLlxuZnVuY3Rpb24gdmFsaWRhdGVBdXRoRGF0YShhdXRoRGF0YSkge1xuICBjb25zdCBhcGlVUkwgPSBhdXRoRGF0YS5hcGlVUkwgfHwgZGVmYXVsdFVSTDtcbiAgY29uc3QgcGF0aCA9IGAke2FwaVVSTH1tZT9maWVsZHM9aWQmYWNjZXNzX3Rva2VuPSR7YXV0aERhdGEuYWNjZXNzX3Rva2VufWA7XG4gIHJldHVybiBodHRwc1JlcXVlc3QuZ2V0KHBhdGgpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSByZXNwb25zZS5kYXRhID8gcmVzcG9uc2UuZGF0YSA6IHJlc3BvbnNlO1xuICAgIGlmICh1c2VyICYmIHVzZXIuaWQgPT0gYXV0aERhdGEuaWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKFBhcnNlLkVycm9yLk9CSkVDVF9OT1RfRk9VTkQsICdJbnN0YWdyYW0gYXV0aCBpcyBpbnZhbGlkIGZvciB0aGlzIHVzZXIuJyk7XG4gIH0pO1xufVxuXG4vLyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIGlmZiB0aGlzIGFwcCBpZCBpcyB2YWxpZC5cbmZ1bmN0aW9uIHZhbGlkYXRlQXBwSWQoKSB7XG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHZhbGlkYXRlQXBwSWQsXG4gIHZhbGlkYXRlQXV0aERhdGEsXG59O1xuIl19