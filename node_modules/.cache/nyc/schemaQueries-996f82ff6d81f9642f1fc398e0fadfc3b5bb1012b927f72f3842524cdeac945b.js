"use strict";function cov_1opepiyv5v(){var path="/parse-server/lib/GraphQL/loaders/schemaQueries.js";var hash="4b9bd51ca8b76239da8ba08e0d8aada264813a31";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/GraphQL/loaders/schemaQueries.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:41}},"2":{start:{line:8,column:12},end:{line:8,column:57}},"3":{start:{line:10,column:16},end:{line:10,column:59}},"4":{start:{line:12,column:15},end:{line:12,column:33}},"5":{start:{line:14,column:20},end:{line:14,column:59}},"6":{start:{line:16,column:18},end:{line:16,column:67}},"7":{start:{line:18,column:25},end:{line:18,column:56}},"8":{start:{line:20,column:49},end:{line:20,column:96}},"9":{start:{line:20,column:84},end:{line:20,column:96}},"10":{start:{line:20,column:121},end:{line:20,column:134}},"11":{start:{line:20,column:159},end:{line:20,column:172}},"12":{start:{line:20,column:174},end:{line:20,column:309}},"13":{start:{line:20,column:234},end:{line:20,column:292}},"14":{start:{line:22,column:53},end:{line:22,column:111}},"15":{start:{line:22,column:98},end:{line:22,column:109}},"16":{start:{line:22,column:112},end:{line:22,column:214}},"17":{start:{line:22,column:188},end:{line:22,column:212}},"18":{start:{line:22,column:227},end:{line:22,column:264}},"19":{start:{line:22,column:266},end:{line:22,column:321}},"20":{start:{line:22,column:297},end:{line:22,column:319}},"21":{start:{line:22,column:335},end:{line:22,column:337}},"22":{start:{line:22,column:367},end:{line:22,column:423}},"23":{start:{line:22,column:425},end:{line:22,column:726}},"24":{start:{line:22,column:448},end:{line:22,column:724}},"25":{start:{line:22,column:534},end:{line:22,column:606}},"26":{start:{line:22,column:608},end:{line:22,column:722}},"27":{start:{line:22,column:646},end:{line:22,column:687}},"28":{start:{line:22,column:697},end:{line:22,column:720}},"29":{start:{line:22,column:727},end:{line:22,column:748}},"30":{start:{line:22,column:749},end:{line:22,column:787}},"31":{start:{line:22,column:762},end:{line:22,column:785}},"32":{start:{line:22,column:788},end:{line:22,column:802}},"33":{start:{line:24,column:39},end:{line:24,column:93}},"34":{start:{line:26,column:17},end:{line:36,column:1}},"35":{start:{line:27,column:2},end:{line:35,column:3}},"36":{start:{line:28,column:4},end:{line:28,column:49}},"37":{start:{line:30,column:4},end:{line:34,column:5}},"38":{start:{line:31,column:6},end:{line:31,column:109}},"39":{start:{line:33,column:6},end:{line:33,column:106}},"40":{start:{line:38,column:0},end:{line:38,column:28}},"41":{start:{line:40,column:13},end:{line:92,column:1}},"42":{start:{line:41,column:2},end:{line:69,column:17}},"43":{start:{line:48,column:6},end:{line:67,column:7}},"44":{start:{line:51,column:12},end:{line:51,column:40}},"45":{start:{line:55,column:12},end:{line:55,column:19}},"46":{start:{line:56,column:8},end:{line:56,column:61}},"47":{start:{line:57,column:23},end:{line:59,column:10}},"48":{start:{line:60,column:27},end:{line:60,column:55}},"49":{start:{line:61,column:8},end:{line:64,column:10}},"50":{start:{line:66,column:8},end:{line:66,column:42}},"51":{start:{line:70,column:2},end:{line:91,column:17}},"52":{start:{line:74,column:6},end:{line:89,column:7}},"53":{start:{line:78,column:12},end:{line:78,column:19}},"54":{start:{line:79,column:8},end:{line:79,column:61}},"55":{start:{line:80,column:23},end:{line:82,column:10}},"56":{start:{line:83,column:8},end:{line:86,column:12}},"57":{start:{line:83,column:69},end:{line:86,column:9}},"58":{start:{line:88,column:8},end:{line:88,column:42}},"59":{start:{line:94,column:0},end:{line:94,column:20}}},fnMap:{"0":{name:"_getRequireWildcardCache",decl:{start:{line:20,column:9},end:{line:20,column:33}},loc:{start:{line:20,column:47},end:{line:20,column:311}},line:20},"1":{name:"(anonymous_1)",decl:{start:{line:20,column:209},end:{line:20,column:210}},loc:{start:{line:20,column:232},end:{line:20,column:294}},line:20},"2":{name:"_interopRequireWildcard",decl:{start:{line:22,column:9},end:{line:22,column:32}},loc:{start:{line:22,column:51},end:{line:22,column:804}},line:22},"3":{name:"_interopRequireDefault",decl:{start:{line:24,column:9},end:{line:24,column:31}},loc:{start:{line:24,column:37},end:{line:24,column:95}},line:24},"4":{name:"(anonymous_4)",decl:{start:{line:26,column:17},end:{line:26,column:18}},loc:{start:{line:26,column:41},end:{line:36,column:1}},line:26},"5":{name:"(anonymous_5)",decl:{start:{line:40,column:13},end:{line:40,column:14}},loc:{start:{line:40,column:35},end:{line:92,column:1}},line:40},"6":{name:"(anonymous_6)",decl:{start:{line:47,column:13},end:{line:47,column:14}},loc:{start:{line:47,column:47},end:{line:68,column:5}},line:47},"7":{name:"(anonymous_7)",decl:{start:{line:73,column:13},end:{line:73,column:14}},loc:{start:{line:73,column:48},end:{line:90,column:5}},line:73},"8":{name:"(anonymous_8)",decl:{start:{line:83,column:54},end:{line:83,column:55}},loc:{start:{line:83,column:69},end:{line:86,column:9}},line:83}},branchMap:{"0":{loc:{start:{line:20,column:49},end:{line:20,column:96}},type:"if",locations:[{start:{line:20,column:49},end:{line:20,column:96}},{start:{line:20,column:49},end:{line:20,column:96}}],line:20},"1":{loc:{start:{line:20,column:241},end:{line:20,column:291}},type:"cond-expr",locations:[{start:{line:20,column:255},end:{line:20,column:271}},{start:{line:20,column:274},end:{line:20,column:291}}],line:20},"2":{loc:{start:{line:22,column:53},end:{line:22,column:111}},type:"if",locations:[{start:{line:22,column:53},end:{line:22,column:111}},{start:{line:22,column:53},end:{line:22,column:111}}],line:22},"3":{loc:{start:{line:22,column:57},end:{line:22,column:94}},type:"binary-expr",locations:[{start:{line:22,column:57},end:{line:22,column:69}},{start:{line:22,column:73},end:{line:22,column:76}},{start:{line:22,column:80},end:{line:22,column:94}}],line:22},"4":{loc:{start:{line:22,column:112},end:{line:22,column:214}},type:"if",locations:[{start:{line:22,column:112},end:{line:22,column:214}},{start:{line:22,column:112},end:{line:22,column:214}}],line:22},"5":{loc:{start:{line:22,column:116},end:{line:22,column:184}},type:"binary-expr",locations:[{start:{line:22,column:116},end:{line:22,column:128}},{start:{line:22,column:132},end:{line:22,column:155}},{start:{line:22,column:159},end:{line:22,column:184}}],line:22},"6":{loc:{start:{line:22,column:266},end:{line:22,column:321}},type:"if",locations:[{start:{line:22,column:266},end:{line:22,column:321}},{start:{line:22,column:266},end:{line:22,column:321}}],line:22},"7":{loc:{start:{line:22,column:270},end:{line:22,column:293}},type:"binary-expr",locations:[{start:{line:22,column:270},end:{line:22,column:275}},{start:{line:22,column:279},end:{line:22,column:293}}],line:22},"8":{loc:{start:{line:22,column:367},end:{line:22,column:423}},type:"binary-expr",locations:[{start:{line:22,column:367},end:{line:22,column:388}},{start:{line:22,column:392},end:{line:22,column:423}}],line:22},"9":{loc:{start:{line:22,column:448},end:{line:22,column:724}},type:"if",locations:[{start:{line:22,column:448},end:{line:22,column:724}},{start:{line:22,column:448},end:{line:22,column:724}}],line:22},"10":{loc:{start:{line:22,column:452},end:{line:22,column:519}},type:"binary-expr",locations:[{start:{line:22,column:452},end:{line:22,column:469}},{start:{line:22,column:473},end:{line:22,column:519}}],line:22},"11":{loc:{start:{line:22,column:534},end:{line:22,column:606}},type:"cond-expr",locations:[{start:{line:22,column:558},end:{line:22,column:599}},{start:{line:22,column:602},end:{line:22,column:606}}],line:22},"12":{loc:{start:{line:22,column:608},end:{line:22,column:722}},type:"if",locations:[{start:{line:22,column:608},end:{line:22,column:722}},{start:{line:22,column:608},end:{line:22,column:722}}],line:22},"13":{loc:{start:{line:22,column:612},end:{line:22,column:642}},type:"binary-expr",locations:[{start:{line:22,column:612},end:{line:22,column:616}},{start:{line:22,column:621},end:{line:22,column:629}},{start:{line:22,column:633},end:{line:22,column:641}}],line:22},"14":{loc:{start:{line:22,column:749},end:{line:22,column:787}},type:"if",locations:[{start:{line:22,column:749},end:{line:22,column:787}},{start:{line:22,column:749},end:{line:22,column:787}}],line:22},"15":{loc:{start:{line:24,column:46},end:{line:24,column:92}},type:"cond-expr",locations:[{start:{line:24,column:70},end:{line:24,column:73}},{start:{line:24,column:76},end:{line:24,column:92}}],line:24},"16":{loc:{start:{line:24,column:46},end:{line:24,column:67}},type:"binary-expr",locations:[{start:{line:24,column:46},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:67}}],line:24},"17":{loc:{start:{line:30,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:34,column:5}},{start:{line:30,column:4},end:{line:34,column:5}}],line:30}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},inputSourceMap:{version:3,sources:["../../../src/GraphQL/loaders/schemaQueries.js"],names:["getClass","name","schema","getOneSchema","e","undefined","Parse","Error","INVALID_CLASS_NAME","INTERNAL_SERVER_ERROR","load","parseGraphQLSchema","addGraphQLQuery","description","args","schemaTypes","CLASS_NAME_ATT","type","GraphQLNonNull","CLASS","resolve","_source","context","config","auth","database","loadSchema","clearCache","parseClass","className","schemaFields","fields","handleError","GraphQLList","_args","getAllClasses","map"],mappings:"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",sourcesContent:["import Parse from 'parse/node';\nimport deepcopy from 'deepcopy';\nimport { GraphQLNonNull, GraphQLList } from 'graphql';\nimport { transformToGraphQL } from '../transformers/schemaFields';\nimport * as schemaTypes from './schemaTypes';\nimport { enforceMasterKeyAccess } from '../parseGraphQLUtils';\n\nconst getClass = async (name, schema) => {\n  try {\n    return await schema.getOneSchema(name, true);\n  } catch (e) {\n    if (e === undefined) {\n      throw new Parse.Error(Parse.Error.INVALID_CLASS_NAME, `Class ${name} does not exist.`);\n    } else {\n      throw new Parse.Error(Parse.Error.INTERNAL_SERVER_ERROR, 'Database adapter error.');\n    }\n  }\n};\n\nconst load = parseGraphQLSchema => {\n  parseGraphQLSchema.addGraphQLQuery(\n    'class',\n    {\n      description: 'The class query can be used to retrieve an existing object class.',\n      args: {\n        name: schemaTypes.CLASS_NAME_ATT,\n      },\n      type: new GraphQLNonNull(schemaTypes.CLASS),\n      resolve: async (_source, args, context) => {\n        try {\n          const { name } = deepcopy(args);\n          const { config, auth } = context;\n\n          enforceMasterKeyAccess(auth);\n\n          const schema = await config.database.loadSchema({ clearCache: true });\n          const parseClass = await getClass(name, schema);\n          return {\n            name: parseClass.className,\n            schemaFields: transformToGraphQL(parseClass.fields),\n          };\n        } catch (e) {\n          parseGraphQLSchema.handleError(e);\n        }\n      },\n    },\n    true,\n    true\n  );\n\n  parseGraphQLSchema.addGraphQLQuery(\n    'classes',\n    {\n      description: 'The classes query can be used to retrieve the existing object classes.',\n      type: new GraphQLNonNull(new GraphQLList(new GraphQLNonNull(schemaTypes.CLASS))),\n      resolve: async (_source, _args, context) => {\n        try {\n          const { config, auth } = context;\n\n          enforceMasterKeyAccess(auth);\n\n          const schema = await config.database.loadSchema({ clearCache: true });\n          return (await schema.getAllClasses(true)).map(parseClass => ({\n            name: parseClass.className,\n            schemaFields: transformToGraphQL(parseClass.fields),\n          }));\n        } catch (e) {\n          parseGraphQLSchema.handleError(e);\n        }\n      },\n    },\n    true,\n    true\n  );\n};\n\nexport { getClass, load };\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4b9bd51ca8b76239da8ba08e0d8aada264813a31"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1opepiyv5v=function(){return actualCoverage;};}return actualCoverage;}cov_1opepiyv5v();cov_1opepiyv5v().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1opepiyv5v().s[1]++;exports.load=exports.getClass=void 0;var _node=(cov_1opepiyv5v().s[2]++,_interopRequireDefault(require("parse/node")));var _deepcopy=(cov_1opepiyv5v().s[3]++,_interopRequireDefault(require("deepcopy")));var _graphql=(cov_1opepiyv5v().s[4]++,require("graphql"));var _schemaFields=(cov_1opepiyv5v().s[5]++,require("../transformers/schemaFields"));var schemaTypes=(cov_1opepiyv5v().s[6]++,_interopRequireWildcard(require("./schemaTypes")));var _parseGraphQLUtils=(cov_1opepiyv5v().s[7]++,require("../parseGraphQLUtils"));function _getRequireWildcardCache(nodeInterop){cov_1opepiyv5v().f[0]++;cov_1opepiyv5v().s[8]++;if(typeof WeakMap!=="function"){cov_1opepiyv5v().b[0][0]++;cov_1opepiyv5v().s[9]++;return null;}else{cov_1opepiyv5v().b[0][1]++;}var cacheBabelInterop=(cov_1opepiyv5v().s[10]++,new WeakMap());var cacheNodeInterop=(cov_1opepiyv5v().s[11]++,new WeakMap());cov_1opepiyv5v().s[12]++;return(_getRequireWildcardCache=function(nodeInterop){cov_1opepiyv5v().f[1]++;cov_1opepiyv5v().s[13]++;return nodeInterop?(cov_1opepiyv5v().b[1][0]++,cacheNodeInterop):(cov_1opepiyv5v().b[1][1]++,cacheBabelInterop);})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){cov_1opepiyv5v().f[2]++;cov_1opepiyv5v().s[14]++;if((cov_1opepiyv5v().b[3][0]++,!nodeInterop)&&(cov_1opepiyv5v().b[3][1]++,obj)&&(cov_1opepiyv5v().b[3][2]++,obj.__esModule)){cov_1opepiyv5v().b[2][0]++;cov_1opepiyv5v().s[15]++;return obj;}else{cov_1opepiyv5v().b[2][1]++;}cov_1opepiyv5v().s[16]++;if((cov_1opepiyv5v().b[5][0]++,obj===null)||(cov_1opepiyv5v().b[5][1]++,typeof obj!=="object")&&(cov_1opepiyv5v().b[5][2]++,typeof obj!=="function")){cov_1opepiyv5v().b[4][0]++;cov_1opepiyv5v().s[17]++;return{default:obj};}else{cov_1opepiyv5v().b[4][1]++;}var cache=(cov_1opepiyv5v().s[18]++,_getRequireWildcardCache(nodeInterop));cov_1opepiyv5v().s[19]++;if((cov_1opepiyv5v().b[7][0]++,cache)&&(cov_1opepiyv5v().b[7][1]++,cache.has(obj))){cov_1opepiyv5v().b[6][0]++;cov_1opepiyv5v().s[20]++;return cache.get(obj);}else{cov_1opepiyv5v().b[6][1]++;}var newObj=(cov_1opepiyv5v().s[21]++,{});var hasPropertyDescriptor=(cov_1opepiyv5v().s[22]++,(cov_1opepiyv5v().b[8][0]++,Object.defineProperty)&&(cov_1opepiyv5v().b[8][1]++,Object.getOwnPropertyDescriptor));cov_1opepiyv5v().s[23]++;for(var key in obj){cov_1opepiyv5v().s[24]++;if((cov_1opepiyv5v().b[10][0]++,key!=="default")&&(cov_1opepiyv5v().b[10][1]++,Object.prototype.hasOwnProperty.call(obj,key))){cov_1opepiyv5v().b[9][0]++;var desc=(cov_1opepiyv5v().s[25]++,hasPropertyDescriptor?(cov_1opepiyv5v().b[11][0]++,Object.getOwnPropertyDescriptor(obj,key)):(cov_1opepiyv5v().b[11][1]++,null));cov_1opepiyv5v().s[26]++;if((cov_1opepiyv5v().b[13][0]++,desc)&&((cov_1opepiyv5v().b[13][1]++,desc.get)||(cov_1opepiyv5v().b[13][2]++,desc.set))){cov_1opepiyv5v().b[12][0]++;cov_1opepiyv5v().s[27]++;Object.defineProperty(newObj,key,desc);}else{cov_1opepiyv5v().b[12][1]++;cov_1opepiyv5v().s[28]++;newObj[key]=obj[key];}}else{cov_1opepiyv5v().b[9][1]++;}}cov_1opepiyv5v().s[29]++;newObj.default=obj;cov_1opepiyv5v().s[30]++;if(cache){cov_1opepiyv5v().b[14][0]++;cov_1opepiyv5v().s[31]++;cache.set(obj,newObj);}else{cov_1opepiyv5v().b[14][1]++;}cov_1opepiyv5v().s[32]++;return newObj;}function _interopRequireDefault(obj){cov_1opepiyv5v().f[3]++;cov_1opepiyv5v().s[33]++;return(cov_1opepiyv5v().b[16][0]++,obj)&&(cov_1opepiyv5v().b[16][1]++,obj.__esModule)?(cov_1opepiyv5v().b[15][0]++,obj):(cov_1opepiyv5v().b[15][1]++,{default:obj});}cov_1opepiyv5v().s[34]++;const getClass=async(name,schema)=>{cov_1opepiyv5v().f[4]++;cov_1opepiyv5v().s[35]++;try{cov_1opepiyv5v().s[36]++;return await schema.getOneSchema(name,true);}catch(e){cov_1opepiyv5v().s[37]++;if(e===undefined){cov_1opepiyv5v().b[17][0]++;cov_1opepiyv5v().s[38]++;throw new _node.default.Error(_node.default.Error.INVALID_CLASS_NAME,`Class ${name} does not exist.`);}else{cov_1opepiyv5v().b[17][1]++;cov_1opepiyv5v().s[39]++;throw new _node.default.Error(_node.default.Error.INTERNAL_SERVER_ERROR,'Database adapter error.');}}};cov_1opepiyv5v().s[40]++;exports.getClass=getClass;cov_1opepiyv5v().s[41]++;const load=parseGraphQLSchema=>{cov_1opepiyv5v().f[5]++;cov_1opepiyv5v().s[42]++;parseGraphQLSchema.addGraphQLQuery('class',{description:'The class query can be used to retrieve an existing object class.',args:{name:schemaTypes.CLASS_NAME_ATT},type:new _graphql.GraphQLNonNull(schemaTypes.CLASS),resolve:async(_source,args,context)=>{cov_1opepiyv5v().f[6]++;cov_1opepiyv5v().s[43]++;try{const{name}=(cov_1opepiyv5v().s[44]++,(0,_deepcopy.default)(args));const{config,auth}=(cov_1opepiyv5v().s[45]++,context);cov_1opepiyv5v().s[46]++;(0,_parseGraphQLUtils.enforceMasterKeyAccess)(auth);const schema=(cov_1opepiyv5v().s[47]++,await config.database.loadSchema({clearCache:true}));const parseClass=(cov_1opepiyv5v().s[48]++,await getClass(name,schema));cov_1opepiyv5v().s[49]++;return{name:parseClass.className,schemaFields:(0,_schemaFields.transformToGraphQL)(parseClass.fields)};}catch(e){cov_1opepiyv5v().s[50]++;parseGraphQLSchema.handleError(e);}}},true,true);cov_1opepiyv5v().s[51]++;parseGraphQLSchema.addGraphQLQuery('classes',{description:'The classes query can be used to retrieve the existing object classes.',type:new _graphql.GraphQLNonNull(new _graphql.GraphQLList(new _graphql.GraphQLNonNull(schemaTypes.CLASS))),resolve:async(_source,_args,context)=>{cov_1opepiyv5v().f[7]++;cov_1opepiyv5v().s[52]++;try{const{config,auth}=(cov_1opepiyv5v().s[53]++,context);cov_1opepiyv5v().s[54]++;(0,_parseGraphQLUtils.enforceMasterKeyAccess)(auth);const schema=(cov_1opepiyv5v().s[55]++,await config.database.loadSchema({clearCache:true}));cov_1opepiyv5v().s[56]++;return(await schema.getAllClasses(true)).map(parseClass=>{cov_1opepiyv5v().f[8]++;cov_1opepiyv5v().s[57]++;return{name:parseClass.className,schemaFields:(0,_schemaFields.transformToGraphQL)(parseClass.fields)};});}catch(e){cov_1opepiyv5v().s[58]++;parseGraphQLSchema.handleError(e);}}},true,true);};cov_1opepiyv5v().s[59]++;exports.load=load;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9HcmFwaFFML2xvYWRlcnMvc2NoZW1hUXVlcmllcy5qcyJdLCJuYW1lcyI6WyJnZXRDbGFzcyIsIm5hbWUiLCJzY2hlbWEiLCJnZXRPbmVTY2hlbWEiLCJlIiwidW5kZWZpbmVkIiwiUGFyc2UiLCJFcnJvciIsIklOVkFMSURfQ0xBU1NfTkFNRSIsIklOVEVSTkFMX1NFUlZFUl9FUlJPUiIsImxvYWQiLCJwYXJzZUdyYXBoUUxTY2hlbWEiLCJhZGRHcmFwaFFMUXVlcnkiLCJkZXNjcmlwdGlvbiIsImFyZ3MiLCJzY2hlbWFUeXBlcyIsIkNMQVNTX05BTUVfQVRUIiwidHlwZSIsIkdyYXBoUUxOb25OdWxsIiwiQ0xBU1MiLCJyZXNvbHZlIiwiX3NvdXJjZSIsImNvbnRleHQiLCJjb25maWciLCJhdXRoIiwiZGF0YWJhc2UiLCJsb2FkU2NoZW1hIiwiY2xlYXJDYWNoZSIsInBhcnNlQ2xhc3MiLCJjbGFzc05hbWUiLCJzY2hlbWFGaWVsZHMiLCJmaWVsZHMiLCJoYW5kbGVFcnJvciIsIkdyYXBoUUxMaXN0IiwiX2FyZ3MiLCJnZXRBbGxDbGFzc2VzIiwibWFwIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7O0FBRUEsTUFBTUEsUUFBUSxHQUFHLE9BQU9DLElBQVAsRUFBYUMsTUFBYixLQUF3QjtBQUN2QyxNQUFJO0FBQ0YsV0FBTyxNQUFNQSxNQUFNLENBQUNDLFlBQVAsQ0FBb0JGLElBQXBCLEVBQTBCLElBQTFCLENBQWI7QUFDRCxHQUZELENBRUUsT0FBT0csQ0FBUCxFQUFVO0FBQ1YsUUFBSUEsQ0FBQyxLQUFLQyxTQUFWLEVBQXFCO0FBQ25CLFlBQU0sSUFBSUMsY0FBTUMsS0FBVixDQUFnQkQsY0FBTUMsS0FBTixDQUFZQyxrQkFBNUIsRUFBaUQsU0FBUVAsSUFBSyxrQkFBOUQsQ0FBTjtBQUNELEtBRkQsTUFFTztBQUNMLFlBQU0sSUFBSUssY0FBTUMsS0FBVixDQUFnQkQsY0FBTUMsS0FBTixDQUFZRSxxQkFBNUIsRUFBbUQseUJBQW5ELENBQU47QUFDRDtBQUNGO0FBQ0YsQ0FWRDs7OztBQVlBLE1BQU1DLElBQUksR0FBR0Msa0JBQWtCLElBQUk7QUFDakNBLEVBQUFBLGtCQUFrQixDQUFDQyxlQUFuQixDQUNFLE9BREYsRUFFRTtBQUNFQyxJQUFBQSxXQUFXLEVBQUUsbUVBRGY7QUFFRUMsSUFBQUEsSUFBSSxFQUFFO0FBQ0piLE1BQUFBLElBQUksRUFBRWMsV0FBVyxDQUFDQztBQURkLEtBRlI7QUFLRUMsSUFBQUEsSUFBSSxFQUFFLElBQUlDLHVCQUFKLENBQW1CSCxXQUFXLENBQUNJLEtBQS9CLENBTFI7QUFNRUMsSUFBQUEsT0FBTyxFQUFFLE9BQU9DLE9BQVAsRUFBZ0JQLElBQWhCLEVBQXNCUSxPQUF0QixLQUFrQztBQUN6QyxVQUFJO0FBQ0YsY0FBTTtBQUFFckIsVUFBQUE7QUFBRixZQUFXLHVCQUFTYSxJQUFULENBQWpCO0FBQ0EsY0FBTTtBQUFFUyxVQUFBQSxNQUFGO0FBQVVDLFVBQUFBO0FBQVYsWUFBbUJGLE9BQXpCO0FBRUEsdURBQXVCRSxJQUF2QjtBQUVBLGNBQU10QixNQUFNLEdBQUcsTUFBTXFCLE1BQU0sQ0FBQ0UsUUFBUCxDQUFnQkMsVUFBaEIsQ0FBMkI7QUFBRUMsVUFBQUEsVUFBVSxFQUFFO0FBQWQsU0FBM0IsQ0FBckI7QUFDQSxjQUFNQyxVQUFVLEdBQUcsTUFBTTVCLFFBQVEsQ0FBQ0MsSUFBRCxFQUFPQyxNQUFQLENBQWpDO0FBQ0EsZUFBTztBQUNMRCxVQUFBQSxJQUFJLEVBQUUyQixVQUFVLENBQUNDLFNBRFo7QUFFTEMsVUFBQUEsWUFBWSxFQUFFLHNDQUFtQkYsVUFBVSxDQUFDRyxNQUE5QjtBQUZULFNBQVA7QUFJRCxPQVpELENBWUUsT0FBTzNCLENBQVAsRUFBVTtBQUNWTyxRQUFBQSxrQkFBa0IsQ0FBQ3FCLFdBQW5CLENBQStCNUIsQ0FBL0I7QUFDRDtBQUNGO0FBdEJILEdBRkYsRUEwQkUsSUExQkYsRUEyQkUsSUEzQkY7QUE4QkFPLEVBQUFBLGtCQUFrQixDQUFDQyxlQUFuQixDQUNFLFNBREYsRUFFRTtBQUNFQyxJQUFBQSxXQUFXLEVBQUUsd0VBRGY7QUFFRUksSUFBQUEsSUFBSSxFQUFFLElBQUlDLHVCQUFKLENBQW1CLElBQUllLG9CQUFKLENBQWdCLElBQUlmLHVCQUFKLENBQW1CSCxXQUFXLENBQUNJLEtBQS9CLENBQWhCLENBQW5CLENBRlI7QUFHRUMsSUFBQUEsT0FBTyxFQUFFLE9BQU9DLE9BQVAsRUFBZ0JhLEtBQWhCLEVBQXVCWixPQUF2QixLQUFtQztBQUMxQyxVQUFJO0FBQ0YsY0FBTTtBQUFFQyxVQUFBQSxNQUFGO0FBQVVDLFVBQUFBO0FBQVYsWUFBbUJGLE9BQXpCO0FBRUEsdURBQXVCRSxJQUF2QjtBQUVBLGNBQU10QixNQUFNLEdBQUcsTUFBTXFCLE1BQU0sQ0FBQ0UsUUFBUCxDQUFnQkMsVUFBaEIsQ0FBMkI7QUFBRUMsVUFBQUEsVUFBVSxFQUFFO0FBQWQsU0FBM0IsQ0FBckI7QUFDQSxlQUFPLENBQUMsTUFBTXpCLE1BQU0sQ0FBQ2lDLGFBQVAsQ0FBcUIsSUFBckIsQ0FBUCxFQUFtQ0MsR0FBbkMsQ0FBdUNSLFVBQVUsS0FBSztBQUMzRDNCLFVBQUFBLElBQUksRUFBRTJCLFVBQVUsQ0FBQ0MsU0FEMEM7QUFFM0RDLFVBQUFBLFlBQVksRUFBRSxzQ0FBbUJGLFVBQVUsQ0FBQ0csTUFBOUI7QUFGNkMsU0FBTCxDQUFqRCxDQUFQO0FBSUQsT0FWRCxDQVVFLE9BQU8zQixDQUFQLEVBQVU7QUFDVk8sUUFBQUEsa0JBQWtCLENBQUNxQixXQUFuQixDQUErQjVCLENBQS9CO0FBQ0Q7QUFDRjtBQWpCSCxHQUZGLEVBcUJFLElBckJGLEVBc0JFLElBdEJGO0FBd0JELENBdkREIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBhcnNlIGZyb20gJ3BhcnNlL25vZGUnO1xuaW1wb3J0IGRlZXBjb3B5IGZyb20gJ2RlZXBjb3B5JztcbmltcG9ydCB7IEdyYXBoUUxOb25OdWxsLCBHcmFwaFFMTGlzdCB9IGZyb20gJ2dyYXBocWwnO1xuaW1wb3J0IHsgdHJhbnNmb3JtVG9HcmFwaFFMIH0gZnJvbSAnLi4vdHJhbnNmb3JtZXJzL3NjaGVtYUZpZWxkcyc7XG5pbXBvcnQgKiBhcyBzY2hlbWFUeXBlcyBmcm9tICcuL3NjaGVtYVR5cGVzJztcbmltcG9ydCB7IGVuZm9yY2VNYXN0ZXJLZXlBY2Nlc3MgfSBmcm9tICcuLi9wYXJzZUdyYXBoUUxVdGlscyc7XG5cbmNvbnN0IGdldENsYXNzID0gYXN5bmMgKG5hbWUsIHNjaGVtYSkgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBzY2hlbWEuZ2V0T25lU2NoZW1hKG5hbWUsIHRydWUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKFBhcnNlLkVycm9yLklOVkFMSURfQ0xBU1NfTkFNRSwgYENsYXNzICR7bmFtZX0gZG9lcyBub3QgZXhpc3QuYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihQYXJzZS5FcnJvci5JTlRFUk5BTF9TRVJWRVJfRVJST1IsICdEYXRhYmFzZSBhZGFwdGVyIGVycm9yLicpO1xuICAgIH1cbiAgfVxufTtcblxuY29uc3QgbG9hZCA9IHBhcnNlR3JhcGhRTFNjaGVtYSA9PiB7XG4gIHBhcnNlR3JhcGhRTFNjaGVtYS5hZGRHcmFwaFFMUXVlcnkoXG4gICAgJ2NsYXNzJyxcbiAgICB7XG4gICAgICBkZXNjcmlwdGlvbjogJ1RoZSBjbGFzcyBxdWVyeSBjYW4gYmUgdXNlZCB0byByZXRyaWV2ZSBhbiBleGlzdGluZyBvYmplY3QgY2xhc3MuJyxcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgbmFtZTogc2NoZW1hVHlwZXMuQ0xBU1NfTkFNRV9BVFQsXG4gICAgICB9LFxuICAgICAgdHlwZTogbmV3IEdyYXBoUUxOb25OdWxsKHNjaGVtYVR5cGVzLkNMQVNTKSxcbiAgICAgIHJlc29sdmU6IGFzeW5jIChfc291cmNlLCBhcmdzLCBjb250ZXh0KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgeyBuYW1lIH0gPSBkZWVwY29weShhcmdzKTtcbiAgICAgICAgICBjb25zdCB7IGNvbmZpZywgYXV0aCB9ID0gY29udGV4dDtcblxuICAgICAgICAgIGVuZm9yY2VNYXN0ZXJLZXlBY2Nlc3MoYXV0aCk7XG5cbiAgICAgICAgICBjb25zdCBzY2hlbWEgPSBhd2FpdCBjb25maWcuZGF0YWJhc2UubG9hZFNjaGVtYSh7IGNsZWFyQ2FjaGU6IHRydWUgfSk7XG4gICAgICAgICAgY29uc3QgcGFyc2VDbGFzcyA9IGF3YWl0IGdldENsYXNzKG5hbWUsIHNjaGVtYSk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHBhcnNlQ2xhc3MuY2xhc3NOYW1lLFxuICAgICAgICAgICAgc2NoZW1hRmllbGRzOiB0cmFuc2Zvcm1Ub0dyYXBoUUwocGFyc2VDbGFzcy5maWVsZHMpLFxuICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBwYXJzZUdyYXBoUUxTY2hlbWEuaGFuZGxlRXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSxcbiAgICB0cnVlLFxuICAgIHRydWVcbiAgKTtcblxuICBwYXJzZUdyYXBoUUxTY2hlbWEuYWRkR3JhcGhRTFF1ZXJ5KFxuICAgICdjbGFzc2VzJyxcbiAgICB7XG4gICAgICBkZXNjcmlwdGlvbjogJ1RoZSBjbGFzc2VzIHF1ZXJ5IGNhbiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBleGlzdGluZyBvYmplY3QgY2xhc3Nlcy4nLFxuICAgICAgdHlwZTogbmV3IEdyYXBoUUxOb25OdWxsKG5ldyBHcmFwaFFMTGlzdChuZXcgR3JhcGhRTE5vbk51bGwoc2NoZW1hVHlwZXMuQ0xBU1MpKSksXG4gICAgICByZXNvbHZlOiBhc3luYyAoX3NvdXJjZSwgX2FyZ3MsIGNvbnRleHQpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB7IGNvbmZpZywgYXV0aCB9ID0gY29udGV4dDtcblxuICAgICAgICAgIGVuZm9yY2VNYXN0ZXJLZXlBY2Nlc3MoYXV0aCk7XG5cbiAgICAgICAgICBjb25zdCBzY2hlbWEgPSBhd2FpdCBjb25maWcuZGF0YWJhc2UubG9hZFNjaGVtYSh7IGNsZWFyQ2FjaGU6IHRydWUgfSk7XG4gICAgICAgICAgcmV0dXJuIChhd2FpdCBzY2hlbWEuZ2V0QWxsQ2xhc3Nlcyh0cnVlKSkubWFwKHBhcnNlQ2xhc3MgPT4gKHtcbiAgICAgICAgICAgIG5hbWU6IHBhcnNlQ2xhc3MuY2xhc3NOYW1lLFxuICAgICAgICAgICAgc2NoZW1hRmllbGRzOiB0cmFuc2Zvcm1Ub0dyYXBoUUwocGFyc2VDbGFzcy5maWVsZHMpLFxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHBhcnNlR3JhcGhRTFNjaGVtYS5oYW5kbGVFcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9LFxuICAgIHRydWUsXG4gICAgdHJ1ZVxuICApO1xufTtcblxuZXhwb3J0IHsgZ2V0Q2xhc3MsIGxvYWQgfTtcbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9HcmFwaFFML2xvYWRlcnMvc2NoZW1hUXVlcmllcy5qcyJdLCJuYW1lcyI6WyJnZXRDbGFzcyIsInNjaGVtYSIsImUiLCJQYXJzZSIsIm5hbWUiLCJsb2FkIiwicGFyc2VHcmFwaFFMU2NoZW1hIiwiZGVzY3JpcHRpb24iLCJhcmdzIiwic2NoZW1hVHlwZXMiLCJDTEFTU19OQU1FX0FUVCIsInR5cGUiLCJHcmFwaFFMTm9uTnVsbCIsInJlc29sdmUiLCJhdXRoIiwiY2xlYXJDYWNoZSIsInBhcnNlQ2xhc3MiLCJzY2hlbWFGaWVsZHMiLCJHcmFwaFFMTGlzdCJdLCJtYXBwaW5ncyI6InNsZEFJQTt5T0FKQSxHQUFBLENBQUEsS0FBQSwwQkFBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxZQUFBLENBQUEsQ0FBQSxDQUFBLENBQ0EsR0FBQSxDQUFBLFNBQUEsMEJBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsVUFBQSxDQUFBLENBQUEsQ0FBQSxDQUNBLEdBQUEsQ0FBQSxRQUFBLDBCQUFBLE9BQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxDQUNBLEdBQUEsQ0FBQSxhQUFBLDBCQUFBLE9BQUEsQ0FBQSw4QkFBQSxDQUFBLENBQUEsQ0FDQSxHQUFBLENBQUEsV0FBQSwwQkFBQSx1QkFBQSxDQUFBLE9BQUEsQ0FBQSxlQUFBLENBQUEsQ0FBQSxDQUFBLENBQ0EsR0FBQSxDQUFBLGtCQUFBLDBCQUFBLE9BQUEsQ0FBQSxzQkFBQSxDQUFBLENBQUEsQywwNEZBRUEsS0FBTUEsQ0FBQUEsUUFBUSxDQUFHLE1BQUEsSUFBQSxDQUFBLE1BQUEsR0FBd0Isa0RBQ3ZDLEdBQUksMEJBQ0YsTUFBTyxNQUFNQyxDQUFBQSxNQUFNLENBQU5BLFlBQUFBLENBQUFBLElBQUFBLENBQWIsSUFBYUEsQ0FBYixDQURGLENBRUUsTUFBQSxDQUFBLENBQVUsMEJBQ1YsR0FBSUMsQ0FBQyxHQUFMLFNBQUEsQ0FBcUIsc0RBQ25CLEtBQU0sSUFBSUMsQ0FBQUEsS0FBQUEs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QSxFQUFtQkQsVUFBVSxDQUE3QixNQUFBLENBRjZDLEVBQTdELENBQU8sQ0FBUCxDQU5GLENBVUUsTUFBQSxDQUFBLENBQVUsMEJBQ1ZWLGtCQUFrQixDQUFsQkEsV0FBQUEsQ0FBQUEsQ0FBQUEsRUFDRCxDQUNGLENBakJILENBRkZBLENBQUFBLElBQUFBLENBQUFBLElBQUFBLEVBL0JGLENBQUEsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYXJzZSBmcm9tICdwYXJzZS9ub2RlJztcbmltcG9ydCBkZWVwY29weSBmcm9tICdkZWVwY29weSc7XG5pbXBvcnQgeyBHcmFwaFFMTm9uTnVsbCwgR3JhcGhRTExpc3QgfSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IHRyYW5zZm9ybVRvR3JhcGhRTCB9IGZyb20gJy4uL3RyYW5zZm9ybWVycy9zY2hlbWFGaWVsZHMnO1xuaW1wb3J0ICogYXMgc2NoZW1hVHlwZXMgZnJvbSAnLi9zY2hlbWFUeXBlcyc7XG5pbXBvcnQgeyBlbmZvcmNlTWFzdGVyS2V5QWNjZXNzIH0gZnJvbSAnLi4vcGFyc2VHcmFwaFFMVXRpbHMnO1xuXG5jb25zdCBnZXRDbGFzcyA9IGFzeW5jIChuYW1lLCBzY2hlbWEpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgc2NoZW1hLmdldE9uZVNjaGVtYShuYW1lLCB0cnVlKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihQYXJzZS5FcnJvci5JTlZBTElEX0NMQVNTX05BTUUsIGBDbGFzcyAke25hbWV9IGRvZXMgbm90IGV4aXN0LmApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgUGFyc2UuRXJyb3IoUGFyc2UuRXJyb3IuSU5URVJOQUxfU0VSVkVSX0VSUk9SLCAnRGF0YWJhc2UgYWRhcHRlciBlcnJvci4nKTtcbiAgICB9XG4gIH1cbn07XG5cbmNvbnN0IGxvYWQgPSBwYXJzZUdyYXBoUUxTY2hlbWEgPT4ge1xuICBwYXJzZUdyYXBoUUxTY2hlbWEuYWRkR3JhcGhRTFF1ZXJ5KFxuICAgICdjbGFzcycsXG4gICAge1xuICAgICAgZGVzY3JpcHRpb246ICdUaGUgY2xhc3MgcXVlcnkgY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgYW4gZXhpc3Rpbmcgb2JqZWN0IGNsYXNzLicsXG4gICAgICBhcmdzOiB7XG4gICAgICAgIG5hbWU6IHNjaGVtYVR5cGVzLkNMQVNTX05BTUVfQVRULFxuICAgICAgfSxcbiAgICAgIHR5cGU6IG5ldyBHcmFwaFFMTm9uTnVsbChzY2hlbWFUeXBlcy5DTEFTUyksXG4gICAgICByZXNvbHZlOiBhc3luYyAoX3NvdXJjZSwgYXJncywgY29udGV4dCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHsgbmFtZSB9ID0gZGVlcGNvcHkoYXJncyk7XG4gICAgICAgICAgY29uc3QgeyBjb25maWcsIGF1dGggfSA9IGNvbnRleHQ7XG5cbiAgICAgICAgICBlbmZvcmNlTWFzdGVyS2V5QWNjZXNzKGF1dGgpO1xuXG4gICAgICAgICAgY29uc3Qgc2NoZW1hID0gYXdhaXQgY29uZmlnLmRhdGFiYXNlLmxvYWRTY2hlbWEoeyBjbGVhckNhY2hlOiB0cnVlIH0pO1xuICAgICAgICAgIGNvbnN0IHBhcnNlQ2xhc3MgPSBhd2FpdCBnZXRDbGFzcyhuYW1lLCBzY2hlbWEpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBwYXJzZUNsYXNzLmNsYXNzTmFtZSxcbiAgICAgICAgICAgIHNjaGVtYUZpZWxkczogdHJhbnNmb3JtVG9HcmFwaFFMKHBhcnNlQ2xhc3MuZmllbGRzKSxcbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcGFyc2VHcmFwaFFMU2NoZW1hLmhhbmRsZUVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0sXG4gICAgdHJ1ZSxcbiAgICB0cnVlXG4gICk7XG5cbiAgcGFyc2VHcmFwaFFMU2NoZW1hLmFkZEdyYXBoUUxRdWVyeShcbiAgICAnY2xhc3NlcycsXG4gICAge1xuICAgICAgZGVzY3JpcHRpb246ICdUaGUgY2xhc3NlcyBxdWVyeSBjYW4gYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgZXhpc3Rpbmcgb2JqZWN0IGNsYXNzZXMuJyxcbiAgICAgIHR5cGU6IG5ldyBHcmFwaFFMTm9uTnVsbChuZXcgR3JhcGhRTExpc3QobmV3IEdyYXBoUUxOb25OdWxsKHNjaGVtYVR5cGVzLkNMQVNTKSkpLFxuICAgICAgcmVzb2x2ZTogYXN5bmMgKF9zb3VyY2UsIF9hcmdzLCBjb250ZXh0KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgeyBjb25maWcsIGF1dGggfSA9IGNvbnRleHQ7XG5cbiAgICAgICAgICBlbmZvcmNlTWFzdGVyS2V5QWNjZXNzKGF1dGgpO1xuXG4gICAgICAgICAgY29uc3Qgc2NoZW1hID0gYXdhaXQgY29uZmlnLmRhdGFiYXNlLmxvYWRTY2hlbWEoeyBjbGVhckNhY2hlOiB0cnVlIH0pO1xuICAgICAgICAgIHJldHVybiAoYXdhaXQgc2NoZW1hLmdldEFsbENsYXNzZXModHJ1ZSkpLm1hcChwYXJzZUNsYXNzID0+ICh7XG4gICAgICAgICAgICBuYW1lOiBwYXJzZUNsYXNzLmNsYXNzTmFtZSxcbiAgICAgICAgICAgIHNjaGVtYUZpZWxkczogdHJhbnNmb3JtVG9HcmFwaFFMKHBhcnNlQ2xhc3MuZmllbGRzKSxcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBwYXJzZUdyYXBoUUxTY2hlbWEuaGFuZGxlRXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSxcbiAgICB0cnVlLFxuICAgIHRydWVcbiAgKTtcbn07XG5cbmV4cG9ydCB7IGdldENsYXNzLCBsb2FkIH07XG4iXX0=