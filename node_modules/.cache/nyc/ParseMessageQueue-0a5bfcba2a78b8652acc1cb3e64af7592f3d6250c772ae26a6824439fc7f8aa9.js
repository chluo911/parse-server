"use strict";function cov_cxbmux4qs(){var path="/parse-server/lib/ParseMessageQueue.js";var hash="6ce08ed4cbdd2dff8fb9542c49dbd90ae31ee45a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/ParseMessageQueue.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:35}},"2":{start:{line:8,column:21},end:{line:8,column:56}},"3":{start:{line:10,column:22},end:{line:10,column:71}},"4":{start:{line:12,column:26},end:{line:12,column:28}},"5":{start:{line:13,column:0},end:{line:13,column:46}},"6":{start:{line:15,column:0},end:{line:23,column:2}},"7":{start:{line:16,column:18},end:{line:16,column:117}},"8":{start:{line:18,column:2},end:{line:20,column:3}},"9":{start:{line:19,column:4},end:{line:19,column:56}},"10":{start:{line:22,column:2},end:{line:22,column:41}},"11":{start:{line:25,column:0},end:{line:33,column:2}},"12":{start:{line:26,column:18},end:{line:26,column:117}},"13":{start:{line:28,column:2},end:{line:30,column:3}},"14":{start:{line:29,column:4},end:{line:29,column:63}},"15":{start:{line:32,column:2},end:{line:32,column:42}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:15,column:36},end:{line:15,column:37}},loc:{start:{line:15,column:54},end:{line:23,column:1}},line:15},"1":{name:"(anonymous_1)",decl:{start:{line:25,column:37},end:{line:25,column:38}},loc:{start:{line:25,column:55},end:{line:33,column:1}},line:25}},branchMap:{"0":{loc:{start:{line:18,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:20,column:3}},{start:{line:18,column:2},end:{line:20,column:3}}],line:18},"1":{loc:{start:{line:28,column:2},end:{line:30,column:3}},type:"if",locations:[{start:{line:28,column:2},end:{line:30,column:3}},{start:{line:28,column:2},end:{line:30,column:3}}],line:28}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},inputSourceMap:{version:3,sources:["../src/ParseMessageQueue.js"],names:["ParseMessageQueue","createPublisher","config","adapter","messageQueueAdapter","EventEmitterMQ","createSubscriber"],mappings:";;;;;;;AAAA;;AACA;;AAEA,MAAMA,iBAAiB,GAAG,EAA1B;;;AAEAA,iBAAiB,CAACC,eAAlB,GAAoC,UAAUC,MAAV,EAA4B;AAC9D,QAAMC,OAAO,GAAG,gCAAYD,MAAM,CAACE,mBAAnB,EAAwCC,8BAAxC,EAAwDH,MAAxD,CAAhB;;AACA,MAAI,OAAOC,OAAO,CAACF,eAAf,KAAmC,UAAvC,EAAmD;AACjD,UAAM,6CAAN;AACD;;AACD,SAAOE,OAAO,CAACF,eAAR,CAAwBC,MAAxB,CAAP;AACD,CAND;;AAQAF,iBAAiB,CAACM,gBAAlB,GAAqC,UAAUJ,MAAV,EAA6B;AAChE,QAAMC,OAAO,GAAG,gCAAYD,MAAM,CAACE,mBAAnB,EAAwCC,8BAAxC,EAAwDH,MAAxD,CAAhB;;AACA,MAAI,OAAOC,OAAO,CAACG,gBAAf,KAAoC,UAAxC,EAAoD;AAClD,UAAM,oDAAN;AACD;;AACD,SAAOH,OAAO,CAACG,gBAAR,CAAyBJ,MAAzB,CAAP;AACD,CAND",sourcesContent:["import { loadAdapter } from './Adapters/AdapterLoader';\nimport { EventEmitterMQ } from './Adapters/MessageQueue/EventEmitterMQ';\n\nconst ParseMessageQueue = {};\n\nParseMessageQueue.createPublisher = function (config: any): any {\n  const adapter = loadAdapter(config.messageQueueAdapter, EventEmitterMQ, config);\n  if (typeof adapter.createPublisher !== 'function') {\n    throw 'pubSubAdapter should have createPublisher()';\n  }\n  return adapter.createPublisher(config);\n};\n\nParseMessageQueue.createSubscriber = function (config: any): void {\n  const adapter = loadAdapter(config.messageQueueAdapter, EventEmitterMQ, config);\n  if (typeof adapter.createSubscriber !== 'function') {\n    throw 'messageQueueAdapter should have createSubscriber()';\n  }\n  return adapter.createSubscriber(config);\n};\n\nexport { ParseMessageQueue };\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ce08ed4cbdd2dff8fb9542c49dbd90ae31ee45a"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_cxbmux4qs=function(){return actualCoverage;};}return actualCoverage;}cov_cxbmux4qs();cov_cxbmux4qs().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_cxbmux4qs().s[1]++;exports.ParseMessageQueue=void 0;var _AdapterLoader=(cov_cxbmux4qs().s[2]++,require("./Adapters/AdapterLoader"));var _EventEmitterMQ=(cov_cxbmux4qs().s[3]++,require("./Adapters/MessageQueue/EventEmitterMQ"));const ParseMessageQueue=(cov_cxbmux4qs().s[4]++,{});cov_cxbmux4qs().s[5]++;exports.ParseMessageQueue=ParseMessageQueue;cov_cxbmux4qs().s[6]++;ParseMessageQueue.createPublisher=function(config){cov_cxbmux4qs().f[0]++;const adapter=(cov_cxbmux4qs().s[7]++,(0,_AdapterLoader.loadAdapter)(config.messageQueueAdapter,_EventEmitterMQ.EventEmitterMQ,config));cov_cxbmux4qs().s[8]++;if(typeof adapter.createPublisher!=='function'){cov_cxbmux4qs().b[0][0]++;cov_cxbmux4qs().s[9]++;throw'pubSubAdapter should have createPublisher()';}else{cov_cxbmux4qs().b[0][1]++;}cov_cxbmux4qs().s[10]++;return adapter.createPublisher(config);};cov_cxbmux4qs().s[11]++;ParseMessageQueue.createSubscriber=function(config){cov_cxbmux4qs().f[1]++;const adapter=(cov_cxbmux4qs().s[12]++,(0,_AdapterLoader.loadAdapter)(config.messageQueueAdapter,_EventEmitterMQ.EventEmitterMQ,config));cov_cxbmux4qs().s[13]++;if(typeof adapter.createSubscriber!=='function'){cov_cxbmux4qs().b[1][0]++;cov_cxbmux4qs().s[14]++;throw'messageQueueAdapter should have createSubscriber()';}else{cov_cxbmux4qs().b[1][1]++;}cov_cxbmux4qs().s[15]++;return adapter.createSubscriber(config);};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9QYXJzZU1lc3NhZ2VRdWV1ZS5qcyJdLCJuYW1lcyI6WyJQYXJzZU1lc3NhZ2VRdWV1ZSIsImNyZWF0ZVB1Ymxpc2hlciIsImNvbmZpZyIsImFkYXB0ZXIiLCJtZXNzYWdlUXVldWVBZGFwdGVyIiwiRXZlbnRFbWl0dGVyTVEiLCJjcmVhdGVTdWJzY3JpYmVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBRUEsTUFBTUEsaUJBQWlCLEdBQUcsRUFBMUI7OztBQUVBQSxpQkFBaUIsQ0FBQ0MsZUFBbEIsR0FBb0MsVUFBVUMsTUFBVixFQUE0QjtBQUM5RCxRQUFNQyxPQUFPLEdBQUcsZ0NBQVlELE1BQU0sQ0FBQ0UsbUJBQW5CLEVBQXdDQyw4QkFBeEMsRUFBd0RILE1BQXhELENBQWhCOztBQUNBLE1BQUksT0FBT0MsT0FBTyxDQUFDRixlQUFmLEtBQW1DLFVBQXZDLEVBQW1EO0FBQ2pELFVBQU0sNkNBQU47QUFDRDs7QUFDRCxTQUFPRSxPQUFPLENBQUNGLGVBQVIsQ0FBd0JDLE1BQXhCLENBQVA7QUFDRCxDQU5EOztBQVFBRixpQkFBaUIsQ0FBQ00sZ0JBQWxCLEdBQXFDLFVBQVVKLE1BQVYsRUFBNkI7QUFDaEUsUUFBTUMsT0FBTyxHQUFHLGdDQUFZRCxNQUFNLENBQUNFLG1CQUFuQixFQUF3Q0MsOEJBQXhDLEVBQXdESCxNQUF4RCxDQUFoQjs7QUFDQSxNQUFJLE9BQU9DLE9BQU8sQ0FBQ0csZ0JBQWYsS0FBb0MsVUFBeEMsRUFBb0Q7QUFDbEQsVUFBTSxvREFBTjtBQUNEOztBQUNELFNBQU9ILE9BQU8sQ0FBQ0csZ0JBQVIsQ0FBeUJKLE1BQXpCLENBQVA7QUFDRCxDQU5EIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbG9hZEFkYXB0ZXIgfSBmcm9tICcuL0FkYXB0ZXJzL0FkYXB0ZXJMb2FkZXInO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyTVEgfSBmcm9tICcuL0FkYXB0ZXJzL01lc3NhZ2VRdWV1ZS9FdmVudEVtaXR0ZXJNUSc7XG5cbmNvbnN0IFBhcnNlTWVzc2FnZVF1ZXVlID0ge307XG5cblBhcnNlTWVzc2FnZVF1ZXVlLmNyZWF0ZVB1Ymxpc2hlciA9IGZ1bmN0aW9uIChjb25maWc6IGFueSk6IGFueSB7XG4gIGNvbnN0IGFkYXB0ZXIgPSBsb2FkQWRhcHRlcihjb25maWcubWVzc2FnZVF1ZXVlQWRhcHRlciwgRXZlbnRFbWl0dGVyTVEsIGNvbmZpZyk7XG4gIGlmICh0eXBlb2YgYWRhcHRlci5jcmVhdGVQdWJsaXNoZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyAncHViU3ViQWRhcHRlciBzaG91bGQgaGF2ZSBjcmVhdGVQdWJsaXNoZXIoKSc7XG4gIH1cbiAgcmV0dXJuIGFkYXB0ZXIuY3JlYXRlUHVibGlzaGVyKGNvbmZpZyk7XG59O1xuXG5QYXJzZU1lc3NhZ2VRdWV1ZS5jcmVhdGVTdWJzY3JpYmVyID0gZnVuY3Rpb24gKGNvbmZpZzogYW55KTogdm9pZCB7XG4gIGNvbnN0IGFkYXB0ZXIgPSBsb2FkQWRhcHRlcihjb25maWcubWVzc2FnZVF1ZXVlQWRhcHRlciwgRXZlbnRFbWl0dGVyTVEsIGNvbmZpZyk7XG4gIGlmICh0eXBlb2YgYWRhcHRlci5jcmVhdGVTdWJzY3JpYmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgJ21lc3NhZ2VRdWV1ZUFkYXB0ZXIgc2hvdWxkIGhhdmUgY3JlYXRlU3Vic2NyaWJlcigpJztcbiAgfVxuICByZXR1cm4gYWRhcHRlci5jcmVhdGVTdWJzY3JpYmVyKGNvbmZpZyk7XG59O1xuXG5leHBvcnQgeyBQYXJzZU1lc3NhZ2VRdWV1ZSB9O1xuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9QYXJzZU1lc3NhZ2VRdWV1ZS5qcyJdLCJuYW1lcyI6WyJQYXJzZU1lc3NhZ2VRdWV1ZSIsImFkYXB0ZXIiLCJjb25maWciLCJFdmVudEVtaXR0ZXJNUSJdLCJtYXBwaW5ncyI6Iit6SEFNUUM7aU9BTlIsR0FBQSxDQUFBLGNBQUEseUJBQUEsT0FBQSxDQUFBLDBCQUFBLENBQUEsQ0FBQSxDQUNBLEdBQUEsQ0FBQSxlQUFBLHlCQUFBLE9BQUEsQ0FBQSx3Q0FBQSxDQUFBLENBQUEsQ0FFQSxLQUFNRCxDQUFBQSxpQkFBaUIseUJBQXZCLEVBQXVCLENBQXZCLEMsMEZBRUFBLGlCQUFpQixDQUFqQkEsZUFBQUEsQ0FBb0MsU0FBQSxNQUFBLENBQTRCLHdCQUM5RCxLQUFNQyxDQUFBQSxPQUFPLHlCQUFHLENBQUEsRUFBQSxjQUFBLENBQUEsV0FBQSxFQUFZQyxNQUFNLENBQWxCLG1CQUFBLENBQXdDQyxlQUFBQSxDQUF4QyxjQUFBLENBQWhCLE1BQWdCLENBQUgsQ0FBYixDQUQ4RCx1QkFFOUQsR0FBSSxNQUFPRixDQUFBQSxPQUFPLENBQWQsZUFBQSxHQUFKLFVBQUEsQ0FBbUQsa0RBQ2pELEtBQUEsNkNBQUEsQ0FDRCxDQUZELGdDQUY4RCx3QkFLOUQsTUFBT0EsQ0FBQUEsT0FBTyxDQUFQQSxlQUFBQSxDQUFQLE1BQU9BLENBQVAsQ0FMRkQsQ0FBQUEsQyx3QkFRQUEsaUJBQWlCLENBQWpCQSxnQkFBQUEsQ0FBcUMsU0FBQSxNQUFBLENBQTZCLHdCQUNoRSxLQUFNQyxDQUFBQSxPQUFPLDBCQUFHLENBQUEsRUFBQSxjQUFBLENBQUEsV0FBQSxFQUFZQyxNQUFNLENBQWxCLG1CQUFBLENBQXdDQyxlQUFBQSxDQUF4QyxjQUFBLENBQWhCLE1BQWdCLENBQUgsQ0FBYixDQURnRSx3QkFFaEUsR0FBSSxNQUFPRixDQUFBQSxPQUFPLENBQWQsZ0JBQUEsR0FBSixVQUFBLENBQW9ELG1EQUNsRCxLQUFBLG9EQUFBLENBQ0QsQ0FGRCxnQ0FGZ0Usd0JBS2hFLE1BQU9BLENBQUFBLE9BQU8sQ0FBUEEsZ0JBQUFBLENBQVAsTUFBT0EsQ0FBUCxDQUxGRCxDQUFBQSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbG9hZEFkYXB0ZXIgfSBmcm9tICcuL0FkYXB0ZXJzL0FkYXB0ZXJMb2FkZXInO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyTVEgfSBmcm9tICcuL0FkYXB0ZXJzL01lc3NhZ2VRdWV1ZS9FdmVudEVtaXR0ZXJNUSc7XG5cbmNvbnN0IFBhcnNlTWVzc2FnZVF1ZXVlID0ge307XG5cblBhcnNlTWVzc2FnZVF1ZXVlLmNyZWF0ZVB1Ymxpc2hlciA9IGZ1bmN0aW9uIChjb25maWc6IGFueSk6IGFueSB7XG4gIGNvbnN0IGFkYXB0ZXIgPSBsb2FkQWRhcHRlcihjb25maWcubWVzc2FnZVF1ZXVlQWRhcHRlciwgRXZlbnRFbWl0dGVyTVEsIGNvbmZpZyk7XG4gIGlmICh0eXBlb2YgYWRhcHRlci5jcmVhdGVQdWJsaXNoZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyAncHViU3ViQWRhcHRlciBzaG91bGQgaGF2ZSBjcmVhdGVQdWJsaXNoZXIoKSc7XG4gIH1cbiAgcmV0dXJuIGFkYXB0ZXIuY3JlYXRlUHVibGlzaGVyKGNvbmZpZyk7XG59O1xuXG5QYXJzZU1lc3NhZ2VRdWV1ZS5jcmVhdGVTdWJzY3JpYmVyID0gZnVuY3Rpb24gKGNvbmZpZzogYW55KTogdm9pZCB7XG4gIGNvbnN0IGFkYXB0ZXIgPSBsb2FkQWRhcHRlcihjb25maWcubWVzc2FnZVF1ZXVlQWRhcHRlciwgRXZlbnRFbWl0dGVyTVEsIGNvbmZpZyk7XG4gIGlmICh0eXBlb2YgYWRhcHRlci5jcmVhdGVTdWJzY3JpYmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgJ21lc3NhZ2VRdWV1ZUFkYXB0ZXIgc2hvdWxkIGhhdmUgY3JlYXRlU3Vic2NyaWJlcigpJztcbiAgfVxuICByZXR1cm4gYWRhcHRlci5jcmVhdGVTdWJzY3JpYmVyKGNvbmZpZyk7XG59O1xuXG5leHBvcnQgeyBQYXJzZU1lc3NhZ2VRdWV1ZSB9O1xuIl19