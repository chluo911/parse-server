"use strict";function cov_17wx8lt7o9(){var path="/parse-server/lib/Routers/SchemasRouter.js";var hash="3d02c5d66d649e46a3bfa5ee51d2b622966f4192";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Routers/SchemasRouter.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:93}},"2":{start:{line:8,column:21},end:{line:8,column:72}},"3":{start:{line:10,column:17},end:{line:10,column:67}},"4":{start:{line:12,column:49},end:{line:12,column:96}},"5":{start:{line:12,column:84},end:{line:12,column:96}},"6":{start:{line:12,column:121},end:{line:12,column:134}},"7":{start:{line:12,column:159},end:{line:12,column:172}},"8":{start:{line:12,column:174},end:{line:12,column:309}},"9":{start:{line:12,column:234},end:{line:12,column:292}},"10":{start:{line:14,column:53},end:{line:14,column:111}},"11":{start:{line:14,column:98},end:{line:14,column:109}},"12":{start:{line:14,column:112},end:{line:14,column:214}},"13":{start:{line:14,column:188},end:{line:14,column:212}},"14":{start:{line:14,column:227},end:{line:14,column:264}},"15":{start:{line:14,column:266},end:{line:14,column:321}},"16":{start:{line:14,column:297},end:{line:14,column:319}},"17":{start:{line:14,column:335},end:{line:14,column:337}},"18":{start:{line:14,column:367},end:{line:14,column:423}},"19":{start:{line:14,column:425},end:{line:14,column:726}},"20":{start:{line:14,column:448},end:{line:14,column:724}},"21":{start:{line:14,column:534},end:{line:14,column:606}},"22":{start:{line:14,column:608},end:{line:14,column:722}},"23":{start:{line:14,column:646},end:{line:14,column:687}},"24":{start:{line:14,column:697},end:{line:14,column:720}},"25":{start:{line:14,column:727},end:{line:14,column:748}},"26":{start:{line:14,column:749},end:{line:14,column:787}},"27":{start:{line:14,column:762},end:{line:14,column:785}},"28":{start:{line:14,column:788},end:{line:14,column:802}},"29":{start:{line:16,column:39},end:{line:16,column:93}},"30":{start:{line:19,column:12},end:{line:19,column:39}},"31":{start:{line:20,column:23},end:{line:20,column:65}},"32":{start:{line:23,column:2},end:{line:23,column:118}},"33":{start:{line:27,column:2},end:{line:33,column:6}},"34":{start:{line:29,column:30},end:{line:29,column:66}},"35":{start:{line:29,column:85},end:{line:33,column:3}},"36":{start:{line:37,column:20},end:{line:37,column:40}},"37":{start:{line:38,column:2},end:{line:48,column:5}},"38":{start:{line:40,column:30},end:{line:40,column:76}},"39":{start:{line:40,column:94},end:{line:42,column:3}},"40":{start:{line:43,column:4},end:{line:47,column:5}},"41":{start:{line:44,column:6},end:{line:44,column:98}},"42":{start:{line:46,column:6},end:{line:46,column:90}},"43":{start:{line:51,column:36},end:{line:57,column:1}},"44":{start:{line:54,column:2},end:{line:56,column:3}},"45":{start:{line:55,column:4},end:{line:55,column:122}},"46":{start:{line:59,column:29},end:{line:67,column:1}},"47":{start:{line:60,column:21},end:{line:62,column:4}},"48":{start:{line:63,column:19},end:{line:63,column:121}},"49":{start:{line:64,column:2},end:{line:66,column:4}},"50":{start:{line:69,column:0},end:{line:69,column:52}},"51":{start:{line:71,column:29},end:{line:79,column:1}},"52":{start:{line:72,column:21},end:{line:74,column:4}},"53":{start:{line:75,column:19},end:{line:75,column:136}},"54":{start:{line:76,column:2},end:{line:78,column:4}},"55":{start:{line:81,column:0},end:{line:81,column:52}},"56":{start:{line:84,column:2},end:{line:84,column:35}},"57":{start:{line:86,column:2},end:{line:88,column:3}},"58":{start:{line:87,column:4},end:{line:87,column:116}},"59":{start:{line:90,column:2},end:{line:94,column:3}},"60":{start:{line:91,column:4},end:{line:93,column:5}},"61":{start:{line:92,column:6},end:{line:92,column:81}},"62":{start:{line:96,column:20},end:{line:96,column:62}},"63":{start:{line:98,column:2},end:{line:100,column:3}},"64":{start:{line:99,column:4},end:{line:99,column:71}},"65":{start:{line:102,column:2},end:{line:102,column:69}},"66":{start:{line:106,column:2},end:{line:106,column:35}},"67":{start:{line:108,column:2},end:{line:110,column:3}},"68":{start:{line:109,column:4},end:{line:109,column:116}},"69":{start:{line:112,column:2},end:{line:114,column:3}},"70":{start:{line:113,column:4},end:{line:113,column:79}},"71":{start:{line:116,column:20},end:{line:116,column:40}},"72":{start:{line:117,column:2},end:{line:117,column:63}},"73":{start:{line:120,column:21},end:{line:132,column:1}},"74":{start:{line:121,column:2},end:{line:123,column:3}},"75":{start:{line:122,column:4},end:{line:122,column:116}},"76":{start:{line:125,column:2},end:{line:127,column:3}},"77":{start:{line:126,column:4},end:{line:126,column:122}},"78":{start:{line:129,column:2},end:{line:131,column:6}},"79":{start:{line:129,column:76},end:{line:131,column:3}},"80":{start:{line:136,column:4},end:{line:136,column:91}},"81":{start:{line:137,column:4},end:{line:137,column:101}},"82":{start:{line:138,column:4},end:{line:138,column:91}},"83":{start:{line:139,column:4},end:{line:139,column:102}},"84":{start:{line:140,column:4},end:{line:140,column:101}},"85":{start:{line:141,column:4},end:{line:141,column:104}},"86":{start:{line:146,column:0},end:{line:146,column:38}}},fnMap:{"0":{name:"_getRequireWildcardCache",decl:{start:{line:12,column:9},end:{line:12,column:33}},loc:{start:{line:12,column:47},end:{line:12,column:311}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:209},end:{line:12,column:210}},loc:{start:{line:12,column:232},end:{line:12,column:294}},line:12},"2":{name:"_interopRequireWildcard",decl:{start:{line:14,column:9},end:{line:14,column:32}},loc:{start:{line:14,column:51},end:{line:14,column:804}},line:14},"3":{name:"_interopRequireDefault",decl:{start:{line:16,column:9},end:{line:16,column:31}},loc:{start:{line:16,column:37},end:{line:16,column:95}},line:16},"4":{name:"classNameMismatchResponse",decl:{start:{line:22,column:9},end:{line:22,column:34}},loc:{start:{line:22,column:57},end:{line:24,column:1}},line:22},"5":{name:"getAllSchemas",decl:{start:{line:26,column:9},end:{line:26,column:22}},loc:{start:{line:26,column:28},end:{line:34,column:1}},line:26},"6":{name:"(anonymous_6)",decl:{start:{line:29,column:10},end:{line:29,column:11}},loc:{start:{line:29,column:30},end:{line:29,column:66}},line:29},"7":{name:"(anonymous_7)",decl:{start:{line:29,column:73},end:{line:29,column:74}},loc:{start:{line:29,column:85},end:{line:33,column:3}},line:29},"8":{name:"getOneSchema",decl:{start:{line:36,column:9},end:{line:36,column:21}},loc:{start:{line:36,column:27},end:{line:49,column:1}},line:36},"9":{name:"(anonymous_9)",decl:{start:{line:40,column:10},end:{line:40,column:11}},loc:{start:{line:40,column:30},end:{line:40,column:76}},line:40},"10":{name:"(anonymous_10)",decl:{start:{line:40,column:83},end:{line:40,column:84}},loc:{start:{line:40,column:94},end:{line:42,column:3}},line:40},"11":{name:"(anonymous_11)",decl:{start:{line:42,column:12},end:{line:42,column:13}},loc:{start:{line:42,column:21},end:{line:48,column:3}},line:42},"12":{name:"(anonymous_12)",decl:{start:{line:51,column:36},end:{line:51,column:37}},loc:{start:{line:51,column:43},end:{line:57,column:1}},line:51},"13":{name:"(anonymous_13)",decl:{start:{line:59,column:29},end:{line:59,column:30}},loc:{start:{line:59,column:64},end:{line:67,column:1}},line:59},"14":{name:"(anonymous_14)",decl:{start:{line:71,column:29},end:{line:71,column:30}},loc:{start:{line:71,column:64},end:{line:79,column:1}},line:71},"15":{name:"createSchema",decl:{start:{line:83,column:15},end:{line:83,column:27}},loc:{start:{line:83,column:33},end:{line:103,column:1}},line:83},"16":{name:"modifySchema",decl:{start:{line:105,column:9},end:{line:105,column:21}},loc:{start:{line:105,column:27},end:{line:118,column:1}},line:105},"17":{name:"(anonymous_17)",decl:{start:{line:120,column:21},end:{line:120,column:22}},loc:{start:{line:120,column:28},end:{line:132,column:1}},line:120},"18":{name:"(anonymous_18)",decl:{start:{line:129,column:69},end:{line:129,column:70}},loc:{start:{line:129,column:76},end:{line:131,column:3}},line:129},"19":{name:"(anonymous_19)",decl:{start:{line:135,column:2},end:{line:135,column:3}},loc:{start:{line:135,column:16},end:{line:142,column:3}},line:135}},branchMap:{"0":{loc:{start:{line:12,column:49},end:{line:12,column:96}},type:"if",locations:[{start:{line:12,column:49},end:{line:12,column:96}},{start:{line:12,column:49},end:{line:12,column:96}}],line:12},"1":{loc:{start:{line:12,column:241},end:{line:12,column:291}},type:"cond-expr",locations:[{start:{line:12,column:255},end:{line:12,column:271}},{start:{line:12,column:274},end:{line:12,column:291}}],line:12},"2":{loc:{start:{line:14,column:53},end:{line:14,column:111}},type:"if",locations:[{start:{line:14,column:53},end:{line:14,column:111}},{start:{line:14,column:53},end:{line:14,column:111}}],line:14},"3":{loc:{start:{line:14,column:57},end:{line:14,column:94}},type:"binary-expr",locations:[{start:{line:14,column:57},end:{line:14,column:69}},{start:{line:14,column:73},end:{line:14,column:76}},{start:{line:14,column:80},end:{line:14,column:94}}],line:14},"4":{loc:{start:{line:14,column:112},end:{line:14,column:214}},type:"if",locations:[{start:{line:14,column:112},end:{line:14,column:214}},{start:{line:14,column:112},end:{line:14,column:214}}],line:14},"5":{loc:{start:{line:14,column:116},end:{line:14,column:184}},type:"binary-expr",locations:[{start:{line:14,column:116},end:{line:14,column:128}},{start:{line:14,column:132},end:{line:14,column:155}},{start:{line:14,column:159},end:{line:14,column:184}}],line:14},"6":{loc:{start:{line:14,column:266},end:{line:14,column:321}},type:"if",locations:[{start:{line:14,column:266},end:{line:14,column:321}},{start:{line:14,column:266},end:{line:14,column:321}}],line:14},"7":{loc:{start:{line:14,column:270},end:{line:14,column:293}},type:"binary-expr",locations:[{start:{line:14,column:270},end:{line:14,column:275}},{start:{line:14,column:279},end:{line:14,column:293}}],line:14},"8":{loc:{start:{line:14,column:367},end:{line:14,column:423}},type:"binary-expr",locations:[{start:{line:14,column:367},end:{line:14,column:388}},{start:{line:14,column:392},end:{line:14,column:423}}],line:14},"9":{loc:{start:{line:14,column:448},end:{line:14,column:724}},type:"if",locations:[{start:{line:14,column:448},end:{line:14,column:724}},{start:{line:14,column:448},end:{line:14,column:724}}],line:14},"10":{loc:{start:{line:14,column:452},end:{line:14,column:519}},type:"binary-expr",locations:[{start:{line:14,column:452},end:{line:14,column:469}},{start:{line:14,column:473},end:{line:14,column:519}}],line:14},"11":{loc:{start:{line:14,column:534},end:{line:14,column:606}},type:"cond-expr",locations:[{start:{line:14,column:558},end:{line:14,column:599}},{start:{line:14,column:602},end:{line:14,column:606}}],line:14},"12":{loc:{start:{line:14,column:608},end:{line:14,column:722}},type:"if",locations:[{start:{line:14,column:608},end:{line:14,column:722}},{start:{line:14,column:608},end:{line:14,column:722}}],line:14},"13":{loc:{start:{line:14,column:612},end:{line:14,column:642}},type:"binary-expr",locations:[{start:{line:14,column:612},end:{line:14,column:616}},{start:{line:14,column:621},end:{line:14,column:629}},{start:{line:14,column:633},end:{line:14,column:641}}],line:14},"14":{loc:{start:{line:14,column:749},end:{line:14,column:787}},type:"if",locations:[{start:{line:14,column:749},end:{line:14,column:787}},{start:{line:14,column:749},end:{line:14,column:787}}],line:14},"15":{loc:{start:{line:16,column:46},end:{line:16,column:92}},type:"cond-expr",locations:[{start:{line:16,column:70},end:{line:16,column:73}},{start:{line:16,column:76},end:{line:16,column:92}}],line:16},"16":{loc:{start:{line:16,column:46},end:{line:16,column:67}},type:"binary-expr",locations:[{start:{line:16,column:46},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:67}}],line:16},"17":{loc:{start:{line:43,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:43,column:4},end:{line:47,column:5}},{start:{line:43,column:4},end:{line:47,column:5}}],line:43},"18":{loc:{start:{line:54,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:54,column:2},end:{line:56,column:3}},{start:{line:54,column:2},end:{line:56,column:3}}],line:54},"19":{loc:{start:{line:54,column:7},end:{line:54,column:205}},type:"cond-expr",locations:[{start:{line:54,column:71},end:{line:54,column:77}},{start:{line:54,column:80},end:{line:54,column:205}}],line:54},"20":{loc:{start:{line:54,column:7},end:{line:54,column:68}},type:"binary-expr",locations:[{start:{line:54,column:7},end:{line:54,column:42}},{start:{line:54,column:46},end:{line:54,column:68}}],line:54},"21":{loc:{start:{line:54,column:80},end:{line:54,column:205}},type:"cond-expr",locations:[{start:{line:54,column:166},end:{line:54,column:172}},{start:{line:54,column:175},end:{line:54,column:205}}],line:54},"22":{loc:{start:{line:54,column:80},end:{line:54,column:163}},type:"binary-expr",locations:[{start:{line:54,column:80},end:{line:54,column:130}},{start:{line:54,column:134},end:{line:54,column:163}}],line:54},"23":{loc:{start:{line:75,column:59},end:{line:75,column:76}},type:"binary-expr",locations:[{start:{line:75,column:59},end:{line:75,column:70}},{start:{line:75,column:74},end:{line:75,column:76}}],line:75},"24":{loc:{start:{line:86,column:2},end:{line:88,column:3}},type:"if",locations:[{start:{line:86,column:2},end:{line:88,column:3}},{start:{line:86,column:2},end:{line:88,column:3}}],line:86},"25":{loc:{start:{line:90,column:2},end:{line:94,column:3}},type:"if",locations:[{start:{line:90,column:2},end:{line:94,column:3}},{start:{line:90,column:2},end:{line:94,column:3}}],line:90},"26":{loc:{start:{line:90,column:6},end:{line:90,column:48}},type:"binary-expr",locations:[{start:{line:90,column:6},end:{line:90,column:26}},{start:{line:90,column:30},end:{line:90,column:48}}],line:90},"27":{loc:{start:{line:91,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:93,column:5}},{start:{line:91,column:4},end:{line:93,column:5}}],line:91},"28":{loc:{start:{line:96,column:20},end:{line:96,column:62}},type:"binary-expr",locations:[{start:{line:96,column:20},end:{line:96,column:40}},{start:{line:96,column:44},end:{line:96,column:62}}],line:96},"29":{loc:{start:{line:98,column:2},end:{line:100,column:3}},type:"if",locations:[{start:{line:98,column:2},end:{line:100,column:3}},{start:{line:98,column:2},end:{line:100,column:3}}],line:98},"30":{loc:{start:{line:108,column:2},end:{line:110,column:3}},type:"if",locations:[{start:{line:108,column:2},end:{line:110,column:3}},{start:{line:108,column:2},end:{line:110,column:3}}],line:108},"31":{loc:{start:{line:112,column:2},end:{line:114,column:3}},type:"if",locations:[{start:{line:112,column:2},end:{line:114,column:3}},{start:{line:112,column:2},end:{line:114,column:3}}],line:112},"32":{loc:{start:{line:112,column:6},end:{line:112,column:70}},type:"binary-expr",locations:[{start:{line:112,column:6},end:{line:112,column:24}},{start:{line:112,column:28},end:{line:112,column:70}}],line:112},"33":{loc:{start:{line:121,column:2},end:{line:123,column:3}},type:"if",locations:[{start:{line:121,column:2},end:{line:123,column:3}},{start:{line:121,column:2},end:{line:123,column:3}}],line:121},"34":{loc:{start:{line:125,column:2},end:{line:127,column:3}},type:"if",locations:[{start:{line:125,column:2},end:{line:127,column:3}},{start:{line:125,column:2},end:{line:127,column:3}}],line:125}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0]},inputSourceMap:{version:3,sources:["../../src/Routers/SchemasRouter.js"],names:["Parse","require","SchemaController","classNameMismatchResponse","bodyClass","pathClass","Error","INVALID_CLASS_NAME","getAllSchemas","req","config","database","loadSchema","clearCache","then","schemaController","getAllClasses","schemas","response","results","getOneSchema","className","params","schema","catch","error","undefined","INTERNAL_SERVER_ERROR","checkIfDefinedSchemasIsUsed","lockSchemas","OPERATION_FORBIDDEN","internalCreateSchema","body","controller","addClassIfNotExists","fields","classLevelPermissions","indexes","internalUpdateSchema","updateClass","createSchema","auth","isReadOnly","path","modifySchema","deleteSchema","classNameIsValid","invalidClassNameMessage","SchemasRouter","PromiseRouter","mountRoutes","route","middleware","promiseEnforceMasterKeyAccess"],mappings:"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",sourcesContent:["// schemas.js\n\nvar Parse = require('parse/node').Parse,\n  SchemaController = require('../Controllers/SchemaController');\n\nimport PromiseRouter from '../PromiseRouter';\nimport * as middleware from '../middlewares';\n\nfunction classNameMismatchResponse(bodyClass, pathClass) {\n  throw new Parse.Error(\n    Parse.Error.INVALID_CLASS_NAME,\n    `Class name mismatch between ${bodyClass} and ${pathClass}.`\n  );\n}\n\nfunction getAllSchemas(req) {\n  return req.config.database\n    .loadSchema({ clearCache: true })\n    .then(schemaController => schemaController.getAllClasses(true))\n    .then(schemas => ({ response: { results: schemas } }));\n}\n\nfunction getOneSchema(req) {\n  const className = req.params.className;\n  return req.config.database\n    .loadSchema({ clearCache: true })\n    .then(schemaController => schemaController.getOneSchema(className, true))\n    .then(schema => ({ response: schema }))\n    .catch(error => {\n      if (error === undefined) {\n        throw new Parse.Error(Parse.Error.INVALID_CLASS_NAME, `Class ${className} does not exist.`);\n      } else {\n        throw new Parse.Error(Parse.Error.INTERNAL_SERVER_ERROR, 'Database adapter error.');\n      }\n    });\n}\n\nconst checkIfDefinedSchemasIsUsed = req => {\n  if (req.config?.schema?.lockSchemas === true) {\n    throw new Parse.Error(\n      Parse.Error.OPERATION_FORBIDDEN,\n      'Cannot perform this operation when schemas options is used.'\n    );\n  }\n};\n\nexport const internalCreateSchema = async (className, body, config) => {\n  const controller = await config.database.loadSchema({ clearCache: true });\n  const response = await controller.addClassIfNotExists(\n    className,\n    body.fields,\n    body.classLevelPermissions,\n    body.indexes\n  );\n  return {\n    response,\n  };\n};\n\nexport const internalUpdateSchema = async (className, body, config) => {\n  const controller = await config.database.loadSchema({ clearCache: true });\n  const response = await controller.updateClass(\n    className,\n    body.fields || {},\n    body.classLevelPermissions,\n    body.indexes,\n    config.database\n  );\n  return { response };\n};\n\nasync function createSchema(req) {\n  checkIfDefinedSchemasIsUsed(req);\n  if (req.auth.isReadOnly) {\n    throw new Parse.Error(\n      Parse.Error.OPERATION_FORBIDDEN,\n      \"read-only masterKey isn't allowed to create a schema.\"\n    );\n  }\n  if (req.params.className && req.body.className) {\n    if (req.params.className != req.body.className) {\n      return classNameMismatchResponse(req.body.className, req.params.className);\n    }\n  }\n\n  const className = req.params.className || req.body.className;\n  if (!className) {\n    throw new Parse.Error(135, `POST ${req.path} needs a class name.`);\n  }\n\n  return await internalCreateSchema(className, req.body, req.config);\n}\n\nfunction modifySchema(req) {\n  checkIfDefinedSchemasIsUsed(req);\n  if (req.auth.isReadOnly) {\n    throw new Parse.Error(\n      Parse.Error.OPERATION_FORBIDDEN,\n      \"read-only masterKey isn't allowed to update a schema.\"\n    );\n  }\n  if (req.body.className && req.body.className != req.params.className) {\n    return classNameMismatchResponse(req.body.className, req.params.className);\n  }\n  const className = req.params.className;\n\n  return internalUpdateSchema(className, req.body, req.config);\n}\n\nconst deleteSchema = req => {\n  if (req.auth.isReadOnly) {\n    throw new Parse.Error(\n      Parse.Error.OPERATION_FORBIDDEN,\n      \"read-only masterKey isn't allowed to delete a schema.\"\n    );\n  }\n  if (!SchemaController.classNameIsValid(req.params.className)) {\n    throw new Parse.Error(\n      Parse.Error.INVALID_CLASS_NAME,\n      SchemaController.invalidClassNameMessage(req.params.className)\n    );\n  }\n  return req.config.database.deleteSchema(req.params.className).then(() => ({ response: {} }));\n};\n\nexport class SchemasRouter extends PromiseRouter {\n  mountRoutes() {\n    this.route('GET', '/schemas', middleware.promiseEnforceMasterKeyAccess, getAllSchemas);\n    this.route(\n      'GET',\n      '/schemas/:className',\n      middleware.promiseEnforceMasterKeyAccess,\n      getOneSchema\n    );\n    this.route('POST', '/schemas', middleware.promiseEnforceMasterKeyAccess, createSchema);\n    this.route(\n      'POST',\n      '/schemas/:className',\n      middleware.promiseEnforceMasterKeyAccess,\n      createSchema\n    );\n    this.route(\n      'PUT',\n      '/schemas/:className',\n      middleware.promiseEnforceMasterKeyAccess,\n      modifySchema\n    );\n    this.route(\n      'DELETE',\n      '/schemas/:className',\n      middleware.promiseEnforceMasterKeyAccess,\n      deleteSchema\n    );\n  }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3d02c5d66d649e46a3bfa5ee51d2b622966f4192"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_17wx8lt7o9=function(){return actualCoverage;};}return actualCoverage;}cov_17wx8lt7o9();cov_17wx8lt7o9().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_17wx8lt7o9().s[1]++;exports.SchemasRouter=exports.internalUpdateSchema=exports.internalCreateSchema=void 0;var _PromiseRouter=(cov_17wx8lt7o9().s[2]++,_interopRequireDefault(require("../PromiseRouter")));var middleware=(cov_17wx8lt7o9().s[3]++,_interopRequireWildcard(require("../middlewares")));function _getRequireWildcardCache(nodeInterop){cov_17wx8lt7o9().f[0]++;cov_17wx8lt7o9().s[4]++;if(typeof WeakMap!=="function"){cov_17wx8lt7o9().b[0][0]++;cov_17wx8lt7o9().s[5]++;return null;}else{cov_17wx8lt7o9().b[0][1]++;}var cacheBabelInterop=(cov_17wx8lt7o9().s[6]++,new WeakMap());var cacheNodeInterop=(cov_17wx8lt7o9().s[7]++,new WeakMap());cov_17wx8lt7o9().s[8]++;return(_getRequireWildcardCache=function(nodeInterop){cov_17wx8lt7o9().f[1]++;cov_17wx8lt7o9().s[9]++;return nodeInterop?(cov_17wx8lt7o9().b[1][0]++,cacheNodeInterop):(cov_17wx8lt7o9().b[1][1]++,cacheBabelInterop);})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){cov_17wx8lt7o9().f[2]++;cov_17wx8lt7o9().s[10]++;if((cov_17wx8lt7o9().b[3][0]++,!nodeInterop)&&(cov_17wx8lt7o9().b[3][1]++,obj)&&(cov_17wx8lt7o9().b[3][2]++,obj.__esModule)){cov_17wx8lt7o9().b[2][0]++;cov_17wx8lt7o9().s[11]++;return obj;}else{cov_17wx8lt7o9().b[2][1]++;}cov_17wx8lt7o9().s[12]++;if((cov_17wx8lt7o9().b[5][0]++,obj===null)||(cov_17wx8lt7o9().b[5][1]++,typeof obj!=="object")&&(cov_17wx8lt7o9().b[5][2]++,typeof obj!=="function")){cov_17wx8lt7o9().b[4][0]++;cov_17wx8lt7o9().s[13]++;return{default:obj};}else{cov_17wx8lt7o9().b[4][1]++;}var cache=(cov_17wx8lt7o9().s[14]++,_getRequireWildcardCache(nodeInterop));cov_17wx8lt7o9().s[15]++;if((cov_17wx8lt7o9().b[7][0]++,cache)&&(cov_17wx8lt7o9().b[7][1]++,cache.has(obj))){cov_17wx8lt7o9().b[6][0]++;cov_17wx8lt7o9().s[16]++;return cache.get(obj);}else{cov_17wx8lt7o9().b[6][1]++;}var newObj=(cov_17wx8lt7o9().s[17]++,{});var hasPropertyDescriptor=(cov_17wx8lt7o9().s[18]++,(cov_17wx8lt7o9().b[8][0]++,Object.defineProperty)&&(cov_17wx8lt7o9().b[8][1]++,Object.getOwnPropertyDescriptor));cov_17wx8lt7o9().s[19]++;for(var key in obj){cov_17wx8lt7o9().s[20]++;if((cov_17wx8lt7o9().b[10][0]++,key!=="default")&&(cov_17wx8lt7o9().b[10][1]++,Object.prototype.hasOwnProperty.call(obj,key))){cov_17wx8lt7o9().b[9][0]++;var desc=(cov_17wx8lt7o9().s[21]++,hasPropertyDescriptor?(cov_17wx8lt7o9().b[11][0]++,Object.getOwnPropertyDescriptor(obj,key)):(cov_17wx8lt7o9().b[11][1]++,null));cov_17wx8lt7o9().s[22]++;if((cov_17wx8lt7o9().b[13][0]++,desc)&&((cov_17wx8lt7o9().b[13][1]++,desc.get)||(cov_17wx8lt7o9().b[13][2]++,desc.set))){cov_17wx8lt7o9().b[12][0]++;cov_17wx8lt7o9().s[23]++;Object.defineProperty(newObj,key,desc);}else{cov_17wx8lt7o9().b[12][1]++;cov_17wx8lt7o9().s[24]++;newObj[key]=obj[key];}}else{cov_17wx8lt7o9().b[9][1]++;}}cov_17wx8lt7o9().s[25]++;newObj.default=obj;cov_17wx8lt7o9().s[26]++;if(cache){cov_17wx8lt7o9().b[14][0]++;cov_17wx8lt7o9().s[27]++;cache.set(obj,newObj);}else{cov_17wx8lt7o9().b[14][1]++;}cov_17wx8lt7o9().s[28]++;return newObj;}function _interopRequireDefault(obj){cov_17wx8lt7o9().f[3]++;cov_17wx8lt7o9().s[29]++;return(cov_17wx8lt7o9().b[16][0]++,obj)&&(cov_17wx8lt7o9().b[16][1]++,obj.__esModule)?(cov_17wx8lt7o9().b[15][0]++,obj):(cov_17wx8lt7o9().b[15][1]++,{default:obj});}// schemas.js
var Parse=(cov_17wx8lt7o9().s[30]++,require('parse/node').Parse),SchemaController=(cov_17wx8lt7o9().s[31]++,require('../Controllers/SchemaController'));function classNameMismatchResponse(bodyClass,pathClass){cov_17wx8lt7o9().f[4]++;cov_17wx8lt7o9().s[32]++;throw new Parse.Error(Parse.Error.INVALID_CLASS_NAME,`Class name mismatch between ${bodyClass} and ${pathClass}.`);}function getAllSchemas(req){cov_17wx8lt7o9().f[5]++;cov_17wx8lt7o9().s[33]++;return req.config.database.loadSchema({clearCache:true}).then(schemaController=>{cov_17wx8lt7o9().f[6]++;cov_17wx8lt7o9().s[34]++;return schemaController.getAllClasses(true);}).then(schemas=>{cov_17wx8lt7o9().f[7]++;cov_17wx8lt7o9().s[35]++;return{response:{results:schemas}};});}function getOneSchema(req){cov_17wx8lt7o9().f[8]++;const className=(cov_17wx8lt7o9().s[36]++,req.params.className);cov_17wx8lt7o9().s[37]++;return req.config.database.loadSchema({clearCache:true}).then(schemaController=>{cov_17wx8lt7o9().f[9]++;cov_17wx8lt7o9().s[38]++;return schemaController.getOneSchema(className,true);}).then(schema=>{cov_17wx8lt7o9().f[10]++;cov_17wx8lt7o9().s[39]++;return{response:schema};}).catch(error=>{cov_17wx8lt7o9().f[11]++;cov_17wx8lt7o9().s[40]++;if(error===undefined){cov_17wx8lt7o9().b[17][0]++;cov_17wx8lt7o9().s[41]++;throw new Parse.Error(Parse.Error.INVALID_CLASS_NAME,`Class ${className} does not exist.`);}else{cov_17wx8lt7o9().b[17][1]++;cov_17wx8lt7o9().s[42]++;throw new Parse.Error(Parse.Error.INTERNAL_SERVER_ERROR,'Database adapter error.');}});}cov_17wx8lt7o9().s[43]++;const checkIfDefinedSchemasIsUsed=req=>{cov_17wx8lt7o9().f[12]++;var _req$config,_req$config$schema;cov_17wx8lt7o9().s[44]++;if(((cov_17wx8lt7o9().b[20][0]++,(_req$config=req.config)===null)||(cov_17wx8lt7o9().b[20][1]++,_req$config===void 0)?(cov_17wx8lt7o9().b[19][0]++,void 0):(cov_17wx8lt7o9().b[19][1]++,(cov_17wx8lt7o9().b[22][0]++,(_req$config$schema=_req$config.schema)===null)||(cov_17wx8lt7o9().b[22][1]++,_req$config$schema===void 0)?(cov_17wx8lt7o9().b[21][0]++,void 0):(cov_17wx8lt7o9().b[21][1]++,_req$config$schema.lockSchemas)))===true){cov_17wx8lt7o9().b[18][0]++;cov_17wx8lt7o9().s[45]++;throw new Parse.Error(Parse.Error.OPERATION_FORBIDDEN,'Cannot perform this operation when schemas options is used.');}else{cov_17wx8lt7o9().b[18][1]++;}};cov_17wx8lt7o9().s[46]++;const internalCreateSchema=async(className,body,config)=>{cov_17wx8lt7o9().f[13]++;const controller=(cov_17wx8lt7o9().s[47]++,await config.database.loadSchema({clearCache:true}));const response=(cov_17wx8lt7o9().s[48]++,await controller.addClassIfNotExists(className,body.fields,body.classLevelPermissions,body.indexes));cov_17wx8lt7o9().s[49]++;return{response};};cov_17wx8lt7o9().s[50]++;exports.internalCreateSchema=internalCreateSchema;cov_17wx8lt7o9().s[51]++;const internalUpdateSchema=async(className,body,config)=>{cov_17wx8lt7o9().f[14]++;const controller=(cov_17wx8lt7o9().s[52]++,await config.database.loadSchema({clearCache:true}));const response=(cov_17wx8lt7o9().s[53]++,await controller.updateClass(className,(cov_17wx8lt7o9().b[23][0]++,body.fields)||(cov_17wx8lt7o9().b[23][1]++,{}),body.classLevelPermissions,body.indexes,config.database));cov_17wx8lt7o9().s[54]++;return{response};};cov_17wx8lt7o9().s[55]++;exports.internalUpdateSchema=internalUpdateSchema;async function createSchema(req){cov_17wx8lt7o9().f[15]++;cov_17wx8lt7o9().s[56]++;checkIfDefinedSchemasIsUsed(req);cov_17wx8lt7o9().s[57]++;if(req.auth.isReadOnly){cov_17wx8lt7o9().b[24][0]++;cov_17wx8lt7o9().s[58]++;throw new Parse.Error(Parse.Error.OPERATION_FORBIDDEN,"read-only masterKey isn't allowed to create a schema.");}else{cov_17wx8lt7o9().b[24][1]++;}cov_17wx8lt7o9().s[59]++;if((cov_17wx8lt7o9().b[26][0]++,req.params.className)&&(cov_17wx8lt7o9().b[26][1]++,req.body.className)){cov_17wx8lt7o9().b[25][0]++;cov_17wx8lt7o9().s[60]++;if(req.params.className!=req.body.className){cov_17wx8lt7o9().b[27][0]++;cov_17wx8lt7o9().s[61]++;return classNameMismatchResponse(req.body.className,req.params.className);}else{cov_17wx8lt7o9().b[27][1]++;}}else{cov_17wx8lt7o9().b[25][1]++;}const className=(cov_17wx8lt7o9().s[62]++,(cov_17wx8lt7o9().b[28][0]++,req.params.className)||(cov_17wx8lt7o9().b[28][1]++,req.body.className));cov_17wx8lt7o9().s[63]++;if(!className){cov_17wx8lt7o9().b[29][0]++;cov_17wx8lt7o9().s[64]++;throw new Parse.Error(135,`POST ${req.path} needs a class name.`);}else{cov_17wx8lt7o9().b[29][1]++;}cov_17wx8lt7o9().s[65]++;return await internalCreateSchema(className,req.body,req.config);}function modifySchema(req){cov_17wx8lt7o9().f[16]++;cov_17wx8lt7o9().s[66]++;checkIfDefinedSchemasIsUsed(req);cov_17wx8lt7o9().s[67]++;if(req.auth.isReadOnly){cov_17wx8lt7o9().b[30][0]++;cov_17wx8lt7o9().s[68]++;throw new Parse.Error(Parse.Error.OPERATION_FORBIDDEN,"read-only masterKey isn't allowed to update a schema.");}else{cov_17wx8lt7o9().b[30][1]++;}cov_17wx8lt7o9().s[69]++;if((cov_17wx8lt7o9().b[32][0]++,req.body.className)&&(cov_17wx8lt7o9().b[32][1]++,req.body.className!=req.params.className)){cov_17wx8lt7o9().b[31][0]++;cov_17wx8lt7o9().s[70]++;return classNameMismatchResponse(req.body.className,req.params.className);}else{cov_17wx8lt7o9().b[31][1]++;}const className=(cov_17wx8lt7o9().s[71]++,req.params.className);cov_17wx8lt7o9().s[72]++;return internalUpdateSchema(className,req.body,req.config);}cov_17wx8lt7o9().s[73]++;const deleteSchema=req=>{cov_17wx8lt7o9().f[17]++;cov_17wx8lt7o9().s[74]++;if(req.auth.isReadOnly){cov_17wx8lt7o9().b[33][0]++;cov_17wx8lt7o9().s[75]++;throw new Parse.Error(Parse.Error.OPERATION_FORBIDDEN,"read-only masterKey isn't allowed to delete a schema.");}else{cov_17wx8lt7o9().b[33][1]++;}cov_17wx8lt7o9().s[76]++;if(!SchemaController.classNameIsValid(req.params.className)){cov_17wx8lt7o9().b[34][0]++;cov_17wx8lt7o9().s[77]++;throw new Parse.Error(Parse.Error.INVALID_CLASS_NAME,SchemaController.invalidClassNameMessage(req.params.className));}else{cov_17wx8lt7o9().b[34][1]++;}cov_17wx8lt7o9().s[78]++;return req.config.database.deleteSchema(req.params.className).then(()=>{cov_17wx8lt7o9().f[18]++;cov_17wx8lt7o9().s[79]++;return{response:{}};});};class SchemasRouter extends(_PromiseRouter.default){mountRoutes(){cov_17wx8lt7o9().f[19]++;cov_17wx8lt7o9().s[80]++;this.route('GET','/schemas',middleware.promiseEnforceMasterKeyAccess,getAllSchemas);cov_17wx8lt7o9().s[81]++;this.route('GET','/schemas/:className',middleware.promiseEnforceMasterKeyAccess,getOneSchema);cov_17wx8lt7o9().s[82]++;this.route('POST','/schemas',middleware.promiseEnforceMasterKeyAccess,createSchema);cov_17wx8lt7o9().s[83]++;this.route('POST','/schemas/:className',middleware.promiseEnforceMasterKeyAccess,createSchema);cov_17wx8lt7o9().s[84]++;this.route('PUT','/schemas/:className',middleware.promiseEnforceMasterKeyAccess,modifySchema);cov_17wx8lt7o9().s[85]++;this.route('DELETE','/schemas/:className',middleware.promiseEnforceMasterKeyAccess,deleteSchema);}}cov_17wx8lt7o9().s[86]++;exports.SchemasRouter=SchemasRouter;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Sb3V0ZXJzL1NjaGVtYXNSb3V0ZXIuanMiXSwibmFtZXMiOlsiUGFyc2UiLCJyZXF1aXJlIiwiU2NoZW1hQ29udHJvbGxlciIsImNsYXNzTmFtZU1pc21hdGNoUmVzcG9uc2UiLCJib2R5Q2xhc3MiLCJwYXRoQ2xhc3MiLCJFcnJvciIsIklOVkFMSURfQ0xBU1NfTkFNRSIsImdldEFsbFNjaGVtYXMiLCJyZXEiLCJjb25maWciLCJkYXRhYmFzZSIsImxvYWRTY2hlbWEiLCJjbGVhckNhY2hlIiwidGhlbiIsInNjaGVtYUNvbnRyb2xsZXIiLCJnZXRBbGxDbGFzc2VzIiwic2NoZW1hcyIsInJlc3BvbnNlIiwicmVzdWx0cyIsImdldE9uZVNjaGVtYSIsImNsYXNzTmFtZSIsInBhcmFtcyIsInNjaGVtYSIsImNhdGNoIiwiZXJyb3IiLCJ1bmRlZmluZWQiLCJJTlRFUk5BTF9TRVJWRVJfRVJST1IiLCJjaGVja0lmRGVmaW5lZFNjaGVtYXNJc1VzZWQiLCJsb2NrU2NoZW1hcyIsIk9QRVJBVElPTl9GT1JCSURERU4iLCJpbnRlcm5hbENyZWF0ZVNjaGVtYSIsImJvZHkiLCJjb250cm9sbGVyIiwiYWRkQ2xhc3NJZk5vdEV4aXN0cyIsImZpZWxkcyIsImNsYXNzTGV2ZWxQZXJtaXNzaW9ucyIsImluZGV4ZXMiLCJpbnRlcm5hbFVwZGF0ZVNjaGVtYSIsInVwZGF0ZUNsYXNzIiwiY3JlYXRlU2NoZW1hIiwiYXV0aCIsImlzUmVhZE9ubHkiLCJwYXRoIiwibW9kaWZ5U2NoZW1hIiwiZGVsZXRlU2NoZW1hIiwiY2xhc3NOYW1lSXNWYWxpZCIsImludmFsaWRDbGFzc05hbWVNZXNzYWdlIiwiU2NoZW1hc1JvdXRlciIsIlByb21pc2VSb3V0ZXIiLCJtb3VudFJvdXRlcyIsInJvdXRlIiwibWlkZGxld2FyZSIsInByb21pc2VFbmZvcmNlTWFzdGVyS2V5QWNjZXNzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBS0E7O0FBQ0E7Ozs7Ozs7O0FBTkE7QUFF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LHFCQUZGLEVBR0VDLFVBQVUsQ0FBQ0MsNkJBSGIsRUFJRVIsWUFKRjtBQU1EOztBQTVCOEMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzY2hlbWFzLmpzXG5cbnZhciBQYXJzZSA9IHJlcXVpcmUoJ3BhcnNlL25vZGUnKS5QYXJzZSxcbiAgU2NoZW1hQ29udHJvbGxlciA9IHJlcXVpcmUoJy4uL0NvbnRyb2xsZXJzL1NjaGVtYUNvbnRyb2xsZXInKTtcblxuaW1wb3J0IFByb21pc2VSb3V0ZXIgZnJvbSAnLi4vUHJvbWlzZVJvdXRlcic7XG5pbXBvcnQgKiBhcyBtaWRkbGV3YXJlIGZyb20gJy4uL21pZGRsZXdhcmVzJztcblxuZnVuY3Rpb24gY2xhc3NOYW1lTWlzbWF0Y2hSZXNwb25zZShib2R5Q2xhc3MsIHBhdGhDbGFzcykge1xuICB0aHJvdyBuZXcgUGFyc2UuRXJyb3IoXG4gICAgUGFyc2UuRXJyb3IuSU5WQUxJRF9DTEFTU19OQU1FLFxuICAgIGBDbGFzcyBuYW1lIG1pc21hdGNoIGJldHdlZW4gJHtib2R5Q2xhc3N9IGFuZCAke3BhdGhDbGFzc30uYFxuICApO1xufVxuXG5mdW5jdGlvbiBnZXRBbGxTY2hlbWFzKHJlcSkge1xuICByZXR1cm4gcmVxLmNvbmZpZy5kYXRhYmFzZVxuICAgIC5sb2FkU2NoZW1hKHsgY2xlYXJDYWNoZTogdHJ1ZSB9KVxuICAgIC50aGVuKHNjaGVtYUNvbnRyb2xsZXIgPT4gc2NoZW1hQ29udHJvbGxlci5nZXRBbGxDbGFzc2VzKHRydWUpKVxuICAgIC50aGVuKHNjaGVtYXMgPT4gKHsgcmVzcG9uc2U6IHsgcmVzdWx0czogc2NoZW1hcyB9IH0pKTtcbn1cblxuZnVuY3Rpb24gZ2V0T25lU2NoZW1hKHJlcSkge1xuICBjb25zdCBjbGFzc05hbWUgPSByZXEucGFyYW1zLmNsYXNzTmFtZTtcbiAgcmV0dXJuIHJlcS5jb25maWcuZGF0YWJhc2VcbiAgICAubG9hZFNjaGVtYSh7IGNsZWFyQ2FjaGU6IHRydWUgfSlcbiAgICAudGhlbihzY2hlbWFDb250cm9sbGVyID0+IHNjaGVtYUNvbnRyb2xsZXIuZ2V0T25lU2NoZW1hKGNsYXNzTmFtZSwgdHJ1ZSkpXG4gICAgLnRoZW4oc2NoZW1hID0+ICh7IHJlc3BvbnNlOiBzY2hlbWEgfSkpXG4gICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgIGlmIChlcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihQYXJzZS5FcnJvci5JTlZBTElEX0NMQVNTX05BTUUsIGBDbGFzcyAke2NsYXNzTmFtZX0gZG9lcyBub3QgZXhpc3QuYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgUGFyc2UuRXJyb3IoUGFyc2UuRXJyb3IuSU5URVJOQUxfU0VSVkVSX0VSUk9SLCAnRGF0YWJhc2UgYWRhcHRlciBlcnJvci4nKTtcbiAgICAgIH1cbiAgICB9KTtcbn1cblxuY29uc3QgY2hlY2tJZkRlZmluZWRTY2hlbWFzSXNVc2VkID0gcmVxID0+IHtcbiAgaWYgKHJlcS5jb25maWc/LnNjaGVtYT8ubG9ja1NjaGVtYXMgPT09IHRydWUpIHtcbiAgICB0aHJvdyBuZXcgUGFyc2UuRXJyb3IoXG4gICAgICBQYXJzZS5FcnJvci5PUEVSQVRJT05fRk9SQklEREVOLFxuICAgICAgJ0Nhbm5vdCBwZXJmb3JtIHRoaXMgb3BlcmF0aW9uIHdoZW4gc2NoZW1hcyBvcHRpb25zIGlzIHVzZWQuJ1xuICAgICk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBpbnRlcm5hbENyZWF0ZVNjaGVtYSA9IGFzeW5jIChjbGFzc05hbWUsIGJvZHksIGNvbmZpZykgPT4ge1xuICBjb25zdCBjb250cm9sbGVyID0gYXdhaXQgY29uZmlnLmRhdGFiYXNlLmxvYWRTY2hlbWEoeyBjbGVhckNhY2hlOiB0cnVlIH0pO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNvbnRyb2xsZXIuYWRkQ2xhc3NJZk5vdEV4aXN0cyhcbiAgICBjbGFzc05hbWUsXG4gICAgYm9keS5maWVsZHMsXG4gICAgYm9keS5jbGFzc0xldmVsUGVybWlzc2lvbnMsXG4gICAgYm9keS5pbmRleGVzXG4gICk7XG4gIHJldHVybiB7XG4gICAgcmVzcG9uc2UsXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgaW50ZXJuYWxVcGRhdGVTY2hlbWEgPSBhc3luYyAoY2xhc3NOYW1lLCBib2R5LCBjb25maWcpID0+IHtcbiAgY29uc3QgY29udHJvbGxlciA9IGF3YWl0IGNvbmZpZy5kYXRhYmFzZS5sb2FkU2NoZW1hKHsgY2xlYXJDYWNoZTogdHJ1ZSB9KTtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjb250cm9sbGVyLnVwZGF0ZUNsYXNzKFxuICAgIGNsYXNzTmFtZSxcbiAgICBib2R5LmZpZWxkcyB8fCB7fSxcbiAgICBib2R5LmNsYXNzTGV2ZWxQZXJtaXNzaW9ucyxcbiAgICBib2R5LmluZGV4ZXMsXG4gICAgY29uZmlnLmRhdGFiYXNlXG4gICk7XG4gIHJldHVybiB7IHJlc3BvbnNlIH07XG59O1xuXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVTY2hlbWEocmVxKSB7XG4gIGNoZWNrSWZEZWZpbmVkU2NoZW1hc0lzVXNlZChyZXEpO1xuICBpZiAocmVxLmF1dGguaXNSZWFkT25seSkge1xuICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihcbiAgICAgIFBhcnNlLkVycm9yLk9QRVJBVElPTl9GT1JCSURERU4sXG4gICAgICBcInJlYWQtb25seSBtYXN0ZXJLZXkgaXNuJ3QgYWxsb3dlZCB0byBjcmVhdGUgYSBzY2hlbWEuXCJcbiAgICApO1xuICB9XG4gIGlmIChyZXEucGFyYW1zLmNsYXNzTmFtZSAmJiByZXEuYm9keS5jbGFzc05hbWUpIHtcbiAgICBpZiAocmVxLnBhcmFtcy5jbGFzc05hbWUgIT0gcmVxLmJvZHkuY2xhc3NOYW1lKSB7XG4gICAgICByZXR1cm4gY2xhc3NOYW1lTWlzbWF0Y2hSZXNwb25zZShyZXEuYm9keS5jbGFzc05hbWUsIHJlcS5wYXJhbXMuY2xhc3NOYW1lKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBjbGFzc05hbWUgPSByZXEucGFyYW1zLmNsYXNzTmFtZSB8fCByZXEuYm9keS5jbGFzc05hbWU7XG4gIGlmICghY2xhc3NOYW1lKSB7XG4gICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKDEzNSwgYFBPU1QgJHtyZXEucGF0aH0gbmVlZHMgYSBjbGFzcyBuYW1lLmApO1xuICB9XG5cbiAgcmV0dXJuIGF3YWl0IGludGVybmFsQ3JlYXRlU2NoZW1hKGNsYXNzTmFtZSwgcmVxLmJvZHksIHJlcS5jb25maWcpO1xufVxuXG5mdW5jdGlvbiBtb2RpZnlTY2hlbWEocmVxKSB7XG4gIGNoZWNrSWZEZWZpbmVkU2NoZW1hc0lzVXNlZChyZXEpO1xuICBpZiAocmVxLmF1dGguaXNSZWFkT25seSkge1xuICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihcbiAgICAgIFBhcnNlLkVycm9yLk9QRVJBVElPTl9GT1JCSURERU4sXG4gICAgICBcInJlYWQtb25seSBtYXN0ZXJLZXkgaXNuJ3QgYWxsb3dlZCB0byB1cGRhdGUgYSBzY2hlbWEuXCJcbiAgICApO1xuICB9XG4gIGlmIChyZXEuYm9keS5jbGFzc05hbWUgJiYgcmVxLmJvZHkuY2xhc3NOYW1lICE9IHJlcS5wYXJhbXMuY2xhc3NOYW1lKSB7XG4gICAgcmV0dXJuIGNsYXNzTmFtZU1pc21hdGNoUmVzcG9uc2UocmVxLmJvZHkuY2xhc3NOYW1lLCByZXEucGFyYW1zLmNsYXNzTmFtZSk7XG4gIH1cbiAgY29uc3QgY2xhc3NOYW1lID0gcmVxLnBhcmFtcy5jbGFzc05hbWU7XG5cbiAgcmV0dXJuIGludGVybmFsVXBkYXRlU2NoZW1hKGNsYXNzTmFtZSwgcmVxLmJvZHksIHJlcS5jb25maWcpO1xufVxuXG5jb25zdCBkZWxldGVTY2hlbWEgPSByZXEgPT4ge1xuICBpZiAocmVxLmF1dGguaXNSZWFkT25seSkge1xuICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihcbiAgICAgIFBhcnNlLkVycm9yLk9QRVJBVElPTl9GT1JCSURERU4sXG4gICAgICBcInJlYWQtb25seSBtYXN0ZXJLZXkgaXNuJ3QgYWxsb3dlZCB0byBkZWxldGUgYSBzY2hlbWEuXCJcbiAgICApO1xuICB9XG4gIGlmICghU2NoZW1hQ29udHJvbGxlci5jbGFzc05hbWVJc1ZhbGlkKHJlcS5wYXJhbXMuY2xhc3NOYW1lKSkge1xuICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihcbiAgICAgIFBhcnNlLkVycm9yLklOVkFMSURfQ0xBU1NfTkFNRSxcbiAgICAgIFNjaGVtYUNvbnRyb2xsZXIuaW52YWxpZENsYXNzTmFtZU1lc3NhZ2UocmVxLnBhcmFtcy5jbGFzc05hbWUpXG4gICAgKTtcbiAgfVxuICByZXR1cm4gcmVxLmNvbmZpZy5kYXRhYmFzZS5kZWxldGVTY2hlbWEocmVxLnBhcmFtcy5jbGFzc05hbWUpLnRoZW4oKCkgPT4gKHsgcmVzcG9uc2U6IHt9IH0pKTtcbn07XG5cbmV4cG9ydCBjbGFzcyBTY2hlbWFzUm91dGVyIGV4dGVuZHMgUHJvbWlzZVJvdXRlciB7XG4gIG1vdW50Um91dGVzKCkge1xuICAgIHRoaXMucm91dGUoJ0dFVCcsICcvc2NoZW1hcycsIG1pZGRsZXdhcmUucHJvbWlzZUVuZm9yY2VNYXN0ZXJLZXlBY2Nlc3MsIGdldEFsbFNjaGVtYXMpO1xuICAgIHRoaXMucm91dGUoXG4gICAgICAnR0VUJyxcbiAgICAgICcvc2NoZW1hcy86Y2xhc3NOYW1lJyxcbiAgICAgIG1pZGRsZXdhcmUucHJvbWlzZUVuZm9yY2VNYXN0ZXJLZXlBY2Nlc3MsXG4gICAgICBnZXRPbmVTY2hlbWFcbiAgICApO1xuICAgIHRoaXMucm91dGUoJ1BPU1QnLCAnL3NjaGVtYXMnLCBtaWRkbGV3YXJlLnByb21pc2VFbmZvcmNlTWFzdGVyS2V5QWNjZXNzLCBjcmVhdGVTY2hlbWEpO1xuICAgIHRoaXMucm91dGUoXG4gICAgICAnUE9TVCcsXG4gICAgICAnL3NjaGVtYXMvOmNsYXNzTmFtZScsXG4gICAgICBtaWRkbGV3YXJlLnByb21pc2VFbmZvcmNlTWFzdGVyS2V5QWNjZXNzLFxuICAgICAgY3JlYXRlU2NoZW1hXG4gICAgKTtcbiAgICB0aGlzLnJvdXRlKFxuICAgICAgJ1BVVCcsXG4gICAgICAnL3NjaGVtYXMvOmNsYXNzTmFtZScsXG4gICAgICBtaWRkbGV3YXJlLnByb21pc2VFbmZvcmNlTWFzdGVyS2V5QWNjZXNzLFxuICAgICAgbW9kaWZ5U2NoZW1hXG4gICAgKTtcbiAgICB0aGlzLnJvdXRlKFxuICAgICAgJ0RFTEVURScsXG4gICAgICAnL3NjaGVtYXMvOmNsYXNzTmFtZScsXG4gICAgICBtaWRkbGV3YXJlLnByb21pc2VFbmZvcmNlTWFzdGVyS2V5QWNjZXNzLFxuICAgICAgZGVsZXRlU2NoZW1hXG4gICAgKTtcbiAgfVxufVxuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Sb3V0ZXJzL1NjaGVtYXNSb3V0ZXIuanMiXSwibmFtZXMiOlsiUGFyc2UiLCJyZXF1aXJlIiwiU2NoZW1hQ29udHJvbGxlciIsImJvZHlDbGFzcyIsInBhdGhDbGFzcyIsImNsZWFyQ2FjaGUiLCJzY2hlbWFDb250cm9sbGVyIiwic2NoZW1hcyIsInJlc3BvbnNlIiwicmVzdWx0cyIsImNsYXNzTmFtZSIsInJlcSIsInNjaGVtYSIsImVycm9yIiwiY2hlY2tJZkRlZmluZWRTY2hlbWFzSXNVc2VkIiwiaW50ZXJuYWxDcmVhdGVTY2hlbWEiLCJjb250cm9sbGVyIiwiYm9keSIsImludGVybmFsVXBkYXRlU2NoZW1hIiwiY29uZmlnIiwiY2xhc3NOYW1lTWlzbWF0Y2hSZXNwb25zZSIsInBhdGgiLCJkZWxldGVTY2hlbWEiLCJQcm9taXNlUm91dGVyIiwibW91bnRSb3V0ZXMiLCJtaWRkbGV3YXJlIl0sIm1hcHBpbmdzIjoiOzJSQUtBLEdBQUEsQ0FBQSxjQUFBLDBCQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLGtCQUFBLENBQUEsQ0FBQSxDQUFBLENBQ0EsR0FBQSxDQUFBLFVBQUEsMEJBQUEsdUJBQUEsQ0FBQSxPQUFBLENBQUEsZ0JBQUEsQ0FBQSxDQUFBLENBQUEsQyw2MkZBTkE7QUFFQSxHQUFJQSxDQUFBQSxLQUFLLDJCQUFHQyxPQUFPLENBQVBBLFlBQU8sQ0FBUEEsQ0FBWixLQUFTLENBQVQsQ0FDRUMsZ0JBQWdCLDJCQUFHRCxPQUFPLENBRDVCLGlDQUM0QixDQUFWLENBRGxCLENBTUEsUUFBQSxDQUFBLHlCQUFBLENBQUEsU0FBQSxDQUFBLFNBQUEsQ0FBeUQsa0RBQ3ZELEtBQU0sSUFBSUQsQ0FBQUEsS0FBSyxDQUFULEtBQUEsQ0FDSkEsS0FBSyxDQUFMQSxLQUFBQSxDQURJLGtCQUFBLENBRUgsK0JBQThCRyxTQUFVLFFBQU9DLFNBRmxELEdBQU0sQ0FBTixDQUlELENBRUQsUUFBQSxDQUFBLGFBQUEsQ0FBQSxHQUFBLENB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QUFBLENBQStCQSxVQUFVLENBQXpDLDZCQUFBLENBQUEsWUFBQSxFQVJZLHlCQVNaLEtBQUEsS0FBQSxDQUFBLE1BQUEsQ0FBQSxxQkFBQSxDQUdFQSxVQUFVLENBSFosNkJBQUEsQ0FBQSxZQUFBLEVBVFkseUJBZVosS0FBQSxLQUFBLENBQUEsS0FBQSxDQUFBLHFCQUFBLENBR0VBLFVBQVUsQ0FIWiw2QkFBQSxDQUFBLFlBQUEsRUFmWSx5QkFxQlosS0FBQSxLQUFBLENBQUEsUUFBQSxDQUFBLHFCQUFBLENBR0VBLFVBQVUsQ0FIWiw2QkFBQSxDQUFBLFlBQUEsRUFNRCxDQTVCOEMsQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHNjaGVtYXMuanNcblxudmFyIFBhcnNlID0gcmVxdWlyZSgncGFyc2Uvbm9kZScpLlBhcnNlLFxuICBTY2hlbWFDb250cm9sbGVyID0gcmVxdWlyZSgnLi4vQ29udHJvbGxlcnMvU2NoZW1hQ29udHJvbGxlcicpO1xuXG5pbXBvcnQgUHJvbWlzZVJvdXRlciBmcm9tICcuLi9Qcm9taXNlUm91dGVyJztcbmltcG9ydCAqIGFzIG1pZGRsZXdhcmUgZnJvbSAnLi4vbWlkZGxld2FyZXMnO1xuXG5mdW5jdGlvbiBjbGFzc05hbWVNaXNtYXRjaFJlc3BvbnNlKGJvZHlDbGFzcywgcGF0aENsYXNzKSB7XG4gIHRocm93IG5ldyBQYXJzZS5FcnJvcihcbiAgICBQYXJzZS5FcnJvci5JTlZBTElEX0NMQVNTX05BTUUsXG4gICAgYENsYXNzIG5hbWUgbWlzbWF0Y2ggYmV0d2VlbiAke2JvZHlDbGFzc30gYW5kICR7cGF0aENsYXNzfS5gXG4gICk7XG59XG5cbmZ1bmN0aW9uIGdldEFsbFNjaGVtYXMocmVxKSB7XG4gIHJldHVybiByZXEuY29uZmlnLmRhdGFiYXNlXG4gICAgLmxvYWRTY2hlbWEoeyBjbGVhckNhY2hlOiB0cnVlIH0pXG4gICAgLnRoZW4oc2NoZW1hQ29udHJvbGxlciA9PiBzY2hlbWFDb250cm9sbGVyLmdldEFsbENsYXNzZXModHJ1ZSkpXG4gICAgLnRoZW4oc2NoZW1hcyA9PiAoeyByZXNwb25zZTogeyByZXN1bHRzOiBzY2hlbWFzIH0gfSkpO1xufVxuXG5mdW5jdGlvbiBnZXRPbmVTY2hlbWEocmVxKSB7XG4gIGNvbnN0IGNsYXNzTmFtZSA9IHJlcS5wYXJhbXMuY2xhc3NOYW1lO1xuICByZXR1cm4gcmVxLmNvbmZpZy5kYXRhYmFzZVxuICAgIC5sb2FkU2NoZW1hKHsgY2xlYXJDYWNoZTogdHJ1ZSB9KVxuICAgIC50aGVuKHNjaGVtYUNvbnRyb2xsZXIgPT4gc2NoZW1hQ29udHJvbGxlci5nZXRPbmVTY2hlbWEoY2xhc3NOYW1lLCB0cnVlKSlcbiAgICAudGhlbihzY2hlbWEgPT4gKHsgcmVzcG9uc2U6IHNjaGVtYSB9KSlcbiAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgaWYgKGVycm9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKFBhcnNlLkVycm9yLklOVkFMSURfQ0xBU1NfTkFNRSwgYENsYXNzICR7Y2xhc3NOYW1lfSBkb2VzIG5vdCBleGlzdC5gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihQYXJzZS5FcnJvci5JTlRFUk5BTF9TRVJWRVJfRVJST1IsICdEYXRhYmFzZSBhZGFwdGVyIGVycm9yLicpO1xuICAgICAgfVxuICAgIH0pO1xufVxuXG5jb25zdCBjaGVja0lmRGVmaW5lZFNjaGVtYXNJc1VzZWQgPSByZXEgPT4ge1xuICBpZiAocmVxLmNvbmZpZz8uc2NoZW1hPy5sb2NrU2NoZW1hcyA9PT0gdHJ1ZSkge1xuICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihcbiAgICAgIFBhcnNlLkVycm9yLk9QRVJBVElPTl9GT1JCSURERU4sXG4gICAgICAnQ2Fubm90IHBlcmZvcm0gdGhpcyBvcGVyYXRpb24gd2hlbiBzY2hlbWFzIG9wdGlvbnMgaXMgdXNlZC4nXG4gICAgKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGludGVybmFsQ3JlYXRlU2NoZW1hID0gYXN5bmMgKGNsYXNzTmFtZSwgYm9keSwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGNvbnRyb2xsZXIgPSBhd2FpdCBjb25maWcuZGF0YWJhc2UubG9hZFNjaGVtYSh7IGNsZWFyQ2FjaGU6IHRydWUgfSk7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY29udHJvbGxlci5hZGRDbGFzc0lmTm90RXhpc3RzKFxuICAgIGNsYXNzTmFtZSxcbiAgICBib2R5LmZpZWxkcyxcbiAgICBib2R5LmNsYXNzTGV2ZWxQZXJtaXNzaW9ucyxcbiAgICBib2R5LmluZGV4ZXNcbiAgKTtcbiAgcmV0dXJuIHtcbiAgICByZXNwb25zZSxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBpbnRlcm5hbFVwZGF0ZVNjaGVtYSA9IGFzeW5jIChjbGFzc05hbWUsIGJvZHksIGNvbmZpZykgPT4ge1xuICBjb25zdCBjb250cm9sbGVyID0gYXdhaXQgY29uZmlnLmRhdGFiYXNlLmxvYWRTY2hlbWEoeyBjbGVhckNhY2hlOiB0cnVlIH0pO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNvbnRyb2xsZXIudXBkYXRlQ2xhc3MoXG4gICAgY2xhc3NOYW1lLFxuICAgIGJvZHkuZmllbGRzIHx8IHt9LFxuICAgIGJvZHkuY2xhc3NMZXZlbFBlcm1pc3Npb25zLFxuICAgIGJvZHkuaW5kZXhlcyxcbiAgICBjb25maWcuZGF0YWJhc2VcbiAgKTtcbiAgcmV0dXJuIHsgcmVzcG9uc2UgfTtcbn07XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNjaGVtYShyZXEpIHtcbiAgY2hlY2tJZkRlZmluZWRTY2hlbWFzSXNVc2VkKHJlcSk7XG4gIGlmIChyZXEuYXV0aC5pc1JlYWRPbmx5KSB7XG4gICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKFxuICAgICAgUGFyc2UuRXJyb3IuT1BFUkFUSU9OX0ZPUkJJRERFTixcbiAgICAgIFwicmVhZC1vbmx5IG1hc3RlcktleSBpc24ndCBhbGxvd2VkIHRvIGNyZWF0ZSBhIHNjaGVtYS5cIlxuICAgICk7XG4gIH1cbiAgaWYgKHJlcS5wYXJhbXMuY2xhc3NOYW1lICYmIHJlcS5ib2R5LmNsYXNzTmFtZSkge1xuICAgIGlmIChyZXEucGFyYW1zLmNsYXNzTmFtZSAhPSByZXEuYm9keS5jbGFzc05hbWUpIHtcbiAgICAgIHJldHVybiBjbGFzc05hbWVNaXNtYXRjaFJlc3BvbnNlKHJlcS5ib2R5LmNsYXNzTmFtZSwgcmVxLnBhcmFtcy5jbGFzc05hbWUpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGNsYXNzTmFtZSA9IHJlcS5wYXJhbXMuY2xhc3NOYW1lIHx8IHJlcS5ib2R5LmNsYXNzTmFtZTtcbiAgaWYgKCFjbGFzc05hbWUpIHtcbiAgICB0aHJvdyBuZXcgUGFyc2UuRXJyb3IoMTM1LCBgUE9TVCAke3JlcS5wYXRofSBuZWVkcyBhIGNsYXNzIG5hbWUuYCk7XG4gIH1cblxuICByZXR1cm4gYXdhaXQgaW50ZXJuYWxDcmVhdGVTY2hlbWEoY2xhc3NOYW1lLCByZXEuYm9keSwgcmVxLmNvbmZpZyk7XG59XG5cbmZ1bmN0aW9uIG1vZGlmeVNjaGVtYShyZXEpIHtcbiAgY2hlY2tJZkRlZmluZWRTY2hlbWFzSXNVc2VkKHJlcSk7XG4gIGlmIChyZXEuYXV0aC5pc1JlYWRPbmx5KSB7XG4gICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKFxuICAgICAgUGFyc2UuRXJyb3IuT1BFUkFUSU9OX0ZPUkJJRERFTixcbiAgICAgIFwicmVhZC1vbmx5IG1hc3RlcktleSBpc24ndCBhbGxvd2VkIHRvIHVwZGF0ZSBhIHNjaGVtYS5cIlxuICAgICk7XG4gIH1cbiAgaWYgKHJlcS5ib2R5LmNsYXNzTmFtZSAmJiByZXEuYm9keS5jbGFzc05hbWUgIT0gcmVxLnBhcmFtcy5jbGFzc05hbWUpIHtcbiAgICByZXR1cm4gY2xhc3NOYW1lTWlzbWF0Y2hSZXNwb25zZShyZXEuYm9keS5jbGFzc05hbWUsIHJlcS5wYXJhbXMuY2xhc3NOYW1lKTtcbiAgfVxuICBjb25zdCBjbGFzc05hbWUgPSByZXEucGFyYW1zLmNsYXNzTmFtZTtcblxuICByZXR1cm4gaW50ZXJuYWxVcGRhdGVTY2hlbWEoY2xhc3NOYW1lLCByZXEuYm9keSwgcmVxLmNvbmZpZyk7XG59XG5cbmNvbnN0IGRlbGV0ZVNjaGVtYSA9IHJlcSA9PiB7XG4gIGlmIChyZXEuYXV0aC5pc1JlYWRPbmx5KSB7XG4gICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKFxuICAgICAgUGFyc2UuRXJyb3IuT1BFUkFUSU9OX0ZPUkJJRERFTixcbiAgICAgIFwicmVhZC1vbmx5IG1hc3RlcktleSBpc24ndCBhbGxvd2VkIHRvIGRlbGV0ZSBhIHNjaGVtYS5cIlxuICAgICk7XG4gIH1cbiAgaWYgKCFTY2hlbWFDb250cm9sbGVyLmNsYXNzTmFtZUlzVmFsaWQocmVxLnBhcmFtcy5jbGFzc05hbWUpKSB7XG4gICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKFxuICAgICAgUGFyc2UuRXJyb3IuSU5WQUxJRF9DTEFTU19OQU1FLFxuICAgICAgU2NoZW1hQ29udHJvbGxlci5pbnZhbGlkQ2xhc3NOYW1lTWVzc2FnZShyZXEucGFyYW1zLmNsYXNzTmFtZSlcbiAgICApO1xuICB9XG4gIHJldHVybiByZXEuY29uZmlnLmRhdGFiYXNlLmRlbGV0ZVNjaGVtYShyZXEucGFyYW1zLmNsYXNzTmFtZSkudGhlbigoKSA9PiAoeyByZXNwb25zZToge30gfSkpO1xufTtcblxuZXhwb3J0IGNsYXNzIFNjaGVtYXNSb3V0ZXIgZXh0ZW5kcyBQcm9taXNlUm91dGVyIHtcbiAgbW91bnRSb3V0ZXMoKSB7XG4gICAgdGhpcy5yb3V0ZSgnR0VUJywgJy9zY2hlbWFzJywgbWlkZGxld2FyZS5wcm9taXNlRW5mb3JjZU1hc3RlcktleUFjY2VzcywgZ2V0QWxsU2NoZW1hcyk7XG4gICAgdGhpcy5yb3V0ZShcbiAgICAgICdHRVQnLFxuICAgICAgJy9zY2hlbWFzLzpjbGFzc05hbWUnLFxuICAgICAgbWlkZGxld2FyZS5wcm9taXNlRW5mb3JjZU1hc3RlcktleUFjY2VzcyxcbiAgICAgIGdldE9uZVNjaGVtYVxuICAgICk7XG4gICAgdGhpcy5yb3V0ZSgnUE9TVCcsICcvc2NoZW1hcycsIG1pZGRsZXdhcmUucHJvbWlzZUVuZm9yY2VNYXN0ZXJLZXlBY2Nlc3MsIGNyZWF0ZVNjaGVtYSk7XG4gICAgdGhpcy5yb3V0ZShcbiAgICAgICdQT1NUJyxcbiAgICAgICcvc2NoZW1hcy86Y2xhc3NOYW1lJyxcbiAgICAgIG1pZGRsZXdhcmUucHJvbWlzZUVuZm9yY2VNYXN0ZXJLZXlBY2Nlc3MsXG4gICAgICBjcmVhdGVTY2hlbWFcbiAgICApO1xuICAgIHRoaXMucm91dGUoXG4gICAgICAnUFVUJyxcbiAgICAgICcvc2NoZW1hcy86Y2xhc3NOYW1lJyxcbiAgICAgIG1pZGRsZXdhcmUucHJvbWlzZUVuZm9yY2VNYXN0ZXJLZXlBY2Nlc3MsXG4gICAgICBtb2RpZnlTY2hlbWFcbiAgICApO1xuICAgIHRoaXMucm91dGUoXG4gICAgICAnREVMRVRFJyxcbiAgICAgICcvc2NoZW1hcy86Y2xhc3NOYW1lJyxcbiAgICAgIG1pZGRsZXdhcmUucHJvbWlzZUVuZm9yY2VNYXN0ZXJLZXlBY2Nlc3MsXG4gICAgICBkZWxldGVTY2hlbWFcbiAgICApO1xuICB9XG59XG4iXX0=