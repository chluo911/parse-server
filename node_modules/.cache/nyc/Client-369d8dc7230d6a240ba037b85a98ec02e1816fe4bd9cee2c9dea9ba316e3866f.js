"use strict";function cov_13dkd0hnm8(){var path="/parse-server/lib/LiveQuery/Client.js";var hash="d6180538a0de5705e13b60fa70b930383001ede3";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/LiveQuery/Client.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:24}},"2":{start:{line:8,column:14},end:{line:8,column:58}},"3":{start:{line:10,column:39},end:{line:10,column:93}},"4":{start:{line:12,column:22},end:{line:12,column:80}},"5":{start:{line:16,column:4},end:{line:16,column:17}},"6":{start:{line:17,column:4},end:{line:17,column:41}},"7":{start:{line:18,column:4},end:{line:18,column:37}},"8":{start:{line:19,column:4},end:{line:19,column:37}},"9":{start:{line:20,column:4},end:{line:20,column:41}},"10":{start:{line:21,column:4},end:{line:21,column:20}},"11":{start:{line:22,column:4},end:{line:22,column:39}},"12":{start:{line:23,column:4},end:{line:23,column:52}},"13":{start:{line:24,column:4},end:{line:24,column:55}},"14":{start:{line:25,column:4},end:{line:25,column:59}},"15":{start:{line:26,column:4},end:{line:26,column:48}},"16":{start:{line:27,column:4},end:{line:27,column:46}},"17":{start:{line:28,column:4},end:{line:28,column:48}},"18":{start:{line:29,column:4},end:{line:29,column:48}},"19":{start:{line:30,column:4},end:{line:30,column:46}},"20":{start:{line:34,column:4},end:{line:34,column:59}},"21":{start:{line:36,column:4},end:{line:36,column:33}},"22":{start:{line:40,column:4},end:{line:46,column:8}},"23":{start:{line:50,column:4},end:{line:50,column:60}},"24":{start:{line:54,column:4},end:{line:54,column:49}},"25":{start:{line:58,column:4},end:{line:58,column:52}},"26":{start:{line:62,column:4},end:{line:88,column:6}},"27":{start:{line:63,column:23},end:{line:67,column:7}},"28":{start:{line:69,column:6},end:{line:71,column:7}},"29":{start:{line:70,column:8},end:{line:70,column:47}},"30":{start:{line:73,column:6},end:{line:85,column:7}},"31":{start:{line:76,column:8},end:{line:78,column:9}},"32":{start:{line:77,column:10},end:{line:77,column:69}},"33":{start:{line:80,column:8},end:{line:80,column:77}},"34":{start:{line:82,column:8},end:{line:84,column:9}},"35":{start:{line:83,column:10},end:{line:83,column:89}},"36":{start:{line:87,column:6},end:{line:87,column:73}},"37":{start:{line:92,column:4},end:{line:94,column:5}},"38":{start:{line:93,column:6},end:{line:93,column:29}},"39":{start:{line:96,column:31},end:{line:96,column:33}},"40":{start:{line:98,column:4},end:{line:100,column:5}},"41":{start:{line:99,column:6},end:{line:99,column:57}},"42":{start:{line:102,column:4},end:{line:106,column:5}},"43":{start:{line:103,column:6},end:{line:105,column:7}},"44":{start:{line:104,column:8},end:{line:104,column:59}},"45":{start:{line:108,column:4},end:{line:108,column:30}},"46":{start:{line:113,column:0},end:{line:113,column:24}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:10,column:9},end:{line:10,column:31}},loc:{start:{line:10,column:37},end:{line:10,column:95}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:86},end:{line:31,column:3}},line:15},"2":{name:"(anonymous_2)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:47},end:{line:37,column:3}},line:33},"3":{name:"(anonymous_3)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:84},end:{line:47,column:3}},line:39},"4":{name:"(anonymous_4)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:51},end:{line:51,column:3}},line:49},"5":{name:"(anonymous_5)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:33},end:{line:55,column:3}},line:53},"6":{name:"(anonymous_6)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:36},end:{line:59,column:3}},line:57},"7":{name:"(anonymous_7)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:19},end:{line:89,column:3}},line:61},"8":{name:"(anonymous_8)",decl:{start:{line:62,column:11},end:{line:62,column:12}},loc:{start:{line:62,column:79},end:{line:88,column:5}},line:62},"9":{name:"(anonymous_9)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:45},end:{line:109,column:3}},line:91}},branchMap:{"0":{loc:{start:{line:10,column:46},end:{line:10,column:92}},type:"cond-expr",locations:[{start:{line:10,column:70},end:{line:10,column:73}},{start:{line:10,column:76},end:{line:10,column:92}}],line:10},"1":{loc:{start:{line:10,column:46},end:{line:10,column:67}},type:"binary-expr",locations:[{start:{line:10,column:46},end:{line:10,column:49}},{start:{line:10,column:53},end:{line:10,column:67}}],line:10},"2":{loc:{start:{line:15,column:34},end:{line:15,column:54}},type:"default-arg",locations:[{start:{line:15,column:49},end:{line:15,column:54}}],line:15},"3":{loc:{start:{line:39,column:48},end:{line:39,column:64}},type:"default-arg",locations:[{start:{line:39,column:60},end:{line:39,column:64}}],line:39},"4":{loc:{start:{line:39,column:66},end:{line:39,column:82}},type:"default-arg",locations:[{start:{line:39,column:78},end:{line:39,column:82}}],line:39},"5":{loc:{start:{line:69,column:6},end:{line:71,column:7}},type:"if",locations:[{start:{line:69,column:6},end:{line:71,column:7}},{start:{line:69,column:6},end:{line:71,column:7}}],line:69},"6":{loc:{start:{line:73,column:6},end:{line:85,column:7}},type:"if",locations:[{start:{line:73,column:6},end:{line:85,column:7}},{start:{line:73,column:6},end:{line:85,column:7}}],line:73},"7":{loc:{start:{line:76,column:8},end:{line:78,column:9}},type:"if",locations:[{start:{line:76,column:8},end:{line:78,column:9}},{start:{line:76,column:8},end:{line:78,column:9}}],line:76},"8":{loc:{start:{line:82,column:8},end:{line:84,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:84,column:9}},{start:{line:82,column:8},end:{line:84,column:9}}],line:82},"9":{loc:{start:{line:92,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:92,column:4},end:{line:94,column:5}},{start:{line:92,column:4},end:{line:94,column:5}}],line:92},"10":{loc:{start:{line:103,column:6},end:{line:105,column:7}},type:"if",locations:[{start:{line:103,column:6},end:{line:105,column:7}},{start:{line:103,column:6},end:{line:105,column:7}}],line:103}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0,0],"1":[0,0],"2":[0],"3":[0],"4":[0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},inputSourceMap:{version:3,sources:["../../src/LiveQuery/Client.js"],names:["dafaultFields","Client","constructor","id","parseWebSocket","hasMasterKey","sessionToken","installationId","roles","subscriptionInfos","Map","pushConnect","_pushEvent","pushSubscribe","pushUnsubscribe","pushCreate","pushEnter","pushUpdate","pushDelete","pushLeave","pushResponse","message","logger","verbose","send","pushError","code","error","reconnect","requestId","JSON","stringify","op","addSubscriptionInfo","subscriptionInfo","set","getSubscriptionInfo","get","deleteSubscriptionInfo","delete","type","subscriptionId","parseObjectJSON","parseOriginalObjectJSON","response","clientId","fields","has","_toJSONWithFields","limitedParseObject","field"],mappings:"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",sourcesContent:["import logger from '../logger';\n\nimport type { FlattenedObjectData } from './Subscription';\nexport type Message = { [attr: string]: any };\n\nconst dafaultFields = ['className', 'objectId', 'updatedAt', 'createdAt', 'ACL'];\n\nclass Client {\n  id: number;\n  parseWebSocket: any;\n  hasMasterKey: boolean;\n  sessionToken: string;\n  installationId: string;\n  userId: string;\n  roles: Array<string>;\n  subscriptionInfos: Object;\n  pushConnect: Function;\n  pushSubscribe: Function;\n  pushUnsubscribe: Function;\n  pushCreate: Function;\n  pushEnter: Function;\n  pushUpdate: Function;\n  pushDelete: Function;\n  pushLeave: Function;\n\n  constructor(\n    id: number,\n    parseWebSocket: any,\n    hasMasterKey: boolean = false,\n    sessionToken: string,\n    installationId: string\n  ) {\n    this.id = id;\n    this.parseWebSocket = parseWebSocket;\n    this.hasMasterKey = hasMasterKey;\n    this.sessionToken = sessionToken;\n    this.installationId = installationId;\n    this.roles = [];\n    this.subscriptionInfos = new Map();\n    this.pushConnect = this._pushEvent('connected');\n    this.pushSubscribe = this._pushEvent('subscribed');\n    this.pushUnsubscribe = this._pushEvent('unsubscribed');\n    this.pushCreate = this._pushEvent('create');\n    this.pushEnter = this._pushEvent('enter');\n    this.pushUpdate = this._pushEvent('update');\n    this.pushDelete = this._pushEvent('delete');\n    this.pushLeave = this._pushEvent('leave');\n  }\n\n  static pushResponse(parseWebSocket: any, message: Message): void {\n    logger.verbose('Push Response : %j', message);\n    parseWebSocket.send(message);\n  }\n\n  static pushError(\n    parseWebSocket: any,\n    code: number,\n    error: string,\n    reconnect: boolean = true,\n    requestId: number | void = null\n  ): void {\n    Client.pushResponse(\n      parseWebSocket,\n      JSON.stringify({\n        op: 'error',\n        error,\n        code,\n        reconnect,\n        requestId,\n      })\n    );\n  }\n\n  addSubscriptionInfo(requestId: number, subscriptionInfo: any): void {\n    this.subscriptionInfos.set(requestId, subscriptionInfo);\n  }\n\n  getSubscriptionInfo(requestId: number): any {\n    return this.subscriptionInfos.get(requestId);\n  }\n\n  deleteSubscriptionInfo(requestId: number): void {\n    return this.subscriptionInfos.delete(requestId);\n  }\n\n  _pushEvent(type: string): Function {\n    return function (\n      subscriptionId: number,\n      parseObjectJSON: any,\n      parseOriginalObjectJSON: any\n    ): void {\n      const response: Message = {\n        op: type,\n        clientId: this.id,\n        installationId: this.installationId,\n      };\n      if (typeof subscriptionId !== 'undefined') {\n        response['requestId'] = subscriptionId;\n      }\n      if (typeof parseObjectJSON !== 'undefined') {\n        let fields;\n        if (this.subscriptionInfos.has(subscriptionId)) {\n          fields = this.subscriptionInfos.get(subscriptionId).fields;\n        }\n        response['object'] = this._toJSONWithFields(parseObjectJSON, fields);\n        if (parseOriginalObjectJSON) {\n          response['original'] = this._toJSONWithFields(parseOriginalObjectJSON, fields);\n        }\n      }\n      Client.pushResponse(this.parseWebSocket, JSON.stringify(response));\n    };\n  }\n\n  _toJSONWithFields(parseObjectJSON: any, fields: any): FlattenedObjectData {\n    if (!fields) {\n      return parseObjectJSON;\n    }\n    const limitedParseObject = {};\n    for (const field of dafaultFields) {\n      limitedParseObject[field] = parseObjectJSON[field];\n    }\n    for (const field of fields) {\n      if (field in parseObjectJSON) {\n        limitedParseObject[field] = parseObjectJSON[field];\n      }\n    }\n    return limitedParseObject;\n  }\n}\n\nexport { Client };\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d6180538a0de5705e13b60fa70b930383001ede3"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_13dkd0hnm8=function(){return actualCoverage;};}return actualCoverage;}cov_13dkd0hnm8();cov_13dkd0hnm8().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_13dkd0hnm8().s[1]++;exports.Client=void 0;var _logger=(cov_13dkd0hnm8().s[2]++,_interopRequireDefault(require("../logger")));function _interopRequireDefault(obj){cov_13dkd0hnm8().f[0]++;cov_13dkd0hnm8().s[3]++;return(cov_13dkd0hnm8().b[1][0]++,obj)&&(cov_13dkd0hnm8().b[1][1]++,obj.__esModule)?(cov_13dkd0hnm8().b[0][0]++,obj):(cov_13dkd0hnm8().b[0][1]++,{default:obj});}const dafaultFields=(cov_13dkd0hnm8().s[4]++,['className','objectId','updatedAt','createdAt','ACL']);class Client{constructor(id,parseWebSocket,hasMasterKey=(cov_13dkd0hnm8().b[2][0]++,false),sessionToken,installationId){cov_13dkd0hnm8().f[1]++;cov_13dkd0hnm8().s[5]++;this.id=id;cov_13dkd0hnm8().s[6]++;this.parseWebSocket=parseWebSocket;cov_13dkd0hnm8().s[7]++;this.hasMasterKey=hasMasterKey;cov_13dkd0hnm8().s[8]++;this.sessionToken=sessionToken;cov_13dkd0hnm8().s[9]++;this.installationId=installationId;cov_13dkd0hnm8().s[10]++;this.roles=[];cov_13dkd0hnm8().s[11]++;this.subscriptionInfos=new Map();cov_13dkd0hnm8().s[12]++;this.pushConnect=this._pushEvent('connected');cov_13dkd0hnm8().s[13]++;this.pushSubscribe=this._pushEvent('subscribed');cov_13dkd0hnm8().s[14]++;this.pushUnsubscribe=this._pushEvent('unsubscribed');cov_13dkd0hnm8().s[15]++;this.pushCreate=this._pushEvent('create');cov_13dkd0hnm8().s[16]++;this.pushEnter=this._pushEvent('enter');cov_13dkd0hnm8().s[17]++;this.pushUpdate=this._pushEvent('update');cov_13dkd0hnm8().s[18]++;this.pushDelete=this._pushEvent('delete');cov_13dkd0hnm8().s[19]++;this.pushLeave=this._pushEvent('leave');}static pushResponse(parseWebSocket,message){cov_13dkd0hnm8().f[2]++;cov_13dkd0hnm8().s[20]++;_logger.default.verbose('Push Response : %j',message);cov_13dkd0hnm8().s[21]++;parseWebSocket.send(message);}static pushError(parseWebSocket,code,error,reconnect=(cov_13dkd0hnm8().b[3][0]++,true),requestId=(cov_13dkd0hnm8().b[4][0]++,null)){cov_13dkd0hnm8().f[3]++;cov_13dkd0hnm8().s[22]++;Client.pushResponse(parseWebSocket,JSON.stringify({op:'error',error,code,reconnect,requestId}));}addSubscriptionInfo(requestId,subscriptionInfo){cov_13dkd0hnm8().f[4]++;cov_13dkd0hnm8().s[23]++;this.subscriptionInfos.set(requestId,subscriptionInfo);}getSubscriptionInfo(requestId){cov_13dkd0hnm8().f[5]++;cov_13dkd0hnm8().s[24]++;return this.subscriptionInfos.get(requestId);}deleteSubscriptionInfo(requestId){cov_13dkd0hnm8().f[6]++;cov_13dkd0hnm8().s[25]++;return this.subscriptionInfos.delete(requestId);}_pushEvent(type){cov_13dkd0hnm8().f[7]++;cov_13dkd0hnm8().s[26]++;return function(subscriptionId,parseObjectJSON,parseOriginalObjectJSON){cov_13dkd0hnm8().f[8]++;const response=(cov_13dkd0hnm8().s[27]++,{op:type,clientId:this.id,installationId:this.installationId});cov_13dkd0hnm8().s[28]++;if(typeof subscriptionId!=='undefined'){cov_13dkd0hnm8().b[5][0]++;cov_13dkd0hnm8().s[29]++;response['requestId']=subscriptionId;}else{cov_13dkd0hnm8().b[5][1]++;}cov_13dkd0hnm8().s[30]++;if(typeof parseObjectJSON!=='undefined'){cov_13dkd0hnm8().b[6][0]++;let fields;cov_13dkd0hnm8().s[31]++;if(this.subscriptionInfos.has(subscriptionId)){cov_13dkd0hnm8().b[7][0]++;cov_13dkd0hnm8().s[32]++;fields=this.subscriptionInfos.get(subscriptionId).fields;}else{cov_13dkd0hnm8().b[7][1]++;}cov_13dkd0hnm8().s[33]++;response['object']=this._toJSONWithFields(parseObjectJSON,fields);cov_13dkd0hnm8().s[34]++;if(parseOriginalObjectJSON){cov_13dkd0hnm8().b[8][0]++;cov_13dkd0hnm8().s[35]++;response['original']=this._toJSONWithFields(parseOriginalObjectJSON,fields);}else{cov_13dkd0hnm8().b[8][1]++;}}else{cov_13dkd0hnm8().b[6][1]++;}cov_13dkd0hnm8().s[36]++;Client.pushResponse(this.parseWebSocket,JSON.stringify(response));};}_toJSONWithFields(parseObjectJSON,fields){cov_13dkd0hnm8().f[9]++;cov_13dkd0hnm8().s[37]++;if(!fields){cov_13dkd0hnm8().b[9][0]++;cov_13dkd0hnm8().s[38]++;return parseObjectJSON;}else{cov_13dkd0hnm8().b[9][1]++;}const limitedParseObject=(cov_13dkd0hnm8().s[39]++,{});cov_13dkd0hnm8().s[40]++;for(const field of dafaultFields){cov_13dkd0hnm8().s[41]++;limitedParseObject[field]=parseObjectJSON[field];}cov_13dkd0hnm8().s[42]++;for(const field of fields){cov_13dkd0hnm8().s[43]++;if(field in parseObjectJSON){cov_13dkd0hnm8().b[10][0]++;cov_13dkd0hnm8().s[44]++;limitedParseObject[field]=parseObjectJSON[field];}else{cov_13dkd0hnm8().b[10][1]++;}}cov_13dkd0hnm8().s[45]++;return limitedParseObject;}}cov_13dkd0hnm8().s[46]++;exports.Client=Client;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9MaXZlUXVlcnkvQ2xpZW50LmpzIl0sIm5hbWVzIjpbImRhZmF1bHRGaWVsZHMiLCJDbGllbnQiLCJjb25zdHJ1Y3RvciIsImlkIiwicGFyc2VXZWJTb2NrZXQiLCJoYXNNYXN0ZXJLZXkiLCJzZXNzaW9uVG9rZW4iLCJpbnN0YWxsYXRpb25JZCIsInJvbGVzIiwic3Vic2NyaXB0aW9uSW5mb3MiLCJNYXAiLCJwdXNoQ29ubmVjdCIsIl9wdXNoRXZlbnQiLCJwdXNoU3Vic2NyaWJlIiwicHVzaFVuc3Vic2NyaWJlIiwicHVzaENyZWF0ZSIsInB1c2hFbnRlciIsInB1c2hVcGRhdGUiLCJwdXNoRGVsZXRlIiwicHVzaExlYXZlIiwicHVzaFJlc3BvbnNlIiwibWVzc2FnZSIsImxvZ2dlciIsInZlcmJvc2UiLCJzZW5kIiwicHVzaEVycm9yIiwiY29kZSIsImVycm9yIiwicmVjb25uZWN0IiwicmVxdWVzdElkIiwiSlNPTiIsInN0cmluZ2lmeSIsIm9wIiwiYWRkU3Vic2NyaXB0aW9uSW5mbyIsInN1YnNjcmlwdGlvbkluZm8iLCJzZXQiLCJnZXRTdWJzY3JpcHRpb25JbmZvIiwiZ2V0IiwiZGVsZXRlU3Vic2NyaXB0aW9uSW5mbyIsImRlbGV0ZSIsInR5cGUiLCJzdWJzY3JpcHRpb25JZCIsInBhcnNlT2JqZWN0SlNPTiIsInBhcnNlT3JpZ2luYWxPYmplY3RKU09OIiwicmVzcG9uc2UiLCJjbGllbnRJZCIsImZpZWxkcyIsImhhcyIsIl90b0pTT05XaXRoRmllbGRzIiwibGltaXRlZFBhcnNlT2JqZWN0IiwiZmllbGQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUtBLE1BQU1BLGFBQWEsR0FBRyxDQUFDLFdBQUQsRUFBYyxVQUFkLEVBQTBCLFdBQTFCLEVBQXVDLFdBQXZDLEVBQW9ELEtBQXBELENBQXRCOztBQUVBLE1BQU1DLE1BQU4sQ0FBYTtBQWtCWEMsRUFBQUEsV0FBVyxDQUNUQyxFQURTLEVBRVRDLGNBRlMsRUFHVEMsWUFBcUIsR0FBRyxLQUhmLEVBSVRDLFlBSlMsRUFLVEMsY0FMUyxFQU1UO0FBQ0EsU0FBS0osRUFBTCxHQUFVQSxFQUFWO0FBQ0EsU0FBS0MsY0FBTCxHQUFzQkEsY0FBdEI7QUFDQSxTQUFLQyxZQUFMLEdBQW9CQSxZQUFwQjtBQUNBLFNBQUtDLFlBQUwsR0FBb0JBLFlBQXBCO0FBQ0EsU0FBS0MsY0FBTCxHQUFzQkEsY0FBdEI7QUFDQSxTQUFLQyxLQUFMLEdBQWEsRUFBYjtBQUNBLFNBQUtDLGlCQUFMLEdBQXlCLElBQUlDLEdBQUosRUFBekI7QUFDQSxTQUFLQyxXQUFMLEdBQW1CLEtBQUtDLFVBQUwsQ0FBZ0IsV0FBaEIsQ0FBbkI7QUFDQSxTQUFLQyxhQUFMLEdBQXFCLEtBQUtELFVBQUwsQ0FBZ0IsWUFBaEIsQ0FBckI7QUFDQSxTQUFLRSxlQUFMLEdBQXVCLEtBQUtGLFVBQUwsQ0FBZ0IsY0FBaEIsQ0FBdkI7QUFDQSxTQUFLRyxVQUFMLEdBQWtCLEtBQUtILFVBQUwsQ0FBZ0IsUUFBaEIsQ0FBbEI7QUFDQSxTQUFLSSxTQUFMLEdBQWlCLEtBQUtKLFVBQUwsQ0FBZ0IsT0FBaEIsQ0FBakI7QUFDQSxTQUFLSyxVQUFMLEdBQWtCLEtBQUtMLFVBQUwsQ0FBZ0IsUUFBaEIsQ0FBbEI7QUFDQSxTQUFLTSxVQUFMLEdBQWtCLEtBQUtOLFVBQUwsQ0FBZ0IsUUFBaEIsQ0FBbEI7QUFDQSxTQUFLTyxTQUFMLEdBQWlCLEtBQUtQLFVBQUwsQ0FBZ0IsT0FBaEIsQ0FBakI7QUFDRDs7QUFFa0IsU0FBWlEsWUFBWSxDQUFDaEIsY0FBRCxFQUFzQmlCLE9BQXRCLEVBQThDO0FBQy9EQyxvQkFBT0MsT0FBUCxDQUFlLG9CQUFmLEVBQXFDRixPQUFyQzs7QUFDQWpCLElBQUFBLGNBQWMsQ0FBQ29CLElBQWYsQ0FBb0JILE9BQXBCO0FBQ0Q7O0FBRWUsU0FBVEksU0FBUyxDQUNkckIsY0FEYyxFQUVkc0IsSUFGYyxFQUdkQyxLQUhjLEVBSWRDLFNBQWtCLEdBQUcsSUFKUCxFQUtkQyxTQUF3QixHQUFHLElBTGIsRUFNUjtBQUNONUIsSUFBQUEsTUFBTSxDQUFDbUIsWUFBUCxDQUNFaEIsY0FERixFQUVFMEIsSUFBSSxDQUFDQyxTQUFMLENBQWU7QUFDYkMsTUFBQUEsRUFBRSxFQUFFLE9BRFM7QUFFYkwsTUFBQUEsS0FGYTtBQUdiRCxNQUFBQSxJQUhhO0FBSWJFLE1BQUFBLFNBSmE7QUFLYkMsTUFBQUE7QUFMYSxLQUFmLENBRkY7QUFVRDs7QUFFREksRUFBQUEsbUJBQW1CLENBQUNKLFNBQUQsRUFBb0JLLGdCQUFwQixFQUFpRDtBQUNsRSxTQUFLekIsaUJBQUwsQ0FBdUIwQixHQUF2QixDQUEyQk4sU0FBM0IsRUFBc0NLLGdCQUF0QztBQUNEOztBQUVERSxFQUFBQSxtQkFBbUIsQ0FBQ1AsU0FBRCxFQUF5QjtBQUMxQyxXQUFPLEtBQUtwQixpQkFBTCxDQUF1QjRCLEdBQXZCLENBQTJCUixTQUEzQixDQUFQO0FBQ0Q7O0FBRURTLEVBQUFBLHNCQUFzQixDQUFDVCxTQUFELEVBQTBCO0FBQzlDLFdBQU8sS0FBS3BCLGlCQUFMLENBQXVCOEIsTUFBdkIsQ0FBOEJWLFNBQTlCLENBQVA7QUFDRDs7QUFFRGpCLEVBQUFBLFVBQVUsQ0FBQzRCLElBQUQsRUFBeUI7QUFDakMsV0FBTyxVQUNMQyxjQURLLEVBRUxDLGVBRkssRUFHTEMsdUJBSEssRUFJQztBQUNOLFlBQU1DLFFBQWlCLEdBQUc7QUFDeEJaLFFBQUFBLEVBQUUsRUFBRVEsSUFEb0I7QUFFeEJLLFFBQUFBLFFBQVEsRUFBRSxLQUFLMUMsRUFGUztBQUd4QkksUUFBQUEsY0FBYyxFQUFFLEtBQUtBO0FBSEcsT0FBMUI7O0FBS0EsVUFBSSxPQUFPa0MsY0FBUCxLQUEwQixXQUE5QixFQUEyQztBQUN6Q0csUUFBQUEsUUFBUSxDQUFDLFdBQUQsQ0FBUixHQUF3QkgsY0FBeEI7QUFDRDs7QUFDRCxVQUFJLE9BQU9DLGVBQVAsS0FBMkIsV0FBL0IsRUFBNEM7QUFDMUMsWUFBSUksTUFBSjs7QUFDQSxZQUFJLEtBQUtyQyxpQkFBTCxDQUF1QnNDLEdBQXZCLENBQTJCTixjQUEzQixDQUFKLEVBQWdEO0FBQzlDSyxVQUFBQSxNQUFNLEdBQUcsS0FBS3JDLGlCQUFMLENBQXVCNEIsR0FBdkIsQ0FBMkJJLGNBQTNCLEVBQTJDSyxNQUFwRDtBQUNEOztBQUNERixRQUFBQSxRQUFRLENBQUMsUUFBRCxDQUFSLEdBQXFCLEtBQUtJLGlCQUFMLENBQXVCTixlQUF2QixFQUF3Q0ksTUFBeEMsQ0FBckI7O0FBQ0EsWUFBSUgsdUJBQUosRUFBNkI7QUFDM0JDLFVBQUFBLFFBQVEsQ0FBQyxVQUFELENBQVIsR0FBdUIsS0FBS0ksaUJBQUwsQ0FBdUJMLHVCQUF2QixFQUFnREcsTUFBaEQsQ0FBdkI7QUFDRDtBQUNGOztBQUNEN0MsTUFBQUEsTUFBTSxDQUFDbUIsWUFBUCxDQUFvQixLQUFLaEIsY0FBekIsRUFBeUMwQixJQUFJLENBQUNDLFNBQUwsQ0FBZWEsUUFBZixDQUF6QztBQUNELEtBeEJEO0FBeUJEOztBQUVESSxFQUFBQSxpQkFBaUIsQ0FBQ04sZUFBRCxFQUF1QkksTUFBdkIsRUFBeUQ7QUFDeEUsUUFBSSxDQUFDQSxNQUFMLEVBQWE7QUFDWCxhQUFPSixlQUFQO0FBQ0Q7O0FBQ0QsVUFBTU8sa0JBQWtCLEdBQUcsRUFBM0I7O0FBQ0EsU0FBSyxNQUFNQyxLQUFYLElBQW9CbEQsYUFBcEIsRUFBbUM7QUFDakNpRCxNQUFBQSxrQkFBa0IsQ0FBQ0MsS0FBRCxDQUFsQixHQUE0QlIsZUFBZSxDQUFDUSxLQUFELENBQTNDO0FBQ0Q7O0FBQ0QsU0FBSyxNQUFNQSxLQUFYLElBQW9CSixNQUFwQixFQUE0QjtBQUMxQixVQUFJSSxLQUFLLElBQUlSLGVBQWIsRUFBOEI7QUFDNUJPLFFBQUFBLGtCQUFrQixDQUFDQyxLQUFELENBQWxCLEdBQTRCUixlQUFlLENBQUNRLEtBQUQsQ0FBM0M7QUFDRDtBQUNGOztBQUNELFdBQU9ELGtCQUFQO0FBQ0Q7O0FBeEhVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZ2dlciBmcm9tICcuLi9sb2dnZXInO1xuXG5pbXBvcnQgdHlwZSB7IEZsYXR0ZW5lZE9iamVjdERhdGEgfSBmcm9tICcuL1N1YnNjcmlwdGlvbic7XG5leHBvcnQgdHlwZSBNZXNzYWdlID0geyBbYXR0cjogc3RyaW5nXTogYW55IH07XG5cbmNvbnN0IGRhZmF1bHRGaWVsZHMgPSBbJ2NsYXNzTmFtZScsICdvYmplY3RJZCcsICd1cGRhdGVkQXQnLCAnY3JlYXRlZEF0JywgJ0FDTCddO1xuXG5jbGFzcyBDbGllbnQge1xuICBpZDogbnVtYmVyO1xuICBwYXJzZVdlYlNvY2tldDogYW55O1xuICBoYXNNYXN0ZXJLZXk6IGJvb2xlYW47XG4gIHNlc3Npb25Ub2tlbjogc3RyaW5nO1xuICBpbnN0YWxsYXRpb25JZDogc3RyaW5nO1xuICB1c2VySWQ6IHN0cmluZztcbiAgcm9sZXM6IEFycmF5PHN0cmluZz47XG4gIHN1YnNjcmlwdGlvbkluZm9zOiBPYmplY3Q7XG4gIHB1c2hDb25uZWN0OiBGdW5jdGlvbjtcbiAgcHVzaFN1YnNjcmliZTogRnVuY3Rpb247XG4gIHB1c2hVbnN1YnNjcmliZTogRnVuY3Rpb247XG4gIHB1c2hDcmVhdGU6IEZ1bmN0aW9uO1xuICBwdXNoRW50ZXI6IEZ1bmN0aW9uO1xuICBwdXNoVXBkYXRlOiBGdW5jdGlvbjtcbiAgcHVzaERlbGV0ZTogRnVuY3Rpb247XG4gIHB1c2hMZWF2ZTogRnVuY3Rpb247XG5cbiAgY29uc3RydWN0b3IoXG4gICAgaWQ6IG51bWJlcixcbiAgICBwYXJzZVdlYlNvY2tldDogYW55LFxuICAgIGhhc01hc3RlcktleTogYm9vbGVhbiA9IGZhbHNlLFxuICAgIHNlc3Npb25Ub2tlbjogc3RyaW5nLFxuICAgIGluc3RhbGxhdGlvbklkOiBzdHJpbmdcbiAgKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMucGFyc2VXZWJTb2NrZXQgPSBwYXJzZVdlYlNvY2tldDtcbiAgICB0aGlzLmhhc01hc3RlcktleSA9IGhhc01hc3RlcktleTtcbiAgICB0aGlzLnNlc3Npb25Ub2tlbiA9IHNlc3Npb25Ub2tlbjtcbiAgICB0aGlzLmluc3RhbGxhdGlvbklkID0gaW5zdGFsbGF0aW9uSWQ7XG4gICAgdGhpcy5yb2xlcyA9IFtdO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uSW5mb3MgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5wdXNoQ29ubmVjdCA9IHRoaXMuX3B1c2hFdmVudCgnY29ubmVjdGVkJyk7XG4gICAgdGhpcy5wdXNoU3Vic2NyaWJlID0gdGhpcy5fcHVzaEV2ZW50KCdzdWJzY3JpYmVkJyk7XG4gICAgdGhpcy5wdXNoVW5zdWJzY3JpYmUgPSB0aGlzLl9wdXNoRXZlbnQoJ3Vuc3Vic2NyaWJlZCcpO1xuICAgIHRoaXMucHVzaENyZWF0ZSA9IHRoaXMuX3B1c2hFdmVudCgnY3JlYXRlJyk7XG4gICAgdGhpcy5wdXNoRW50ZXIgPSB0aGlzLl9wdXNoRXZlbnQoJ2VudGVyJyk7XG4gICAgdGhpcy5wdXNoVXBkYXRlID0gdGhpcy5fcHVzaEV2ZW50KCd1cGRhdGUnKTtcbiAgICB0aGlzLnB1c2hEZWxldGUgPSB0aGlzLl9wdXNoRXZlbnQoJ2RlbGV0ZScpO1xuICAgIHRoaXMucHVzaExlYXZlID0gdGhpcy5fcHVzaEV2ZW50KCdsZWF2ZScpO1xuICB9XG5cbiAgc3RhdGljIHB1c2hSZXNwb25zZShwYXJzZVdlYlNvY2tldDogYW55LCBtZXNzYWdlOiBNZXNzYWdlKTogdm9pZCB7XG4gICAgbG9nZ2VyLnZlcmJvc2UoJ1B1c2ggUmVzcG9uc2UgOiAlaicsIG1lc3NhZ2UpO1xuICAgIHBhcnNlV2ViU29ja2V0LnNlbmQobWVzc2FnZSk7XG4gIH1cblxuICBzdGF0aWMgcHVzaEVycm9yKFxuICAgIHBhcnNlV2ViU29ja2V0OiBhbnksXG4gICAgY29kZTogbnVtYmVyLFxuICAgIGVycm9yOiBzdHJpbmcsXG4gICAgcmVjb25uZWN0OiBib29sZWFuID0gdHJ1ZSxcbiAgICByZXF1ZXN0SWQ6IG51bWJlciB8IHZvaWQgPSBudWxsXG4gICk6IHZvaWQge1xuICAgIENsaWVudC5wdXNoUmVzcG9uc2UoXG4gICAgICBwYXJzZVdlYlNvY2tldCxcbiAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgb3A6ICdlcnJvcicsXG4gICAgICAgIGVycm9yLFxuICAgICAgICBjb2RlLFxuICAgICAgICByZWNvbm5lY3QsXG4gICAgICAgIHJlcXVlc3RJZCxcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGFkZFN1YnNjcmlwdGlvbkluZm8ocmVxdWVzdElkOiBudW1iZXIsIHN1YnNjcmlwdGlvbkluZm86IGFueSk6IHZvaWQge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uSW5mb3Muc2V0KHJlcXVlc3RJZCwgc3Vic2NyaXB0aW9uSW5mbyk7XG4gIH1cblxuICBnZXRTdWJzY3JpcHRpb25JbmZvKHJlcXVlc3RJZDogbnVtYmVyKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25JbmZvcy5nZXQocmVxdWVzdElkKTtcbiAgfVxuXG4gIGRlbGV0ZVN1YnNjcmlwdGlvbkluZm8ocmVxdWVzdElkOiBudW1iZXIpOiB2b2lkIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25JbmZvcy5kZWxldGUocmVxdWVzdElkKTtcbiAgfVxuXG4gIF9wdXNoRXZlbnQodHlwZTogc3RyaW5nKTogRnVuY3Rpb24ge1xuICAgIHJldHVybiBmdW5jdGlvbiAoXG4gICAgICBzdWJzY3JpcHRpb25JZDogbnVtYmVyLFxuICAgICAgcGFyc2VPYmplY3RKU09OOiBhbnksXG4gICAgICBwYXJzZU9yaWdpbmFsT2JqZWN0SlNPTjogYW55XG4gICAgKTogdm9pZCB7XG4gICAgICBjb25zdCByZXNwb25zZTogTWVzc2FnZSA9IHtcbiAgICAgICAgb3A6IHR5cGUsXG4gICAgICAgIGNsaWVudElkOiB0aGlzLmlkLFxuICAgICAgICBpbnN0YWxsYXRpb25JZDogdGhpcy5pbnN0YWxsYXRpb25JZCxcbiAgICAgIH07XG4gICAgICBpZiAodHlwZW9mIHN1YnNjcmlwdGlvbklkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXNwb25zZVsncmVxdWVzdElkJ10gPSBzdWJzY3JpcHRpb25JZDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgcGFyc2VPYmplY3RKU09OICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsZXQgZmllbGRzO1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25JbmZvcy5oYXMoc3Vic2NyaXB0aW9uSWQpKSB7XG4gICAgICAgICAgZmllbGRzID0gdGhpcy5zdWJzY3JpcHRpb25JbmZvcy5nZXQoc3Vic2NyaXB0aW9uSWQpLmZpZWxkcztcbiAgICAgICAgfVxuICAgICAgICByZXNwb25zZVsnb2JqZWN0J10gPSB0aGlzLl90b0pTT05XaXRoRmllbGRzKHBhcnNlT2JqZWN0SlNPTiwgZmllbGRzKTtcbiAgICAgICAgaWYgKHBhcnNlT3JpZ2luYWxPYmplY3RKU09OKSB7XG4gICAgICAgICAgcmVzcG9uc2VbJ29yaWdpbmFsJ10gPSB0aGlzLl90b0pTT05XaXRoRmllbGRzKHBhcnNlT3JpZ2luYWxPYmplY3RKU09OLCBmaWVsZHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBDbGllbnQucHVzaFJlc3BvbnNlKHRoaXMucGFyc2VXZWJTb2NrZXQsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSk7XG4gICAgfTtcbiAgfVxuXG4gIF90b0pTT05XaXRoRmllbGRzKHBhcnNlT2JqZWN0SlNPTjogYW55LCBmaWVsZHM6IGFueSk6IEZsYXR0ZW5lZE9iamVjdERhdGEge1xuICAgIGlmICghZmllbGRzKSB7XG4gICAgICByZXR1cm4gcGFyc2VPYmplY3RKU09OO1xuICAgIH1cbiAgICBjb25zdCBsaW1pdGVkUGFyc2VPYmplY3QgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGRhZmF1bHRGaWVsZHMpIHtcbiAgICAgIGxpbWl0ZWRQYXJzZU9iamVjdFtmaWVsZF0gPSBwYXJzZU9iamVjdEpTT05bZmllbGRdO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGZpZWxkcykge1xuICAgICAgaWYgKGZpZWxkIGluIHBhcnNlT2JqZWN0SlNPTikge1xuICAgICAgICBsaW1pdGVkUGFyc2VPYmplY3RbZmllbGRdID0gcGFyc2VPYmplY3RKU09OW2ZpZWxkXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxpbWl0ZWRQYXJzZU9iamVjdDtcbiAgfVxufVxuXG5leHBvcnQgeyBDbGllbnQgfTtcbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9MaXZlUXVlcnkvQ2xpZW50LmpzIl0sIm5hbWVzIjpbImRhZmF1bHRGaWVsZHMiLCJjb25zdHJ1Y3RvciIsImhhc01hc3RlcktleSIsInB1c2hSZXNwb25zZSIsImxvZ2dlciIsInBhcnNlV2ViU29ja2V0IiwicHVzaEVycm9yIiwicmVjb25uZWN0IiwicmVxdWVzdElkIiwiQ2xpZW50Iiwib3AiLCJhZGRTdWJzY3JpcHRpb25JbmZvIiwiZ2V0U3Vic2NyaXB0aW9uSW5mbyIsImRlbGV0ZVN1YnNjcmlwdGlvbkluZm8iLCJfcHVzaEV2ZW50IiwicmVzcG9uc2UiLCJjbGllbnRJZCIsImluc3RhbGxhdGlvbklkIiwiZmllbGRzIiwiSlNPTiIsIl90b0pTT05XaXRoRmllbGRzIiwibGltaXRlZFBhcnNlT2JqZWN0IiwicGFyc2VPYmplY3RKU09OIiwiZmllbGQiXSwibWFwcGluZ3MiOiI0c2NBZ0NJOzBOQWhDSixHQUFBLENBQUEsT0FBQSwwQkFBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQSxDQUFBLEMsc1BBS0EsS0FBTUEsQ0FBQUEsYUFBYSwwQkFBRyxDQUFBLFdBQUEsQ0FBQSxVQUFBLENBQUEsV0FBQSxDQUFBLFdBQUEsQ0FBdEIsS0FBc0IsQ0FBSCxDQUFuQixDQUVBLEtBQUEsQ0FBQSxNQUFhLENBa0JYQyxXQUFXLENBQUEsRUFBQSxDQUFBLGNBQUEsQ0FHVEMsWUFBcUIsNkJBSFosS0FHWSxDQUhaLENBQUEsWUFBQSxDQUFBLGNBQUEsQ0FNVCxpREFDQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLENBREEsd0JBRUEsS0FBQSxjQUFBLENBQUEsY0FBQSxDQUZBLHdCQUdBLEtBQUEsWUFBQSxDQUFBLFlBQUEsQ0FIQSx3QkFJQSxLQUFBLFlBQUEsQ0FBQSxZQUFBLENBSkEsd0JBS0EsS0FBQSxjQUFBLENBQUEsY0FBQSxDQUxBLHlCQU1BLEtBQUEsS0FBQSxDQUFBLEVBQUEsQ0FOQSx5QkFPQSxLQUFBLGlCQUFBLENB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QSx1QkFBQSxDQUF2QkEsTUFBdUIsQ0FBdkJBLENBQ0QsQ0FGRCxpQ0FHRCxDQVRELGlDQVRNLHlCQW1CTk4sTUFBTSxDQUFOQSxZQUFBQSxDQUFvQixLQUFwQkEsY0FBQUEsQ0FBeUNVLElBQUksQ0FBSkEsU0FBQUEsQ0FBekNWLFFBQXlDVSxDQUF6Q1YsRUF2QkYsQ0FBQSxDQXlCRCxDQUVEVyxpQkFBaUIsQ0FBQSxlQUFBLENBQUEsTUFBQSxDQUF5RCxrREFDeEUsR0FBSSxDQUFKLE1BQUEsQ0FBYSxxREFDWCxNQUFBLENBQUEsZUFBQSxDQUNELENBRkQsaUNBR0EsS0FBTUMsQ0FBQUEsa0JBQWtCLDJCQUF4QixFQUF3QixDQUF4QixDQUp3RSx5QkFLeEUsSUFBSyxLQUFMLENBQUEsS0FBQSxHQUFBLENBQUEsYUFBQSxDQUFtQywwQkFDakNBLGtCQUFrQixDQUFsQkEsS0FBa0IsQ0FBbEJBLENBQTRCQyxlQUFlLENBQTNDRCxLQUEyQyxDQUEzQ0EsQ0FDRCxDQVB1RSx5QkFReEUsSUFBSyxLQUFMLENBQUEsS0FBQSxHQUFBLENBQUEsTUFBQSxDQUE0QiwwQkFDMUIsR0FBSUUsS0FBSyxHQUFULENBQUEsZUFBQSxDQUE4QixzREFDNUJGLGtCQUFrQixDQUFsQkEsS0FBa0IsQ0FBbEJBLENBQTRCQyxlQUFlLENBQTNDRCxLQUEyQyxDQUEzQ0EsQ0FDRCxDQUZELGtDQUdELENBWnVFLHlCQWF4RSxNQUFBLENBQUEsa0JBQUEsQ0FDRCxDQXhIVSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZ2dlciBmcm9tICcuLi9sb2dnZXInO1xuXG5pbXBvcnQgdHlwZSB7IEZsYXR0ZW5lZE9iamVjdERhdGEgfSBmcm9tICcuL1N1YnNjcmlwdGlvbic7XG5leHBvcnQgdHlwZSBNZXNzYWdlID0geyBbYXR0cjogc3RyaW5nXTogYW55IH07XG5cbmNvbnN0IGRhZmF1bHRGaWVsZHMgPSBbJ2NsYXNzTmFtZScsICdvYmplY3RJZCcsICd1cGRhdGVkQXQnLCAnY3JlYXRlZEF0JywgJ0FDTCddO1xuXG5jbGFzcyBDbGllbnQge1xuICBpZDogbnVtYmVyO1xuICBwYXJzZVdlYlNvY2tldDogYW55O1xuICBoYXNNYXN0ZXJLZXk6IGJvb2xlYW47XG4gIHNlc3Npb25Ub2tlbjogc3RyaW5nO1xuICBpbnN0YWxsYXRpb25JZDogc3RyaW5nO1xuICB1c2VySWQ6IHN0cmluZztcbiAgcm9sZXM6IEFycmF5PHN0cmluZz47XG4gIHN1YnNjcmlwdGlvbkluZm9zOiBPYmplY3Q7XG4gIHB1c2hDb25uZWN0OiBGdW5jdGlvbjtcbiAgcHVzaFN1YnNjcmliZTogRnVuY3Rpb247XG4gIHB1c2hVbnN1YnNjcmliZTogRnVuY3Rpb247XG4gIHB1c2hDcmVhdGU6IEZ1bmN0aW9uO1xuICBwdXNoRW50ZXI6IEZ1bmN0aW9uO1xuICBwdXNoVXBkYXRlOiBGdW5jdGlvbjtcbiAgcHVzaERlbGV0ZTogRnVuY3Rpb247XG4gIHB1c2hMZWF2ZTogRnVuY3Rpb247XG5cbiAgY29uc3RydWN0b3IoXG4gICAgaWQ6IG51bWJlcixcbiAgICBwYXJzZVdlYlNvY2tldDogYW55LFxuICAgIGhhc01hc3RlcktleTogYm9vbGVhbiA9IGZhbHNlLFxuICAgIHNlc3Npb25Ub2tlbjogc3RyaW5nLFxuICAgIGluc3RhbGxhdGlvbklkOiBzdHJpbmdcbiAgKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMucGFyc2VXZWJTb2NrZXQgPSBwYXJzZVdlYlNvY2tldDtcbiAgICB0aGlzLmhhc01hc3RlcktleSA9IGhhc01hc3RlcktleTtcbiAgICB0aGlzLnNlc3Npb25Ub2tlbiA9IHNlc3Npb25Ub2tlbjtcbiAgICB0aGlzLmluc3RhbGxhdGlvbklkID0gaW5zdGFsbGF0aW9uSWQ7XG4gICAgdGhpcy5yb2xlcyA9IFtdO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uSW5mb3MgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5wdXNoQ29ubmVjdCA9IHRoaXMuX3B1c2hFdmVudCgnY29ubmVjdGVkJyk7XG4gICAgdGhpcy5wdXNoU3Vic2NyaWJlID0gdGhpcy5fcHVzaEV2ZW50KCdzdWJzY3JpYmVkJyk7XG4gICAgdGhpcy5wdXNoVW5zdWJzY3JpYmUgPSB0aGlzLl9wdXNoRXZlbnQoJ3Vuc3Vic2NyaWJlZCcpO1xuICAgIHRoaXMucHVzaENyZWF0ZSA9IHRoaXMuX3B1c2hFdmVudCgnY3JlYXRlJyk7XG4gICAgdGhpcy5wdXNoRW50ZXIgPSB0aGlzLl9wdXNoRXZlbnQoJ2VudGVyJyk7XG4gICAgdGhpcy5wdXNoVXBkYXRlID0gdGhpcy5fcHVzaEV2ZW50KCd1cGRhdGUnKTtcbiAgICB0aGlzLnB1c2hEZWxldGUgPSB0aGlzLl9wdXNoRXZlbnQoJ2RlbGV0ZScpO1xuICAgIHRoaXMucHVzaExlYXZlID0gdGhpcy5fcHVzaEV2ZW50KCdsZWF2ZScpO1xuICB9XG5cbiAgc3RhdGljIHB1c2hSZXNwb25zZShwYXJzZVdlYlNvY2tldDogYW55LCBtZXNzYWdlOiBNZXNzYWdlKTogdm9pZCB7XG4gICAgbG9nZ2VyLnZlcmJvc2UoJ1B1c2ggUmVzcG9uc2UgOiAlaicsIG1lc3NhZ2UpO1xuICAgIHBhcnNlV2ViU29ja2V0LnNlbmQobWVzc2FnZSk7XG4gIH1cblxuICBzdGF0aWMgcHVzaEVycm9yKFxuICAgIHBhcnNlV2ViU29ja2V0OiBhbnksXG4gICAgY29kZTogbnVtYmVyLFxuICAgIGVycm9yOiBzdHJpbmcsXG4gICAgcmVjb25uZWN0OiBib29sZWFuID0gdHJ1ZSxcbiAgICByZXF1ZXN0SWQ6IG51bWJlciB8IHZvaWQgPSBudWxsXG4gICk6IHZvaWQge1xuICAgIENsaWVudC5wdXNoUmVzcG9uc2UoXG4gICAgICBwYXJzZVdlYlNvY2tldCxcbiAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgb3A6ICdlcnJvcicsXG4gICAgICAgIGVycm9yLFxuICAgICAgICBjb2RlLFxuICAgICAgICByZWNvbm5lY3QsXG4gICAgICAgIHJlcXVlc3RJZCxcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGFkZFN1YnNjcmlwdGlvbkluZm8ocmVxdWVzdElkOiBudW1iZXIsIHN1YnNjcmlwdGlvbkluZm86IGFueSk6IHZvaWQge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uSW5mb3Muc2V0KHJlcXVlc3RJZCwgc3Vic2NyaXB0aW9uSW5mbyk7XG4gIH1cblxuICBnZXRTdWJzY3JpcHRpb25JbmZvKHJlcXVlc3RJZDogbnVtYmVyKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25JbmZvcy5nZXQocmVxdWVzdElkKTtcbiAgfVxuXG4gIGRlbGV0ZVN1YnNjcmlwdGlvbkluZm8ocmVxdWVzdElkOiBudW1iZXIpOiB2b2lkIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25JbmZvcy5kZWxldGUocmVxdWVzdElkKTtcbiAgfVxuXG4gIF9wdXNoRXZlbnQodHlwZTogc3RyaW5nKTogRnVuY3Rpb24ge1xuICAgIHJldHVybiBmdW5jdGlvbiAoXG4gICAgICBzdWJzY3JpcHRpb25JZDogbnVtYmVyLFxuICAgICAgcGFyc2VPYmplY3RKU09OOiBhbnksXG4gICAgICBwYXJzZU9yaWdpbmFsT2JqZWN0SlNPTjogYW55XG4gICAgKTogdm9pZCB7XG4gICAgICBjb25zdCByZXNwb25zZTogTWVzc2FnZSA9IHtcbiAgICAgICAgb3A6IHR5cGUsXG4gICAgICAgIGNsaWVudElkOiB0aGlzLmlkLFxuICAgICAgICBpbnN0YWxsYXRpb25JZDogdGhpcy5pbnN0YWxsYXRpb25JZCxcbiAgICAgIH07XG4gICAgICBpZiAodHlwZW9mIHN1YnNjcmlwdGlvbklkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXNwb25zZVsncmVxdWVzdElkJ10gPSBzdWJzY3JpcHRpb25JZDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgcGFyc2VPYmplY3RKU09OICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsZXQgZmllbGRzO1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25JbmZvcy5oYXMoc3Vic2NyaXB0aW9uSWQpKSB7XG4gICAgICAgICAgZmllbGRzID0gdGhpcy5zdWJzY3JpcHRpb25JbmZvcy5nZXQoc3Vic2NyaXB0aW9uSWQpLmZpZWxkcztcbiAgICAgICAgfVxuICAgICAgICByZXNwb25zZVsnb2JqZWN0J10gPSB0aGlzLl90b0pTT05XaXRoRmllbGRzKHBhcnNlT2JqZWN0SlNPTiwgZmllbGRzKTtcbiAgICAgICAgaWYgKHBhcnNlT3JpZ2luYWxPYmplY3RKU09OKSB7XG4gICAgICAgICAgcmVzcG9uc2VbJ29yaWdpbmFsJ10gPSB0aGlzLl90b0pTT05XaXRoRmllbGRzKHBhcnNlT3JpZ2luYWxPYmplY3RKU09OLCBmaWVsZHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBDbGllbnQucHVzaFJlc3BvbnNlKHRoaXMucGFyc2VXZWJTb2NrZXQsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSk7XG4gICAgfTtcbiAgfVxuXG4gIF90b0pTT05XaXRoRmllbGRzKHBhcnNlT2JqZWN0SlNPTjogYW55LCBmaWVsZHM6IGFueSk6IEZsYXR0ZW5lZE9iamVjdERhdGEge1xuICAgIGlmICghZmllbGRzKSB7XG4gICAgICByZXR1cm4gcGFyc2VPYmplY3RKU09OO1xuICAgIH1cbiAgICBjb25zdCBsaW1pdGVkUGFyc2VPYmplY3QgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGRhZmF1bHRGaWVsZHMpIHtcbiAgICAgIGxpbWl0ZWRQYXJzZU9iamVjdFtmaWVsZF0gPSBwYXJzZU9iamVjdEpTT05bZmllbGRdO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGZpZWxkcykge1xuICAgICAgaWYgKGZpZWxkIGluIHBhcnNlT2JqZWN0SlNPTikge1xuICAgICAgICBsaW1pdGVkUGFyc2VPYmplY3RbZmllbGRdID0gcGFyc2VPYmplY3RKU09OW2ZpZWxkXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxpbWl0ZWRQYXJzZU9iamVjdDtcbiAgfVxufVxuXG5leHBvcnQgeyBDbGllbnQgfTtcbiJdfQ==