"use strict";function cov_27m17uq3tn(){var path="/parse-server/lib/Adapters/AdapterLoader.js";var hash="6c6ac859418f076eab4eaddc9ee2c1d02bc5c477";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Adapters/AdapterLoader.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:34}},"2":{start:{line:7,column:0},end:{line:7,column:25}},"3":{start:{line:22,column:2},end:{line:55,column:3}},"4":{start:{line:23,column:4},end:{line:25,column:5}},"5":{start:{line:24,column:6},end:{line:24,column:21}},"6":{start:{line:28,column:4},end:{line:28,column:59}},"7":{start:{line:29,column:9},end:{line:55,column:3}},"8":{start:{line:30,column:4},end:{line:39,column:5}},"9":{start:{line:31,column:6},end:{line:31,column:30}},"10":{start:{line:33,column:6},end:{line:38,column:7}},"11":{start:{line:34,column:22},end:{line:34,column:29}},"12":{start:{line:35,column:8},end:{line:35,column:36}},"13":{start:{line:37,column:8},end:{line:37,column:16}},"14":{start:{line:40,column:9},end:{line:55,column:3}},"15":{start:{line:42,column:4},end:{line:42,column:31}},"16":{start:{line:44,column:4},end:{line:46,column:5}},"17":{start:{line:45,column:6},end:{line:45,column:32}},"18":{start:{line:48,column:4},end:{line:48,column:52}},"19":{start:{line:49,column:9},end:{line:55,column:3}},"20":{start:{line:50,column:4},end:{line:50,column:67}},"21":{start:{line:51,column:9},end:{line:55,column:3}},"22":{start:{line:52,column:4},end:{line:52,column:66}},"23":{start:{line:53,column:9},end:{line:55,column:3}},"24":{start:{line:54,column:4},end:{line:54,column:68}},"25":{start:{line:58,column:2},end:{line:58,column:17}},"26":{start:{line:61,column:15},end:{line:61,column:26}},"27":{start:{line:62,column:0},end:{line:62,column:27}}},fnMap:{"0":{name:"loadAdapter",decl:{start:{line:21,column:9},end:{line:21,column:20}},loc:{start:{line:21,column:55},end:{line:59,column:1}},line:21}},branchMap:{"0":{loc:{start:{line:22,column:2},end:{line:55,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:55,column:3}},{start:{line:22,column:2},end:{line:55,column:3}}],line:22},"1":{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:23,column:4},end:{line:25,column:5}}],line:23},"2":{loc:{start:{line:29,column:9},end:{line:55,column:3}},type:"if",locations:[{start:{line:29,column:9},end:{line:55,column:3}},{start:{line:29,column:9},end:{line:55,column:3}}],line:29},"3":{loc:{start:{line:33,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:38,column:7}},{start:{line:33,column:6},end:{line:38,column:7}}],line:33},"4":{loc:{start:{line:40,column:9},end:{line:55,column:3}},type:"if",locations:[{start:{line:40,column:9},end:{line:55,column:3}},{start:{line:40,column:9},end:{line:55,column:3}}],line:40},"5":{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:44,column:4},end:{line:46,column:5}}],line:44},"6":{loc:{start:{line:49,column:9},end:{line:55,column:3}},type:"if",locations:[{start:{line:49,column:9},end:{line:55,column:3}},{start:{line:49,column:9},end:{line:55,column:3}}],line:49},"7":{loc:{start:{line:51,column:9},end:{line:55,column:3}},type:"if",locations:[{start:{line:51,column:9},end:{line:55,column:3}},{start:{line:51,column:9},end:{line:55,column:3}}],line:51},"8":{loc:{start:{line:53,column:9},end:{line:55,column:3}},type:"if",locations:[{start:{line:53,column:9},end:{line:55,column:3}},{start:{line:53,column:9},end:{line:55,column:3}}],line:53}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},f:{"0":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},inputSourceMap:{version:3,sources:["../../src/Adapters/AdapterLoader.js"],names:["loadAdapter","adapter","defaultAdapter","options","undefined","e","name","Adapter","require","default","module","class"],mappings:";;;;;;;;AAAA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,WAAT,CAAwBC,OAAxB,EAAiCC,cAAjC,EAAiDC,OAAjD,EAA6D;AAClE,MAAI,CAACF,OAAL,EAAc;AACZ,QAAI,CAACC,cAAL,EAAqB;AACnB,aAAOC,OAAP;AACD,KAHW,CAIZ;;;AACA,WAAOH,WAAW,CAACE,cAAD,EAAiBE,SAAjB,EAA4BD,OAA5B,CAAlB;AACD,GAND,MAMO,IAAI,OAAOF,OAAP,KAAmB,UAAvB,EAAmC;AACxC,QAAI;AACF,aAAOA,OAAO,CAACE,OAAD,CAAd;AACD,KAFD,CAEE,OAAOE,CAAP,EAAU;AACV,UAAIA,CAAC,CAACC,IAAF,KAAW,WAAf,EAA4B;AAC1B,YAAIC,OAAO,GAAGN,OAAd;AACA,eAAO,IAAIM,OAAJ,CAAYJ,OAAZ,CAAP;AACD,OAHD,MAGO;AACL,cAAME,CAAN;AACD;AACF;AACF,GAXM,MAWA,IAAI,OAAOJ,OAAP,KAAmB,QAAvB,EAAiC;AACtC;AACAA,IAAAA,OAAO,GAAGO,OAAO,CAACP,OAAD,CAAjB,CAFsC,CAGtC;;AACA,QAAIA,OAAO,CAACQ,OAAZ,EAAqB;AACnBR,MAAAA,OAAO,GAAGA,OAAO,CAACQ,OAAlB;AACD;;AACD,WAAOT,WAAW,CAACC,OAAD,EAAUG,SAAV,EAAqBD,OAArB,CAAlB;AACD,GARM,MAQA,IAAIF,OAAO,CAACS,MAAZ,EAAoB;AACzB,WAAOV,WAAW,CAACC,OAAO,CAACS,MAAT,EAAiBN,SAAjB,EAA4BH,OAAO,CAACE,OAApC,CAAlB;AACD,GAFM,MAEA,IAAIF,OAAO,CAACU,KAAZ,EAAmB;AACxB,WAAOX,WAAW,CAACC,OAAO,CAACU,KAAT,EAAgBP,SAAhB,EAA2BH,OAAO,CAACE,OAAnC,CAAlB;AACD,GAFM,MAEA,IAAIF,OAAO,CAACA,OAAZ,EAAqB;AAC1B,WAAOD,WAAW,CAACC,OAAO,CAACA,OAAT,EAAkBG,SAAlB,EAA6BH,OAAO,CAACE,OAArC,CAAlB;AACD,GAhCiE,CAiClE;;;AACA,SAAOF,OAAP;AACD;;eAEcD,W",sourcesContent:["/**\n * @module AdapterLoader\n */\n/**\n * @static\n * Attempt to load an adapter or fallback to the default.\n * @param {Adapter} adapter an adapter\n * @param {Adapter} defaultAdapter the default adapter to load\n * @param {any} options options to pass to the contstructor\n * @returns {Object} the loaded adapter\n */\nexport function loadAdapter<T>(adapter, defaultAdapter, options): T {\n  if (!adapter) {\n    if (!defaultAdapter) {\n      return options;\n    }\n    // Load from the default adapter when no adapter is set\n    return loadAdapter(defaultAdapter, undefined, options);\n  } else if (typeof adapter === 'function') {\n    try {\n      return adapter(options);\n    } catch (e) {\n      if (e.name === 'TypeError') {\n        var Adapter = adapter;\n        return new Adapter(options);\n      } else {\n        throw e;\n      }\n    }\n  } else if (typeof adapter === 'string') {\n    /* eslint-disable */\n    adapter = require(adapter);\n    // If it's define as a module, get the default\n    if (adapter.default) {\n      adapter = adapter.default;\n    }\n    return loadAdapter(adapter, undefined, options);\n  } else if (adapter.module) {\n    return loadAdapter(adapter.module, undefined, adapter.options);\n  } else if (adapter.class) {\n    return loadAdapter(adapter.class, undefined, adapter.options);\n  } else if (adapter.adapter) {\n    return loadAdapter(adapter.adapter, undefined, adapter.options);\n  }\n  // return the adapter as provided\n  return adapter;\n}\n\nexport default loadAdapter;\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6c6ac859418f076eab4eaddc9ee2c1d02bc5c477"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_27m17uq3tn=function(){return actualCoverage;};}return actualCoverage;}cov_27m17uq3tn();cov_27m17uq3tn().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_27m17uq3tn().s[1]++;exports.loadAdapter=loadAdapter;cov_27m17uq3tn().s[2]++;exports.default=void 0;/**
 * @module AdapterLoader
 */ /**
 * @static
 * Attempt to load an adapter or fallback to the default.
 * @param {Adapter} adapter an adapter
 * @param {Adapter} defaultAdapter the default adapter to load
 * @param {any} options options to pass to the contstructor
 * @returns {Object} the loaded adapter
 */function loadAdapter(adapter,defaultAdapter,options){cov_27m17uq3tn().f[0]++;cov_27m17uq3tn().s[3]++;if(!adapter){cov_27m17uq3tn().b[0][0]++;cov_27m17uq3tn().s[4]++;if(!defaultAdapter){cov_27m17uq3tn().b[1][0]++;cov_27m17uq3tn().s[5]++;return options;}else{cov_27m17uq3tn().b[1][1]++;}// Load from the default adapter when no adapter is set
cov_27m17uq3tn().s[6]++;return loadAdapter(defaultAdapter,undefined,options);}else{cov_27m17uq3tn().b[0][1]++;cov_27m17uq3tn().s[7]++;if(typeof adapter==='function'){cov_27m17uq3tn().b[2][0]++;cov_27m17uq3tn().s[8]++;try{cov_27m17uq3tn().s[9]++;return adapter(options);}catch(e){cov_27m17uq3tn().s[10]++;if(e.name==='TypeError'){cov_27m17uq3tn().b[3][0]++;var Adapter=(cov_27m17uq3tn().s[11]++,adapter);cov_27m17uq3tn().s[12]++;return new Adapter(options);}else{cov_27m17uq3tn().b[3][1]++;cov_27m17uq3tn().s[13]++;throw e;}}}else{cov_27m17uq3tn().b[2][1]++;cov_27m17uq3tn().s[14]++;if(typeof adapter==='string'){cov_27m17uq3tn().b[4][0]++;cov_27m17uq3tn().s[15]++;/* eslint-disable */adapter=require(adapter);// If it's define as a module, get the default
cov_27m17uq3tn().s[16]++;if(adapter.default){cov_27m17uq3tn().b[5][0]++;cov_27m17uq3tn().s[17]++;adapter=adapter.default;}else{cov_27m17uq3tn().b[5][1]++;}cov_27m17uq3tn().s[18]++;return loadAdapter(adapter,undefined,options);}else{cov_27m17uq3tn().b[4][1]++;cov_27m17uq3tn().s[19]++;if(adapter.module){cov_27m17uq3tn().b[6][0]++;cov_27m17uq3tn().s[20]++;return loadAdapter(adapter.module,undefined,adapter.options);}else{cov_27m17uq3tn().b[6][1]++;cov_27m17uq3tn().s[21]++;if(adapter.class){cov_27m17uq3tn().b[7][0]++;cov_27m17uq3tn().s[22]++;return loadAdapter(adapter.class,undefined,adapter.options);}else{cov_27m17uq3tn().b[7][1]++;cov_27m17uq3tn().s[23]++;if(adapter.adapter){cov_27m17uq3tn().b[8][0]++;cov_27m17uq3tn().s[24]++;return loadAdapter(adapter.adapter,undefined,adapter.options);}else{cov_27m17uq3tn().b[8][1]++;}}}}}}// return the adapter as provided
cov_27m17uq3tn().s[25]++;return adapter;}var _default=(cov_27m17uq3tn().s[26]++,loadAdapter);cov_27m17uq3tn().s[27]++;exports.default=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9BZGFwdGVycy9BZGFwdGVyTG9hZGVyLmpzIl0sIm5hbWVzIjpbImxvYWRBZGFwdGVyIiwiYWRhcHRlciIsImRlZmF1bHRBZGFwdGVyIiwib3B0aW9ucyIsInVuZGVmaW5lZCIsImUiLCJuYW1lIiwiQWRhcHRlciIsInJlcXVpcmUiLCJkZWZhdWx0IiwibW9kdWxlIiwiY2xhc3MiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxTQUFTQSxXQUFULENBQXdCQyxPQUF4QixFQUFpQ0MsY0FBakMsRUFBaURDLE9BQWpELEVBQTZEO0FBQ2xFLE1BQUksQ0FBQ0YsT0FBTCxFQUFjO0FBQ1osUUFBSSxDQUFDQyxjQUFMLEVBQXFCO0FBQ25CLGFBQU9DLE9BQVA7QUFDRCxLQUhXLENBSVo7OztBQUNBLFdBQU9ILFdBQVcsQ0FBQ0UsY0FBRCxFQUFpQkUsU0FBakIsRUFBNEJELE9BQTVCLENBQWxCO0FBQ0QsR0FORCxNQU1PLElBQUksT0FBT0YsT0FBUCxLQUFtQixVQUF2QixFQUFtQztBQUN4QyxRQUFJO0FBQ0YsYUFBT0EsT0FBTyxDQUFDRSxPQUFELENBQWQ7QUFDRCxLQUZELENBRUUsT0FBT0UsQ0FBUCxFQUFVO0FBQ1YsVUFBSUEsQ0FBQyxDQUFDQyxJQUFGLEtBQVcsV0FBZixFQUE0QjtBQUMxQixZQUFJQyxPQUFPLEdBQUdOLE9BQWQ7QUFDQSxlQUFPLElBQUlNLE9BQUosQ0FBWUosT0FBWixDQUFQO0FBQ0QsT0FIRCxNQUdPO0FBQ0wsY0FBTUUsQ0FBTjtBQUNEO0FBQ0Y7QUFDRixHQVhNLE1BV0EsSUFBSSxPQUFPSixPQUFQLEtBQW1CLFFBQXZCLEVBQWlDO0FBQ3RDO0FBQ0FBLElBQUFBLE9BQU8sR0FBR08sT0FBTyxDQUFDUCxPQUFELENBQWpCLENBRnNDLENBR3RDOztBQUNBLFFBQUlBLE9BQU8sQ0FBQ1EsT0FBWixFQUFxQjtBQUNuQlIsTUFBQUEsT0FBTyxHQUFHQSxPQUFPLENBQUNRLE9BQWxCO0FBQ0Q7O0FBQ0QsV0FBT1QsV0FBVyxDQUFDQyxPQUFELEVBQVVHLFNBQVYsRUFBcUJELE9BQXJCLENBQWxCO0FBQ0QsR0FSTSxNQVFBLElBQUlGLE9BQU8sQ0FBQ1MsTUFBWixFQUFvQjtBQUN6QixXQUFPVixXQUFXLENBQUNDLE9BQU8sQ0FBQ1MsTUFBVCxFQUFpQk4sU0FBakIsRUFBNEJILE9BQU8sQ0FBQ0UsT0FBcEMsQ0FBbEI7QUFDRCxHQUZNLE1BRUEsSUFBSUYsT0FBTyxDQUFDVSxLQUFaLEVBQW1CO0FBQ3hCLFdBQU9YLFdBQVcsQ0FBQ0MsT0FBTyxDQUFDVSxLQUFULEVBQWdCUCxTQUFoQixFQUEyQkgsT0FBTyxDQUFDRSxPQUFuQyxDQUFsQjtBQUNELEdBRk0sTUFFQSxJQUFJRixPQUFPLENBQUNBLE9BQVosRUFBcUI7QUFDMUIsV0FBT0QsV0FBVyxDQUFDQyxPQUFPLENBQUNBLE9BQVQsRUFBa0JHLFNBQWxCLEVBQTZCSCxPQUFPLENBQUNFLE9BQXJDLENBQWxCO0FBQ0QsR0FoQ2lFLENBaUNsRTs7O0FBQ0EsU0FBT0YsT0FBUDtBQUNEOztlQUVjRCxXIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbW9kdWxlIEFkYXB0ZXJMb2FkZXJcbiAqL1xuLyoqXG4gKiBAc3RhdGljXG4gKiBBdHRlbXB0IHRvIGxvYWQgYW4gYWRhcHRlciBvciBmYWxsYmFjayB0byB0aGUgZGVmYXVsdC5cbiAqIEBwYXJhbSB7QWRhcHRlcn0gYWRhcHRlciBhbiBhZGFwdGVyXG4gKiBAcGFyYW0ge0FkYXB0ZXJ9IGRlZmF1bHRBZGFwdGVyIHRoZSBkZWZhdWx0IGFkYXB0ZXIgdG8gbG9hZFxuICogQHBhcmFtIHthbnl9IG9wdGlvbnMgb3B0aW9ucyB0byBwYXNzIHRvIHRoZSBjb250c3RydWN0b3JcbiAqIEByZXR1cm5zIHtPYmplY3R9IHRoZSBsb2FkZWQgYWRhcHRlclxuICovXG5leHBvcnQgZnVuY3Rpb24gbG9hZEFkYXB0ZXI8VD4oYWRhcHRlciwgZGVmYXVsdEFkYXB0ZXIsIG9wdGlvbnMpOiBUIHtcbiAgaWYgKCFhZGFwdGVyKSB7XG4gICAgaWYgKCFkZWZhdWx0QWRhcHRlcikge1xuICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfVxuICAgIC8vIExvYWQgZnJvbSB0aGUgZGVmYXVsdCBhZGFwdGVyIHdoZW4gbm8gYWRhcHRlciBpcyBzZXRcbiAgICByZXR1cm4gbG9hZEFkYXB0ZXIoZGVmYXVsdEFkYXB0ZXIsIHVuZGVmaW5lZCwgb3B0aW9ucyk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFkYXB0ZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGFkYXB0ZXIob3B0aW9ucyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUubmFtZSA9PT0gJ1R5cGVFcnJvcicpIHtcbiAgICAgICAgdmFyIEFkYXB0ZXIgPSBhZGFwdGVyO1xuICAgICAgICByZXR1cm4gbmV3IEFkYXB0ZXIob3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgYWRhcHRlciA9PT0gJ3N0cmluZycpIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSAqL1xuICAgIGFkYXB0ZXIgPSByZXF1aXJlKGFkYXB0ZXIpO1xuICAgIC8vIElmIGl0J3MgZGVmaW5lIGFzIGEgbW9kdWxlLCBnZXQgdGhlIGRlZmF1bHRcbiAgICBpZiAoYWRhcHRlci5kZWZhdWx0KSB7XG4gICAgICBhZGFwdGVyID0gYWRhcHRlci5kZWZhdWx0O1xuICAgIH1cbiAgICByZXR1cm4gbG9hZEFkYXB0ZXIoYWRhcHRlciwgdW5kZWZpbmVkLCBvcHRpb25zKTtcbiAgfSBlbHNlIGlmIChhZGFwdGVyLm1vZHVsZSkge1xuICAgIHJldHVybiBsb2FkQWRhcHRlcihhZGFwdGVyLm1vZHVsZSwgdW5kZWZpbmVkLCBhZGFwdGVyLm9wdGlvbnMpO1xuICB9IGVsc2UgaWYgKGFkYXB0ZXIuY2xhc3MpIHtcbiAgICByZXR1cm4gbG9hZEFkYXB0ZXIoYWRhcHRlci5jbGFzcywgdW5kZWZpbmVkLCBhZGFwdGVyLm9wdGlvbnMpO1xuICB9IGVsc2UgaWYgKGFkYXB0ZXIuYWRhcHRlcikge1xuICAgIHJldHVybiBsb2FkQWRhcHRlcihhZGFwdGVyLmFkYXB0ZXIsIHVuZGVmaW5lZCwgYWRhcHRlci5vcHRpb25zKTtcbiAgfVxuICAvLyByZXR1cm4gdGhlIGFkYXB0ZXIgYXMgcHJvdmlkZWRcbiAgcmV0dXJuIGFkYXB0ZXI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGxvYWRBZGFwdGVyO1xuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9BZGFwdGVycy9BZGFwdGVyTG9hZGVyLmpzIl0sIm5hbWVzIjpbImxvYWRBZGFwdGVyIiwiYWRhcHRlciIsImUiLCJBZGFwdGVyIiwicmVxdWlyZSJdLCJtYXBwaW5ncyI6IjJsT0FNQTttUkFOQTtBQUNBO0FBQ0EsRyxDQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FDTyxRQUFBLENBQUEsV0FBQSxDQUFBLE9BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxDQUE2RCxpREFDbEUsR0FBSSxDQUFKLE9BQUEsQ0FBYyxvREFDWixHQUFJLENBQUosY0FBQSxDQUFxQixvREFDbkIsTUFBQSxDQUFBLE9BQUEsQ0FGVSxDQUNaLGlDQUdBO0FBSlksd0JBS1osTUFBT0EsQ0FBQUEsV0FBVyxDQUFBLGNBQUEsQ0FBQSxTQUFBLENBQWxCLE9BQWtCLENBQWxCLENBTEYsQ0FBQSxJQU1PLHVEQUFJLE1BQUEsQ0FBQSxPQUFBLEdBQUosVUFBQSxDQUFtQyxvREFDeEMsR0FBSSx5QkFDRixNQUFPQyxDQUFBQSxPQUFPLENBQWQsT0FBYyxDQUFkLENBREYsQ0FFRSxNQUFBLENBQUEsQ0FBVSwwQkFDVixHQUFJQyxDQUFDLENBQURBLElBQUFBLEdBQUosV0FBQSxDQUE0Qiw0QkFDMUIsR0FBSUMsQ0FBQUEsT0FBTywyQkFBWCxPQUFXLENBQVgsQ0FEMEIseUJBRTFCLE1BQU8sSUFBQSxDQUFBLE9BQUEsQ0FBUCxPQUFPLENBQVAsQ0FGRixDQUFBLElBR08scURBQ0wsS0FBQSxDQUFBLENBQUEsQ0FDRCxDQUNGLENBVkksQ0FBQSxJQVdBLHdEQUFJLE1BQUEsQ0FBQSxPQUFBLEdBQUosUUFBQSxDQUFpQyxxREFDdEMsb0JBQ0FGLE9BQU8sQ0FBR0csT0FBTyxDQUZxQixPQUVyQixDQUFqQkgsQ0FDQTtBQUhzQyx5QkFJdEMsR0FBSUEsT0FBTyxDQUFYLE9BQUEsQ0FBcUIscURBQ25CQSxPQUFPLENBQUdBLE9BQU8sQ0FBakJBLE9BQUFBLENBQ0QsQ0FGRCxpQ0FKc0MseUJBT3RDLE1BQU9ELENBQUFBLFdBQVcsQ0FBQSxPQUFBLENBQUEsU0FBQSxDQUFsQixPQUFrQixDQUFsQixDQVBLLENBQUEsSUFRQSx3REFBSUMsT0FBTyxDQUFYLE1BQUEsQ0FBb0IscURBQ3pCLE1BQU9ELENBQUFBLFdBQVcsQ0FBQ0MsT0FBTyxDQUFSLE1BQUEsQ0FBQSxTQUFBLENBQTRCQSxPQUFPLENBQXJELE9BQWtCLENBQWxCLENBREssQ0FBQSxJQUVBLHdEQUFJQSxPQUFPLENBQVgsS0FBQSxDQUFtQixxREFDeEIsTUFBT0QsQ0FBQUEsV0FBVyxDQUFDQyxPQUFPLENBQVIsS0FBQSxDQUFBLFNBQUEsQ0FBMkJBLE9BQU8sQ0FBcEQsT0FBa0IsQ0FBbEIsQ0FESyxDQUFBLElBRUEsd0RBQUlBLE9BQU8sQ0FBWCxPQUFBLENBQXFCLHFEQUMxQixNQUFPRCxDQUFBQSxXQUFXLENBQUNDLE9BQU8sQ0FBUixPQUFBLENBQUEsU0FBQSxDQUE2QkEsT0FBTyxDQUF0RCxPQUFrQixDQUFsQixDQS9CZ0UsQ0E4QjNELGlDQTlCMkQsS0FpQ2xFO0FBakNrRSx5QkFrQ2xFLE1BQUEsQ0FBQSxPQUFBLENBQ0QsQyx1Q0FFY0QsVyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQG1vZHVsZSBBZGFwdGVyTG9hZGVyXG4gKi9cbi8qKlxuICogQHN0YXRpY1xuICogQXR0ZW1wdCB0byBsb2FkIGFuIGFkYXB0ZXIgb3IgZmFsbGJhY2sgdG8gdGhlIGRlZmF1bHQuXG4gKiBAcGFyYW0ge0FkYXB0ZXJ9IGFkYXB0ZXIgYW4gYWRhcHRlclxuICogQHBhcmFtIHtBZGFwdGVyfSBkZWZhdWx0QWRhcHRlciB0aGUgZGVmYXVsdCBhZGFwdGVyIHRvIGxvYWRcbiAqIEBwYXJhbSB7YW55fSBvcHRpb25zIG9wdGlvbnMgdG8gcGFzcyB0byB0aGUgY29udHN0cnVjdG9yXG4gKiBAcmV0dXJucyB7T2JqZWN0fSB0aGUgbG9hZGVkIGFkYXB0ZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRBZGFwdGVyPFQ+KGFkYXB0ZXIsIGRlZmF1bHRBZGFwdGVyLCBvcHRpb25zKTogVCB7XG4gIGlmICghYWRhcHRlcikge1xuICAgIGlmICghZGVmYXVsdEFkYXB0ZXIpIHtcbiAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cbiAgICAvLyBMb2FkIGZyb20gdGhlIGRlZmF1bHQgYWRhcHRlciB3aGVuIG5vIGFkYXB0ZXIgaXMgc2V0XG4gICAgcmV0dXJuIGxvYWRBZGFwdGVyKGRlZmF1bHRBZGFwdGVyLCB1bmRlZmluZWQsIG9wdGlvbnMpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBhZGFwdGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhZGFwdGVyKG9wdGlvbnMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChlLm5hbWUgPT09ICdUeXBlRXJyb3InKSB7XG4gICAgICAgIHZhciBBZGFwdGVyID0gYWRhcHRlcjtcbiAgICAgICAgcmV0dXJuIG5ldyBBZGFwdGVyKG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFkYXB0ZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgKi9cbiAgICBhZGFwdGVyID0gcmVxdWlyZShhZGFwdGVyKTtcbiAgICAvLyBJZiBpdCdzIGRlZmluZSBhcyBhIG1vZHVsZSwgZ2V0IHRoZSBkZWZhdWx0XG4gICAgaWYgKGFkYXB0ZXIuZGVmYXVsdCkge1xuICAgICAgYWRhcHRlciA9IGFkYXB0ZXIuZGVmYXVsdDtcbiAgICB9XG4gICAgcmV0dXJuIGxvYWRBZGFwdGVyKGFkYXB0ZXIsIHVuZGVmaW5lZCwgb3B0aW9ucyk7XG4gIH0gZWxzZSBpZiAoYWRhcHRlci5tb2R1bGUpIHtcbiAgICByZXR1cm4gbG9hZEFkYXB0ZXIoYWRhcHRlci5tb2R1bGUsIHVuZGVmaW5lZCwgYWRhcHRlci5vcHRpb25zKTtcbiAgfSBlbHNlIGlmIChhZGFwdGVyLmNsYXNzKSB7XG4gICAgcmV0dXJuIGxvYWRBZGFwdGVyKGFkYXB0ZXIuY2xhc3MsIHVuZGVmaW5lZCwgYWRhcHRlci5vcHRpb25zKTtcbiAgfSBlbHNlIGlmIChhZGFwdGVyLmFkYXB0ZXIpIHtcbiAgICByZXR1cm4gbG9hZEFkYXB0ZXIoYWRhcHRlci5hZGFwdGVyLCB1bmRlZmluZWQsIGFkYXB0ZXIub3B0aW9ucyk7XG4gIH1cbiAgLy8gcmV0dXJuIHRoZSBhZGFwdGVyIGFzIHByb3ZpZGVkXG4gIHJldHVybiBhZGFwdGVyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBsb2FkQWRhcHRlcjtcbiJdfQ==