"use strict";function cov_1u3wrytft3(){var path="/parse-server/lib/Routers/PurgeRouter.js";var hash="b5b8eddc1790e4234030e8809997e3a814fdc215";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Routers/PurgeRouter.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:47}},"2":{start:{line:8,column:21},end:{line:8,column:72}},"3":{start:{line:10,column:17},end:{line:10,column:67}},"4":{start:{line:12,column:12},end:{line:12,column:57}},"5":{start:{line:14,column:49},end:{line:14,column:96}},"6":{start:{line:14,column:84},end:{line:14,column:96}},"7":{start:{line:14,column:121},end:{line:14,column:134}},"8":{start:{line:14,column:159},end:{line:14,column:172}},"9":{start:{line:14,column:174},end:{line:14,column:309}},"10":{start:{line:14,column:234},end:{line:14,column:292}},"11":{start:{line:16,column:53},end:{line:16,column:111}},"12":{start:{line:16,column:98},end:{line:16,column:109}},"13":{start:{line:16,column:112},end:{line:16,column:214}},"14":{start:{line:16,column:188},end:{line:16,column:212}},"15":{start:{line:16,column:227},end:{line:16,column:264}},"16":{start:{line:16,column:266},end:{line:16,column:321}},"17":{start:{line:16,column:297},end:{line:16,column:319}},"18":{start:{line:16,column:335},end:{line:16,column:337}},"19":{start:{line:16,column:367},end:{line:16,column:423}},"20":{start:{line:16,column:425},end:{line:16,column:726}},"21":{start:{line:16,column:448},end:{line:16,column:724}},"22":{start:{line:16,column:534},end:{line:16,column:606}},"23":{start:{line:16,column:608},end:{line:16,column:722}},"24":{start:{line:16,column:646},end:{line:16,column:687}},"25":{start:{line:16,column:697},end:{line:16,column:720}},"26":{start:{line:16,column:727},end:{line:16,column:748}},"27":{start:{line:16,column:749},end:{line:16,column:787}},"28":{start:{line:16,column:762},end:{line:16,column:785}},"29":{start:{line:16,column:788},end:{line:16,column:802}},"30":{start:{line:18,column:39},end:{line:18,column:93}},"31":{start:{line:22,column:4},end:{line:24,column:5}},"32":{start:{line:23,column:6},end:{line:23,column:133}},"33":{start:{line:26,column:4},end:{line:46,column:7}},"34":{start:{line:27,column:25},end:{line:27,column:51}},"35":{start:{line:29,column:6},end:{line:33,column:7}},"36":{start:{line:30,column:8},end:{line:30,column:34}},"37":{start:{line:31,column:13},end:{line:33,column:7}},"38":{start:{line:32,column:8},end:{line:32,column:34}},"39":{start:{line:35,column:6},end:{line:37,column:8}},"40":{start:{line:39,column:6},end:{line:43,column:7}},"41":{start:{line:40,column:8},end:{line:42,column:10}},"42":{start:{line:45,column:6},end:{line:45,column:18}},"43":{start:{line:50,column:4},end:{line:52,column:7}},"44":{start:{line:51,column:6},end:{line:51,column:35}},"45":{start:{line:57,column:0},end:{line:57,column:34}},"46":{start:{line:58,column:15},end:{line:58,column:26}},"47":{start:{line:59,column:0},end:{line:59,column:27}}},fnMap:{"0":{name:"_getRequireWildcardCache",decl:{start:{line:14,column:9},end:{line:14,column:33}},loc:{start:{line:14,column:47},end:{line:14,column:311}},line:14},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:209},end:{line:14,column:210}},loc:{start:{line:14,column:232},end:{line:14,column:294}},line:14},"2":{name:"_interopRequireWildcard",decl:{start:{line:16,column:9},end:{line:16,column:32}},loc:{start:{line:16,column:51},end:{line:16,column:804}},line:16},"3":{name:"_interopRequireDefault",decl:{start:{line:18,column:9},end:{line:18,column:31}},loc:{start:{line:18,column:37},end:{line:18,column:95}},line:18},"4":{name:"(anonymous_4)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:19},end:{line:47,column:3}},line:21},"5":{name:"(anonymous_5)",decl:{start:{line:26,column:74},end:{line:26,column:75}},loc:{start:{line:26,column:80},end:{line:38,column:5}},line:26},"6":{name:"(anonymous_6)",decl:{start:{line:38,column:13},end:{line:38,column:14}},loc:{start:{line:38,column:22},end:{line:46,column:5}},line:38},"7":{name:"(anonymous_7)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:53,column:3}},line:49},"8":{name:"(anonymous_8)",decl:{start:{line:50,column:88},end:{line:50,column:89}},loc:{start:{line:50,column:95},end:{line:52,column:5}},line:50}},branchMap:{"0":{loc:{start:{line:14,column:49},end:{line:14,column:96}},type:"if",locations:[{start:{line:14,column:49},end:{line:14,column:96}},{start:{line:14,column:49},end:{line:14,column:96}}],line:14},"1":{loc:{start:{line:14,column:241},end:{line:14,column:291}},type:"cond-expr",locations:[{start:{line:14,column:255},end:{line:14,column:271}},{start:{line:14,column:274},end:{line:14,column:291}}],line:14},"2":{loc:{start:{line:16,column:53},end:{line:16,column:111}},type:"if",locations:[{start:{line:16,column:53},end:{line:16,column:111}},{start:{line:16,column:53},end:{line:16,column:111}}],line:16},"3":{loc:{start:{line:16,column:57},end:{line:16,column:94}},type:"binary-expr",locations:[{start:{line:16,column:57},end:{line:16,column:69}},{start:{line:16,column:73},end:{line:16,column:76}},{start:{line:16,column:80},end:{line:16,column:94}}],line:16},"4":{loc:{start:{line:16,column:112},end:{line:16,column:214}},type:"if",locations:[{start:{line:16,column:112},end:{line:16,column:214}},{start:{line:16,column:112},end:{line:16,column:214}}],line:16},"5":{loc:{start:{line:16,column:116},end:{line:16,column:184}},type:"binary-expr",locations:[{start:{line:16,column:116},end:{line:16,column:128}},{start:{line:16,column:132},end:{line:16,column:155}},{start:{line:16,column:159},end:{line:16,column:184}}],line:16},"6":{loc:{start:{line:16,column:266},end:{line:16,column:321}},type:"if",locations:[{start:{line:16,column:266},end:{line:16,column:321}},{start:{line:16,column:266},end:{line:16,column:321}}],line:16},"7":{loc:{start:{line:16,column:270},end:{line:16,column:293}},type:"binary-expr",locations:[{start:{line:16,column:270},end:{line:16,column:275}},{start:{line:16,column:279},end:{line:16,column:293}}],line:16},"8":{loc:{start:{line:16,column:367},end:{line:16,column:423}},type:"binary-expr",locations:[{start:{line:16,column:367},end:{line:16,column:388}},{start:{line:16,column:392},end:{line:16,column:423}}],line:16},"9":{loc:{start:{line:16,column:448},end:{line:16,column:724}},type:"if",locations:[{start:{line:16,column:448},end:{line:16,column:724}},{start:{line:16,column:448},end:{line:16,column:724}}],line:16},"10":{loc:{start:{line:16,column:452},end:{line:16,column:519}},type:"binary-expr",locations:[{start:{line:16,column:452},end:{line:16,column:469}},{start:{line:16,column:473},end:{line:16,column:519}}],line:16},"11":{loc:{start:{line:16,column:534},end:{line:16,column:606}},type:"cond-expr",locations:[{start:{line:16,column:558},end:{line:16,column:599}},{start:{line:16,column:602},end:{line:16,column:606}}],line:16},"12":{loc:{start:{line:16,column:608},end:{line:16,column:722}},type:"if",locations:[{start:{line:16,column:608},end:{line:16,column:722}},{start:{line:16,column:608},end:{line:16,column:722}}],line:16},"13":{loc:{start:{line:16,column:612},end:{line:16,column:642}},type:"binary-expr",locations:[{start:{line:16,column:612},end:{line:16,column:616}},{start:{line:16,column:621},end:{line:16,column:629}},{start:{line:16,column:633},end:{line:16,column:641}}],line:16},"14":{loc:{start:{line:16,column:749},end:{line:16,column:787}},type:"if",locations:[{start:{line:16,column:749},end:{line:16,column:787}},{start:{line:16,column:749},end:{line:16,column:787}}],line:16},"15":{loc:{start:{line:18,column:46},end:{line:18,column:92}},type:"cond-expr",locations:[{start:{line:18,column:70},end:{line:18,column:73}},{start:{line:18,column:76},end:{line:18,column:92}}],line:18},"16":{loc:{start:{line:18,column:46},end:{line:18,column:67}},type:"binary-expr",locations:[{start:{line:18,column:46},end:{line:18,column:49}},{start:{line:18,column:53},end:{line:18,column:67}}],line:18},"17":{loc:{start:{line:22,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:24,column:5}},{start:{line:22,column:4},end:{line:24,column:5}}],line:22},"18":{loc:{start:{line:29,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:29,column:6},end:{line:33,column:7}},{start:{line:29,column:6},end:{line:33,column:7}}],line:29},"19":{loc:{start:{line:31,column:13},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:13},end:{line:33,column:7}},{start:{line:31,column:13},end:{line:33,column:7}}],line:31},"20":{loc:{start:{line:39,column:6},end:{line:43,column:7}},type:"if",locations:[{start:{line:39,column:6},end:{line:43,column:7}},{start:{line:39,column:6},end:{line:43,column:7}}],line:39},"21":{loc:{start:{line:39,column:10},end:{line:39,column:80}},type:"binary-expr",locations:[{start:{line:39,column:10},end:{line:39,column:16}},{start:{line:39,column:20},end:{line:39,column:25}},{start:{line:39,column:29},end:{line:39,column:80}}],line:39}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0,0]},inputSourceMap:{version:3,sources:["../../src/Routers/PurgeRouter.js"],names:["PurgeRouter","PromiseRouter","handlePurge","req","auth","isReadOnly","Parse","Error","OPERATION_FORBIDDEN","config","database","purgeCollection","params","className","then","cacheAdapter","cacheController","user","clear","role","response","catch","error","code","OBJECT_NOT_FOUND","mountRoutes","route","middleware","promiseEnforceMasterKeyAccess"],mappings:";;;;;;;AAAA;;AACA;;AACA;;;;;;;;AAEO,MAAMA,WAAN,SAA0BC,sBAA1B,CAAwC;AAC7CC,EAAAA,WAAW,CAACC,GAAD,EAAM;AACf,QAAIA,GAAG,CAACC,IAAJ,CAASC,UAAb,EAAyB;AACvB,YAAM,IAAIC,cAAMC,KAAV,CACJD,cAAMC,KAAN,CAAYC,mBADR,EAEJ,sDAFI,CAAN;AAID;;AACD,WAAOL,GAAG,CAACM,MAAJ,CAAWC,QAAX,CACJC,eADI,CACYR,GAAG,CAACS,MAAJ,CAAWC,SADvB,EAEJC,IAFI,CAEC,MAAM;AACV,UAAIC,YAAY,GAAGZ,GAAG,CAACM,MAAJ,CAAWO,eAA9B;;AACA,UAAIb,GAAG,CAACS,MAAJ,CAAWC,SAAX,IAAwB,UAA5B,EAAwC;AACtCE,QAAAA,YAAY,CAACE,IAAb,CAAkBC,KAAlB;AACD,OAFD,MAEO,IAAIf,GAAG,CAACS,MAAJ,CAAWC,SAAX,IAAwB,OAA5B,EAAqC;AAC1CE,QAAAA,YAAY,CAACI,IAAb,CAAkBD,KAAlB;AACD;;AACD,aAAO;AAAEE,QAAAA,QAAQ,EAAE;AAAZ,OAAP;AACD,KAVI,EAWJC,KAXI,CAWEC,KAAK,IAAI;AACd,UAAI,CAACA,KAAD,IAAWA,KAAK,IAAIA,KAAK,CAACC,IAAN,KAAejB,cAAMC,KAAN,CAAYiB,gBAAnD,EAAsE;AACpE,eAAO;AAAEJ,UAAAA,QAAQ,EAAE;AAAZ,SAAP;AACD;;AACD,YAAME,KAAN;AACD,KAhBI,CAAP;AAiBD;;AAEDG,EAAAA,WAAW,GAAG;AACZ,SAAKC,KAAL,CAAW,QAAX,EAAqB,mBAArB,EAA0CC,UAAU,CAACC,6BAArD,EAAoFzB,GAAG,IAAI;AACzF,aAAO,KAAKD,WAAL,CAAiBC,GAAjB,CAAP;AACD,KAFD;AAGD;;AA/B4C;;;eAkChCH,W",sourcesContent:["import PromiseRouter from '../PromiseRouter';\nimport * as middleware from '../middlewares';\nimport Parse from 'parse/node';\n\nexport class PurgeRouter extends PromiseRouter {\n  handlePurge(req) {\n    if (req.auth.isReadOnly) {\n      throw new Parse.Error(\n        Parse.Error.OPERATION_FORBIDDEN,\n        \"read-only masterKey isn't allowed to purge a schema.\"\n      );\n    }\n    return req.config.database\n      .purgeCollection(req.params.className)\n      .then(() => {\n        var cacheAdapter = req.config.cacheController;\n        if (req.params.className == '_Session') {\n          cacheAdapter.user.clear();\n        } else if (req.params.className == '_Role') {\n          cacheAdapter.role.clear();\n        }\n        return { response: {} };\n      })\n      .catch(error => {\n        if (!error || (error && error.code === Parse.Error.OBJECT_NOT_FOUND)) {\n          return { response: {} };\n        }\n        throw error;\n      });\n  }\n\n  mountRoutes() {\n    this.route('DELETE', '/purge/:className', middleware.promiseEnforceMasterKeyAccess, req => {\n      return this.handlePurge(req);\n    });\n  }\n}\n\nexport default PurgeRouter;\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b5b8eddc1790e4234030e8809997e3a814fdc215"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1u3wrytft3=function(){return actualCoverage;};}return actualCoverage;}cov_1u3wrytft3();cov_1u3wrytft3().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1u3wrytft3().s[1]++;exports.default=exports.PurgeRouter=void 0;var _PromiseRouter=(cov_1u3wrytft3().s[2]++,_interopRequireDefault(require("../PromiseRouter")));var middleware=(cov_1u3wrytft3().s[3]++,_interopRequireWildcard(require("../middlewares")));var _node=(cov_1u3wrytft3().s[4]++,_interopRequireDefault(require("parse/node")));function _getRequireWildcardCache(nodeInterop){cov_1u3wrytft3().f[0]++;cov_1u3wrytft3().s[5]++;if(typeof WeakMap!=="function"){cov_1u3wrytft3().b[0][0]++;cov_1u3wrytft3().s[6]++;return null;}else{cov_1u3wrytft3().b[0][1]++;}var cacheBabelInterop=(cov_1u3wrytft3().s[7]++,new WeakMap());var cacheNodeInterop=(cov_1u3wrytft3().s[8]++,new WeakMap());cov_1u3wrytft3().s[9]++;return(_getRequireWildcardCache=function(nodeInterop){cov_1u3wrytft3().f[1]++;cov_1u3wrytft3().s[10]++;return nodeInterop?(cov_1u3wrytft3().b[1][0]++,cacheNodeInterop):(cov_1u3wrytft3().b[1][1]++,cacheBabelInterop);})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){cov_1u3wrytft3().f[2]++;cov_1u3wrytft3().s[11]++;if((cov_1u3wrytft3().b[3][0]++,!nodeInterop)&&(cov_1u3wrytft3().b[3][1]++,obj)&&(cov_1u3wrytft3().b[3][2]++,obj.__esModule)){cov_1u3wrytft3().b[2][0]++;cov_1u3wrytft3().s[12]++;return obj;}else{cov_1u3wrytft3().b[2][1]++;}cov_1u3wrytft3().s[13]++;if((cov_1u3wrytft3().b[5][0]++,obj===null)||(cov_1u3wrytft3().b[5][1]++,typeof obj!=="object")&&(cov_1u3wrytft3().b[5][2]++,typeof obj!=="function")){cov_1u3wrytft3().b[4][0]++;cov_1u3wrytft3().s[14]++;return{default:obj};}else{cov_1u3wrytft3().b[4][1]++;}var cache=(cov_1u3wrytft3().s[15]++,_getRequireWildcardCache(nodeInterop));cov_1u3wrytft3().s[16]++;if((cov_1u3wrytft3().b[7][0]++,cache)&&(cov_1u3wrytft3().b[7][1]++,cache.has(obj))){cov_1u3wrytft3().b[6][0]++;cov_1u3wrytft3().s[17]++;return cache.get(obj);}else{cov_1u3wrytft3().b[6][1]++;}var newObj=(cov_1u3wrytft3().s[18]++,{});var hasPropertyDescriptor=(cov_1u3wrytft3().s[19]++,(cov_1u3wrytft3().b[8][0]++,Object.defineProperty)&&(cov_1u3wrytft3().b[8][1]++,Object.getOwnPropertyDescriptor));cov_1u3wrytft3().s[20]++;for(var key in obj){cov_1u3wrytft3().s[21]++;if((cov_1u3wrytft3().b[10][0]++,key!=="default")&&(cov_1u3wrytft3().b[10][1]++,Object.prototype.hasOwnProperty.call(obj,key))){cov_1u3wrytft3().b[9][0]++;var desc=(cov_1u3wrytft3().s[22]++,hasPropertyDescriptor?(cov_1u3wrytft3().b[11][0]++,Object.getOwnPropertyDescriptor(obj,key)):(cov_1u3wrytft3().b[11][1]++,null));cov_1u3wrytft3().s[23]++;if((cov_1u3wrytft3().b[13][0]++,desc)&&((cov_1u3wrytft3().b[13][1]++,desc.get)||(cov_1u3wrytft3().b[13][2]++,desc.set))){cov_1u3wrytft3().b[12][0]++;cov_1u3wrytft3().s[24]++;Object.defineProperty(newObj,key,desc);}else{cov_1u3wrytft3().b[12][1]++;cov_1u3wrytft3().s[25]++;newObj[key]=obj[key];}}else{cov_1u3wrytft3().b[9][1]++;}}cov_1u3wrytft3().s[26]++;newObj.default=obj;cov_1u3wrytft3().s[27]++;if(cache){cov_1u3wrytft3().b[14][0]++;cov_1u3wrytft3().s[28]++;cache.set(obj,newObj);}else{cov_1u3wrytft3().b[14][1]++;}cov_1u3wrytft3().s[29]++;return newObj;}function _interopRequireDefault(obj){cov_1u3wrytft3().f[3]++;cov_1u3wrytft3().s[30]++;return(cov_1u3wrytft3().b[16][0]++,obj)&&(cov_1u3wrytft3().b[16][1]++,obj.__esModule)?(cov_1u3wrytft3().b[15][0]++,obj):(cov_1u3wrytft3().b[15][1]++,{default:obj});}class PurgeRouter extends(_PromiseRouter.default){handlePurge(req){cov_1u3wrytft3().f[4]++;cov_1u3wrytft3().s[31]++;if(req.auth.isReadOnly){cov_1u3wrytft3().b[17][0]++;cov_1u3wrytft3().s[32]++;throw new _node.default.Error(_node.default.Error.OPERATION_FORBIDDEN,"read-only masterKey isn't allowed to purge a schema.");}else{cov_1u3wrytft3().b[17][1]++;}cov_1u3wrytft3().s[33]++;return req.config.database.purgeCollection(req.params.className).then(()=>{cov_1u3wrytft3().f[5]++;var cacheAdapter=(cov_1u3wrytft3().s[34]++,req.config.cacheController);cov_1u3wrytft3().s[35]++;if(req.params.className=='_Session'){cov_1u3wrytft3().b[18][0]++;cov_1u3wrytft3().s[36]++;cacheAdapter.user.clear();}else{cov_1u3wrytft3().b[18][1]++;cov_1u3wrytft3().s[37]++;if(req.params.className=='_Role'){cov_1u3wrytft3().b[19][0]++;cov_1u3wrytft3().s[38]++;cacheAdapter.role.clear();}else{cov_1u3wrytft3().b[19][1]++;}}cov_1u3wrytft3().s[39]++;return{response:{}};}).catch(error=>{cov_1u3wrytft3().f[6]++;cov_1u3wrytft3().s[40]++;if((cov_1u3wrytft3().b[21][0]++,!error)||(cov_1u3wrytft3().b[21][1]++,error)&&(cov_1u3wrytft3().b[21][2]++,error.code===_node.default.Error.OBJECT_NOT_FOUND)){cov_1u3wrytft3().b[20][0]++;cov_1u3wrytft3().s[41]++;return{response:{}};}else{cov_1u3wrytft3().b[20][1]++;}cov_1u3wrytft3().s[42]++;throw error;});}mountRoutes(){cov_1u3wrytft3().f[7]++;cov_1u3wrytft3().s[43]++;this.route('DELETE','/purge/:className',middleware.promiseEnforceMasterKeyAccess,req=>{cov_1u3wrytft3().f[8]++;cov_1u3wrytft3().s[44]++;return this.handlePurge(req);});}}cov_1u3wrytft3().s[45]++;exports.PurgeRouter=PurgeRouter;var _default=(cov_1u3wrytft3().s[46]++,PurgeRouter);cov_1u3wrytft3().s[47]++;exports.default=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Sb3V0ZXJzL1B1cmdlUm91dGVyLmpzIl0sIm5hbWVzIjpbIlB1cmdlUm91dGVyIiwiUHJvbWlzZVJvdXRlciIsImhhbmRsZVB1cmdlIiwicmVxIiwiYXV0aCIsImlzUmVhZE9ubHkiLCJQYXJzZSIsIkVycm9yIiwiT1BFUkFUSU9OX0ZPUkJJRERFTiIsImNvbmZpZyIsImRhdGFiYXNlIiwicHVyZ2VDb2xsZWN0aW9uIiwicGFyYW1zIiwiY2xhc3NOYW1lIiwidGhlbiIsImNhY2hlQWRhcHRlciIsImNhY2hlQ29udHJvbGxlciIsInVzZXIiLCJjbGVhciIsInJvbGUiLCJyZXNwb25zZSIsImNhdGNoIiwiZXJyb3IiLCJjb2RlIiwiT0JKRUNUX05PVF9GT1VORCIsIm1vdW50Um91dGVzIiwicm91dGUiLCJtaWRkbGV3YXJlIiwicHJvbWlzZUVuZm9yY2VNYXN0ZXJLZXlBY2Nlc3MiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFFTyxNQUFNQSxXQUFOLFNBQTBCQyxzQkFBMUIsQ0FBd0M7QUFDN0NDLEVBQUFBLFdBQVcsQ0FBQ0MsR0FBRCxFQUFNO0FBQ2YsUUFBSUEsR0FBRyxDQUFDQyxJQUFKLENBQVNDLFVBQWIsRUFBeUI7QUFDdkIsWUFBTSxJQUFJQyxjQUFNQyxLQUFWLENBQ0pELGNBQU1DLEtBQU4sQ0FBWUMsbUJBRFIsRUFFSixzREFGSSxDQUFOO0FBSUQ7O0FBQ0QsV0FBT0wsR0FBRyxDQUFDTSxNQUFKLENBQVdDLFFBQVgsQ0FDSkMsZUFESSxDQUNZUixHQUFHLENBQUNTLE1BQUosQ0FBV0MsU0FEdkIsRUFFSkMsSUFGSSxDQUVDLE1BQU07QUFDVixVQUFJQyxZQUFZLEdBQUdaLEdBQUcsQ0FBQ00sTUFBSixDQUFXTyxlQUE5Qjs7QUFDQSxVQUFJYixHQUFHLENBQUNTLE1BQUosQ0FBV0MsU0FBWCxJQUF3QixVQUE1QixFQUF3QztBQUN0Q0UsUUFBQUEsWUFBWSxDQUFDRSxJQUFiLENBQWtCQyxLQUFsQjtBQUNELE9BRkQsTUFFTyxJQUFJZixHQUFHLENBQUNTLE1BQUosQ0FBV0MsU0FBWCxJQUF3QixPQUE1QixFQUFxQztBQUMxQ0UsUUFBQUEsWUFBWSxDQUFDSSxJQUFiLENBQWtCRCxLQUFsQjtBQUNEOztBQUNELGFBQU87QUFBRUUsUUFBQUEsUUFBUSxFQUFFO0FBQVosT0FBUDtBQUNELEtBVkksRUFXSkMsS0FYSSxDQVdFQyxLQUFLLElBQUk7QUFDZCxVQUFJLENBQUNBLEtBQUQsSUFBV0EsS0FBSyxJQUFJQSxLQUFLLENBQUNDLElBQU4sS0FBZWpCLGNBQU1DLEtBQU4sQ0FBWWlCLGdCQUFuRCxFQUFzRTtBQUNwRSxlQUFPO0FBQUVKLFVBQUFBLFFBQVEsRUFBRTtBQUFaLFNBQVA7QUFDRDs7QUFDRCxZQUFNRSxLQUFOO0FBQ0QsS0FoQkksQ0FBUDtBQWlCRDs7QUFFREcsRUFBQUEsV0FBVyxHQUFHO0FBQ1osU0FBS0MsS0FBTCxDQUFXLFFBQVgsRUFBcUIsbUJBQXJCLEVBQTBDQyxVQUFVLENBQUNDLDZCQUFyRCxFQUFvRnpCLEdBQUcsSUFBSTtBQUN6RixhQUFPLEtBQUtELFdBQUwsQ0FBaUJDLEdBQWpCLENBQVA7QUFDRCxLQUZEO0FBR0Q7O0FBL0I0Qzs7O2VBa0NoQ0gsVyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9taXNlUm91dGVyIGZyb20gJy4uL1Byb21pc2VSb3V0ZXInO1xuaW1wb3J0ICogYXMgbWlkZGxld2FyZSBmcm9tICcuLi9taWRkbGV3YXJlcyc7XG5pbXBvcnQgUGFyc2UgZnJvbSAncGFyc2Uvbm9kZSc7XG5cbmV4cG9ydCBjbGFzcyBQdXJnZVJvdXRlciBleHRlbmRzIFByb21pc2VSb3V0ZXIge1xuICBoYW5kbGVQdXJnZShyZXEpIHtcbiAgICBpZiAocmVxLmF1dGguaXNSZWFkT25seSkge1xuICAgICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKFxuICAgICAgICBQYXJzZS5FcnJvci5PUEVSQVRJT05fRk9SQklEREVOLFxuICAgICAgICBcInJlYWQtb25seSBtYXN0ZXJLZXkgaXNuJ3QgYWxsb3dlZCB0byBwdXJnZSBhIHNjaGVtYS5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcS5jb25maWcuZGF0YWJhc2VcbiAgICAgIC5wdXJnZUNvbGxlY3Rpb24ocmVxLnBhcmFtcy5jbGFzc05hbWUpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHZhciBjYWNoZUFkYXB0ZXIgPSByZXEuY29uZmlnLmNhY2hlQ29udHJvbGxlcjtcbiAgICAgICAgaWYgKHJlcS5wYXJhbXMuY2xhc3NOYW1lID09ICdfU2Vzc2lvbicpIHtcbiAgICAgICAgICBjYWNoZUFkYXB0ZXIudXNlci5jbGVhcigpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlcS5wYXJhbXMuY2xhc3NOYW1lID09ICdfUm9sZScpIHtcbiAgICAgICAgICBjYWNoZUFkYXB0ZXIucm9sZS5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHJlc3BvbnNlOiB7fSB9O1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGlmICghZXJyb3IgfHwgKGVycm9yICYmIGVycm9yLmNvZGUgPT09IFBhcnNlLkVycm9yLk9CSkVDVF9OT1RfRk9VTkQpKSB7XG4gICAgICAgICAgcmV0dXJuIHsgcmVzcG9uc2U6IHt9IH07XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9KTtcbiAgfVxuXG4gIG1vdW50Um91dGVzKCkge1xuICAgIHRoaXMucm91dGUoJ0RFTEVURScsICcvcHVyZ2UvOmNsYXNzTmFtZScsIG1pZGRsZXdhcmUucHJvbWlzZUVuZm9yY2VNYXN0ZXJLZXlBY2Nlc3MsIHJlcSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVQdXJnZShyZXEpO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFB1cmdlUm91dGVyO1xuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Sb3V0ZXJzL1B1cmdlUm91dGVyLmpzIl0sIm5hbWVzIjpbIlByb21pc2VSb3V0ZXIiLCJoYW5kbGVQdXJnZSIsInJlcSIsIlBhcnNlIiwiY2FjaGVBZGFwdGVyIiwicmVzcG9uc2UiLCJlcnJvciIsIm1vdW50Um91dGVzIiwibWlkZGxld2FyZSIsIlB1cmdlUm91dGVyIl0sIm1hcHBpbmdzIjoiOytPQUFBLEdBQUEsQ0FBQSxjQUFBLDBCQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLGtCQUFBLENBQUEsQ0FBQSxDQUFBLENBQ0EsR0FBQSxDQUFBLFVBQUEsMEJBQUEsdUJBQUEsQ0FBQSxPQUFBLENBQUEsZ0JBQUEsQ0FBQSxDQUFBLENBQUEsQ0FDQSxHQUFBLENBQUEsS0FBQSwwQkFBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxZQUFBLENBQUEsQ0FBQSxDQUFBLEMsODJGQUVPLEtBQUEsQ0FBQSxXQUFBLFNBQTBCQSxjQUFBQSxDQUExQixPQUFBLENBQXdDLENBQzdDQyxXQUFXLENBQUEsR0FBQSxDQUFNLGtEQUNmLEdBQUlDLEdBQUcsQ0FBSEEsSUFBQUEsQ0FBSixVQUFBLENBQXlCLHNEQUN2QixLQUFNLElBQUlDLENBQUFBLEtBQUFBLENBQUFBLE9BQUFBLENBQUosS0FBQSxDQUNKQSxLQUFBQSxDQUFBQSxPQUFBQSxDQUFBQSxLQUFBQSxDQURJLG1CQUFBLENBQU4sc0RBQU0sQ0FBTixDQUlELENBTEQsa0NBRGUseUJBT2YsTUFBTyxDQUFBLEdBQUcsQ0FBSCxNQUFBLENBQUEsUUFBQSxDQUFBLGVBQUEsQ0FDWUQsR0FBRyxDQUFIQSxNQUFBQSxDQURaLFNBQUEsRUFBQSxJQUFBLENBRUMsSUFBTSx5QkFDVixHQUFJRSxDQUFBQSxZQUFZLDJCQUFHRixHQUFHLENBQUhBLE1BQUFBLENBQW5CLGVBQWdCLENBQWhCLENBRFUseUJBRVYsR0FBSUEsR0FBRyxDQUFIQSxNQUFBQSxDQUFBQSxTQUFBQSxFQUFKLFVBQUEsQ0FBd0Msc0RBQ3RDRSxZQUFZLENBQVpBLElBQUFBLENBQUFBLEtBQUFBLEdBREYsQ0FBQSxJQUVPLHlEQUFJRixHQUFHLENBQUhBLE1BQUFBLENBQUFBLFNBQUFBLEVBQUosT0FBQSxDQUFxQyxzREFDMUNFLFlBQVksQ0FBWkEsSUFBQUEsQ0FBQUEsS0FBQUEsR0FDRCxDQUZNLGtDQUVOLENBTlMseUJBT1YsTUFBTyxDQUFFQyxRQUFRLENBQUUsRUFBWixDQUFQLENBVEcsQ0FBQSxFQUFBLEtBQUEsQ0FXRUMsS0FBSyxFQUFJLGtEQUNkLEdBQUksOEJBQUEsS0FBQSxHQUFXQSw2QkFBQUEsS0FBSyxnQ0FBSUEsS0FBSyxDQUFMQSxJQUFBQSxHQUFlSCxLQUFBQSxDQUFBQSxPQUFBQSxDQUFBQSxLQUFBQSxDQUF2QyxnQkFBb0IsQ0FBcEIsQ0FBc0Usc0RBQ3BFLE1BQU8sQ0FBRUUsUUFBUSxDQUFFLEVBQVosQ0FBUCxDQUNELENBRkQsa0NBRGMseUJBSWQsS0FBQSxDQUFBLEtBQUEsQ0FmSixDQUFPLENBQVAsQ0FpQkQsQ0FFREUsV0FBVyxFQUFHLGtEQUNaLEtBQUEsS0FBQSxDQUFBLFFBQUEsQ0FBQSxtQkFBQSxDQUEwQ0MsVUFBVSxDQUFwRCw2QkFBQSxDQUFvRk4sR0FBRyxFQUFJLGtEQUN6RixNQUFPLE1BQUEsV0FBQSxDQUFQLEdBQU8sQ0FBUCxDQURGLENBQUEsRUFHRCxDQS9CNEMsQyxnR0FrQ2hDTyxXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb21pc2VSb3V0ZXIgZnJvbSAnLi4vUHJvbWlzZVJvdXRlcic7XG5pbXBvcnQgKiBhcyBtaWRkbGV3YXJlIGZyb20gJy4uL21pZGRsZXdhcmVzJztcbmltcG9ydCBQYXJzZSBmcm9tICdwYXJzZS9ub2RlJztcblxuZXhwb3J0IGNsYXNzIFB1cmdlUm91dGVyIGV4dGVuZHMgUHJvbWlzZVJvdXRlciB7XG4gIGhhbmRsZVB1cmdlKHJlcSkge1xuICAgIGlmIChyZXEuYXV0aC5pc1JlYWRPbmx5KSB7XG4gICAgICB0aHJvdyBuZXcgUGFyc2UuRXJyb3IoXG4gICAgICAgIFBhcnNlLkVycm9yLk9QRVJBVElPTl9GT1JCSURERU4sXG4gICAgICAgIFwicmVhZC1vbmx5IG1hc3RlcktleSBpc24ndCBhbGxvd2VkIHRvIHB1cmdlIGEgc2NoZW1hLlwiXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gcmVxLmNvbmZpZy5kYXRhYmFzZVxuICAgICAgLnB1cmdlQ29sbGVjdGlvbihyZXEucGFyYW1zLmNsYXNzTmFtZSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgdmFyIGNhY2hlQWRhcHRlciA9IHJlcS5jb25maWcuY2FjaGVDb250cm9sbGVyO1xuICAgICAgICBpZiAocmVxLnBhcmFtcy5jbGFzc05hbWUgPT0gJ19TZXNzaW9uJykge1xuICAgICAgICAgIGNhY2hlQWRhcHRlci51c2VyLmNsZWFyKCk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVxLnBhcmFtcy5jbGFzc05hbWUgPT0gJ19Sb2xlJykge1xuICAgICAgICAgIGNhY2hlQWRhcHRlci5yb2xlLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgcmVzcG9uc2U6IHt9IH07XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgaWYgKCFlcnJvciB8fCAoZXJyb3IgJiYgZXJyb3IuY29kZSA9PT0gUGFyc2UuRXJyb3IuT0JKRUNUX05PVF9GT1VORCkpIHtcbiAgICAgICAgICByZXR1cm4geyByZXNwb25zZToge30gfTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH0pO1xuICB9XG5cbiAgbW91bnRSb3V0ZXMoKSB7XG4gICAgdGhpcy5yb3V0ZSgnREVMRVRFJywgJy9wdXJnZS86Y2xhc3NOYW1lJywgbWlkZGxld2FyZS5wcm9taXNlRW5mb3JjZU1hc3RlcktleUFjY2VzcywgcmVxID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZVB1cmdlKHJlcSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUHVyZ2VSb3V0ZXI7XG4iXX0=