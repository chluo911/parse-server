"use strict";function cov_2k4xzva75v(){var path="/parse-server/lib/Routers/CloudCodeRouter.js";var hash="c964dc2eded8052ec8d59290b7da52542ee04eab";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Routers/CloudCodeRouter.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:33}},"2":{start:{line:8,column:21},end:{line:8,column:72}},"3":{start:{line:10,column:12},end:{line:10,column:57}},"4":{start:{line:12,column:12},end:{line:12,column:54}},"5":{start:{line:14,column:39},end:{line:14,column:93}},"6":{start:{line:16,column:17},end:{line:16,column:39}},"7":{start:{line:18,column:19},end:{line:18,column:44}},"8":{start:{line:21,column:2},end:{line:23,column:3}},"9":{start:{line:22,column:4},end:{line:22,column:55}},"10":{start:{line:25,column:2},end:{line:25,column:22}},"11":{start:{line:29,column:15},end:{line:29,column:59}},"12":{start:{line:31,column:2},end:{line:33,column:3}},"13":{start:{line:32,column:4},end:{line:32,column:123}},"14":{start:{line:38,column:4},end:{line:38,column:109}},"15":{start:{line:39,column:4},end:{line:39,column:118}},"16":{start:{line:40,column:4},end:{line:40,column:112}},"17":{start:{line:41,column:4},end:{line:41,column:119}},"18":{start:{line:42,column:4},end:{line:42,column:124}},"19":{start:{line:46,column:4},end:{line:50,column:7}},"20":{start:{line:47,column:6},end:{line:49,column:8}},"21":{start:{line:54,column:19},end:{line:54,column:29}},"22":{start:{line:55,column:17},end:{line:55,column:61}},"23":{start:{line:56,column:4},end:{line:63,column:7}},"24":{start:{line:57,column:6},end:{line:62,column:8}},"25":{start:{line:59,column:51},end:{line:59,column:62}},"26":{start:{line:69,column:8},end:{line:69,column:16}},"27":{start:{line:70,column:4},end:{line:70,column:50}},"28":{start:{line:71,column:4},end:{line:71,column:133}},"29":{start:{line:77,column:8},end:{line:77,column:18}},"30":{start:{line:80,column:8},end:{line:80,column:16}},"31":{start:{line:81,column:4},end:{line:81,column:50}},"32":{start:{line:82,column:4},end:{line:88,column:7}},"33":{start:{line:85,column:6},end:{line:87,column:8}},"34":{start:{line:94,column:8},end:{line:94,column:18}},"35":{start:{line:95,column:4},end:{line:99,column:7}},"36":{start:{line:96,column:6},end:{line:98,column:8}},"37":{start:{line:104,column:0},end:{line:104,column:42}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:14,column:9},end:{line:14,column:31}},loc:{start:{line:14,column:37},end:{line:14,column:95}},line:14},"1":{name:"formatJobSchedule",decl:{start:{line:20,column:9},end:{line:20,column:26}},loc:{start:{line:20,column:41},end:{line:26,column:1}},line:20},"2":{name:"validateJobSchedule",decl:{start:{line:28,column:9},end:{line:28,column:28}},loc:{start:{line:28,column:51},end:{line:34,column:1}},line:28},"3":{name:"(anonymous_3)",decl:{start:{line:37,column:2},end:{line:37,column:3}},loc:{start:{line:37,column:16},end:{line:43,column:3}},line:37},"4":{name:"(anonymous_4)",decl:{start:{line:45,column:2},end:{line:45,column:3}},loc:{start:{line:45,column:22},end:{line:51,column:3}},line:45},"5":{name:"(anonymous_5)",decl:{start:{line:46,column:81},end:{line:46,column:82}},loc:{start:{line:46,column:98},end:{line:50,column:5}},line:46},"6":{name:"(anonymous_6)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:26},end:{line:64,column:3}},line:53},"7":{name:"(anonymous_7)",decl:{start:{line:56,column:81},end:{line:56,column:82}},loc:{start:{line:56,column:98},end:{line:63,column:5}},line:56},"8":{name:"(anonymous_8)",decl:{start:{line:59,column:44},end:{line:59,column:45}},loc:{start:{line:59,column:51},end:{line:59,column:62}},line:59},"9":{name:"(anonymous_9)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:24},end:{line:72,column:3}},line:66},"10":{name:"(anonymous_10)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:22},end:{line:89,column:3}},line:74},"11":{name:"(anonymous_11)",decl:{start:{line:84,column:74},end:{line:84,column:75}},loc:{start:{line:84,column:86},end:{line:88,column:5}},line:84},"12":{name:"(anonymous_12)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:24},end:{line:100,column:3}},line:91},"13":{name:"(anonymous_13)",decl:{start:{line:95,column:100},end:{line:95,column:101}},loc:{start:{line:95,column:112},end:{line:99,column:5}},line:95}},branchMap:{"0":{loc:{start:{line:14,column:46},end:{line:14,column:92}},type:"cond-expr",locations:[{start:{line:14,column:70},end:{line:14,column:73}},{start:{line:14,column:76},end:{line:14,column:92}}],line:14},"1":{loc:{start:{line:14,column:46},end:{line:14,column:67}},type:"binary-expr",locations:[{start:{line:14,column:46},end:{line:14,column:49}},{start:{line:14,column:53},end:{line:14,column:67}}],line:14},"2":{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:21,column:2},end:{line:23,column:3}}],line:21},"3":{loc:{start:{line:29,column:15},end:{line:29,column:59}},type:"binary-expr",locations:[{start:{line:29,column:15},end:{line:29,column:53}},{start:{line:29,column:57},end:{line:29,column:59}}],line:29},"4":{loc:{start:{line:31,column:2},end:{line:33,column:3}},type:"if",locations:[{start:{line:31,column:2},end:{line:33,column:3}},{start:{line:31,column:2},end:{line:33,column:3}}],line:31},"5":{loc:{start:{line:31,column:6},end:{line:31,column:57}},type:"binary-expr",locations:[{start:{line:31,column:6},end:{line:31,column:26}},{start:{line:31,column:30},end:{line:31,column:57}}],line:31},"6":{loc:{start:{line:55,column:17},end:{line:55,column:61}},type:"binary-expr",locations:[{start:{line:55,column:17},end:{line:55,column:55}},{start:{line:55,column:59},end:{line:55,column:61}}],line:55}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},inputSourceMap:{version:3,sources:["../../src/Routers/CloudCodeRouter.js"],names:["triggers","require","middleware","formatJobSchedule","job_schedule","startAfter","Date","toISOString","validateJobSchedule","config","jobs","getJobs","applicationId","jobName","Parse","Error","INTERNAL_SERVER_ERROR","CloudCodeRouter","PromiseRouter","mountRoutes","route","promiseEnforceMasterKeyAccess","getJobsData","createJob","editJob","deleteJob","req","rest","find","auth","then","scheduledJobs","response","results","in_use","map","job","Object","keys","body","create","client","info","context","objectId","params","update","undefined","del"],mappings:"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",sourcesContent:["import PromiseRouter from '../PromiseRouter';\nimport Parse from 'parse/node';\nimport rest from '../rest';\nconst triggers = require('../triggers');\nconst middleware = require('../middlewares');\n\nfunction formatJobSchedule(job_schedule) {\n  if (typeof job_schedule.startAfter === 'undefined') {\n    job_schedule.startAfter = new Date().toISOString();\n  }\n  return job_schedule;\n}\n\nfunction validateJobSchedule(config, job_schedule) {\n  const jobs = triggers.getJobs(config.applicationId) || {};\n  if (job_schedule.jobName && !jobs[job_schedule.jobName]) {\n    throw new Parse.Error(\n      Parse.Error.INTERNAL_SERVER_ERROR,\n      'Cannot Schedule a job that is not deployed'\n    );\n  }\n}\n\nexport class CloudCodeRouter extends PromiseRouter {\n  mountRoutes() {\n    this.route(\n      'GET',\n      '/cloud_code/jobs',\n      middleware.promiseEnforceMasterKeyAccess,\n      CloudCodeRouter.getJobs\n    );\n    this.route(\n      'GET',\n      '/cloud_code/jobs/data',\n      middleware.promiseEnforceMasterKeyAccess,\n      CloudCodeRouter.getJobsData\n    );\n    this.route(\n      'POST',\n      '/cloud_code/jobs',\n      middleware.promiseEnforceMasterKeyAccess,\n      CloudCodeRouter.createJob\n    );\n    this.route(\n      'PUT',\n      '/cloud_code/jobs/:objectId',\n      middleware.promiseEnforceMasterKeyAccess,\n      CloudCodeRouter.editJob\n    );\n    this.route(\n      'DELETE',\n      '/cloud_code/jobs/:objectId',\n      middleware.promiseEnforceMasterKeyAccess,\n      CloudCodeRouter.deleteJob\n    );\n  }\n\n  static getJobs(req) {\n    return rest.find(req.config, req.auth, '_JobSchedule', {}, {}).then(scheduledJobs => {\n      return {\n        response: scheduledJobs.results,\n      };\n    });\n  }\n\n  static getJobsData(req) {\n    const config = req.config;\n    const jobs = triggers.getJobs(config.applicationId) || {};\n    return rest.find(req.config, req.auth, '_JobSchedule', {}, {}).then(scheduledJobs => {\n      return {\n        response: {\n          in_use: scheduledJobs.results.map(job => job.jobName),\n          jobs: Object.keys(jobs),\n        },\n      };\n    });\n  }\n\n  static createJob(req) {\n    const { job_schedule } = req.body;\n    validateJobSchedule(req.config, job_schedule);\n    return rest.create(\n      req.config,\n      req.auth,\n      '_JobSchedule',\n      formatJobSchedule(job_schedule),\n      req.client,\n      req.info.context\n    );\n  }\n\n  static editJob(req) {\n    const { objectId } = req.params;\n    const { job_schedule } = req.body;\n    validateJobSchedule(req.config, job_schedule);\n    return rest\n      .update(\n        req.config,\n        req.auth,\n        '_JobSchedule',\n        { objectId },\n        formatJobSchedule(job_schedule),\n        undefined,\n        req.info.context\n      )\n      .then(response => {\n        return {\n          response,\n        };\n      });\n  }\n\n  static deleteJob(req) {\n    const { objectId } = req.params;\n    return rest\n      .del(req.config, req.auth, '_JobSchedule', objectId, req.info.context)\n      .then(response => {\n        return {\n          response,\n        };\n      });\n  }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c964dc2eded8052ec8d59290b7da52542ee04eab"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2k4xzva75v=function(){return actualCoverage;};}return actualCoverage;}cov_2k4xzva75v();cov_2k4xzva75v().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2k4xzva75v().s[1]++;exports.CloudCodeRouter=void 0;var _PromiseRouter=(cov_2k4xzva75v().s[2]++,_interopRequireDefault(require("../PromiseRouter")));var _node=(cov_2k4xzva75v().s[3]++,_interopRequireDefault(require("parse/node")));var _rest=(cov_2k4xzva75v().s[4]++,_interopRequireDefault(require("../rest")));function _interopRequireDefault(obj){cov_2k4xzva75v().f[0]++;cov_2k4xzva75v().s[5]++;return(cov_2k4xzva75v().b[1][0]++,obj)&&(cov_2k4xzva75v().b[1][1]++,obj.__esModule)?(cov_2k4xzva75v().b[0][0]++,obj):(cov_2k4xzva75v().b[0][1]++,{default:obj});}const triggers=(cov_2k4xzva75v().s[6]++,require('../triggers'));const middleware=(cov_2k4xzva75v().s[7]++,require('../middlewares'));function formatJobSchedule(job_schedule){cov_2k4xzva75v().f[1]++;cov_2k4xzva75v().s[8]++;if(typeof job_schedule.startAfter==='undefined'){cov_2k4xzva75v().b[2][0]++;cov_2k4xzva75v().s[9]++;job_schedule.startAfter=new Date().toISOString();}else{cov_2k4xzva75v().b[2][1]++;}cov_2k4xzva75v().s[10]++;return job_schedule;}function validateJobSchedule(config,job_schedule){cov_2k4xzva75v().f[2]++;const jobs=(cov_2k4xzva75v().s[11]++,(cov_2k4xzva75v().b[3][0]++,triggers.getJobs(config.applicationId))||(cov_2k4xzva75v().b[3][1]++,{}));cov_2k4xzva75v().s[12]++;if((cov_2k4xzva75v().b[5][0]++,job_schedule.jobName)&&(cov_2k4xzva75v().b[5][1]++,!jobs[job_schedule.jobName])){cov_2k4xzva75v().b[4][0]++;cov_2k4xzva75v().s[13]++;throw new _node.default.Error(_node.default.Error.INTERNAL_SERVER_ERROR,'Cannot Schedule a job that is not deployed');}else{cov_2k4xzva75v().b[4][1]++;}}class CloudCodeRouter extends(_PromiseRouter.default){mountRoutes(){cov_2k4xzva75v().f[3]++;cov_2k4xzva75v().s[14]++;this.route('GET','/cloud_code/jobs',middleware.promiseEnforceMasterKeyAccess,CloudCodeRouter.getJobs);cov_2k4xzva75v().s[15]++;this.route('GET','/cloud_code/jobs/data',middleware.promiseEnforceMasterKeyAccess,CloudCodeRouter.getJobsData);cov_2k4xzva75v().s[16]++;this.route('POST','/cloud_code/jobs',middleware.promiseEnforceMasterKeyAccess,CloudCodeRouter.createJob);cov_2k4xzva75v().s[17]++;this.route('PUT','/cloud_code/jobs/:objectId',middleware.promiseEnforceMasterKeyAccess,CloudCodeRouter.editJob);cov_2k4xzva75v().s[18]++;this.route('DELETE','/cloud_code/jobs/:objectId',middleware.promiseEnforceMasterKeyAccess,CloudCodeRouter.deleteJob);}static getJobs(req){cov_2k4xzva75v().f[4]++;cov_2k4xzva75v().s[19]++;return _rest.default.find(req.config,req.auth,'_JobSchedule',{},{}).then(scheduledJobs=>{cov_2k4xzva75v().f[5]++;cov_2k4xzva75v().s[20]++;return{response:scheduledJobs.results};});}static getJobsData(req){cov_2k4xzva75v().f[6]++;const config=(cov_2k4xzva75v().s[21]++,req.config);const jobs=(cov_2k4xzva75v().s[22]++,(cov_2k4xzva75v().b[6][0]++,triggers.getJobs(config.applicationId))||(cov_2k4xzva75v().b[6][1]++,{}));cov_2k4xzva75v().s[23]++;return _rest.default.find(req.config,req.auth,'_JobSchedule',{},{}).then(scheduledJobs=>{cov_2k4xzva75v().f[7]++;cov_2k4xzva75v().s[24]++;return{response:{in_use:scheduledJobs.results.map(job=>{cov_2k4xzva75v().f[8]++;cov_2k4xzva75v().s[25]++;return job.jobName;}),jobs:Object.keys(jobs)}};});}static createJob(req){cov_2k4xzva75v().f[9]++;const{job_schedule}=(cov_2k4xzva75v().s[26]++,req.body);cov_2k4xzva75v().s[27]++;validateJobSchedule(req.config,job_schedule);cov_2k4xzva75v().s[28]++;return _rest.default.create(req.config,req.auth,'_JobSchedule',formatJobSchedule(job_schedule),req.client,req.info.context);}static editJob(req){cov_2k4xzva75v().f[10]++;const{objectId}=(cov_2k4xzva75v().s[29]++,req.params);const{job_schedule}=(cov_2k4xzva75v().s[30]++,req.body);cov_2k4xzva75v().s[31]++;validateJobSchedule(req.config,job_schedule);cov_2k4xzva75v().s[32]++;return _rest.default.update(req.config,req.auth,'_JobSchedule',{objectId},formatJobSchedule(job_schedule),undefined,req.info.context).then(response=>{cov_2k4xzva75v().f[11]++;cov_2k4xzva75v().s[33]++;return{response};});}static deleteJob(req){cov_2k4xzva75v().f[12]++;const{objectId}=(cov_2k4xzva75v().s[34]++,req.params);cov_2k4xzva75v().s[35]++;return _rest.default.del(req.config,req.auth,'_JobSchedule',objectId,req.info.context).then(response=>{cov_2k4xzva75v().f[13]++;cov_2k4xzva75v().s[36]++;return{response};});}}cov_2k4xzva75v().s[37]++;exports.CloudCodeRouter=CloudCodeRouter;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Sb3V0ZXJzL0Nsb3VkQ29kZVJvdXRlci5qcyJdLCJuYW1lcyI6WyJ0cmlnZ2VycyIsInJlcXVpcmUiLCJtaWRkbGV3YXJlIiwiZm9ybWF0Sm9iU2NoZWR1bGUiLCJqb2Jfc2NoZWR1bGUiLCJzdGFydEFmdGVyIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidmFsaWRhdGVKb2JTY2hlZHVsZSIsImNvbmZpZyIsImpvYnMiLCJnZXRKb2JzIiwiYXBwbGljYXRpb25JZCIsImpvYk5hbWUiLCJQYXJzZSIsIkVycm9yIiwiSU5URVJOQUxfU0VSVkVSX0VSUk9SIiwiQ2xvdWRDb2RlUm91dGVyIiwiUHJvbWlzZVJvdXRlciIsIm1vdW50Um91dGVzIiwicm91dGUiLCJwcm9taXNlRW5mb3JjZU1hc3RlcktleUFjY2VzcyIsImdldEpvYnNEYXRhIiwiY3JlYXRlSm9iIiwiZWRpdEpvYiIsImRlbGV0ZUpvYiIsInJlcSIsInJlc3QiLCJmaW5kIiwiYXV0aCIsInRoZW4iLCJzY2hlZHVsZWRKb2JzIiwicmVzcG9uc2UiLCJyZXN1bHRzIiwiaW5fdXNlIiwibWFwIiwiam9iIiwiT2JqZWN0Iiwia2V5cyIsImJvZHkiLCJjcmVhdGUiLCJjbGllbnQiLCJpbmZvIiwiY29udGV4dCIsIm9iamVjdElkIiwicGFyYW1zIiwidXBkYXRlIiwidW5kZWZpbmVkIiwiZGVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7QUFDQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxhQUFELENBQXhCOztBQUNBLE1BQU1DLFVBQVUsR0FBR0QsT0FBTyxDQUFDLGdCQUFELENBQTFCOztBQUVBLFNBQVNFLGlCQUFULENBQTJCQyxZQUEzQixFQUF5QztBQUN2QyxNQUFJLE9BQU9BLFlBQVksQ0FBQ0MsVUFBcEIsS0FBbUMsV0FBdkMsRUFBb0Q7QUFDbERELElBQUFBLFlBQVksQ0FBQ0MsVUFBYixHQUEwQixJQUFJQyxJQUFKLEdBQVdDLFdBQVgsRUFB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Li4vUHJvbWlzZVJvdXRlcic7XG5pbXBvcnQgUGFyc2UgZnJvbSAncGFyc2Uvbm9kZSc7XG5pbXBvcnQgcmVzdCBmcm9tICcuLi9yZXN0JztcbmNvbnN0IHRyaWdnZXJzID0gcmVxdWlyZSgnLi4vdHJpZ2dlcnMnKTtcbmNvbnN0IG1pZGRsZXdhcmUgPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlcycpO1xuXG5mdW5jdGlvbiBmb3JtYXRKb2JTY2hlZHVsZShqb2Jfc2NoZWR1bGUpIHtcbiAgaWYgKHR5cGVvZiBqb2Jfc2NoZWR1bGUuc3RhcnRBZnRlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBqb2Jfc2NoZWR1bGUuc3RhcnRBZnRlciA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgfVxuICByZXR1cm4gam9iX3NjaGVkdWxlO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZUpvYlNjaGVkdWxlKGNvbmZpZywgam9iX3NjaGVkdWxlKSB7XG4gIGNvbnN0IGpvYnMgPSB0cmlnZ2Vycy5nZXRKb2JzKGNvbmZpZy5hcHBsaWNhdGlvbklkKSB8fCB7fTtcbiAgaWYgKGpvYl9zY2hlZHVsZS5qb2JOYW1lICYmICFqb2JzW2pvYl9zY2hlZHVsZS5qb2JOYW1lXSkge1xuICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihcbiAgICAgIFBhcnNlLkVycm9yLklOVEVSTkFMX1NFUlZFUl9FUlJPUixcbiAgICAgICdDYW5ub3QgU2NoZWR1bGUgYSBqb2IgdGhhdCBpcyBub3QgZGVwbG95ZWQnXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ2xvdWRDb2RlUm91dGVyIGV4dGVuZHMgUHJvbWlzZVJvdXRlciB7XG4gIG1vdW50Um91dGVzKCkge1xuICAgIHRoaXMucm91dGUoXG4gICAgICAnR0VUJyxcbiAgICAgICcvY2xvdWRfY29kZS9qb2JzJyxcbiAgICAgIG1pZGRsZXdhcmUucHJvbWlzZUVuZm9yY2VNYXN0ZXJLZXlBY2Nlc3MsXG4gICAgICBDbG91ZENvZGVSb3V0ZXIuZ2V0Sm9ic1xuICAgICk7XG4gICAgdGhpcy5yb3V0ZShcbiAgICAgICdHRVQnLFxuICAgICAgJy9jbG91ZF9jb2RlL2pvYnMvZGF0YScsXG4gICAgICBtaWRkbGV3YXJlLnByb21pc2VFbmZvcmNlTWFzdGVyS2V5QWNjZXNzLFxuICAgICAgQ2xvdWRDb2RlUm91dGVyLmdldEpvYnNEYXRhXG4gICAgKTtcbiAgICB0aGlzLnJvdXRlKFxuICAgICAgJ1BPU1QnLFxuICAgICAgJy9jbG91ZF9jb2RlL2pvYnMnLFxuICAgICAgbWlkZGxld2FyZS5wcm9taXNlRW5mb3JjZU1hc3RlcktleUFjY2VzcyxcbiAgICAgIENsb3VkQ29kZVJvdXRlci5jcmVhdGVKb2JcbiAgICApO1xuICAgIHRoaXMucm91dGUoXG4gICAgICAnUFVUJyxcbiAgICAgICcvY2xvdWRfY29kZS9qb2JzLzpvYmplY3RJZCcsXG4gICAgICBtaWRkbGV3YXJlLnByb21pc2VFbmZvcmNlTWFzdGVyS2V5QWNjZXNzLFxuICAgICAgQ2xvdWRDb2RlUm91dGVyLmVkaXRKb2JcbiAgICApO1xuICAgIHRoaXMucm91dGUoXG4gICAgICAnREVMRVRFJyxcbiAgICAgICcvY2xvdWRfY29kZS9qb2JzLzpvYmplY3RJZCcsXG4gICAgICBtaWRkbGV3YXJlLnByb21pc2VFbmZvcmNlTWFzdGVyS2V5QWNjZXNzLFxuICAgICAgQ2xvdWRDb2RlUm91dGVyLmRlbGV0ZUpvYlxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgZ2V0Sm9icyhyZXEpIHtcbiAgICByZXR1cm4gcmVzdC5maW5kKHJlcS5jb25maWcsIHJlcS5hdXRoLCAnX0pvYlNjaGVkdWxlJywge30sIHt9KS50aGVuKHNjaGVkdWxlZEpvYnMgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzcG9uc2U6IHNjaGVkdWxlZEpvYnMucmVzdWx0cyxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgZ2V0Sm9ic0RhdGEocmVxKSB7XG4gICAgY29uc3QgY29uZmlnID0gcmVxLmNvbmZpZztcbiAgICBjb25zdCBqb2JzID0gdHJpZ2dlcnMuZ2V0Sm9icyhjb25maWcuYXBwbGljYXRpb25JZCkgfHwge307XG4gICAgcmV0dXJuIHJlc3QuZmluZChyZXEuY29uZmlnLCByZXEuYXV0aCwgJ19Kb2JTY2hlZHVsZScsIHt9LCB7fSkudGhlbihzY2hlZHVsZWRKb2JzID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgICAgaW5fdXNlOiBzY2hlZHVsZWRKb2JzLnJlc3VsdHMubWFwKGpvYiA9PiBqb2Iuam9iTmFtZSksXG4gICAgICAgICAgam9iczogT2JqZWN0LmtleXMoam9icyksXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZUpvYihyZXEpIHtcbiAgICBjb25zdCB7IGpvYl9zY2hlZHVsZSB9ID0gcmVxLmJvZHk7XG4gICAgdmFsaWRhdGVKb2JTY2hlZHVsZShyZXEuY29uZmlnLCBqb2Jfc2NoZWR1bGUpO1xuICAgIHJldHVybiByZXN0LmNyZWF0ZShcbiAgICAgIHJlcS5jb25maWcsXG4gICAgICByZXEuYXV0aCxcbiAgICAgICdfSm9iU2NoZWR1bGUnLFxuICAgICAgZm9ybWF0Sm9iU2NoZWR1bGUoam9iX3NjaGVkdWxlKSxcbiAgICAgIHJlcS5jbGllbnQsXG4gICAgICByZXEuaW5mby5jb250ZXh0XG4gICAgKTtcbiAgfVxuXG4gIHN0YXRpYyBlZGl0Sm9iKHJlcSkge1xuICAgIGNvbnN0IHsgb2JqZWN0SWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgeyBqb2Jfc2NoZWR1bGUgfSA9IHJlcS5ib2R5O1xuICAgIHZhbGlkYXRlSm9iU2NoZWR1bGUocmVxLmNvbmZpZywgam9iX3NjaGVkdWxlKTtcbiAgICByZXR1cm4gcmVzdFxuICAgICAgLnVwZGF0ZShcbiAgICAgICAgcmVxLmNvbmZpZyxcbiAgICAgICAgcmVxLmF1dGgsXG4gICAgICAgICdfSm9iU2NoZWR1bGUnLFxuICAgICAgICB7IG9iamVjdElkIH0sXG4gICAgICAgIGZvcm1hdEpvYlNjaGVkdWxlKGpvYl9zY2hlZHVsZSksXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgcmVxLmluZm8uY29udGV4dFxuICAgICAgKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJlc3BvbnNlLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gIH1cblxuICBzdGF0aWMgZGVsZXRlSm9iKHJlcSkge1xuICAgIGNvbnN0IHsgb2JqZWN0SWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgcmV0dXJuIHJlc3RcbiAgICAgIC5kZWwocmVxLmNvbmZpZywgcmVxLmF1dGgsICdfSm9iU2NoZWR1bGUnLCBvYmplY3RJZCwgcmVxLmluZm8uY29udGV4dClcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZXNwb25zZSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICB9XG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Sb3V0ZXJzL0Nsb3VkQ29kZVJvdXRlci5qcyJdLCJuYW1lcyI6WyJ0cmlnZ2VycyIsInJlcXVpcmUiLCJtaWRkbGV3YXJlIiwiam9iX3NjaGVkdWxlIiwiam9icyIsImNvbmZpZyIsIlBhcnNlIiwiUHJvbWlzZVJvdXRlciIsIm1vdW50Um91dGVzIiwiQ2xvdWRDb2RlUm91dGVyIiwiZ2V0Sm9icyIsInJlcSIsInNjaGVkdWxlZEpvYnMiLCJyZXNwb25zZSIsInJlc3VsdHMiLCJnZXRKb2JzRGF0YSIsImluX3VzZSIsImpvYiIsImpvYk5hbWUiLCJPYmplY3QiLCJjcmVhdGVKb2IiLCJ2YWxpZGF0ZUpvYlNjaGVkdWxlIiwicmVzdCIsImZvcm1hdEpvYlNjaGVkdWxlIiwiZWRpdEpvYiIsIm9iamVjdElkIiwiZGVsZXRlSm9iIl0sIm1hcHBpbmdzIjoibWphQUdNQTttT0FITixHQUFBLENBQUEsY0FBQSwwQkFBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUEsQ0FBQSxDQUNBLEdBQUEsQ0FBQSxLQUFBLDBCQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLFlBQUEsQ0FBQSxDQUFBLENBQUEsQ0FDQSxHQUFBLENBQUEsS0FBQSwwQkFBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxDQUFBLEMsc1BBQ0EsS0FBTUEsQ0FBQUEsUUFBUSwwQkFBR0MsT0FBTyxDQUF4QixhQUF3QixDQUFWLENBQWQsQ0FDQSxLQUFNQyxDQUFBQSxVQUFVLDBCQUFHRCxPQUFPLENBQTFCLGdCQUEwQixDQUFWLENBQWhCLENBRUEsUUFBQSxDQUFBLGlCQUFBLENBQUEsWUFBQSxDQUF5QyxpREFDdkMsR0FBSSxNQUFPRSxDQUFBQSxZQUFZLENBQW5CLFVBQUEsR0FBSixXQUFBLENBQW9ELG9EQUNsREEsWUFBWSxDQUFaQSxVQUFBQSxDQUEwQixHQUFBLENBQUEsSUFBQSxHQUExQkEsV0FBMEIsRUFBMUJBLENBQ0QsQ0FGRCxp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Q0FESCxNQUFBLENBQ1lBLEdBQUcsQ0FEZixJQUFBLENBQUEsY0FBQSxDQUFBLFFBQUEsQ0FDZ0RBLEdBQUcsQ0FBSEEsSUFBQUEsQ0FEaEQsT0FBQSxFQUFBLElBQUEsQ0FFQ0UsUUFBUSxFQUFJLG1EQUNoQixNQUFPLENBQ0xBLFFBREssQ0FBUCxDQUhKLENBQU8sQ0FBUCxDQU9ELENBbEdnRCxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb21pc2VSb3V0ZXIgZnJvbSAnLi4vUHJvbWlzZVJvdXRlcic7XG5pbXBvcnQgUGFyc2UgZnJvbSAncGFyc2Uvbm9kZSc7XG5pbXBvcnQgcmVzdCBmcm9tICcuLi9yZXN0JztcbmNvbnN0IHRyaWdnZXJzID0gcmVxdWlyZSgnLi4vdHJpZ2dlcnMnKTtcbmNvbnN0IG1pZGRsZXdhcmUgPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlcycpO1xuXG5mdW5jdGlvbiBmb3JtYXRKb2JTY2hlZHVsZShqb2Jfc2NoZWR1bGUpIHtcbiAgaWYgKHR5cGVvZiBqb2Jfc2NoZWR1bGUuc3RhcnRBZnRlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBqb2Jfc2NoZWR1bGUuc3RhcnRBZnRlciA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgfVxuICByZXR1cm4gam9iX3NjaGVkdWxlO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZUpvYlNjaGVkdWxlKGNvbmZpZywgam9iX3NjaGVkdWxlKSB7XG4gIGNvbnN0IGpvYnMgPSB0cmlnZ2Vycy5nZXRKb2JzKGNvbmZpZy5hcHBsaWNhdGlvbklkKSB8fCB7fTtcbiAgaWYgKGpvYl9zY2hlZHVsZS5qb2JOYW1lICYmICFqb2JzW2pvYl9zY2hlZHVsZS5qb2JOYW1lXSkge1xuICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihcbiAgICAgIFBhcnNlLkVycm9yLklOVEVSTkFMX1NFUlZFUl9FUlJPUixcbiAgICAgICdDYW5ub3QgU2NoZWR1bGUgYSBqb2IgdGhhdCBpcyBub3QgZGVwbG95ZWQnXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ2xvdWRDb2RlUm91dGVyIGV4dGVuZHMgUHJvbWlzZVJvdXRlciB7XG4gIG1vdW50Um91dGVzKCkge1xuICAgIHRoaXMucm91dGUoXG4gICAgICAnR0VUJyxcbiAgICAgICcvY2xvdWRfY29kZS9qb2JzJyxcbiAgICAgIG1pZGRsZXdhcmUucHJvbWlzZUVuZm9yY2VNYXN0ZXJLZXlBY2Nlc3MsXG4gICAgICBDbG91ZENvZGVSb3V0ZXIuZ2V0Sm9ic1xuICAgICk7XG4gICAgdGhpcy5yb3V0ZShcbiAgICAgICdHRVQnLFxuICAgICAgJy9jbG91ZF9jb2RlL2pvYnMvZGF0YScsXG4gICAgICBtaWRkbGV3YXJlLnByb21pc2VFbmZvcmNlTWFzdGVyS2V5QWNjZXNzLFxuICAgICAgQ2xvdWRDb2RlUm91dGVyLmdldEpvYnNEYXRhXG4gICAgKTtcbiAgICB0aGlzLnJvdXRlKFxuICAgICAgJ1BPU1QnLFxuICAgICAgJy9jbG91ZF9jb2RlL2pvYnMnLFxuICAgICAgbWlkZGxld2FyZS5wcm9taXNlRW5mb3JjZU1hc3RlcktleUFjY2VzcyxcbiAgICAgIENsb3VkQ29kZVJvdXRlci5jcmVhdGVKb2JcbiAgICApO1xuICAgIHRoaXMucm91dGUoXG4gICAgICAnUFVUJyxcbiAgICAgICcvY2xvdWRfY29kZS9qb2JzLzpvYmplY3RJZCcsXG4gICAgICBtaWRkbGV3YXJlLnByb21pc2VFbmZvcmNlTWFzdGVyS2V5QWNjZXNzLFxuICAgICAgQ2xvdWRDb2RlUm91dGVyLmVkaXRKb2JcbiAgICApO1xuICAgIHRoaXMucm91dGUoXG4gICAgICAnREVMRVRFJyxcbiAgICAgICcvY2xvdWRfY29kZS9qb2JzLzpvYmplY3RJZCcsXG4gICAgICBtaWRkbGV3YXJlLnByb21pc2VFbmZvcmNlTWFzdGVyS2V5QWNjZXNzLFxuICAgICAgQ2xvdWRDb2RlUm91dGVyLmRlbGV0ZUpvYlxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgZ2V0Sm9icyhyZXEpIHtcbiAgICByZXR1cm4gcmVzdC5maW5kKHJlcS5jb25maWcsIHJlcS5hdXRoLCAnX0pvYlNjaGVkdWxlJywge30sIHt9KS50aGVuKHNjaGVkdWxlZEpvYnMgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzcG9uc2U6IHNjaGVkdWxlZEpvYnMucmVzdWx0cyxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgZ2V0Sm9ic0RhdGEocmVxKSB7XG4gICAgY29uc3QgY29uZmlnID0gcmVxLmNvbmZpZztcbiAgICBjb25zdCBqb2JzID0gdHJpZ2dlcnMuZ2V0Sm9icyhjb25maWcuYXBwbGljYXRpb25JZCkgfHwge307XG4gICAgcmV0dXJuIHJlc3QuZmluZChyZXEuY29uZmlnLCByZXEuYXV0aCwgJ19Kb2JTY2hlZHVsZScsIHt9LCB7fSkudGhlbihzY2hlZHVsZWRKb2JzID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgICAgaW5fdXNlOiBzY2hlZHVsZWRKb2JzLnJlc3VsdHMubWFwKGpvYiA9PiBqb2Iuam9iTmFtZSksXG4gICAgICAgICAgam9iczogT2JqZWN0LmtleXMoam9icyksXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZUpvYihyZXEpIHtcbiAgICBjb25zdCB7IGpvYl9zY2hlZHVsZSB9ID0gcmVxLmJvZHk7XG4gICAgdmFsaWRhdGVKb2JTY2hlZHVsZShyZXEuY29uZmlnLCBqb2Jfc2NoZWR1bGUpO1xuICAgIHJldHVybiByZXN0LmNyZWF0ZShcbiAgICAgIHJlcS5jb25maWcsXG4gICAgICByZXEuYXV0aCxcbiAgICAgICdfSm9iU2NoZWR1bGUnLFxuICAgICAgZm9ybWF0Sm9iU2NoZWR1bGUoam9iX3NjaGVkdWxlKSxcbiAgICAgIHJlcS5jbGllbnQsXG4gICAgICByZXEuaW5mby5jb250ZXh0XG4gICAgKTtcbiAgfVxuXG4gIHN0YXRpYyBlZGl0Sm9iKHJlcSkge1xuICAgIGNvbnN0IHsgb2JqZWN0SWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgeyBqb2Jfc2NoZWR1bGUgfSA9IHJlcS5ib2R5O1xuICAgIHZhbGlkYXRlSm9iU2NoZWR1bGUocmVxLmNvbmZpZywgam9iX3NjaGVkdWxlKTtcbiAgICByZXR1cm4gcmVzdFxuICAgICAgLnVwZGF0ZShcbiAgICAgICAgcmVxLmNvbmZpZyxcbiAgICAgICAgcmVxLmF1dGgsXG4gICAgICAgICdfSm9iU2NoZWR1bGUnLFxuICAgICAgICB7IG9iamVjdElkIH0sXG4gICAgICAgIGZvcm1hdEpvYlNjaGVkdWxlKGpvYl9zY2hlZHVsZSksXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgcmVxLmluZm8uY29udGV4dFxuICAgICAgKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJlc3BvbnNlLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gIH1cblxuICBzdGF0aWMgZGVsZXRlSm9iKHJlcSkge1xuICAgIGNvbnN0IHsgb2JqZWN0SWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgcmV0dXJuIHJlc3RcbiAgICAgIC5kZWwocmVxLmNvbmZpZywgcmVxLmF1dGgsICdfSm9iU2NoZWR1bGUnLCBvYmplY3RJZCwgcmVxLmluZm8uY29udGV4dClcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZXNwb25zZSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICB9XG59XG4iXX0=