"use strict";function cov_2h6og2uv6b(){var path="/parse-server/lib/Controllers/CacheController.js";var hash="cf8a1b13c189070a5cbedfd37e0782c2825eb0ce";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Controllers/CacheController.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:70}},"2":{start:{line:8,column:27},end:{line:8,column:83}},"3":{start:{line:10,column:20},end:{line:10,column:85}},"4":{start:{line:12,column:39},end:{line:12,column:93}},"5":{start:{line:14,column:27},end:{line:14,column:30}},"6":{start:{line:17,column:2},end:{line:17,column:39}},"7":{start:{line:28,column:4},end:{line:28,column:25}},"8":{start:{line:29,column:4},end:{line:29,column:33}},"9":{start:{line:30,column:4},end:{line:30,column:19}},"10":{start:{line:34,column:21},end:{line:34,column:47}},"11":{start:{line:35,column:4},end:{line:35,column:36}},"12":{start:{line:39,column:21},end:{line:39,column:47}},"13":{start:{line:40,column:4},end:{line:40,column:48}},"14":{start:{line:44,column:21},end:{line:44,column:47}},"15":{start:{line:45,column:4},end:{line:45,column:36}},"16":{start:{line:49,column:4},end:{line:49,column:30}},"17":{start:{line:54,column:0},end:{line:54,column:28}},"18":{start:{line:58,column:4},end:{line:58,column:35}},"19":{start:{line:59,column:4},end:{line:59,column:43}},"20":{start:{line:60,column:4},end:{line:60,column:43}},"21":{start:{line:61,column:4},end:{line:61,column:49}},"22":{start:{line:65,column:21},end:{line:65,column:46}},"23":{start:{line:66,column:4},end:{line:66,column:78}},"24":{start:{line:66,column:55},end:{line:66,column:76}},"25":{start:{line:70,column:21},end:{line:70,column:46}},"26":{start:{line:71,column:4},end:{line:71,column:50}},"27":{start:{line:75,column:21},end:{line:75,column:46}},"28":{start:{line:76,column:4},end:{line:76,column:38}},"29":{start:{line:80,column:4},end:{line:80,column:32}},"30":{start:{line:84,column:4},end:{line:84,column:33}},"31":{start:{line:89,column:0},end:{line:89,column:42}},"32":{start:{line:90,column:15},end:{line:90,column:30}},"33":{start:{line:91,column:0},end:{line:91,column:27}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:12,column:9},end:{line:12,column:31}},loc:{start:{line:12,column:37},end:{line:12,column:95}},line:12},"1":{name:"joinKeys",decl:{start:{line:16,column:9},end:{line:16,column:17}},loc:{start:{line:16,column:27},end:{line:18,column:1}},line:16},"2":{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:44},end:{line:31,column:3}},line:27},"3":{name:"(anonymous_3)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:11},end:{line:36,column:3}},line:33},"4":{name:"(anonymous_4)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:23},end:{line:41,column:3}},line:38},"5":{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:46,column:3}},line:43},"6":{name:"(anonymous_6)",decl:{start:{line:48,column:2},end:{line:48,column:3}},loc:{start:{line:48,column:10},end:{line:50,column:3}},line:48},"7":{name:"(anonymous_7)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:44},end:{line:62,column:3}},line:57},"8":{name:"(anonymous_8)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:11},end:{line:67,column:3}},line:64},"9":{name:"(anonymous_9)",decl:{start:{line:66,column:49},end:{line:66,column:50}},loc:{start:{line:66,column:55},end:{line:66,column:76}},line:66},"10":{name:"(anonymous_10)",decl:{start:{line:69,column:2},end:{line:69,column:3}},loc:{start:{line:69,column:23},end:{line:72,column:3}},line:69},"11":{name:"(anonymous_11)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:11},end:{line:77,column:3}},line:74},"12":{name:"(anonymous_12)",decl:{start:{line:79,column:2},end:{line:79,column:3}},loc:{start:{line:79,column:10},end:{line:81,column:3}},line:79},"13":{name:"(anonymous_13)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:24},end:{line:85,column:3}},line:83}},branchMap:{"0":{loc:{start:{line:12,column:46},end:{line:12,column:92}},type:"cond-expr",locations:[{start:{line:12,column:70},end:{line:12,column:73}},{start:{line:12,column:76},end:{line:12,column:92}}],line:12},"1":{loc:{start:{line:12,column:46},end:{line:12,column:67}},type:"binary-expr",locations:[{start:{line:12,column:46},end:{line:12,column:49}},{start:{line:12,column:53},end:{line:12,column:67}}],line:12},"2":{loc:{start:{line:57,column:30},end:{line:57,column:42}},type:"default-arg",locations:[{start:{line:57,column:40},end:{line:57,column:42}}],line:57}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},b:{"0":[0,0],"1":[0,0],"2":[0]},inputSourceMap:{version:3,sources:["../../src/Controllers/CacheController.js"],names:["KEY_SEPARATOR_CHAR","joinKeys","keys","join","SubCache","constructor","prefix","cacheController","ttl","cache","get","key","cacheKey","put","value","del","clear","CacheController","AdaptableController","adapter","appId","options","role","user","graphQL","then","Promise","resolve","expectedAdapterType","CacheAdapter"],mappings:";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,kBAAkB,GAAG,GAA3B;;AAEA,SAASC,QAAT,CAAkB,GAAGC,IAArB,EAA2B;AACzB,SAAOA,IAAI,CAACC,IAAL,CAAUH,kBAAV,CAAP;AACD;AAED;AACA;AACA;AACA;AACA;;;AACO,MAAMI,QAAN,CAAe;AACpBC,EAAAA,WAAW,CAACC,MAAD,EAASC,eAAT,EAA0BC,GAA1B,EAA+B;AACxC,SAAKF,MAAL,GAAcA,MAAd;AACA,SAAKG,KAAL,GAAaF,eAAb;AACA,SAAKC,GAAL,GAAWA,GAAX;AACD;;AAEDE,EAAAA,GAAG,CAACC,GAAD,EAAM;AACP,UAAMC,QAAQ,GAAGX,QAAQ,CAAC,KAAKK,MAAN,EAAcK,GAAd,CAAzB;AACA,WAAO,KAAKF,KAAL,CAAWC,GAAX,CAAeE,QAAf,CAAP;AACD;;AAEDC,EAAAA,GAAG,CAACF,GAAD,EAAMG,KAAN,EAAaN,GAAb,EAAkB;AACnB,UAAMI,QAAQ,GAAGX,QAAQ,CAAC,KAAKK,MAAN,EAAcK,GAAd,CAAzB;AACA,WAAO,KAAKF,KAAL,CAAWI,GAAX,CAAeD,QAAf,EAAyBE,KAAzB,EAAgCN,GAAhC,CAAP;AACD;;AAEDO,EAAAA,GAAG,CAACJ,GAAD,EAAM;AACP,UAAMC,QAAQ,GAAGX,QAAQ,CAAC,KAAKK,MAAN,EAAcK,GAAd,CAAzB;AACA,WAAO,KAAKF,KAAL,CAAWM,GAAX,CAAeH,QAAf,CAAP;AACD;;AAEDI,EAAAA,KAAK,GAAG;AACN,WAAO,KAAKP,KAAL,CAAWO,KAAX,EAAP;AACD;;AAxBmB;;;;AA2Bf,MAAMC,eAAN,SAA8BC,4BAA9B,CAAkD;AACvDb,EAAAA,WAAW,CAACc,OAAD,EAAUC,KAAV,EAAiBC,OAAO,GAAG,EAA3B,EAA+B;AACxC,UAAMF,OAAN,EAAeC,KAAf,EAAsBC,OAAtB;AAEA,SAAKC,IAAL,GAAY,IAAIlB,QAAJ,CAAa,MAAb,EAAqB,IAArB,CAAZ;AACA,SAAKmB,IAAL,GAAY,IAAInB,QAAJ,CAAa,MAAb,EAAqB,IAArB,CAAZ;AACA,SAAKoB,OAAL,GAAe,IAAIpB,QAAJ,CAAa,SAAb,EAAwB,IAAxB,CAAf;AACD;;AAEDM,EAAAA,GAAG,CAACC,GAAD,EAAM;AACP,UAAMC,QAAQ,GAAGX,QAAQ,CAAC,KAAKmB,KAAN,EAAaT,GAAb,CAAzB;AACA,WAAO,KAAKQ,OAAL,CAAaT,GAAb,CAAiBE,QAAjB,EAA2Ba,IAA3B,CAAgC,IAAhC,EAAsC,MAAMC,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAA5C,CAAP;AACD;;AAEDd,EAAAA,GAAG,CAACF,GAAD,EAAMG,KAAN,EAAaN,GAAb,EAAkB;AACnB,UAAMI,QAAQ,GAAGX,QAAQ,CAAC,KAAKmB,KAAN,EAAaT,GAAb,CAAzB;AACA,WAAO,KAAKQ,OAAL,CAAaN,GAAb,CAAiBD,QAAjB,EAA2BE,KAA3B,EAAkCN,GAAlC,CAAP;AACD;;AAEDO,EAAAA,GAAG,CAACJ,GAAD,EAAM;AACP,UAAMC,QAAQ,GAAGX,QAAQ,CAAC,KAAKmB,KAAN,EAAaT,GAAb,CAAzB;AACA,WAAO,KAAKQ,OAAL,CAAaJ,GAAb,CAAiBH,QAAjB,CAAP;AACD;;AAEDI,EAAAA,KAAK,GAAG;AACN,WAAO,KAAKG,OAAL,CAAaH,KAAb,EAAP;AACD;;AAEDY,EAAAA,mBAAmB,GAAG;AACpB,WAAOC,qBAAP;AACD;;AA9BsD;;;eAiC1CZ,e",sourcesContent:["import AdaptableController from './AdaptableController';\nimport CacheAdapter from '../Adapters/Cache/CacheAdapter';\n\nconst KEY_SEPARATOR_CHAR = ':';\n\nfunction joinKeys(...keys) {\n  return keys.join(KEY_SEPARATOR_CHAR);\n}\n\n/**\n * Prefix all calls to the cache via a prefix string, useful when grouping Cache by object type.\n *\n * eg \"Role\" or \"Session\"\n */\nexport class SubCache {\n  constructor(prefix, cacheController, ttl) {\n    this.prefix = prefix;\n    this.cache = cacheController;\n    this.ttl = ttl;\n  }\n\n  get(key) {\n    const cacheKey = joinKeys(this.prefix, key);\n    return this.cache.get(cacheKey);\n  }\n\n  put(key, value, ttl) {\n    const cacheKey = joinKeys(this.prefix, key);\n    return this.cache.put(cacheKey, value, ttl);\n  }\n\n  del(key) {\n    const cacheKey = joinKeys(this.prefix, key);\n    return this.cache.del(cacheKey);\n  }\n\n  clear() {\n    return this.cache.clear();\n  }\n}\n\nexport class CacheController extends AdaptableController {\n  constructor(adapter, appId, options = {}) {\n    super(adapter, appId, options);\n\n    this.role = new SubCache('role', this);\n    this.user = new SubCache('user', this);\n    this.graphQL = new SubCache('graphQL', this);\n  }\n\n  get(key) {\n    const cacheKey = joinKeys(this.appId, key);\n    return this.adapter.get(cacheKey).then(null, () => Promise.resolve(null));\n  }\n\n  put(key, value, ttl) {\n    const cacheKey = joinKeys(this.appId, key);\n    return this.adapter.put(cacheKey, value, ttl);\n  }\n\n  del(key) {\n    const cacheKey = joinKeys(this.appId, key);\n    return this.adapter.del(cacheKey);\n  }\n\n  clear() {\n    return this.adapter.clear();\n  }\n\n  expectedAdapterType() {\n    return CacheAdapter;\n  }\n}\n\nexport default CacheController;\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cf8a1b13c189070a5cbedfd37e0782c2825eb0ce"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2h6og2uv6b=function(){return actualCoverage;};}return actualCoverage;}cov_2h6og2uv6b();cov_2h6og2uv6b().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2h6og2uv6b().s[1]++;exports.default=exports.CacheController=exports.SubCache=void 0;var _AdaptableController=(cov_2h6og2uv6b().s[2]++,_interopRequireDefault(require("./AdaptableController")));var _CacheAdapter=(cov_2h6og2uv6b().s[3]++,_interopRequireDefault(require("../Adapters/Cache/CacheAdapter")));function _interopRequireDefault(obj){cov_2h6og2uv6b().f[0]++;cov_2h6og2uv6b().s[4]++;return(cov_2h6og2uv6b().b[1][0]++,obj)&&(cov_2h6og2uv6b().b[1][1]++,obj.__esModule)?(cov_2h6og2uv6b().b[0][0]++,obj):(cov_2h6og2uv6b().b[0][1]++,{default:obj});}const KEY_SEPARATOR_CHAR=(cov_2h6og2uv6b().s[5]++,':');function joinKeys(...keys){cov_2h6og2uv6b().f[1]++;cov_2h6og2uv6b().s[6]++;return keys.join(KEY_SEPARATOR_CHAR);}/**
 * Prefix all calls to the cache via a prefix string, useful when grouping Cache by object type.
 *
 * eg "Role" or "Session"
 */class SubCache{constructor(prefix,cacheController,ttl){cov_2h6og2uv6b().f[2]++;cov_2h6og2uv6b().s[7]++;this.prefix=prefix;cov_2h6og2uv6b().s[8]++;this.cache=cacheController;cov_2h6og2uv6b().s[9]++;this.ttl=ttl;}get(key){cov_2h6og2uv6b().f[3]++;const cacheKey=(cov_2h6og2uv6b().s[10]++,joinKeys(this.prefix,key));cov_2h6og2uv6b().s[11]++;return this.cache.get(cacheKey);}put(key,value,ttl){cov_2h6og2uv6b().f[4]++;const cacheKey=(cov_2h6og2uv6b().s[12]++,joinKeys(this.prefix,key));cov_2h6og2uv6b().s[13]++;return this.cache.put(cacheKey,value,ttl);}del(key){cov_2h6og2uv6b().f[5]++;const cacheKey=(cov_2h6og2uv6b().s[14]++,joinKeys(this.prefix,key));cov_2h6og2uv6b().s[15]++;return this.cache.del(cacheKey);}clear(){cov_2h6og2uv6b().f[6]++;cov_2h6og2uv6b().s[16]++;return this.cache.clear();}}cov_2h6og2uv6b().s[17]++;exports.SubCache=SubCache;class CacheController extends(_AdaptableController.default){constructor(adapter,appId,options=(cov_2h6og2uv6b().b[2][0]++,{})){cov_2h6og2uv6b().f[7]++;cov_2h6og2uv6b().s[18]++;super(adapter,appId,options);cov_2h6og2uv6b().s[19]++;this.role=new SubCache('role',this);cov_2h6og2uv6b().s[20]++;this.user=new SubCache('user',this);cov_2h6og2uv6b().s[21]++;this.graphQL=new SubCache('graphQL',this);}get(key){cov_2h6og2uv6b().f[8]++;const cacheKey=(cov_2h6og2uv6b().s[22]++,joinKeys(this.appId,key));cov_2h6og2uv6b().s[23]++;return this.adapter.get(cacheKey).then(null,()=>{cov_2h6og2uv6b().f[9]++;cov_2h6og2uv6b().s[24]++;return Promise.resolve(null);});}put(key,value,ttl){cov_2h6og2uv6b().f[10]++;const cacheKey=(cov_2h6og2uv6b().s[25]++,joinKeys(this.appId,key));cov_2h6og2uv6b().s[26]++;return this.adapter.put(cacheKey,value,ttl);}del(key){cov_2h6og2uv6b().f[11]++;const cacheKey=(cov_2h6og2uv6b().s[27]++,joinKeys(this.appId,key));cov_2h6og2uv6b().s[28]++;return this.adapter.del(cacheKey);}clear(){cov_2h6og2uv6b().f[12]++;cov_2h6og2uv6b().s[29]++;return this.adapter.clear();}expectedAdapterType(){cov_2h6og2uv6b().f[13]++;cov_2h6og2uv6b().s[30]++;return _CacheAdapter.default;}}cov_2h6og2uv6b().s[31]++;exports.CacheController=CacheController;var _default=(cov_2h6og2uv6b().s[32]++,CacheController);cov_2h6og2uv6b().s[33]++;exports.default=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Db250cm9sbGVycy9DYWNoZUNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiS0VZX1NFUEFSQVRPUl9DSEFSIiwiam9pbktleXMiLCJrZXlzIiwiam9pbiIsIlN1YkNhY2hlIiwiY29uc3RydWN0b3IiLCJwcmVmaXgiLCJjYWNoZUNvbnRyb2xsZXIiLCJ0dGwiLCJjYWNoZSIsImdldCIsImtleSIsImNhY2hlS2V5IiwicHV0IiwidmFsdWUiLCJkZWwiLCJjbGVhciIsIkNhY2hlQ29udHJvbGxlciIsIkFkYXB0YWJsZUNvbnRyb2xsZXIiLCJhZGFwdGVyIiwiYXBwSWQiLCJvcHRpb25zIiwicm9sZSIsInVzZXIiLCJncmFwaFFMIiwidGhlbiIsIlByb21pc2UiLCJyZXNvbHZlIiwiZXhwZWN0ZWRBZGFwdGVyVHlwZSIsIkNhY2hlQWRhcHRlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsa0JBQWtCLEdBQUcsR0FBM0I7O0FBRUEsU0FBU0MsUUFBVCxDQUFrQixHQUFHQyxJQUFyQixFQUEyQjtBQUN6QixTQUFPQSxJQUFJLENBQUNDLElBQUwsQ0FBVUgsa0JBQVYsQ0FBUDtBQUNEO0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ08sTUFBTUksUUFBTixDQUFlO0FBQ3BCQyxFQUFBQSxXQUFXLENBQUNDLE1BQUQsRUFBU0MsZUFBVCxFQUEwQkMsR0FBMUIsRUFBK0I7QUFDeEMsU0FBS0YsTUFBTCxHQUFjQSxNQUFkO0FBQ0EsU0FBS0csS0FBTCxHQUFhRixlQUFiO0FBQ0EsU0FBS0MsR0FBTCxHQUFXQSxHQUFYO0FBQ0Q7O0FBRURFLEVBQUFBLEdBQUcsQ0FBQ0MsR0FBRCxFQUFNO0FBQ1AsVUFBTUMsUUFBUSxHQUFHWCxRQUFRLENBQUMsS0FBS0ssTUFBTixFQUFjSyxHQUFkLENBQXpCO0FBQ0EsV0FBTyxLQUFLRixLQUFMLENBQVdDLEdBQVgsQ0FBZUUsUUFBZixDQUFQO0FBQ0Q7O0FBRURDLEVBQUFBLEdBQUcsQ0FBQ0YsR0FBRCxFQUFNRyxLQUFOLEVBQWFOLEdBQWIsRUFBa0I7QUFDbkIsVUFBTUksUUFBUSxHQUFHWCxRQUFRLENBQUMsS0FBS0ssTUFBTixFQUFjSyxHQUFkLENBQXpCO0FBQ0EsV0FBTyxLQUFLRixLQUFMLENBQVdJLEdBQVgsQ0FBZUQsUUFBZixFQUF5QkUsS0FBekIsRUFBZ0NOLEdBQWhDLENBQVA7QUFDRDs7QUFFRE8sRUFBQUEsR0FBRyxDQUFDSixHQUFELEVBQU07QUFDUCxVQUFNQyxRQUFRLEdBQUdYLFFBQVEsQ0FBQyxLQUFLSyxNQUFOLEVBQWNLLEdBQWQsQ0FBekI7QUFDQSxXQUFPLEtBQUtGLEtBQUwsQ0FBV00sR0FBWCxDQUFlSCxRQUFmLENBQVA7QUFDRDs7QUFFREksRUFBQUEsS0FBSyxHQUFHO0FBQ04sV0FBTyxLQUFLUCxLQUFMLENBQVdPLEtBQVgsRUFBUDtBQUNEOztBQXhCbUI7Ozs7QUEyQmYsTUFBTUMsZUFBTixTQUE4QkMsNEJBQTlCLENBQWtEO0FBQ3ZEYixFQUFBQSxXQUFXLENBQUNjLE9BQUQsRUFBVUMsS0FBVixFQUFpQkMsT0FBTyxHQUFHLEVBQTNCLEVBQStCO0FBQ3hDLFVBQU1GLE9BQU4sRUFBZUMsS0FBZixFQUFzQkMsT0FBdEI7QUFFQSxTQUFLQyxJQUFMLEdBQVksSUFBSWxCLFFBQUosQ0FBYSxNQUFiLEVBQXFCLElBQXJCLENBQVo7QUFDQSxTQUFLbUIsSUFBTCxHQUFZLElBQUluQixRQUFKLENBQWEsTUFBYixFQUFxQixJQUFyQixDQUFaO0FBQ0EsU0FBS29CLE9BQUwsR0FBZSxJQUFJcEIsUUFBSixDQUFhLFNBQWIsRUFBd0IsSUFBeEIsQ0FBZjtBQUNEOztBQUVETSxFQUFBQSxHQUFHLENBQUNDLEdBQUQsRUFBTTtBQUNQLFVBQU1DLFFBQVEsR0FBR1gsUUFBUSxDQUFDLEtBQUttQixLQUFOLEVBQWFULEdBQWIsQ0FBekI7QUFDQSxXQUFPLEtBQUtRLE9BQUwsQ0FBYVQsR0FBYixDQUFpQkUsUUFBakIsRUFBMkJhLElBQTNCLENBQWdDLElBQWhDLEVBQXNDLE1BQU1DLE9BQU8sQ0FBQ0MsT0FBUixDQUFnQixJQUFoQixDQUE1QyxDQUFQO0FBQ0Q7O0FBRURkLEVBQUFBLEdBQUcsQ0FBQ0YsR0FBRCxFQUFNRyxLQUFOLEVBQWFOLEdBQWIsRUFBa0I7QUFDbkIsVUFBTUksUUFBUSxHQUFHWCxRQUFRLENBQUMsS0FBS21CLEtBQU4sRUFBYVQsR0FBYixDQUF6QjtBQUNBLFdBQU8sS0FBS1EsT0FBTCxDQUFhTixHQUFiLENBQWlCRCxRQUFqQixFQUEyQkUsS0FBM0IsRUFBa0NOLEdBQWxDLENBQVA7QUFDRDs7QUFFRE8sRUFBQUEsR0FBRyxDQUFDSixHQUFELEVBQU07QUFDUCxVQUFNQyxRQUFRLEdBQUdYLFFBQVEsQ0FBQyxLQUFLbUIsS0FBTixFQUFhVCxHQUFiLENBQXpCO0FBQ0EsV0FBTyxLQUFLUSxPQUFMLENBQWFKLEdBQWIsQ0FBaUJILFFBQWpCLENBQVA7QUFDRDs7QUFFREksRUFBQUEsS0FBSyxHQUFHO0FBQ04sV0FBTyxLQUFLRyxPQUFMLENBQWFILEtBQWIsRUFBUDtBQUNEOztBQUVEWSxFQUFBQSxtQkFBbUIsR0FBRztBQUNwQixXQUFPQyxxQkFBUDtBQUNEOztBQTlCc0Q7OztlQWlDMUNaLGUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQWRhcHRhYmxlQ29udHJvbGxlciBmcm9tICcuL0FkYXB0YWJsZUNvbnRyb2xsZXInO1xuaW1wb3J0IENhY2hlQWRhcHRlciBmcm9tICcuLi9BZGFwdGVycy9DYWNoZS9DYWNoZUFkYXB0ZXInO1xuXG5jb25zdCBLRVlfU0VQQVJBVE9SX0NIQVIgPSAnOic7XG5cbmZ1bmN0aW9uIGpvaW5LZXlzKC4uLmtleXMpIHtcbiAgcmV0dXJuIGtleXMuam9pbihLRVlfU0VQQVJBVE9SX0NIQVIpO1xufVxuXG4vKipcbiAqIFByZWZpeCBhbGwgY2FsbHMgdG8gdGhlIGNhY2hlIHZpYSBhIHByZWZpeCBzdHJpbmcsIHVzZWZ1bCB3aGVuIGdyb3VwaW5nIENhY2hlIGJ5IG9iamVjdCB0eXBlLlxuICpcbiAqIGVnIFwiUm9sZVwiIG9yIFwiU2Vzc2lvblwiXG4gKi9cbmV4cG9ydCBjbGFzcyBTdWJDYWNoZSB7XG4gIGNvbnN0cnVjdG9yKHByZWZpeCwgY2FjaGVDb250cm9sbGVyLCB0dGwpIHtcbiAgICB0aGlzLnByZWZpeCA9IHByZWZpeDtcbiAgICB0aGlzLmNhY2hlID0gY2FjaGVDb250cm9sbGVyO1xuICAgIHRoaXMudHRsID0gdHRsO1xuICB9XG5cbiAgZ2V0KGtleSkge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gam9pbktleXModGhpcy5wcmVmaXgsIGtleSk7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUuZ2V0KGNhY2hlS2V5KTtcbiAgfVxuXG4gIHB1dChrZXksIHZhbHVlLCB0dGwpIHtcbiAgICBjb25zdCBjYWNoZUtleSA9IGpvaW5LZXlzKHRoaXMucHJlZml4LCBrZXkpO1xuICAgIHJldHVybiB0aGlzLmNhY2hlLnB1dChjYWNoZUtleSwgdmFsdWUsIHR0bCk7XG4gIH1cblxuICBkZWwoa2V5KSB7XG4gICAgY29uc3QgY2FjaGVLZXkgPSBqb2luS2V5cyh0aGlzLnByZWZpeCwga2V5KTtcbiAgICByZXR1cm4gdGhpcy5jYWNoZS5kZWwoY2FjaGVLZXkpO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUuY2xlYXIoKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ2FjaGVDb250cm9sbGVyIGV4dGVuZHMgQWRhcHRhYmxlQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKGFkYXB0ZXIsIGFwcElkLCBvcHRpb25zID0ge30pIHtcbiAgICBzdXBlcihhZGFwdGVyLCBhcHBJZCwgb3B0aW9ucyk7XG5cbiAgICB0aGlzLnJvbGUgPSBuZXcgU3ViQ2FjaGUoJ3JvbGUnLCB0aGlzKTtcbiAgICB0aGlzLnVzZXIgPSBuZXcgU3ViQ2FjaGUoJ3VzZXInLCB0aGlzKTtcbiAgICB0aGlzLmdyYXBoUUwgPSBuZXcgU3ViQ2FjaGUoJ2dyYXBoUUwnLCB0aGlzKTtcbiAgfVxuXG4gIGdldChrZXkpIHtcbiAgICBjb25zdCBjYWNoZUtleSA9IGpvaW5LZXlzKHRoaXMuYXBwSWQsIGtleSk7XG4gICAgcmV0dXJuIHRoaXMuYWRhcHRlci5nZXQoY2FjaGVLZXkpLnRoZW4obnVsbCwgKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpKTtcbiAgfVxuXG4gIHB1dChrZXksIHZhbHVlLCB0dGwpIHtcbiAgICBjb25zdCBjYWNoZUtleSA9IGpvaW5LZXlzKHRoaXMuYXBwSWQsIGtleSk7XG4gICAgcmV0dXJuIHRoaXMuYWRhcHRlci5wdXQoY2FjaGVLZXksIHZhbHVlLCB0dGwpO1xuICB9XG5cbiAgZGVsKGtleSkge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gam9pbktleXModGhpcy5hcHBJZCwga2V5KTtcbiAgICByZXR1cm4gdGhpcy5hZGFwdGVyLmRlbChjYWNoZUtleSk7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICByZXR1cm4gdGhpcy5hZGFwdGVyLmNsZWFyKCk7XG4gIH1cblxuICBleHBlY3RlZEFkYXB0ZXJUeXBlKCkge1xuICAgIHJldHVybiBDYWNoZUFkYXB0ZXI7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FjaGVDb250cm9sbGVyO1xuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Db250cm9sbGVycy9DYWNoZUNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiS0VZX1NFUEFSQVRPUl9DSEFSIiwiam9pbktleXMiLCJrZXlzIiwiY29uc3RydWN0b3IiLCJnZXQiLCJjYWNoZUtleSIsInB1dCIsImRlbCIsImNsZWFyIiwiQWRhcHRhYmxlQ29udHJvbGxlciIsIm9wdGlvbnMiLCJQcm9taXNlIiwiZXhwZWN0ZWRBZGFwdGVyVHlwZSIsIkNhY2hlQWRhcHRlciIsIkNhY2hlQ29udHJvbGxlciJdLCJtYXBwaW5ncyI6Ink0U0FLQTtvUUFMQSxHQUFBLENBQUEsb0JBQUEsMEJBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsdUJBQUEsQ0FBQSxDQUFBLENBQUEsQ0FDQSxHQUFBLENBQUEsYUFBQSwwQkFBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxnQ0FBQSxDQUFBLENBQUEsQ0FBQSxDLHNQQUVBLEtBQU1BLENBQUFBLGtCQUFrQiwwQkFBeEIsR0FBd0IsQ0FBeEIsQ0FFQSxRQUFTQyxDQUFBQSxRQUFULENBQWtCLEdBQWxCLElBQUEsQ0FBMkIsaURBQ3pCLE1BQU9DLENBQUFBLElBQUksQ0FBSkEsSUFBQUEsQ0FBUCxrQkFBT0EsQ0FBUCxDQUNELENBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUNPLEtBQUEsQ0FBQSxRQUFlLENBQ3BCQyxXQUFXLENBQUEsTUFBQSxDQUFBLGVBQUEsQ0FBQSxHQUFBLENBQStCLGlEQUN4QyxLQUFBLE1BQUEsQ0FBQSxNQUFBLENBRHdDLHdCQUV4QyxLQUFBLEtBQUEsQ0FBQSxlQUFBLENBRndDLHdCQUd4QyxLQUFBLEdBQUEsQ0FBQSxHQUFBLENBQ0QsQ0FFREMsR0FBRyxDQUFBLEdBQUEsQ0FBTSx5QkFDUCxLQUFNQyxDQUFBQSxRQUFRLDJCQUFHSixRQUFRLENBQUMsS0FBRCxNQUFBLENBQXpCLEdBQXlCLENBQVgsQ0FBZCxDQURPLHlCQUVQLE1BQU8sTUFBQSxLQUFBLENBQUEsR0FBQSxDQUFQLFFBQU8sQ0FBUCxDQUNELENBRURLLEdBQUcsQ0FBQSxHQUFBLENBQUEsS0FBQSxDQUFBLEdBQUEsQ0FBa0IseUJBQ25CLEtBQU1ELENBQUFBLFFBQVEsMkJBQUdKLFFBQVEsQ0FBQyxLQUFELE1BQUEsQ0FBekIsR0FBeUIsQ0FBWCxDQUFkLENBRG1CLHlCQUVuQixNQUFPLE1BQUEsS0FBQSxDQUFBLEdBQUEsQ0FBQSxRQUFBLENBQUEsS0FBQSxDQUFQLEdBQU8sQ0FBUCxDQUNELENBRURNLEdBQUcsQ0FBQSxHQUFBLENBQU0seUJBQ1AsS0FBTUYsQ0FBQUEsUUFBUSwyQkFBR0osUUFBUSxDQUFDLEtBQUQsTUFBQSxDQUF6QixHQUF5QixDQUFYLENBQWQsQ0FETyx5QkFFUCxNQUFPLE1BQUEsS0FBQSxDQUFBLEdBQUEsQ0FBUCxRQUFPLENBQVAsQ0FDRCxDQUVETyxLQUFLLEVBQUcsa0RBQ04sTUFBTyxNQUFBLEtBQUEsQ0FBUCxLQUFPLEVBQVAsQ0FDRCxDQXhCbUIsQyxtREEyQmYsS0FBQSxDQUFBLGVBQUEsU0FBOEJDLG9CQUFBQSxDQUE5QixPQUFBLENBQWtELENBQ3ZETixXQUFXLENBQUEsT0FBQSxDQUFBLEtBQUEsQ0FBaUJPLE9BQU8sNkJBQXhCLEVBQXdCLENBQXhCLENBQStCLGtEQUN4QyxNQUFBLE9BQUEsQ0FBQSxLQUFBLENBQUEsT0FBQSxFQUR3Qyx5QkFHeEMsS0FBQSxJQUFBLENBQVksR0FBQSxDQUFBLFFBQUEsQ0FBQSxNQUFBLENBQVosSUFBWSxDQUFaLENBSHdDLHlCQUl4QyxLQUFBLElBQUEsQ0FBWSxHQUFBLENBQUEsUUFBQSxDQUFBLE1BQUEsQ0FBWixJQUFZLENBQVosQ0FKd0MseUJBS3hDLEtBQUEsT0FBQSxDQUFlLEdBQUEsQ0FBQSxRQUFBLENBQUEsU0FBQSxDQUFmLElBQWUsQ0FBZixDQUNELENBRUROLEdBQUcsQ0FBQSxHQUFBLENBQU0seUJBQ1AsS0FBTUMsQ0FBQUEsUUFBUSwyQkFBR0osUUFBUSxDQUFDLEtBQUQsS0FBQSxDQUF6QixHQUF5QixDQUFYLENBQWQsQ0FETyx5QkFFUCxNQUFPLE1BQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxRQUFBLEVBQUEsSUFBQSxDQUFBLElBQUEsQ0FBc0MsSUFBTVUsd0RBQUFBLENBQUFBLE9BQU8sQ0FBUEEsT0FBQUEsQ0FBQUEsSUFBQUEsRUFBbkQsQ0FBTyxDQUFQLENBQ0QsQ0FFREwsR0FBRyxDQUFBLEdBQUEsQ0FBQSxLQUFBLENBQUEsR0FBQSxDQUFrQiwwQkFDbkIsS0FBTUQsQ0FBQUEsUUFBUSwyQkFBR0osUUFBUSxDQUFDLEtBQUQsS0FBQSxDQUF6QixHQUF5QixDQUFYLENBQWQsQ0FEbUIseUJBRW5CLE1BQU8sTUFBQSxPQUFBLENBQUEsR0FBQSxDQUFBLFFBQUEsQ0FBQSxLQUFBLENBQVAsR0FBTyxDQUFQLENBQ0QsQ0FFRE0sR0FBRyxDQUFBLEdBQUEsQ0FBTSwwQkFDUCxLQUFNRixDQUFBQSxRQUFRLDJCQUFHSixRQUFRLENBQUMsS0FBRCxLQUFBLENBQXpCLEdBQXlCLENBQVgsQ0FBZCxDQURPLHlCQUVQLE1BQU8sTUFBQSxPQUFBLENBQUEsR0FBQSxDQUFQLFFBQU8sQ0FBUCxDQUNELENBRURPLEtBQUssRUFBRyxtREFDTixNQUFPLE1BQUEsT0FBQSxDQUFQLEtBQU8sRUFBUCxDQUNELENBRURJLG1CQUFtQixFQUFHLG1EQUNwQixNQUFPQyxDQUFBQSxhQUFBQSxDQUFQLE9BQUEsQ0FDRCxDQTlCc0QsQyx3R0FpQzFDQyxlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFkYXB0YWJsZUNvbnRyb2xsZXIgZnJvbSAnLi9BZGFwdGFibGVDb250cm9sbGVyJztcbmltcG9ydCBDYWNoZUFkYXB0ZXIgZnJvbSAnLi4vQWRhcHRlcnMvQ2FjaGUvQ2FjaGVBZGFwdGVyJztcblxuY29uc3QgS0VZX1NFUEFSQVRPUl9DSEFSID0gJzonO1xuXG5mdW5jdGlvbiBqb2luS2V5cyguLi5rZXlzKSB7XG4gIHJldHVybiBrZXlzLmpvaW4oS0VZX1NFUEFSQVRPUl9DSEFSKTtcbn1cblxuLyoqXG4gKiBQcmVmaXggYWxsIGNhbGxzIHRvIHRoZSBjYWNoZSB2aWEgYSBwcmVmaXggc3RyaW5nLCB1c2VmdWwgd2hlbiBncm91cGluZyBDYWNoZSBieSBvYmplY3QgdHlwZS5cbiAqXG4gKiBlZyBcIlJvbGVcIiBvciBcIlNlc3Npb25cIlxuICovXG5leHBvcnQgY2xhc3MgU3ViQ2FjaGUge1xuICBjb25zdHJ1Y3RvcihwcmVmaXgsIGNhY2hlQ29udHJvbGxlciwgdHRsKSB7XG4gICAgdGhpcy5wcmVmaXggPSBwcmVmaXg7XG4gICAgdGhpcy5jYWNoZSA9IGNhY2hlQ29udHJvbGxlcjtcbiAgICB0aGlzLnR0bCA9IHR0bDtcbiAgfVxuXG4gIGdldChrZXkpIHtcbiAgICBjb25zdCBjYWNoZUtleSA9IGpvaW5LZXlzKHRoaXMucHJlZml4LCBrZXkpO1xuICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChjYWNoZUtleSk7XG4gIH1cblxuICBwdXQoa2V5LCB2YWx1ZSwgdHRsKSB7XG4gICAgY29uc3QgY2FjaGVLZXkgPSBqb2luS2V5cyh0aGlzLnByZWZpeCwga2V5KTtcbiAgICByZXR1cm4gdGhpcy5jYWNoZS5wdXQoY2FjaGVLZXksIHZhbHVlLCB0dGwpO1xuICB9XG5cbiAgZGVsKGtleSkge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gam9pbktleXModGhpcy5wcmVmaXgsIGtleSk7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUuZGVsKGNhY2hlS2V5KTtcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlLmNsZWFyKCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENhY2hlQ29udHJvbGxlciBleHRlbmRzIEFkYXB0YWJsZUNvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcihhZGFwdGVyLCBhcHBJZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgc3VwZXIoYWRhcHRlciwgYXBwSWQsIG9wdGlvbnMpO1xuXG4gICAgdGhpcy5yb2xlID0gbmV3IFN1YkNhY2hlKCdyb2xlJywgdGhpcyk7XG4gICAgdGhpcy51c2VyID0gbmV3IFN1YkNhY2hlKCd1c2VyJywgdGhpcyk7XG4gICAgdGhpcy5ncmFwaFFMID0gbmV3IFN1YkNhY2hlKCdncmFwaFFMJywgdGhpcyk7XG4gIH1cblxuICBnZXQoa2V5KSB7XG4gICAgY29uc3QgY2FjaGVLZXkgPSBqb2luS2V5cyh0aGlzLmFwcElkLCBrZXkpO1xuICAgIHJldHVybiB0aGlzLmFkYXB0ZXIuZ2V0KGNhY2hlS2V5KS50aGVuKG51bGwsICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSk7XG4gIH1cblxuICBwdXQoa2V5LCB2YWx1ZSwgdHRsKSB7XG4gICAgY29uc3QgY2FjaGVLZXkgPSBqb2luS2V5cyh0aGlzLmFwcElkLCBrZXkpO1xuICAgIHJldHVybiB0aGlzLmFkYXB0ZXIucHV0KGNhY2hlS2V5LCB2YWx1ZSwgdHRsKTtcbiAgfVxuXG4gIGRlbChrZXkpIHtcbiAgICBjb25zdCBjYWNoZUtleSA9IGpvaW5LZXlzKHRoaXMuYXBwSWQsIGtleSk7XG4gICAgcmV0dXJuIHRoaXMuYWRhcHRlci5kZWwoY2FjaGVLZXkpO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRhcHRlci5jbGVhcigpO1xuICB9XG5cbiAgZXhwZWN0ZWRBZGFwdGVyVHlwZSgpIHtcbiAgICByZXR1cm4gQ2FjaGVBZGFwdGVyO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhY2hlQ29udHJvbGxlcjtcbiJdfQ==