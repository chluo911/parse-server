"use strict";function cov_se9ik7cy5(){var path="/parse-server/lib/Adapters/Cache/InMemoryCache.js";var hash="dec5c2178fe8cad4c974b8bd568caf71ea4a33f7";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Adapters/Cache/InMemoryCache.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:49}},"2":{start:{line:7,column:26},end:{line:7,column:34}},"3":{start:{line:13,column:4},end:{line:13,column:19}},"4":{start:{line:14,column:4},end:{line:14,column:37}},"5":{start:{line:18,column:19},end:{line:18,column:34}},"6":{start:{line:20,column:4},end:{line:22,column:5}},"7":{start:{line:21,column:6},end:{line:21,column:18}},"8":{start:{line:25,column:4},end:{line:27,column:5}},"9":{start:{line:26,column:6},end:{line:26,column:26}},"10":{start:{line:30,column:4},end:{line:30,column:27}},"11":{start:{line:31,column:4},end:{line:31,column:16}},"12":{start:{line:35,column:4},end:{line:37,column:5}},"13":{start:{line:36,column:6},end:{line:36,column:16}},"14":{start:{line:39,column:17},end:{line:42,column:5}},"15":{start:{line:44,column:4},end:{line:48,column:5}},"16":{start:{line:45,column:6},end:{line:47,column:14}},"17":{start:{line:46,column:8},end:{line:46,column:22}},"18":{start:{line:50,column:4},end:{line:50,column:29}},"19":{start:{line:54,column:17},end:{line:54,column:32}},"20":{start:{line:56,column:4},end:{line:58,column:5}},"21":{start:{line:57,column:6},end:{line:57,column:13}},"22":{start:{line:60,column:4},end:{line:62,column:5}},"23":{start:{line:61,column:6},end:{line:61,column:35}},"24":{start:{line:64,column:4},end:{line:64,column:27}},"25":{start:{line:68,column:4},end:{line:68,column:37}},"26":{start:{line:73,column:0},end:{line:73,column:38}},"27":{start:{line:74,column:15},end:{line:74,column:28}},"28":{start:{line:75,column:0},end:{line:75,column:27}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:12,column:5},end:{line:15,column:3}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:11},end:{line:32,column:3}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:34},end:{line:51,column:3}},line:34},"3":{name:"(anonymous_3)",decl:{start:{line:45,column:34},end:{line:45,column:35}},loc:{start:{line:45,column:40},end:{line:47,column:7}},line:45},"4":{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:65,column:3}},line:53},"5":{name:"(anonymous_5)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:10},end:{line:69,column:3}},line:67}},branchMap:{"0":{loc:{start:{line:11,column:4},end:{line:11,column:27}},type:"default-arg",locations:[{start:{line:11,column:10},end:{line:11,column:27}}],line:11},"1":{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:20,column:4},end:{line:22,column:5}}],line:20},"2":{loc:{start:{line:25,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:27,column:5}},{start:{line:25,column:4},end:{line:27,column:5}}],line:25},"3":{loc:{start:{line:25,column:8},end:{line:25,column:59}},type:"binary-expr",locations:[{start:{line:25,column:8},end:{line:25,column:28}},{start:{line:25,column:32},end:{line:25,column:59}}],line:25},"4":{loc:{start:{line:34,column:18},end:{line:34,column:32}},type:"default-arg",locations:[{start:{line:34,column:24},end:{line:34,column:32}}],line:34},"5":{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:35,column:4},end:{line:37,column:5}}],line:35},"6":{loc:{start:{line:35,column:8},end:{line:35,column:29}},type:"binary-expr",locations:[{start:{line:35,column:8},end:{line:35,column:15}},{start:{line:35,column:19},end:{line:35,column:29}}],line:35},"7":{loc:{start:{line:44,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:48,column:5}},{start:{line:44,column:4},end:{line:48,column:5}}],line:44},"8":{loc:{start:{line:56,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:58,column:5}},{start:{line:56,column:4},end:{line:58,column:5}}],line:56},"9":{loc:{start:{line:60,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:62,column:5}},{start:{line:60,column:4},end:{line:62,column:5}}],line:60}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},inputSourceMap:{version:3,sources:["../../../src/Adapters/Cache/InMemoryCache.js"],names:["DEFAULT_CACHE_TTL","InMemoryCache","constructor","ttl","cache","Object","create","get","key","record","isNaN","expire","Date","now","value","put","NaN","timeout","setTimeout","del","clearTimeout","clear"],mappings:";;;;;;AAAA,MAAMA,iBAAiB,GAAG,IAAI,IAA9B;;AAEO,MAAMC,aAAN,CAAoB;AACzBC,EAAAA,WAAW,CAAC;AAAEC,IAAAA,GAAG,GAAGH;AAAR,GAAD,EAA8B;AACvC,SAAKG,GAAL,GAAWA,GAAX;AACA,SAAKC,KAAL,GAAaC,MAAM,CAACC,MAAP,CAAc,IAAd,CAAb;AACD;;AAEDC,EAAAA,GAAG,CAACC,GAAD,EAAM;AACP,UAAMC,MAAM,GAAG,KAAKL,KAAL,CAAWI,GAAX,CAAf;;AACA,QAAIC,MAAM,IAAI,IAAd,EAAoB;AAClB,aAAO,IAAP;AACD,KAJM,CAMP;;;AACA,QAAIC,KAAK,CAACD,MAAM,CAACE,MAAR,CAAL,IAAwBF,MAAM,CAACE,MAAP,IAAiBC,IAAI,CAACC,GAAL,EAA7C,EAAyD;AACvD,aAAOJ,MAAM,CAACK,KAAd;AACD,KATM,CAWP;;;AACA,WAAO,KAAKV,KAAL,CAAWI,GAAX,CAAP;AACA,WAAO,IAAP;AACD;;AAEDO,EAAAA,GAAG,CAACP,GAAD,EAAMM,KAAN,EAAaX,GAAG,GAAG,KAAKA,GAAxB,EAA6B;AAC9B,QAAIA,GAAG,GAAG,CAAN,IAAWO,KAAK,CAACP,GAAD,CAApB,EAA2B;AACzBA,MAAAA,GAAG,GAAGa,GAAN;AACD;;AAED,QAAIP,MAAM,GAAG;AACXK,MAAAA,KAAK,EAAEA,KADI;AAEXH,MAAAA,MAAM,EAAER,GAAG,GAAGS,IAAI,CAACC,GAAL;AAFH,KAAb;;AAKA,QAAI,CAACH,KAAK,CAACD,MAAM,CAACE,MAAR,CAAV,EAA2B;AACzBF,MAAAA,MAAM,CAACQ,OAAP,GAAiBC,UAAU,CAAC,MAAM;AAChC,aAAKC,GAAL,CAASX,GAAT;AACD,OAF0B,EAExBL,GAFwB,CAA3B;AAGD;;AAED,SAAKC,KAAL,CAAWI,GAAX,IAAkBC,MAAlB;AACD;;AAEDU,EAAAA,GAAG,CAACX,GAAD,EAAM;AACP,QAAIC,MAAM,GAAG,KAAKL,KAAL,CAAWI,GAAX,CAAb;;AACA,QAAIC,MAAM,IAAI,IAAd,EAAoB;AAClB;AACD;;AAED,QAAIA,MAAM,CAACQ,OAAX,EAAoB;AAClBG,MAAAA,YAAY,CAACX,MAAM,CAACQ,OAAR,CAAZ;AACD;;AACD,WAAO,KAAKb,KAAL,CAAWI,GAAX,CAAP;AACD;;AAEDa,EAAAA,KAAK,GAAG;AACN,SAAKjB,KAAL,GAAaC,MAAM,CAACC,MAAP,CAAc,IAAd,CAAb;AACD;;AAvDwB;;;eA0DZL,a",sourcesContent:["const DEFAULT_CACHE_TTL = 5 * 1000;\n\nexport class InMemoryCache {\n  constructor({ ttl = DEFAULT_CACHE_TTL }) {\n    this.ttl = ttl;\n    this.cache = Object.create(null);\n  }\n\n  get(key) {\n    const record = this.cache[key];\n    if (record == null) {\n      return null;\n    }\n\n    // Has Record and isnt expired\n    if (isNaN(record.expire) || record.expire >= Date.now()) {\n      return record.value;\n    }\n\n    // Record has expired\n    delete this.cache[key];\n    return null;\n  }\n\n  put(key, value, ttl = this.ttl) {\n    if (ttl < 0 || isNaN(ttl)) {\n      ttl = NaN;\n    }\n\n    var record = {\n      value: value,\n      expire: ttl + Date.now(),\n    };\n\n    if (!isNaN(record.expire)) {\n      record.timeout = setTimeout(() => {\n        this.del(key);\n      }, ttl);\n    }\n\n    this.cache[key] = record;\n  }\n\n  del(key) {\n    var record = this.cache[key];\n    if (record == null) {\n      return;\n    }\n\n    if (record.timeout) {\n      clearTimeout(record.timeout);\n    }\n    delete this.cache[key];\n  }\n\n  clear() {\n    this.cache = Object.create(null);\n  }\n}\n\nexport default InMemoryCache;\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dec5c2178fe8cad4c974b8bd568caf71ea4a33f7"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_se9ik7cy5=function(){return actualCoverage;};}return actualCoverage;}cov_se9ik7cy5();cov_se9ik7cy5().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_se9ik7cy5().s[1]++;exports.default=exports.InMemoryCache=void 0;const DEFAULT_CACHE_TTL=(cov_se9ik7cy5().s[2]++,5*1000);class InMemoryCache{constructor({ttl=(cov_se9ik7cy5().b[0][0]++,DEFAULT_CACHE_TTL)}){cov_se9ik7cy5().f[0]++;cov_se9ik7cy5().s[3]++;this.ttl=ttl;cov_se9ik7cy5().s[4]++;this.cache=Object.create(null);}get(key){cov_se9ik7cy5().f[1]++;const record=(cov_se9ik7cy5().s[5]++,this.cache[key]);cov_se9ik7cy5().s[6]++;if(record==null){cov_se9ik7cy5().b[1][0]++;cov_se9ik7cy5().s[7]++;return null;}else{cov_se9ik7cy5().b[1][1]++;}// Has Record and isnt expired
cov_se9ik7cy5().s[8]++;if((cov_se9ik7cy5().b[3][0]++,isNaN(record.expire))||(cov_se9ik7cy5().b[3][1]++,record.expire>=Date.now())){cov_se9ik7cy5().b[2][0]++;cov_se9ik7cy5().s[9]++;return record.value;}else{cov_se9ik7cy5().b[2][1]++;}// Record has expired
cov_se9ik7cy5().s[10]++;delete this.cache[key];cov_se9ik7cy5().s[11]++;return null;}put(key,value,ttl=(cov_se9ik7cy5().b[4][0]++,this.ttl)){cov_se9ik7cy5().f[2]++;cov_se9ik7cy5().s[12]++;if((cov_se9ik7cy5().b[6][0]++,ttl<0)||(cov_se9ik7cy5().b[6][1]++,isNaN(ttl))){cov_se9ik7cy5().b[5][0]++;cov_se9ik7cy5().s[13]++;ttl=NaN;}else{cov_se9ik7cy5().b[5][1]++;}var record=(cov_se9ik7cy5().s[14]++,{value:value,expire:ttl+Date.now()});cov_se9ik7cy5().s[15]++;if(!isNaN(record.expire)){cov_se9ik7cy5().b[7][0]++;cov_se9ik7cy5().s[16]++;record.timeout=setTimeout(()=>{cov_se9ik7cy5().f[3]++;cov_se9ik7cy5().s[17]++;this.del(key);},ttl);}else{cov_se9ik7cy5().b[7][1]++;}cov_se9ik7cy5().s[18]++;this.cache[key]=record;}del(key){cov_se9ik7cy5().f[4]++;var record=(cov_se9ik7cy5().s[19]++,this.cache[key]);cov_se9ik7cy5().s[20]++;if(record==null){cov_se9ik7cy5().b[8][0]++;cov_se9ik7cy5().s[21]++;return;}else{cov_se9ik7cy5().b[8][1]++;}cov_se9ik7cy5().s[22]++;if(record.timeout){cov_se9ik7cy5().b[9][0]++;cov_se9ik7cy5().s[23]++;clearTimeout(record.timeout);}else{cov_se9ik7cy5().b[9][1]++;}cov_se9ik7cy5().s[24]++;delete this.cache[key];}clear(){cov_se9ik7cy5().f[5]++;cov_se9ik7cy5().s[25]++;this.cache=Object.create(null);}}cov_se9ik7cy5().s[26]++;exports.InMemoryCache=InMemoryCache;var _default=(cov_se9ik7cy5().s[27]++,InMemoryCache);cov_se9ik7cy5().s[28]++;exports.default=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9DYWNoZS9Jbk1lbW9yeUNhY2hlLmpzIl0sIm5hbWVzIjpbIkRFRkFVTFRfQ0FDSEVfVFRMIiwiSW5NZW1vcnlDYWNoZSIsImNvbnN0cnVjdG9yIiwidHRsIiwiY2FjaGUiLCJPYmplY3QiLCJjcmVhdGUiLCJnZXQiLCJrZXkiLCJyZWNvcmQiLCJpc05hTiIsImV4cGlyZSIsIkRhdGUiLCJub3ciLCJ2YWx1ZSIsInB1dCIsIk5hTiIsInRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiZGVsIiwiY2xlYXJUaW1lb3V0IiwiY2xlYXIiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQU1BLGlCQUFpQixHQUFHLElBQUksSUFBOUI7O0FBRU8sTUFBTUMsYUFBTixDQUFvQjtBQUN6QkMsRUFBQUEsV0FBVyxDQUFDO0FBQUVDLElBQUFBLEdBQUcsR0FBR0g7QUFBUixHQUFELEVBQThCO0FBQ3ZDLFNBQUtHLEdBQUwsR0FBV0EsR0FBWDtBQUNBLFNBQUtDLEtBQUwsR0FBYUMsTUFBTSxDQUFDQyxNQUFQLENBQWMsSUFBZCxDQUFiO0FBQ0Q7O0FBRURDLEVBQUFBLEdBQUcsQ0FBQ0MsR0FBRCxFQUFNO0FBQ1AsVUFBTUMsTUFBTSxHQUFHLEtBQUtMLEtBQUwsQ0FBV0ksR0FBWCxDQUFmOztBQUNBLFFBQUlDLE1BQU0sSUFBSSxJQUFkLEVBQW9CO0FBQ2xCLGFBQU8sSUFBUDtBQUNELEtBSk0sQ0FNUDs7O0FBQ0EsUUFBSUMsS0FBSyxDQUFDRCxNQUFNLENBQUNFLE1BQVIsQ0FBTCxJQUF3QkYsTUFBTSxDQUFDRSxNQUFQLElBQWlCQyxJQUFJLENBQUNDLEdBQUwsRUFBN0MsRUFBeUQ7QUFDdkQsYUFBT0osTUFBTSxDQUFDSyxLQUFkO0FBQ0QsS0FUTSxDQVdQOzs7QUFDQSxXQUFPLEtBQUtWLEtBQUwsQ0FBV0ksR0FBWCxDQUFQO0FBQ0EsV0FBTyxJQUFQO0FBQ0Q7O0FBRURPLEVBQUFBLEdBQUcsQ0FBQ1AsR0FBRCxFQUFNTSxLQUFOLEVBQWFYLEdBQUcsR0FBRyxLQUFLQSxHQUF4QixFQUE2QjtBQUM5QixRQUFJQSxHQUFHLEdBQUcsQ0FBTixJQUFXTyxLQUFLLENBQUNQLEdBQUQsQ0FBcEIsRUFBMkI7QUFDekJBLE1BQUFBLEdBQUcsR0FBR2EsR0FBTjtBQUNEOztBQUVELFFBQUlQLE1BQU0sR0FBRztBQUNYSyxNQUFBQSxLQUFLLEVBQUVBLEtBREk7QUFFWEgsTUFBQUEsTUFBTSxFQUFFUixHQUFHLEdBQUdTLElBQUksQ0FBQ0MsR0FBTDtBQUZILEtBQWI7O0FBS0EsUUFBSSxDQUFDSCxLQUFLLENBQUNELE1BQU0sQ0FBQ0UsTUFBUixDQUFWLEVBQTJCO0FBQ3pCRixNQUFBQSxNQUFNLENBQUNRLE9BQVAsR0FBaUJDLFVBQVUsQ0FBQyxNQUFNO0FBQ2hDLGFBQUtDLEdBQUwsQ0FBU1gsR0FBVDtBQUNELE9BRjBCLEVBRXhCTCxHQUZ3QixDQUEzQjtBQUdEOztBQUVELFNBQUtDLEtBQUwsQ0FBV0ksR0FBWCxJQUFrQkMsTUFBbEI7QUFDRDs7QUFFRFUsRUFBQUEsR0FBRyxDQUFDWCxHQUFELEVBQU07QUFDUCxRQUFJQyxNQUFNLEdBQUcsS0FBS0wsS0FBTCxDQUFXSSxHQUFYLENBQWI7O0FBQ0EsUUFBSUMsTUFBTSxJQUFJLElBQWQsRUFBb0I7QUFDbEI7QUFDRDs7QUFFRCxRQUFJQSxNQUFNLENBQUNRLE9BQVgsRUFBb0I7QUFDbEJHLE1BQUFBLFlBQVksQ0FBQ1gsTUFBTSxDQUFDUSxPQUFSLENBQVo7QUFDRDs7QUFDRCxXQUFPLEtBQUtiLEtBQUwsQ0FBV0ksR0FBWCxDQUFQO0FBQ0Q7O0FBRURhLEVBQUFBLEtBQUssR0FBRztBQUNOLFNBQUtqQixLQUFMLEdBQWFDLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjLElBQWQsQ0FBYjtBQUNEOztBQXZEd0I7OztlQTBEWkwsYSIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IERFRkFVTFRfQ0FDSEVfVFRMID0gNSAqIDEwMDA7XG5cbmV4cG9ydCBjbGFzcyBJbk1lbW9yeUNhY2hlIHtcbiAgY29uc3RydWN0b3IoeyB0dGwgPSBERUZBVUxUX0NBQ0hFX1RUTCB9KSB7XG4gICAgdGhpcy50dGwgPSB0dGw7XG4gICAgdGhpcy5jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cblxuICBnZXQoa2V5KSB7XG4gICAgY29uc3QgcmVjb3JkID0gdGhpcy5jYWNoZVtrZXldO1xuICAgIGlmIChyZWNvcmQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gSGFzIFJlY29yZCBhbmQgaXNudCBleHBpcmVkXG4gICAgaWYgKGlzTmFOKHJlY29yZC5leHBpcmUpIHx8IHJlY29yZC5leHBpcmUgPj0gRGF0ZS5ub3coKSkge1xuICAgICAgcmV0dXJuIHJlY29yZC52YWx1ZTtcbiAgICB9XG5cbiAgICAvLyBSZWNvcmQgaGFzIGV4cGlyZWRcbiAgICBkZWxldGUgdGhpcy5jYWNoZVtrZXldO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHV0KGtleSwgdmFsdWUsIHR0bCA9IHRoaXMudHRsKSB7XG4gICAgaWYgKHR0bCA8IDAgfHwgaXNOYU4odHRsKSkge1xuICAgICAgdHRsID0gTmFOO1xuICAgIH1cblxuICAgIHZhciByZWNvcmQgPSB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBleHBpcmU6IHR0bCArIERhdGUubm93KCksXG4gICAgfTtcblxuICAgIGlmICghaXNOYU4ocmVjb3JkLmV4cGlyZSkpIHtcbiAgICAgIHJlY29yZC50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuZGVsKGtleSk7XG4gICAgICB9LCB0dGwpO1xuICAgIH1cblxuICAgIHRoaXMuY2FjaGVba2V5XSA9IHJlY29yZDtcbiAgfVxuXG4gIGRlbChrZXkpIHtcbiAgICB2YXIgcmVjb3JkID0gdGhpcy5jYWNoZVtrZXldO1xuICAgIGlmIChyZWNvcmQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChyZWNvcmQudGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHJlY29yZC50aW1lb3V0KTtcbiAgICB9XG4gICAgZGVsZXRlIHRoaXMuY2FjaGVba2V5XTtcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEluTWVtb3J5Q2FjaGU7XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9DYWNoZS9Jbk1lbW9yeUNhY2hlLmpzIl0sIm5hbWVzIjpbIkRFRkFVTFRfQ0FDSEVfVFRMIiwiY29uc3RydWN0b3IiLCJ0dGwiLCJPYmplY3QiLCJnZXQiLCJyZWNvcmQiLCJpc05hTiIsIkRhdGUiLCJwdXQiLCJ2YWx1ZSIsImV4cGlyZSIsInNldFRpbWVvdXQiLCJkZWwiLCJjbGVhclRpbWVvdXQiLCJjbGVhciIsIkluTWVtb3J5Q2FjaGUiXSwibWFwcGluZ3MiOiI7Nk9BQUEsS0FBTUEsQ0FBQUEsaUJBQWlCLHlCQUFHLEVBQTFCLElBQXVCLENBQXZCLENBRU8sS0FBQSxDQUFBLGFBQW9CLENBQ3pCQyxXQUFXLENBQUMsQ0FBRUMsR0FBRyw0QkFBR0YsaUJBQUgsQ0FBTCxDQUFELENBQThCLCtDQUN2QyxLQUFBLEdBQUEsQ0FBQSxHQUFBLENBRHVDLHVCQUV2QyxLQUFBLEtBQUEsQ0FBYUcsTUFBTSxDQUFOQSxNQUFBQSxDQUFiLElBQWFBLENBQWIsQ0FDRCxDQUVEQyxHQUFHLENBQUEsR0FBQSxDQUFNLHdCQUNQLEtBQU1DLENBQUFBLE1BQU0seUJBQUcsS0FBQSxLQUFBLENBQWYsR0FBZSxDQUFILENBQVosQ0FETyx1QkFFUCxHQUFJQSxNQUFNLEVBQVYsSUFBQSxDQUFvQixrREFDbEIsTUFBQSxLQUFBLENBSEssQ0FFUCxnQ0FJQTtBQU5PLHVCQU9QLEdBQUlDLDJCQUFBQSxLQUFLLENBQUNELE1BQU0sQ0FBWkMsTUFBSyxDQUFMQSw4QkFBd0JELE1BQU0sQ0FBTkEsTUFBQUEsRUFBaUJFLElBQUksQ0FBakQsR0FBNkNBLEVBQXpDRCxDQUFKLENBQXlELGtEQUN2RCxNQUFPRCxDQUFBQSxNQUFNLENBQWIsS0FBQSxDQVJLLENBT1AsZ0NBSUE7QUFYTyx3QkFZUCxNQUFPLE1BQUEsS0FBQSxDQUFQLEdBQU8sQ0FBUCxDQVpPLHdCQWFQLE1BQUEsS0FBQSxDQUNELENBRURHLEdBQUcsQ0FBQSxHQUFBLENBQUEsS0FBQSxDQUFhTixHQUFHLDRCQUFHLEtBQW5CLEdBQWdCLENBQWhCLENBQTZCLGdEQUM5QixHQUFJQSwyQkFBQUEsR0FBRyxDQUFIQSxDQUFBQSw4QkFBV0ksS0FBSyxDQUFwQixHQUFvQixDQUFoQkosQ0FBSixDQUEyQixtREFDekJBLEdBQUcsQ0FBSEEsR0FBQUEsQ0FDRCxDQUZELGdDQUlBLEdBQUlHLENBQUFBLE1BQU0sMEJBQUcsQ0FDWEksS0FBSyxDQURNLEtBQUEsQ0FFWEMsTUFBTSxDQUFFUixHQUFHLENBQUdLLElBQUksQ0FBSkEsR0FBQUEsRUFGSCxDQUFILENBQVYsQ0FMOEIsd0JBVTlCLEdBQUksQ0FBQ0QsS0FBSyxDQUFDRCxNQUFNLENBQWpCLE1BQVUsQ0FBVixDQUEyQixtREFDekJBLE1BQU0sQ0FBTkEsT0FBQUEsQ0FBaUJNLFVBQVUsQ0FBQyxJQUFNLGdEQUNoQyxLQUFBLEdBQUEsQ0FBQSxHQUFBLEVBRHlCLENBQUEsQ0FBM0JOLEdBQTJCLENBQTNCQSxDQUdELENBSkQsZ0NBVjhCLHdCQWdCOUIsS0FBQSxLQUFBLENBQUEsR0FBQSxFQUFBLE1BQUEsQ0FDRCxDQUVETyxHQUFHLENBQUEsR0FBQSxDQUFNLHdCQUNQLEdBQUlQLENBQUFBLE1BQU0sMEJBQUcsS0FBQSxLQUFBLENBQWIsR0FBYSxDQUFILENBQVYsQ0FETyx3QkFFUCxHQUFJQSxNQUFNLEVBQVYsSUFBQSxDQUFvQixtREFDbEIsT0FDRCxDQUZELGdDQUZPLHdCQU1QLEdBQUlBLE1BQU0sQ0FBVixPQUFBLENBQW9CLG1EQUNsQlEsWUFBWSxDQUFDUixNQUFNLENBQW5CUSxPQUFZLENBQVpBLENBQ0QsQ0FGRCxnQ0FOTyx3QkFTUCxNQUFPLE1BQUEsS0FBQSxDQUFQLEdBQU8sQ0FBUCxDQUNELENBRURDLEtBQUssRUFBRyxnREFDTixLQUFBLEtBQUEsQ0FBYVgsTUFBTSxDQUFOQSxNQUFBQSxDQUFiLElBQWFBLENBQWIsQ0FDRCxDQXZEd0IsQyxrR0EwRFpZLGEiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBERUZBVUxUX0NBQ0hFX1RUTCA9IDUgKiAxMDAwO1xuXG5leHBvcnQgY2xhc3MgSW5NZW1vcnlDYWNoZSB7XG4gIGNvbnN0cnVjdG9yKHsgdHRsID0gREVGQVVMVF9DQUNIRV9UVEwgfSkge1xuICAgIHRoaXMudHRsID0gdHRsO1xuICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG5cbiAgZ2V0KGtleSkge1xuICAgIGNvbnN0IHJlY29yZCA9IHRoaXMuY2FjaGVba2V5XTtcbiAgICBpZiAocmVjb3JkID09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIEhhcyBSZWNvcmQgYW5kIGlzbnQgZXhwaXJlZFxuICAgIGlmIChpc05hTihyZWNvcmQuZXhwaXJlKSB8fCByZWNvcmQuZXhwaXJlID49IERhdGUubm93KCkpIHtcbiAgICAgIHJldHVybiByZWNvcmQudmFsdWU7XG4gICAgfVxuXG4gICAgLy8gUmVjb3JkIGhhcyBleHBpcmVkXG4gICAgZGVsZXRlIHRoaXMuY2FjaGVba2V5XTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHB1dChrZXksIHZhbHVlLCB0dGwgPSB0aGlzLnR0bCkge1xuICAgIGlmICh0dGwgPCAwIHx8IGlzTmFOKHR0bCkpIHtcbiAgICAgIHR0bCA9IE5hTjtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0ge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZXhwaXJlOiB0dGwgKyBEYXRlLm5vdygpLFxuICAgIH07XG5cbiAgICBpZiAoIWlzTmFOKHJlY29yZC5leHBpcmUpKSB7XG4gICAgICByZWNvcmQudGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmRlbChrZXkpO1xuICAgICAgfSwgdHRsKTtcbiAgICB9XG5cbiAgICB0aGlzLmNhY2hlW2tleV0gPSByZWNvcmQ7XG4gIH1cblxuICBkZWwoa2V5KSB7XG4gICAgdmFyIHJlY29yZCA9IHRoaXMuY2FjaGVba2V5XTtcbiAgICBpZiAocmVjb3JkID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAocmVjb3JkLnRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dChyZWNvcmQudGltZW91dCk7XG4gICAgfVxuICAgIGRlbGV0ZSB0aGlzLmNhY2hlW2tleV07XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLmNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBJbk1lbW9yeUNhY2hlO1xuIl19