"use strict";function cov_2ea2hfqg26(){var path="/parse-server/lib/Adapters/Storage/Postgres/PostgresConfigParser.js";var hash="d42c00abb649b6dd18dea5aa03c0e1ee95153f96";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Adapters/Storage/Postgres/PostgresConfigParser.js",statementMap:{"0":{start:{line:3,column:12},end:{line:3,column:26}},"1":{start:{line:5,column:11},end:{line:5,column:24}},"2":{start:{line:8,column:26},end:{line:8,column:28}},"3":{start:{line:9,column:20},end:{line:9,column:34}},"4":{start:{line:10,column:22},end:{line:10,column:55}},"5":{start:{line:11,column:20},end:{line:11,column:67}},"6":{start:{line:12,column:2},end:{line:12,column:59}},"7":{start:{line:13,column:2},end:{line:13,column:74}},"8":{start:{line:14,column:2},end:{line:14,column:91}},"9":{start:{line:15,column:2},end:{line:15,column:66}},"10":{start:{line:16,column:2},end:{line:16,column:70}},"11":{start:{line:18,column:2},end:{line:20,column:3}},"12":{start:{line:19,column:4},end:{line:19,column:31}},"13":{start:{line:22,column:2},end:{line:52,column:3}},"14":{start:{line:23,column:4},end:{line:23,column:29}},"15":{start:{line:25,column:4},end:{line:27,column:5}},"16":{start:{line:26,column:6},end:{line:26,column:74}},"17":{start:{line:29,column:4},end:{line:31,column:5}},"18":{start:{line:30,column:6},end:{line:30,column:76}},"19":{start:{line:33,column:4},end:{line:35,column:5}},"20":{start:{line:34,column:6},end:{line:34,column:78}},"21":{start:{line:37,column:4},end:{line:39,column:5}},"22":{start:{line:38,column:6},end:{line:38,column:76}},"23":{start:{line:41,column:4},end:{line:43,column:5}},"24":{start:{line:42,column:6},end:{line:42,column:62}},"25":{start:{line:45,column:4},end:{line:47,column:5}},"26":{start:{line:46,column:6},end:{line:46,column:118}},"27":{start:{line:49,column:4},end:{line:51,column:5}},"28":{start:{line:50,column:6},end:{line:50,column:78}},"29":{start:{line:54,column:2},end:{line:54,column:108}},"30":{start:{line:55,column:2},end:{line:55,column:64}},"31":{start:{line:56,column:2},end:{line:56,column:66}},"32":{start:{line:57,column:2},end:{line:57,column:84}},"33":{start:{line:59,column:2},end:{line:61,column:3}},"34":{start:{line:60,column:4},end:{line:60,column:68}},"35":{start:{line:63,column:2},end:{line:65,column:3}},"36":{start:{line:64,column:4},end:{line:64,column:58}},"37":{start:{line:67,column:2},end:{line:69,column:3}},"38":{start:{line:68,column:4},end:{line:68,column:72}},"39":{start:{line:71,column:2},end:{line:73,column:3}},"40":{start:{line:72,column:4},end:{line:72,column:80}},"41":{start:{line:75,column:2},end:{line:77,column:3}},"42":{start:{line:76,column:4},end:{line:76,column:94}},"43":{start:{line:79,column:2},end:{line:79,column:25}},"44":{start:{line:83,column:2},end:{line:83,column:34}},"45":{start:{line:84,column:2},end:{line:88,column:9}},"46":{start:{line:85,column:18},end:{line:85,column:30}},"47":{start:{line:86,column:4},end:{line:86,column:107}},"48":{start:{line:87,column:4},end:{line:87,column:13}},"49":{start:{line:91,column:0},end:{line:94,column:2}}},fnMap:{"0":{name:"getDatabaseOptionsFromURI",decl:{start:{line:7,column:9},end:{line:7,column:34}},loc:{start:{line:7,column:40},end:{line:80,column:1}},line:7},"1":{name:"parseQueryParams",decl:{start:{line:82,column:9},end:{line:82,column:25}},loc:{start:{line:82,column:39},end:{line:89,column:1}},line:82},"2":{name:"(anonymous_2)",decl:{start:{line:84,column:39},end:{line:84,column:40}},loc:{start:{line:84,column:49},end:{line:88,column:3}},line:84}},branchMap:{"0":{loc:{start:{line:11,column:20},end:{line:11,column:67}},type:"cond-expr",locations:[{start:{line:11,column:37},end:{line:11,column:62}},{start:{line:11,column:65},end:{line:11,column:67}}],line:11},"1":{loc:{start:{line:12,column:25},end:{line:12,column:58}},type:"binary-expr",locations:[{start:{line:12,column:25},end:{line:12,column:43}},{start:{line:12,column:47},end:{line:12,column:58}}],line:12},"2":{loc:{start:{line:13,column:25},end:{line:13,column:73}},type:"cond-expr",locations:[{start:{line:13,column:42},end:{line:13,column:66}},{start:{line:13,column:69},end:{line:13,column:73}}],line:13},"3":{loc:{start:{line:14,column:29},end:{line:14,column:90}},type:"cond-expr",locations:[{start:{line:14,column:50},end:{line:14,column:78}},{start:{line:14,column:81},end:{line:14,column:90}}],line:14},"4":{loc:{start:{line:15,column:25},end:{line:15,column:65}},type:"cond-expr",locations:[{start:{line:15,column:48},end:{line:15,column:60}},{start:{line:15,column:63},end:{line:15,column:65}}],line:15},"5":{loc:{start:{line:16,column:29},end:{line:16,column:69}},type:"cond-expr",locations:[{start:{line:16,column:52},end:{line:16,column:64}},{start:{line:16,column:67},end:{line:16,column:69}}],line:16},"6":{loc:{start:{line:18,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:20,column:3}},{start:{line:18,column:2},end:{line:20,column:3}}],line:18},"7":{loc:{start:{line:18,column:6},end:{line:18,column:65}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:21}},{start:{line:18,column:25},end:{line:18,column:65}}],line:18},"8":{loc:{start:{line:22,column:2},end:{line:52,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:52,column:3}},{start:{line:22,column:2},end:{line:52,column:3}}],line:22},"9":{loc:{start:{line:22,column:6},end:{line:22,column:167}},type:"binary-expr",locations:[{start:{line:22,column:6},end:{line:22,column:20}},{start:{line:22,column:24},end:{line:22,column:39}},{start:{line:22,column:43},end:{line:22,column:59}},{start:{line:22,column:63},end:{line:22,column:78}},{start:{line:22,column:82},end:{line:22,column:104}},{start:{line:22,column:108},end:{line:22,column:138}},{start:{line:22,column:142},end:{line:22,column:167}}],line:22},"10":{loc:{start:{line:25,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:27,column:5}},{start:{line:25,column:4},end:{line:27,column:5}}],line:25},"11":{loc:{start:{line:29,column:4},end:{line:31,column:5}},type:"if",locations:[{start:{line:29,column:4},end:{line:31,column:5}},{start:{line:29,column:4},end:{line:31,column:5}}],line:29},"12":{loc:{start:{line:33,column:4},end:{line:35,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:35,column:5}},{start:{line:33,column:4},end:{line:35,column:5}}],line:33},"13":{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:37,column:4},end:{line:39,column:5}}],line:37},"14":{loc:{start:{line:41,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:43,column:5}},{start:{line:41,column:4},end:{line:43,column:5}}],line:41},"15":{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:45,column:4},end:{line:47,column:5}}],line:45},"16":{loc:{start:{line:46,column:47},end:{line:46,column:117}},type:"cond-expr",locations:[{start:{line:46,column:105},end:{line:46,column:109}},{start:{line:46,column:112},end:{line:46,column:117}}],line:46},"17":{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:49,column:4},end:{line:51,column:5}}],line:49},"18":{loc:{start:{line:54,column:27},end:{line:54,column:107}},type:"cond-expr",locations:[{start:{line:54,column:95},end:{line:54,column:99}},{start:{line:54,column:102},end:{line:54,column:107}}],line:54},"19":{loc:{start:{line:54,column:27},end:{line:54,column:92}},type:"binary-expr",locations:[{start:{line:54,column:27},end:{line:54,column:45}},{start:{line:54,column:49},end:{line:54,column:92}}],line:54},"20":{loc:{start:{line:59,column:2},end:{line:61,column:3}},type:"if",locations:[{start:{line:59,column:2},end:{line:61,column:3}},{start:{line:59,column:2},end:{line:61,column:3}}],line:59},"21":{loc:{start:{line:60,column:31},end:{line:60,column:67}},type:"binary-expr",locations:[{start:{line:60,column:31},end:{line:60,column:61}},{start:{line:60,column:65},end:{line:60,column:67}}],line:60},"22":{loc:{start:{line:63,column:2},end:{line:65,column:3}},type:"if",locations:[{start:{line:63,column:2},end:{line:65,column:3}},{start:{line:63,column:2},end:{line:65,column:3}}],line:63},"23":{loc:{start:{line:64,column:26},end:{line:64,column:57}},type:"binary-expr",locations:[{start:{line:64,column:26},end:{line:64,column:51}},{start:{line:64,column:55},end:{line:64,column:57}}],line:64},"24":{loc:{start:{line:67,column:2},end:{line:69,column:3}},type:"if",locations:[{start:{line:67,column:2},end:{line:69,column:3}},{start:{line:67,column:2},end:{line:69,column:3}}],line:67},"25":{loc:{start:{line:71,column:2},end:{line:73,column:3}},type:"if",locations:[{start:{line:71,column:2},end:{line:73,column:3}},{start:{line:71,column:2},end:{line:73,column:3}}],line:71},"26":{loc:{start:{line:75,column:2},end:{line:77,column:3}},type:"if",locations:[{start:{line:75,column:2},end:{line:77,column:3}},{start:{line:75,column:2},end:{line:77,column:3}}],line:75},"27":{loc:{start:{line:76,column:32},end:{line:76,column:93}},type:"cond-expr",locations:[{start:{line:76,column:81},end:{line:76,column:85}},{start:{line:76,column:88},end:{line:76,column:93}}],line:76},"28":{loc:{start:{line:83,column:16},end:{line:83,column:33}},type:"binary-expr",locations:[{start:{line:83,column:16},end:{line:83,column:27}},{start:{line:83,column:31},end:{line:83,column:33}}],line:83},"29":{loc:{start:{line:86,column:38},end:{line:86,column:106}},type:"cond-expr",locations:[{start:{line:86,column:57},end:{line:86,column:101}},{start:{line:86,column:104},end:{line:86,column:106}}],line:86}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0,0,0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0]},inputSourceMap:{version:3,sources:["../../../../src/Adapters/Storage/Postgres/PostgresConfigParser.js"],names:["url","require","fs","getDatabaseOptionsFromURI","uri","databaseOptions","parsedURI","parse","queryParams","parseQueryParams","query","authParts","auth","split","host","hostname","port","parseInt","database","pathname","substr","undefined","user","length","password","ssl","toLowerCase","ca","pfx","cert","key","passphrase","rejectUnauthorized","secureOptions","readFileSync","toString","binary","client_encoding","application_name","fallback_application_name","poolSize","max","query_timeout","idleTimeoutMillis","keepAlive","queryString","reduce","p","c","parts","decodeURIComponent","slice","join","module","exports"],mappings:"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",sourcesContent:["const url = require('url');\nconst fs = require('fs');\nfunction getDatabaseOptionsFromURI(uri) {\n  const databaseOptions = {};\n\n  const parsedURI = url.parse(uri);\n  const queryParams = parseQueryParams(parsedURI.query);\n  const authParts = parsedURI.auth ? parsedURI.auth.split(':') : [];\n\n  databaseOptions.host = parsedURI.hostname || 'localhost';\n  databaseOptions.port = parsedURI.port ? parseInt(parsedURI.port) : 5432;\n  databaseOptions.database = parsedURI.pathname ? parsedURI.pathname.substr(1) : undefined;\n\n  databaseOptions.user = authParts.length > 0 ? authParts[0] : '';\n  databaseOptions.password = authParts.length > 1 ? authParts[1] : '';\n\n  if (queryParams.ssl && queryParams.ssl.toLowerCase() === 'true') {\n    databaseOptions.ssl = true;\n  }\n\n  if (\n    queryParams.ca ||\n    queryParams.pfx ||\n    queryParams.cert ||\n    queryParams.key ||\n    queryParams.passphrase ||\n    queryParams.rejectUnauthorized ||\n    queryParams.secureOptions\n  ) {\n    databaseOptions.ssl = {};\n    if (queryParams.ca) {\n      databaseOptions.ssl.ca = fs.readFileSync(queryParams.ca).toString();\n    }\n    if (queryParams.pfx) {\n      databaseOptions.ssl.pfx = fs.readFileSync(queryParams.pfx).toString();\n    }\n    if (queryParams.cert) {\n      databaseOptions.ssl.cert = fs.readFileSync(queryParams.cert).toString();\n    }\n    if (queryParams.key) {\n      databaseOptions.ssl.key = fs.readFileSync(queryParams.key).toString();\n    }\n    if (queryParams.passphrase) {\n      databaseOptions.ssl.passphrase = queryParams.passphrase;\n    }\n    if (queryParams.rejectUnauthorized) {\n      databaseOptions.ssl.rejectUnauthorized =\n        queryParams.rejectUnauthorized.toLowerCase() === 'true' ? true : false;\n    }\n    if (queryParams.secureOptions) {\n      databaseOptions.ssl.secureOptions = parseInt(queryParams.secureOptions);\n    }\n  }\n\n  databaseOptions.binary =\n    queryParams.binary && queryParams.binary.toLowerCase() === 'true' ? true : false;\n\n  databaseOptions.client_encoding = queryParams.client_encoding;\n  databaseOptions.application_name = queryParams.application_name;\n  databaseOptions.fallback_application_name = queryParams.fallback_application_name;\n\n  if (queryParams.poolSize) {\n    databaseOptions.poolSize = parseInt(queryParams.poolSize) || 10;\n  }\n  if (queryParams.max) {\n    databaseOptions.max = parseInt(queryParams.max) || 10;\n  }\n  if (queryParams.query_timeout) {\n    databaseOptions.query_timeout = parseInt(queryParams.query_timeout);\n  }\n  if (queryParams.idleTimeoutMillis) {\n    databaseOptions.idleTimeoutMillis = parseInt(queryParams.idleTimeoutMillis);\n  }\n  if (queryParams.keepAlive) {\n    databaseOptions.keepAlive = queryParams.keepAlive.toLowerCase() === 'true' ? true : false;\n  }\n\n  return databaseOptions;\n}\n\nfunction parseQueryParams(queryString) {\n  queryString = queryString || '';\n\n  return queryString.split('&').reduce((p, c) => {\n    const parts = c.split('=');\n    p[decodeURIComponent(parts[0])] =\n      parts.length > 1 ? decodeURIComponent(parts.slice(1).join('=')) : '';\n    return p;\n  }, {});\n}\n\nmodule.exports = {\n  parseQueryParams: parseQueryParams,\n  getDatabaseOptionsFromURI: getDatabaseOptionsFromURI,\n};\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d42c00abb649b6dd18dea5aa03c0e1ee95153f96"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2ea2hfqg26=function(){return actualCoverage;};}return actualCoverage;}cov_2ea2hfqg26();const url=(cov_2ea2hfqg26().s[0]++,require('url'));const fs=(cov_2ea2hfqg26().s[1]++,require('fs'));function getDatabaseOptionsFromURI(uri){cov_2ea2hfqg26().f[0]++;const databaseOptions=(cov_2ea2hfqg26().s[2]++,{});const parsedURI=(cov_2ea2hfqg26().s[3]++,url.parse(uri));const queryParams=(cov_2ea2hfqg26().s[4]++,parseQueryParams(parsedURI.query));const authParts=(cov_2ea2hfqg26().s[5]++,parsedURI.auth?(cov_2ea2hfqg26().b[0][0]++,parsedURI.auth.split(':')):(cov_2ea2hfqg26().b[0][1]++,[]));cov_2ea2hfqg26().s[6]++;databaseOptions.host=(cov_2ea2hfqg26().b[1][0]++,parsedURI.hostname)||(cov_2ea2hfqg26().b[1][1]++,'localhost');cov_2ea2hfqg26().s[7]++;databaseOptions.port=parsedURI.port?(cov_2ea2hfqg26().b[2][0]++,parseInt(parsedURI.port)):(cov_2ea2hfqg26().b[2][1]++,5432);cov_2ea2hfqg26().s[8]++;databaseOptions.database=parsedURI.pathname?(cov_2ea2hfqg26().b[3][0]++,parsedURI.pathname.substr(1)):(cov_2ea2hfqg26().b[3][1]++,undefined);cov_2ea2hfqg26().s[9]++;databaseOptions.user=authParts.length>0?(cov_2ea2hfqg26().b[4][0]++,authParts[0]):(cov_2ea2hfqg26().b[4][1]++,'');cov_2ea2hfqg26().s[10]++;databaseOptions.password=authParts.length>1?(cov_2ea2hfqg26().b[5][0]++,authParts[1]):(cov_2ea2hfqg26().b[5][1]++,'');cov_2ea2hfqg26().s[11]++;if((cov_2ea2hfqg26().b[7][0]++,queryParams.ssl)&&(cov_2ea2hfqg26().b[7][1]++,queryParams.ssl.toLowerCase()==='true')){cov_2ea2hfqg26().b[6][0]++;cov_2ea2hfqg26().s[12]++;databaseOptions.ssl=true;}else{cov_2ea2hfqg26().b[6][1]++;}cov_2ea2hfqg26().s[13]++;if((cov_2ea2hfqg26().b[9][0]++,queryParams.ca)||(cov_2ea2hfqg26().b[9][1]++,queryParams.pfx)||(cov_2ea2hfqg26().b[9][2]++,queryParams.cert)||(cov_2ea2hfqg26().b[9][3]++,queryParams.key)||(cov_2ea2hfqg26().b[9][4]++,queryParams.passphrase)||(cov_2ea2hfqg26().b[9][5]++,queryParams.rejectUnauthorized)||(cov_2ea2hfqg26().b[9][6]++,queryParams.secureOptions)){cov_2ea2hfqg26().b[8][0]++;cov_2ea2hfqg26().s[14]++;databaseOptions.ssl={};cov_2ea2hfqg26().s[15]++;if(queryParams.ca){cov_2ea2hfqg26().b[10][0]++;cov_2ea2hfqg26().s[16]++;databaseOptions.ssl.ca=fs.readFileSync(queryParams.ca).toString();}else{cov_2ea2hfqg26().b[10][1]++;}cov_2ea2hfqg26().s[17]++;if(queryParams.pfx){cov_2ea2hfqg26().b[11][0]++;cov_2ea2hfqg26().s[18]++;databaseOptions.ssl.pfx=fs.readFileSync(queryParams.pfx).toString();}else{cov_2ea2hfqg26().b[11][1]++;}cov_2ea2hfqg26().s[19]++;if(queryParams.cert){cov_2ea2hfqg26().b[12][0]++;cov_2ea2hfqg26().s[20]++;databaseOptions.ssl.cert=fs.readFileSync(queryParams.cert).toString();}else{cov_2ea2hfqg26().b[12][1]++;}cov_2ea2hfqg26().s[21]++;if(queryParams.key){cov_2ea2hfqg26().b[13][0]++;cov_2ea2hfqg26().s[22]++;databaseOptions.ssl.key=fs.readFileSync(queryParams.key).toString();}else{cov_2ea2hfqg26().b[13][1]++;}cov_2ea2hfqg26().s[23]++;if(queryParams.passphrase){cov_2ea2hfqg26().b[14][0]++;cov_2ea2hfqg26().s[24]++;databaseOptions.ssl.passphrase=queryParams.passphrase;}else{cov_2ea2hfqg26().b[14][1]++;}cov_2ea2hfqg26().s[25]++;if(queryParams.rejectUnauthorized){cov_2ea2hfqg26().b[15][0]++;cov_2ea2hfqg26().s[26]++;databaseOptions.ssl.rejectUnauthorized=queryParams.rejectUnauthorized.toLowerCase()==='true'?(cov_2ea2hfqg26().b[16][0]++,true):(cov_2ea2hfqg26().b[16][1]++,false);}else{cov_2ea2hfqg26().b[15][1]++;}cov_2ea2hfqg26().s[27]++;if(queryParams.secureOptions){cov_2ea2hfqg26().b[17][0]++;cov_2ea2hfqg26().s[28]++;databaseOptions.ssl.secureOptions=parseInt(queryParams.secureOptions);}else{cov_2ea2hfqg26().b[17][1]++;}}else{cov_2ea2hfqg26().b[8][1]++;}cov_2ea2hfqg26().s[29]++;databaseOptions.binary=(cov_2ea2hfqg26().b[19][0]++,queryParams.binary)&&(cov_2ea2hfqg26().b[19][1]++,queryParams.binary.toLowerCase()==='true')?(cov_2ea2hfqg26().b[18][0]++,true):(cov_2ea2hfqg26().b[18][1]++,false);cov_2ea2hfqg26().s[30]++;databaseOptions.client_encoding=queryParams.client_encoding;cov_2ea2hfqg26().s[31]++;databaseOptions.application_name=queryParams.application_name;cov_2ea2hfqg26().s[32]++;databaseOptions.fallback_application_name=queryParams.fallback_application_name;cov_2ea2hfqg26().s[33]++;if(queryParams.poolSize){cov_2ea2hfqg26().b[20][0]++;cov_2ea2hfqg26().s[34]++;databaseOptions.poolSize=(cov_2ea2hfqg26().b[21][0]++,parseInt(queryParams.poolSize))||(cov_2ea2hfqg26().b[21][1]++,10);}else{cov_2ea2hfqg26().b[20][1]++;}cov_2ea2hfqg26().s[35]++;if(queryParams.max){cov_2ea2hfqg26().b[22][0]++;cov_2ea2hfqg26().s[36]++;databaseOptions.max=(cov_2ea2hfqg26().b[23][0]++,parseInt(queryParams.max))||(cov_2ea2hfqg26().b[23][1]++,10);}else{cov_2ea2hfqg26().b[22][1]++;}cov_2ea2hfqg26().s[37]++;if(queryParams.query_timeout){cov_2ea2hfqg26().b[24][0]++;cov_2ea2hfqg26().s[38]++;databaseOptions.query_timeout=parseInt(queryParams.query_timeout);}else{cov_2ea2hfqg26().b[24][1]++;}cov_2ea2hfqg26().s[39]++;if(queryParams.idleTimeoutMillis){cov_2ea2hfqg26().b[25][0]++;cov_2ea2hfqg26().s[40]++;databaseOptions.idleTimeoutMillis=parseInt(queryParams.idleTimeoutMillis);}else{cov_2ea2hfqg26().b[25][1]++;}cov_2ea2hfqg26().s[41]++;if(queryParams.keepAlive){cov_2ea2hfqg26().b[26][0]++;cov_2ea2hfqg26().s[42]++;databaseOptions.keepAlive=queryParams.keepAlive.toLowerCase()==='true'?(cov_2ea2hfqg26().b[27][0]++,true):(cov_2ea2hfqg26().b[27][1]++,false);}else{cov_2ea2hfqg26().b[26][1]++;}cov_2ea2hfqg26().s[43]++;return databaseOptions;}function parseQueryParams(queryString){cov_2ea2hfqg26().f[1]++;cov_2ea2hfqg26().s[44]++;queryString=(cov_2ea2hfqg26().b[28][0]++,queryString)||(cov_2ea2hfqg26().b[28][1]++,'');cov_2ea2hfqg26().s[45]++;return queryString.split('&').reduce((p,c)=>{cov_2ea2hfqg26().f[2]++;const parts=(cov_2ea2hfqg26().s[46]++,c.split('='));cov_2ea2hfqg26().s[47]++;p[decodeURIComponent(parts[0])]=parts.length>1?(cov_2ea2hfqg26().b[29][0]++,decodeURIComponent(parts.slice(1).join('='))):(cov_2ea2hfqg26().b[29][1]++,'');cov_2ea2hfqg26().s[48]++;return p;},{});}cov_2ea2hfqg26().s[49]++;module.exports={parseQueryParams:parseQueryParams,getDatabaseOptionsFromURI:getDatabaseOptionsFromURI};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9BZGFwdGVycy9TdG9yYWdlL1Bvc3RncmVzL1Bvc3RncmVzQ29uZmlnUGFyc2VyLmpzIl0sIm5hbWVzIjpbInVybCIsInJlcXVpcmUiLCJmcyIsImdldERhdGFiYXNlT3B0aW9uc0Zyb21VUkkiLCJ1cmkiLCJkYXRhYmFzZU9wdGlvbnMiLCJwYXJzZWRVUkkiLCJwYXJzZSIsInF1ZXJ5UGFyYW1zIiwicGFyc2VRdWVyeVBhcmFtcyIsInF1ZXJ5IiwiYXV0aFBhcnRzIiwiYXV0aCIsInNwbGl0IiwiaG9zdCIsImhvc3RuYW1lIiwicG9ydCIsInBhcnNlSW50IiwiZGF0YWJhc2UiLCJwYXRobmFtZSIsInN1YnN0ciIsInVuZGVmaW5lZCIsInVzZXIiLCJsZW5ndGgiLCJwYXNzd29yZCIsInNzbCIsInRvTG93ZXJDYXNlIiwiY2EiLCJwZngiLCJjZXJ0Iiwia2V5IiwicGFzc3BocmFzZSIsInJlamVjdFVuYXV0aG9yaXplZCIsInNlY3VyZU9wdGlvbnMiLCJyZWFkRmlsZVN5bmMiLCJ0b1N0cmluZyIsImJpbmFyeSIsImNsaWVudF9lbmNvZGluZyIsImFwcGxpY2F0aW9uX25hbWUiLCJmYWxsYmFja19hcHBsaWNhdGlvbl9uYW1lIiwicG9vbFNpemUiLCJtYXgiLCJxdWVyeV90aW1lb3V0IiwiaWRsZVRpbWVvdXRNaWxsaXMiLCJrZWVwQWxpdmUiLCJxdWVyeVN0cmluZyIsInJlZHVjZSIsInAiLCJjIiwicGFydHMiLCJkZWNvZGVVUklDb21wb25lbnQiLCJzbGljZSIsImpvaW4iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLEdBQUcsR0FBR0MsT0FBTyxDQUFDLEtBQUQsQ0FBbkI7O0FBQ0EsTUFBTUMsRUFBRSxHQUFHRCxPQUFPLENBQUMsSUFBRCxDQUFsQjs7QUFDQSxTQUFTRSx5QkFBVCxDQUFtQ0MsR0FBbkMsRUFBd0M7QUFDdEMsUUFBTUMsZUFBZSxHQUFHLEVBQXhCO0FBRUEsUUFBTUMs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QixFQUFFQTtBQUZaLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgdXJsID0gcmVxdWlyZSgndXJsJyk7XG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5mdW5jdGlvbiBnZXREYXRhYmFzZU9wdGlvbnNGcm9tVVJJKHVyaSkge1xuICBjb25zdCBkYXRhYmFzZU9wdGlvbnMgPSB7fTtcblxuICBjb25zdCBwYXJzZWRVUkkgPSB1cmwucGFyc2UodXJpKTtcbiAgY29uc3QgcXVlcnlQYXJhbXMgPSBwYXJzZVF1ZXJ5UGFyYW1zKHBhcnNlZFVSSS5xdWVyeSk7XG4gIGNvbnN0IGF1dGhQYXJ0cyA9IHBhcnNlZFVSSS5hdXRoID8gcGFyc2VkVVJJLmF1dGguc3BsaXQoJzonKSA6IFtdO1xuXG4gIGRhdGFiYXNlT3B0aW9ucy5ob3N0ID0gcGFyc2VkVVJJLmhvc3RuYW1lIHx8ICdsb2NhbGhvc3QnO1xuICBkYXRhYmFzZU9wdGlvbnMucG9ydCA9IHBhcnNlZFVSSS5wb3J0ID8gcGFyc2VJbnQocGFyc2VkVVJJLnBvcnQpIDogNTQzMjtcbiAgZGF0YWJhc2VPcHRpb25zLmRhdGFiYXNlID0gcGFyc2VkVVJJLnBhdGhuYW1lID8gcGFyc2VkVVJJLnBhdGhuYW1lLnN1YnN0cigxKSA6IHVuZGVmaW5lZDtcblxuICBkYXRhYmFzZU9wdGlvbnMudXNlciA9IGF1dGhQYXJ0cy5sZW5ndGggPiAwID8gYXV0aFBhcnRzWzBdIDogJyc7XG4gIGRhdGFiYXNlT3B0aW9ucy5wYXNzd29yZCA9IGF1dGhQYXJ0cy5sZW5ndGggPiAxID8gYXV0aFBhcnRzWzFdIDogJyc7XG5cbiAgaWYgKHF1ZXJ5UGFyYW1zLnNzbCAmJiBxdWVyeVBhcmFtcy5zc2wudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnKSB7XG4gICAgZGF0YWJhc2VPcHRpb25zLnNzbCA9IHRydWU7XG4gIH1cblxuICBpZiAoXG4gICAgcXVlcnlQYXJhbXMuY2EgfHxcbiAgICBxdWVyeVBhcmFtcy5wZnggfHxcbiAgICBxdWVyeVBhcmFtcy5jZXJ0IHx8XG4gICAgcXVlcnlQYXJhbXMua2V5IHx8XG4gICAgcXVlcnlQYXJhbXMucGFzc3BocmFzZSB8fFxuICAgIHF1ZXJ5UGFyYW1zLnJlamVjdFVuYXV0aG9yaXplZCB8fFxuICAgIHF1ZXJ5UGFyYW1zLnNlY3VyZU9wdGlvbnNcbiAgKSB7XG4gICAgZGF0YWJhc2VPcHRpb25zLnNzbCA9IHt9O1xuICAgIGlmIChxdWVyeVBhcmFtcy5jYSkge1xuICAgICAgZGF0YWJhc2VPcHRpb25zLnNzbC5jYSA9IGZzLnJlYWRGaWxlU3luYyhxdWVyeVBhcmFtcy5jYSkudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKHF1ZXJ5UGFyYW1zLnBmeCkge1xuICAgICAgZGF0YWJhc2VPcHRpb25zLnNzbC5wZnggPSBmcy5yZWFkRmlsZVN5bmMocXVlcnlQYXJhbXMucGZ4KS50b1N0cmluZygpO1xuICAgIH1cbiAgICBpZiAocXVlcnlQYXJhbXMuY2VydCkge1xuICAgICAgZGF0YWJhc2VPcHRpb25zLnNzbC5jZXJ0ID0gZnMucmVhZEZpbGVTeW5jKHF1ZXJ5UGFyYW1zLmNlcnQpLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGlmIChxdWVyeVBhcmFtcy5rZXkpIHtcbiAgICAgIGRhdGFiYXNlT3B0aW9ucy5zc2wua2V5ID0gZnMucmVhZEZpbGVTeW5jKHF1ZXJ5UGFyYW1zLmtleSkudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKHF1ZXJ5UGFyYW1zLnBhc3NwaHJhc2UpIHtcbiAgICAgIGRhdGFiYXNlT3B0aW9ucy5zc2wucGFzc3BocmFzZSA9IHF1ZXJ5UGFyYW1zLnBhc3NwaHJhc2U7XG4gICAgfVxuICAgIGlmIChxdWVyeVBhcmFtcy5yZWplY3RVbmF1dGhvcml6ZWQpIHtcbiAgICAgIGRhdGFiYXNlT3B0aW9ucy5zc2wucmVqZWN0VW5hdXRob3JpemVkID1cbiAgICAgICAgcXVlcnlQYXJhbXMucmVqZWN0VW5hdXRob3JpemVkLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHF1ZXJ5UGFyYW1zLnNlY3VyZU9wdGlvbnMpIHtcbiAgICAgIGRhdGFiYXNlT3B0aW9ucy5zc2wuc2VjdXJlT3B0aW9ucyA9IHBhcnNlSW50KHF1ZXJ5UGFyYW1zLnNlY3VyZU9wdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIGRhdGFiYXNlT3B0aW9ucy5iaW5hcnkgPVxuICAgIHF1ZXJ5UGFyYW1zLmJpbmFyeSAmJiBxdWVyeVBhcmFtcy5iaW5hcnkudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlO1xuXG4gIGRhdGFiYXNlT3B0aW9ucy5jbGllbnRfZW5jb2RpbmcgPSBxdWVyeVBhcmFtcy5jbGllbnRfZW5jb2Rpbmc7XG4gIGRhdGFiYXNlT3B0aW9ucy5hcHBsaWNhdGlvbl9uYW1lID0gcXVlcnlQYXJhbXMuYXBwbGljYXRpb25fbmFtZTtcbiAgZGF0YWJhc2VPcHRpb25zLmZhbGxiYWNrX2FwcGxpY2F0aW9uX25hbWUgPSBxdWVyeVBhcmFtcy5mYWxsYmFja19hcHBsaWNhdGlvbl9uYW1lO1xuXG4gIGlmIChxdWVyeVBhcmFtcy5wb29sU2l6ZSkge1xuICAgIGRhdGFiYXNlT3B0aW9ucy5wb29sU2l6ZSA9IHBhcnNlSW50KHF1ZXJ5UGFyYW1zLnBvb2xTaXplKSB8fCAxMDtcbiAgfVxuICBpZiAocXVlcnlQYXJhbXMubWF4KSB7XG4gICAgZGF0YWJhc2VPcHRpb25zLm1heCA9IHBhcnNlSW50KHF1ZXJ5UGFyYW1zLm1heCkgfHwgMTA7XG4gIH1cbiAgaWYgKHF1ZXJ5UGFyYW1zLnF1ZXJ5X3RpbWVvdXQpIHtcbiAgICBkYXRhYmFzZU9wdGlvbnMucXVlcnlfdGltZW91dCA9IHBhcnNlSW50KHF1ZXJ5UGFyYW1zLnF1ZXJ5X3RpbWVvdXQpO1xuICB9XG4gIGlmIChxdWVyeVBhcmFtcy5pZGxlVGltZW91dE1pbGxpcykge1xuICAgIGRhdGFiYXNlT3B0aW9ucy5pZGxlVGltZW91dE1pbGxpcyA9IHBhcnNlSW50KHF1ZXJ5UGFyYW1zLmlkbGVUaW1lb3V0TWlsbGlzKTtcbiAgfVxuICBpZiAocXVlcnlQYXJhbXMua2VlcEFsaXZlKSB7XG4gICAgZGF0YWJhc2VPcHRpb25zLmtlZXBBbGl2ZSA9IHF1ZXJ5UGFyYW1zLmtlZXBBbGl2ZS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2U7XG4gIH1cblxuICByZXR1cm4gZGF0YWJhc2VPcHRpb25zO1xufVxuXG5mdW5jdGlvbiBwYXJzZVF1ZXJ5UGFyYW1zKHF1ZXJ5U3RyaW5nKSB7XG4gIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcgfHwgJyc7XG5cbiAgcmV0dXJuIHF1ZXJ5U3RyaW5nLnNwbGl0KCcmJykucmVkdWNlKChwLCBjKSA9PiB7XG4gICAgY29uc3QgcGFydHMgPSBjLnNwbGl0KCc9Jyk7XG4gICAgcFtkZWNvZGVVUklDb21wb25lbnQocGFydHNbMF0pXSA9XG4gICAgICBwYXJ0cy5sZW5ndGggPiAxID8gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRzLnNsaWNlKDEpLmpvaW4oJz0nKSkgOiAnJztcbiAgICByZXR1cm4gcDtcbiAgfSwge30pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcGFyc2VRdWVyeVBhcmFtczogcGFyc2VRdWVyeVBhcmFtcyxcbiAgZ2V0RGF0YWJhc2VPcHRpb25zRnJvbVVSSTogZ2V0RGF0YWJhc2VPcHRpb25zRnJvbVVSSSxcbn07XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9BZGFwdGVycy9TdG9yYWdlL1Bvc3RncmVzL1Bvc3RncmVzQ29uZmlnUGFyc2VyLmpzIl0sIm5hbWVzIjpbInVybCIsInJlcXVpcmUiLCJmcyIsImRhdGFiYXNlT3B0aW9ucyIsInBhcnNlZFVSSSIsInF1ZXJ5UGFyYW1zIiwicGFyc2VRdWVyeVBhcmFtcyIsImF1dGhQYXJ0cyIsInBhcnNlSW50IiwicXVlcnlTdHJpbmciLCJwYXJ0cyIsImMiLCJwIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwibW9kdWxlIiwiZ2V0RGF0YWJhc2VPcHRpb25zRnJvbVVSSSJdLCJtYXBwaW5ncyI6IjJwa0JBY0VHOzJGQWRGLEtBQU1ILENBQUFBLEdBQUcsMEJBQUdDLE9BQU8sQ0FBbkIsS0FBbUIsQ0FBVixDQUFULENBQ0EsS0FBTUMsQ0FBQUEsRUFBRSwwQkFBR0QsT0FBTyxDQUFsQixJQUFrQixDQUFWLENBQVIsQ0FDQSxRQUFBLENBQUEseUJBQUEsQ0FBQSxHQUFBLENBQXdDLHlCQUN0QyxLQUFNRSxDQUFBQSxlQUFlLDBCQUFyQixFQUFxQixDQUFyQixDQUVBLEtBQU1DLENBQUFBLFNBQVMsMEJBQUdKLEdBQUcsQ0FBSEEsS0FBQUEsQ0FBbEIsR0FBa0JBLENBQUgsQ0FBZixDQUNBLEtBQU1LLENBQUFBLFdBQVcsMEJBQUdDLGdCQUFnQixDQUFDRixTQUFTLENBQTlDLEtBQW9DLENBQW5CLENBQWpCLENBQ0EsS0FBTUcsQ0FBQUEsU0FBUywwQkFBR0gsU0FBUyxDQUFUQSxJQUFBQSw2QkFBaUJBLFNBQVMsQ0FBVEEsSUFBQUEsQ0FBQUEsS0FBQUEsQ0FBakJBLEdBQWlCQSxDQUFqQkEsOEJBQWxCLEVBQWtCQSxDQUFILENBQWYsQ0FMc0Msd0JBT3RDRCxlQUFlLENBQWZBLElBQUFBLENBQXVCQyw0QkFBQUEsU0FBUyxDQUFUQSxRQUFBQSwrQkFBdkJELFdBQXVCQyxDQUF2QkQsQ0FQc0Msd0JBUXRDQSxlQUFlLENBQWZBLElBQUFBLENBQXVC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cXVpcmUoJ3VybCcpO1xuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuZnVuY3Rpb24gZ2V0RGF0YWJhc2VPcHRpb25zRnJvbVVSSSh1cmkpIHtcbiAgY29uc3QgZGF0YWJhc2VPcHRpb25zID0ge307XG5cbiAgY29uc3QgcGFyc2VkVVJJID0gdXJsLnBhcnNlKHVyaSk7XG4gIGNvbnN0IHF1ZXJ5UGFyYW1zID0gcGFyc2VRdWVyeVBhcmFtcyhwYXJzZWRVUkkucXVlcnkpO1xuICBjb25zdCBhdXRoUGFydHMgPSBwYXJzZWRVUkkuYXV0aCA/IHBhcnNlZFVSSS5hdXRoLnNwbGl0KCc6JykgOiBbXTtcblxuICBkYXRhYmFzZU9wdGlvbnMuaG9zdCA9IHBhcnNlZFVSSS5ob3N0bmFtZSB8fCAnbG9jYWxob3N0JztcbiAgZGF0YWJhc2VPcHRpb25zLnBvcnQgPSBwYXJzZWRVUkkucG9ydCA/IHBhcnNlSW50KHBhcnNlZFVSSS5wb3J0KSA6IDU0MzI7XG4gIGRhdGFiYXNlT3B0aW9ucy5kYXRhYmFzZSA9IHBhcnNlZFVSSS5wYXRobmFtZSA/IHBhcnNlZFVSSS5wYXRobmFtZS5zdWJzdHIoMSkgOiB1bmRlZmluZWQ7XG5cbiAgZGF0YWJhc2VPcHRpb25zLnVzZXIgPSBhdXRoUGFydHMubGVuZ3RoID4gMCA/IGF1dGhQYXJ0c1swXSA6ICcnO1xuICBkYXRhYmFzZU9wdGlvbnMucGFzc3dvcmQgPSBhdXRoUGFydHMubGVuZ3RoID4gMSA/IGF1dGhQYXJ0c1sxXSA6ICcnO1xuXG4gIGlmIChxdWVyeVBhcmFtcy5zc2wgJiYgcXVlcnlQYXJhbXMuc3NsLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJykge1xuICAgIGRhdGFiYXNlT3B0aW9ucy5zc2wgPSB0cnVlO1xuICB9XG5cbiAgaWYgKFxuICAgIHF1ZXJ5UGFyYW1zLmNhIHx8XG4gICAgcXVlcnlQYXJhbXMucGZ4IHx8XG4gICAgcXVlcnlQYXJhbXMuY2VydCB8fFxuICAgIHF1ZXJ5UGFyYW1zLmtleSB8fFxuICAgIHF1ZXJ5UGFyYW1zLnBhc3NwaHJhc2UgfHxcbiAgICBxdWVyeVBhcmFtcy5yZWplY3RVbmF1dGhvcml6ZWQgfHxcbiAgICBxdWVyeVBhcmFtcy5zZWN1cmVPcHRpb25zXG4gICkge1xuICAgIGRhdGFiYXNlT3B0aW9ucy5zc2wgPSB7fTtcbiAgICBpZiAocXVlcnlQYXJhbXMuY2EpIHtcbiAgICAgIGRhdGFiYXNlT3B0aW9ucy5zc2wuY2EgPSBmcy5yZWFkRmlsZVN5bmMocXVlcnlQYXJhbXMuY2EpLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGlmIChxdWVyeVBhcmFtcy5wZngpIHtcbiAgICAgIGRhdGFiYXNlT3B0aW9ucy5zc2wucGZ4ID0gZnMucmVhZEZpbGVTeW5jKHF1ZXJ5UGFyYW1zLnBmeCkudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKHF1ZXJ5UGFyYW1zLmNlcnQpIHtcbiAgICAgIGRhdGFiYXNlT3B0aW9ucy5zc2wuY2VydCA9IGZzLnJlYWRGaWxlU3luYyhxdWVyeVBhcmFtcy5jZXJ0KS50b1N0cmluZygpO1xuICAgIH1cbiAgICBpZiAocXVlcnlQYXJhbXMua2V5KSB7XG4gICAgICBkYXRhYmFzZU9wdGlvbnMuc3NsLmtleSA9IGZzLnJlYWRGaWxlU3luYyhxdWVyeVBhcmFtcy5rZXkpLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGlmIChxdWVyeVBhcmFtcy5wYXNzcGhyYXNlKSB7XG4gICAgICBkYXRhYmFzZU9wdGlvbnMuc3NsLnBhc3NwaHJhc2UgPSBxdWVyeVBhcmFtcy5wYXNzcGhyYXNlO1xuICAgIH1cbiAgICBpZiAocXVlcnlQYXJhbXMucmVqZWN0VW5hdXRob3JpemVkKSB7XG4gICAgICBkYXRhYmFzZU9wdGlvbnMuc3NsLnJlamVjdFVuYXV0aG9yaXplZCA9XG4gICAgICAgIHF1ZXJ5UGFyYW1zLnJlamVjdFVuYXV0aG9yaXplZC50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2U7XG4gICAgfVxuICAgIGlmIChxdWVyeVBhcmFtcy5zZWN1cmVPcHRpb25zKSB7XG4gICAgICBkYXRhYmFzZU9wdGlvbnMuc3NsLnNlY3VyZU9wdGlvbnMgPSBwYXJzZUludChxdWVyeVBhcmFtcy5zZWN1cmVPcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICBkYXRhYmFzZU9wdGlvbnMuYmluYXJ5ID1cbiAgICBxdWVyeVBhcmFtcy5iaW5hcnkgJiYgcXVlcnlQYXJhbXMuYmluYXJ5LnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZTtcblxuICBkYXRhYmFzZU9wdGlvbnMuY2xpZW50X2VuY29kaW5nID0gcXVlcnlQYXJhbXMuY2xpZW50X2VuY29kaW5nO1xuICBkYXRhYmFzZU9wdGlvbnMuYXBwbGljYXRpb25fbmFtZSA9IHF1ZXJ5UGFyYW1zLmFwcGxpY2F0aW9uX25hbWU7XG4gIGRhdGFiYXNlT3B0aW9ucy5mYWxsYmFja19hcHBsaWNhdGlvbl9uYW1lID0gcXVlcnlQYXJhbXMuZmFsbGJhY2tfYXBwbGljYXRpb25fbmFtZTtcblxuICBpZiAocXVlcnlQYXJhbXMucG9vbFNpemUpIHtcbiAgICBkYXRhYmFzZU9wdGlvbnMucG9vbFNpemUgPSBwYXJzZUludChxdWVyeVBhcmFtcy5wb29sU2l6ZSkgfHwgMTA7XG4gIH1cbiAgaWYgKHF1ZXJ5UGFyYW1zLm1heCkge1xuICAgIGRhdGFiYXNlT3B0aW9ucy5tYXggPSBwYXJzZUludChxdWVyeVBhcmFtcy5tYXgpIHx8IDEwO1xuICB9XG4gIGlmIChxdWVyeVBhcmFtcy5xdWVyeV90aW1lb3V0KSB7XG4gICAgZGF0YWJhc2VPcHRpb25zLnF1ZXJ5X3RpbWVvdXQgPSBwYXJzZUludChxdWVyeVBhcmFtcy5xdWVyeV90aW1lb3V0KTtcbiAgfVxuICBpZiAocXVlcnlQYXJhbXMuaWRsZVRpbWVvdXRNaWxsaXMpIHtcbiAgICBkYXRhYmFzZU9wdGlvbnMuaWRsZVRpbWVvdXRNaWxsaXMgPSBwYXJzZUludChxdWVyeVBhcmFtcy5pZGxlVGltZW91dE1pbGxpcyk7XG4gIH1cbiAgaWYgKHF1ZXJ5UGFyYW1zLmtlZXBBbGl2ZSkge1xuICAgIGRhdGFiYXNlT3B0aW9ucy5rZWVwQWxpdmUgPSBxdWVyeVBhcmFtcy5rZWVwQWxpdmUudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGRhdGFiYXNlT3B0aW9ucztcbn1cblxuZnVuY3Rpb24gcGFyc2VRdWVyeVBhcmFtcyhxdWVyeVN0cmluZykge1xuICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nIHx8ICcnO1xuXG4gIHJldHVybiBxdWVyeVN0cmluZy5zcGxpdCgnJicpLnJlZHVjZSgocCwgYykgPT4ge1xuICAgIGNvbnN0IHBhcnRzID0gYy5zcGxpdCgnPScpO1xuICAgIHBbZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRzWzBdKV0gPVxuICAgICAgcGFydHMubGVuZ3RoID4gMSA/IGRlY29kZVVSSUNvbXBvbmVudChwYXJ0cy5zbGljZSgxKS5qb2luKCc9JykpIDogJyc7XG4gICAgcmV0dXJuIHA7XG4gIH0sIHt9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHBhcnNlUXVlcnlQYXJhbXM6IHBhcnNlUXVlcnlQYXJhbXMsXG4gIGdldERhdGFiYXNlT3B0aW9uc0Zyb21VUkk6IGdldERhdGFiYXNlT3B0aW9uc0Zyb21VUkksXG59O1xuIl19