"use strict";function cov_92bu50b2x(){var path="/parse-server/lib/Adapters/Auth/index.js";var hash="b99f834798cc25f94921f716e55dd9f0ccc50a14";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Adapters/Auth/index.js",statementMap:{"0":{start:{line:3,column:21},end:{line:3,column:72}},"1":{start:{line:5,column:39},end:{line:5,column:93}},"2":{start:{line:7,column:14},end:{line:7,column:32}},"3":{start:{line:9,column:16},end:{line:9,column:36}},"4":{start:{line:11,column:16},end:{line:11,column:36}},"5":{start:{line:13,column:17},end:{line:13,column:38}},"6":{start:{line:15,column:18},end:{line:15,column:40}},"7":{start:{line:17,column:17},end:{line:17,column:38}},"8":{start:{line:19,column:15},end:{line:19,column:34}},"9":{start:{line:21,column:15},end:{line:21,column:34}},"10":{start:{line:23,column:15},end:{line:23,column:34}},"11":{start:{line:25,column:16},end:{line:25,column:36}},"12":{start:{line:27,column:16},end:{line:27,column:36}},"13":{start:{line:29,column:15},end:{line:29,column:35}},"14":{start:{line:32,column:22},end:{line:32,column:48}},"15":{start:{line:34,column:23},end:{line:34,column:50}},"16":{start:{line:36,column:13},end:{line:36,column:30}},"17":{start:{line:38,column:18},end:{line:38,column:40}},"18":{start:{line:40,column:11},end:{line:40,column:26}},"19":{start:{line:42,column:15},end:{line:42,column:34}},"20":{start:{line:44,column:14},end:{line:44,column:32}},"21":{start:{line:46,column:15},end:{line:46,column:34}},"22":{start:{line:48,column:18},end:{line:48,column:40}},"23":{start:{line:50,column:18},end:{line:50,column:40}},"24":{start:{line:52,column:17},end:{line:52,column:38}},"25":{start:{line:54,column:13},end:{line:54,column:30}},"26":{start:{line:56,column:18},end:{line:63,column:1}},"27":{start:{line:58,column:4},end:{line:58,column:29}},"28":{start:{line:61,column:4},end:{line:61,column:29}},"29":{start:{line:64,column:18},end:{line:89,column:1}},"30":{start:{line:92,column:2},end:{line:100,column:4}},"31":{start:{line:93,column:4},end:{line:99,column:7}},"32":{start:{line:94,column:6},end:{line:96,column:7}},"33":{start:{line:95,column:8},end:{line:95,column:64}},"34":{start:{line:98,column:6},end:{line:98,column:31}},"35":{start:{line:104,column:23},end:{line:104,column:42}},"36":{start:{line:105,column:26},end:{line:105,column:47}},"37":{start:{line:107,column:2},end:{line:109,column:3}},"38":{start:{line:108,column:4},end:{line:108,column:28}},"39":{start:{line:111,column:2},end:{line:113,column:3}},"40":{start:{line:112,column:4},end:{line:112,column:11}},"41":{start:{line:115,column:18},end:{line:115,column:51}},"42":{start:{line:116,column:17},end:{line:116,column:69}},"43":{start:{line:118,column:2},end:{line:128,column:3}},"44":{start:{line:119,column:28},end:{line:119,column:100}},"45":{start:{line:121,column:4},end:{line:127,column:5}},"46":{start:{line:122,column:6},end:{line:126,column:9}},"47":{start:{line:123,column:8},end:{line:125,column:9}},"48":{start:{line:124,column:10},end:{line:124,column:46}},"49":{start:{line:134,column:2},end:{line:136,column:3}},"50":{start:{line:135,column:4},end:{line:135,column:11}},"51":{start:{line:138,column:2},end:{line:142,column:4}},"52":{start:{line:145,column:0},end:{line:170,column:2}},"53":{start:{line:146,column:30},end:{line:146,column:50}},"54":{start:{line:148,column:34},end:{line:150,column:3}},"55":{start:{line:149,column:4},end:{line:149,column:35}},"56":{start:{line:153,column:34},end:{line:164,column:3}},"57":{start:{line:154,column:4},end:{line:156,column:5}},"58":{start:{line:155,column:6},end:{line:155,column:13}},"59":{start:{line:162,column:8},end:{line:162,column:46}},"60":{start:{line:163,column:4},end:{line:163,column:63}},"61":{start:{line:166,column:2},end:{line:169,column:5}},"62":{start:{line:172,column:0},end:{line:172,column:49}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:5,column:9},end:{line:5,column:31}},loc:{start:{line:5,column:37},end:{line:5,column:95}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:57,column:20},end:{line:57,column:21}},loc:{start:{line:57,column:26},end:{line:59,column:3}},line:57},"2":{name:"(anonymous_2)",decl:{start:{line:60,column:17},end:{line:60,column:18}},loc:{start:{line:60,column:23},end:{line:62,column:3}},line:60},"3":{name:"authDataValidator",decl:{start:{line:91,column:9},end:{line:91,column:26}},loc:{start:{line:91,column:53},end:{line:101,column:1}},line:91},"4":{name:"(anonymous_4)",decl:{start:{line:92,column:9},end:{line:92,column:10}},loc:{start:{line:92,column:29},end:{line:100,column:3}},line:92},"5":{name:"(anonymous_5)",decl:{start:{line:93,column:60},end:{line:93,column:61}},loc:{start:{line:93,column:66},end:{line:99,column:5}},line:93},"6":{name:"loadAuthAdapter",decl:{start:{line:103,column:9},end:{line:103,column:24}},loc:{start:{line:103,column:48},end:{line:143,column:1}},line:103},"7":{name:"(anonymous_7)",decl:{start:{line:122,column:52},end:{line:122,column:53}},loc:{start:{line:122,column:59},end:{line:126,column:7}},line:122},"8":{name:"(anonymous_8)",decl:{start:{line:145,column:17},end:{line:145,column:18}},loc:{start:{line:145,column:74},end:{line:170,column:1}},line:145},"9":{name:"(anonymous_9)",decl:{start:{line:148,column:34},end:{line:148,column:35}},loc:{start:{line:148,column:52},end:{line:150,column:3}},line:148},"10":{name:"(anonymous_10)",decl:{start:{line:153,column:34},end:{line:153,column:35}},loc:{start:{line:153,column:54},end:{line:164,column:3}},line:153}},branchMap:{"0":{loc:{start:{line:5,column:46},end:{line:5,column:92}},type:"cond-expr",locations:[{start:{line:5,column:70},end:{line:5,column:73}},{start:{line:5,column:76},end:{line:5,column:92}}],line:5},"1":{loc:{start:{line:5,column:46},end:{line:5,column:67}},type:"binary-expr",locations:[{start:{line:5,column:46},end:{line:5,column:49}},{start:{line:5,column:53},end:{line:5,column:67}}],line:5},"2":{loc:{start:{line:94,column:6},end:{line:96,column:7}},type:"if",locations:[{start:{line:94,column:6},end:{line:96,column:7}},{start:{line:94,column:6},end:{line:96,column:7}}],line:94},"3":{loc:{start:{line:107,column:2},end:{line:109,column:3}},type:"if",locations:[{start:{line:107,column:2},end:{line:109,column:3}},{start:{line:107,column:2},end:{line:109,column:3}}],line:107},"4":{loc:{start:{line:107,column:6},end:{line:107,column:126}},type:"binary-expr",locations:[{start:{line:107,column:6},end:{line:107,column:21}},{start:{line:107,column:25},end:{line:107,column:88}},{start:{line:107,column:92},end:{line:107,column:126}}],line:107},"5":{loc:{start:{line:111,column:2},end:{line:113,column:3}},type:"if",locations:[{start:{line:111,column:2},end:{line:113,column:3}},{start:{line:111,column:2},end:{line:113,column:3}}],line:111},"6":{loc:{start:{line:111,column:6},end:{line:111,column:41}},type:"binary-expr",locations:[{start:{line:111,column:6},end:{line:111,column:21}},{start:{line:111,column:25},end:{line:111,column:41}}],line:111},"7":{loc:{start:{line:116,column:17},end:{line:116,column:69}},type:"cond-expr",locations:[{start:{line:116,column:35},end:{line:116,column:57}},{start:{line:116,column:60},end:{line:116,column:69}}],line:116},"8":{loc:{start:{line:118,column:2},end:{line:128,column:3}},type:"if",locations:[{start:{line:118,column:2},end:{line:128,column:3}},{start:{line:118,column:2},end:{line:128,column:3}}],line:118},"9":{loc:{start:{line:121,column:4},end:{line:127,column:5}},type:"if",locations:[{start:{line:121,column:4},end:{line:127,column:5}},{start:{line:121,column:4},end:{line:127,column:5}}],line:121},"10":{loc:{start:{line:123,column:8},end:{line:125,column:9}},type:"if",locations:[{start:{line:123,column:8},end:{line:125,column:9}},{start:{line:123,column:8},end:{line:125,column:9}}],line:123},"11":{loc:{start:{line:134,column:2},end:{line:136,column:3}},type:"if",locations:[{start:{line:134,column:2},end:{line:136,column:3}},{start:{line:134,column:2},end:{line:136,column:3}}],line:134},"12":{loc:{start:{line:134,column:6},end:{line:134,column:57}},type:"binary-expr",locations:[{start:{line:134,column:6},end:{line:134,column:31}},{start:{line:134,column:35},end:{line:134,column:57}}],line:134},"13":{loc:{start:{line:145,column:27},end:{line:145,column:43}},type:"default-arg",locations:[{start:{line:145,column:41},end:{line:145,column:43}}],line:145},"14":{loc:{start:{line:145,column:45},end:{line:145,column:72}},type:"default-arg",locations:[{start:{line:145,column:68},end:{line:145,column:72}}],line:145},"15":{loc:{start:{line:154,column:4},end:{line:156,column:5}},type:"if",locations:[{start:{line:154,column:4},end:{line:156,column:5}},{start:{line:154,column:4},end:{line:156,column:5}}],line:154},"16":{loc:{start:{line:154,column:8},end:{line:154,column:58}},type:"binary-expr",locations:[{start:{line:154,column:8},end:{line:154,column:32}},{start:{line:154,column:36},end:{line:154,column:58}}],line:154}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0],"14":[0],"15":[0,0],"16":[0,0]},inputSourceMap:{version:3,sources:["../../../src/Adapters/Auth/index.js"],names:["apple","require","gcenter","gpgames","facebook","instagram","linkedin","meetup","google","github","twitter","spotify","digits","janrainengage","janraincapture","line","vkontakte","qq","wechat","weibo","oauth2","phantauth","microsoft","keycloak","ldap","anonymous","validateAuthData","Promise","resolve","validateAppId","providers","authDataValidator","adapter","appIds","options","authData","then","loadAuthAdapter","provider","authOptions","defaultAdapter","providerOptions","Object","prototype","hasOwnProperty","call","assign","undefined","optionalAdapter","forEach","key","module","exports","enableAnonymousUsers","_enableAnonymousUsers","setEnableAnonymousUsers","enable","getValidatorForProvider","freeze"],mappings:"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",sourcesContent:["import loadAdapter from '../AdapterLoader';\n\nconst apple = require('./apple');\nconst gcenter = require('./gcenter');\nconst gpgames = require('./gpgames');\nconst facebook = require('./facebook');\nconst instagram = require('./instagram');\nconst linkedin = require('./linkedin');\nconst meetup = require('./meetup');\nconst google = require('./google');\nconst github = require('./github');\nconst twitter = require('./twitter');\nconst spotify = require('./spotify');\nconst digits = require('./twitter'); // digits tokens are validated by twitter\nconst janrainengage = require('./janrainengage');\nconst janraincapture = require('./janraincapture');\nconst line = require('./line');\nconst vkontakte = require('./vkontakte');\nconst qq = require('./qq');\nconst wechat = require('./wechat');\nconst weibo = require('./weibo');\nconst oauth2 = require('./oauth2');\nconst phantauth = require('./phantauth');\nconst microsoft = require('./microsoft');\nconst keycloak = require('./keycloak');\nconst ldap = require('./ldap');\n\nconst anonymous = {\n  validateAuthData: () => {\n    return Promise.resolve();\n  },\n  validateAppId: () => {\n    return Promise.resolve();\n  },\n};\n\nconst providers = {\n  apple,\n  gcenter,\n  gpgames,\n  facebook,\n  instagram,\n  linkedin,\n  meetup,\n  google,\n  github,\n  twitter,\n  spotify,\n  anonymous,\n  digits,\n  janrainengage,\n  janraincapture,\n  line,\n  vkontakte,\n  qq,\n  wechat,\n  weibo,\n  phantauth,\n  microsoft,\n  keycloak,\n  ldap,\n};\n\nfunction authDataValidator(adapter, appIds, options) {\n  return function (authData) {\n    return adapter.validateAuthData(authData, options).then(() => {\n      if (appIds) {\n        return adapter.validateAppId(appIds, authData, options);\n      }\n      return Promise.resolve();\n    });\n  };\n}\n\nfunction loadAuthAdapter(provider, authOptions) {\n  let defaultAdapter = providers[provider];\n  const providerOptions = authOptions[provider];\n  if (\n    providerOptions &&\n    Object.prototype.hasOwnProperty.call(providerOptions, 'oauth2') &&\n    providerOptions['oauth2'] === true\n  ) {\n    defaultAdapter = oauth2;\n  }\n\n  if (!defaultAdapter && !providerOptions) {\n    return;\n  }\n\n  const adapter = Object.assign({}, defaultAdapter);\n  const appIds = providerOptions ? providerOptions.appIds : undefined;\n\n  // Try the configuration methods\n  if (providerOptions) {\n    const optionalAdapter = loadAdapter(providerOptions, undefined, providerOptions);\n    if (optionalAdapter) {\n      ['validateAuthData', 'validateAppId'].forEach(key => {\n        if (optionalAdapter[key]) {\n          adapter[key] = optionalAdapter[key];\n        }\n      });\n    }\n  }\n\n  // TODO: create a new module from validateAdapter() in\n  // src/Controllers/AdaptableController.js so we can use it here for adapter\n  // validation based on the src/Adapters/Auth/AuthAdapter.js expected class\n  // signature.\n  if (!adapter.validateAuthData || !adapter.validateAppId) {\n    return;\n  }\n\n  return { adapter, appIds, providerOptions };\n}\n\nmodule.exports = function (authOptions = {}, enableAnonymousUsers = true) {\n  let _enableAnonymousUsers = enableAnonymousUsers;\n  const setEnableAnonymousUsers = function (enable) {\n    _enableAnonymousUsers = enable;\n  };\n  // To handle the test cases on configuration\n  const getValidatorForProvider = function (provider) {\n    if (provider === 'anonymous' && !_enableAnonymousUsers) {\n      return;\n    }\n\n    const { adapter, appIds, providerOptions } = loadAuthAdapter(provider, authOptions);\n\n    return authDataValidator(adapter, appIds, providerOptions);\n  };\n\n  return Object.freeze({\n    getValidatorForProvider,\n    setEnableAnonymousUsers,\n  });\n};\n\nmodule.exports.loadAuthAdapter = loadAuthAdapter;\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b99f834798cc25f94921f716e55dd9f0ccc50a14"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_92bu50b2x=function(){return actualCoverage;};}return actualCoverage;}cov_92bu50b2x();var _AdapterLoader=(cov_92bu50b2x().s[0]++,_interopRequireDefault(require("../AdapterLoader")));function _interopRequireDefault(obj){cov_92bu50b2x().f[0]++;cov_92bu50b2x().s[1]++;return(cov_92bu50b2x().b[1][0]++,obj)&&(cov_92bu50b2x().b[1][1]++,obj.__esModule)?(cov_92bu50b2x().b[0][0]++,obj):(cov_92bu50b2x().b[0][1]++,{default:obj});}const apple=(cov_92bu50b2x().s[2]++,require('./apple'));const gcenter=(cov_92bu50b2x().s[3]++,require('./gcenter'));const gpgames=(cov_92bu50b2x().s[4]++,require('./gpgames'));const facebook=(cov_92bu50b2x().s[5]++,require('./facebook'));const instagram=(cov_92bu50b2x().s[6]++,require('./instagram'));const linkedin=(cov_92bu50b2x().s[7]++,require('./linkedin'));const meetup=(cov_92bu50b2x().s[8]++,require('./meetup'));const google=(cov_92bu50b2x().s[9]++,require('./google'));const github=(cov_92bu50b2x().s[10]++,require('./github'));const twitter=(cov_92bu50b2x().s[11]++,require('./twitter'));const spotify=(cov_92bu50b2x().s[12]++,require('./spotify'));const digits=(cov_92bu50b2x().s[13]++,require('./twitter'));// digits tokens are validated by twitter
const janrainengage=(cov_92bu50b2x().s[14]++,require('./janrainengage'));const janraincapture=(cov_92bu50b2x().s[15]++,require('./janraincapture'));const line=(cov_92bu50b2x().s[16]++,require('./line'));const vkontakte=(cov_92bu50b2x().s[17]++,require('./vkontakte'));const qq=(cov_92bu50b2x().s[18]++,require('./qq'));const wechat=(cov_92bu50b2x().s[19]++,require('./wechat'));const weibo=(cov_92bu50b2x().s[20]++,require('./weibo'));const oauth2=(cov_92bu50b2x().s[21]++,require('./oauth2'));const phantauth=(cov_92bu50b2x().s[22]++,require('./phantauth'));const microsoft=(cov_92bu50b2x().s[23]++,require('./microsoft'));const keycloak=(cov_92bu50b2x().s[24]++,require('./keycloak'));const ldap=(cov_92bu50b2x().s[25]++,require('./ldap'));const anonymous=(cov_92bu50b2x().s[26]++,{validateAuthData:()=>{cov_92bu50b2x().f[1]++;cov_92bu50b2x().s[27]++;return Promise.resolve();},validateAppId:()=>{cov_92bu50b2x().f[2]++;cov_92bu50b2x().s[28]++;return Promise.resolve();}});const providers=(cov_92bu50b2x().s[29]++,{apple,gcenter,gpgames,facebook,instagram,linkedin,meetup,google,github,twitter,spotify,anonymous,digits,janrainengage,janraincapture,line,vkontakte,qq,wechat,weibo,phantauth,microsoft,keycloak,ldap});function authDataValidator(adapter,appIds,options){cov_92bu50b2x().f[3]++;cov_92bu50b2x().s[30]++;return function(authData){cov_92bu50b2x().f[4]++;cov_92bu50b2x().s[31]++;return adapter.validateAuthData(authData,options).then(()=>{cov_92bu50b2x().f[5]++;cov_92bu50b2x().s[32]++;if(appIds){cov_92bu50b2x().b[2][0]++;cov_92bu50b2x().s[33]++;return adapter.validateAppId(appIds,authData,options);}else{cov_92bu50b2x().b[2][1]++;}cov_92bu50b2x().s[34]++;return Promise.resolve();});};}function loadAuthAdapter(provider,authOptions){cov_92bu50b2x().f[6]++;let defaultAdapter=(cov_92bu50b2x().s[35]++,providers[provider]);const providerOptions=(cov_92bu50b2x().s[36]++,authOptions[provider]);cov_92bu50b2x().s[37]++;if((cov_92bu50b2x().b[4][0]++,providerOptions)&&(cov_92bu50b2x().b[4][1]++,Object.prototype.hasOwnProperty.call(providerOptions,'oauth2'))&&(cov_92bu50b2x().b[4][2]++,providerOptions['oauth2']===true)){cov_92bu50b2x().b[3][0]++;cov_92bu50b2x().s[38]++;defaultAdapter=oauth2;}else{cov_92bu50b2x().b[3][1]++;}cov_92bu50b2x().s[39]++;if((cov_92bu50b2x().b[6][0]++,!defaultAdapter)&&(cov_92bu50b2x().b[6][1]++,!providerOptions)){cov_92bu50b2x().b[5][0]++;cov_92bu50b2x().s[40]++;return;}else{cov_92bu50b2x().b[5][1]++;}const adapter=(cov_92bu50b2x().s[41]++,Object.assign({},defaultAdapter));const appIds=(cov_92bu50b2x().s[42]++,providerOptions?(cov_92bu50b2x().b[7][0]++,providerOptions.appIds):(cov_92bu50b2x().b[7][1]++,undefined));// Try the configuration methods
cov_92bu50b2x().s[43]++;if(providerOptions){cov_92bu50b2x().b[8][0]++;const optionalAdapter=(cov_92bu50b2x().s[44]++,(0,_AdapterLoader.default)(providerOptions,undefined,providerOptions));cov_92bu50b2x().s[45]++;if(optionalAdapter){cov_92bu50b2x().b[9][0]++;cov_92bu50b2x().s[46]++;['validateAuthData','validateAppId'].forEach(key=>{cov_92bu50b2x().f[7]++;cov_92bu50b2x().s[47]++;if(optionalAdapter[key]){cov_92bu50b2x().b[10][0]++;cov_92bu50b2x().s[48]++;adapter[key]=optionalAdapter[key];}else{cov_92bu50b2x().b[10][1]++;}});}else{cov_92bu50b2x().b[9][1]++;}}else{cov_92bu50b2x().b[8][1]++;}// TODO: create a new module from validateAdapter() in
// src/Controllers/AdaptableController.js so we can use it here for adapter
// validation based on the src/Adapters/Auth/AuthAdapter.js expected class
// signature.
cov_92bu50b2x().s[49]++;if((cov_92bu50b2x().b[12][0]++,!adapter.validateAuthData)||(cov_92bu50b2x().b[12][1]++,!adapter.validateAppId)){cov_92bu50b2x().b[11][0]++;cov_92bu50b2x().s[50]++;return;}else{cov_92bu50b2x().b[11][1]++;}cov_92bu50b2x().s[51]++;return{adapter,appIds,providerOptions};}cov_92bu50b2x().s[52]++;module.exports=function(authOptions=(cov_92bu50b2x().b[13][0]++,{}),enableAnonymousUsers=(cov_92bu50b2x().b[14][0]++,true)){cov_92bu50b2x().f[8]++;let _enableAnonymousUsers=(cov_92bu50b2x().s[53]++,enableAnonymousUsers);cov_92bu50b2x().s[54]++;const setEnableAnonymousUsers=function(enable){cov_92bu50b2x().f[9]++;cov_92bu50b2x().s[55]++;_enableAnonymousUsers=enable;};// To handle the test cases on configuration
cov_92bu50b2x().s[56]++;const getValidatorForProvider=function(provider){cov_92bu50b2x().f[10]++;cov_92bu50b2x().s[57]++;if((cov_92bu50b2x().b[16][0]++,provider==='anonymous')&&(cov_92bu50b2x().b[16][1]++,!_enableAnonymousUsers)){cov_92bu50b2x().b[15][0]++;cov_92bu50b2x().s[58]++;return;}else{cov_92bu50b2x().b[15][1]++;}const{adapter,appIds,providerOptions}=(cov_92bu50b2x().s[59]++,loadAuthAdapter(provider,authOptions));cov_92bu50b2x().s[60]++;return authDataValidator(adapter,appIds,providerOptions);};cov_92bu50b2x().s[61]++;return Object.freeze({getValidatorForProvider,setEnableAnonymousUsers});};cov_92bu50b2x().s[62]++;module.exports.loadAuthAdapter=loadAuthAdapter;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9BdXRoL2luZGV4LmpzIl0sIm5hbWVzIjpbImFwcGxlIiwicmVxdWlyZSIsImdjZW50ZXIiLCJncGdhbWVzIiwiZmFjZWJvb2siLCJpbnN0YWdyYW0iLCJsaW5rZWRpbiIsIm1lZXR1cCIsImdvb2dsZSIsImdpdGh1YiIsInR3aXR0ZXIiLCJzcG90aWZ5IiwiZGlnaXRzIiwiamFucmFpbmVuZ2FnZSIsImphbnJhaW5jYXB0dXJlIiwibGluZSIsInZrb250YWt0ZSIsInFxIiwid2VjaGF0Iiwid2VpYm8iLCJvYXV0aDIiLCJwaGFudGF1dGgiLCJtaWNyb3NvZnQiLCJrZXljbG9hayIsImxkYXAiLCJhbm9ueW1vdXMiLCJ2YWxpZGF0ZUF1dGhEYXRhIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ2YWxpZGF0ZUFwcElkIiwicHJvdmlkZXJzIiwiYXV0aERhdGFWYWxpZGF0b3IiLCJhZGFwdGVyIiwiYXBwSWRzIiwib3B0aW9ucyIsImF1dGhEYXRhIiwidGhlbiIsImxvYWRBdXRoQWRhcHRlciIsInByb3ZpZGVyIiwiYXV0aE9wdGlvbnMiLCJkZWZhdWx0QWRhcHRlciIsInByb3ZpZGVyT3B0aW9ucyIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImFzc2lnbiIsInVuZGVmaW5lZCIsIm9wdGlvbmFsQWRhcHRlciIsImZvckVhY2giLCJrZXkiLCJtb2R1bGUiLCJleHBvcnRzIiwiZW5hYmxlQW5vbnltb3VzVXNlcnMiLCJfZW5hYmxlQW5vbnltb3VzVXNlcnMiLCJzZXRFbmFibGVBbm9ueW1vdXNVc2VycyIsImVuYWJsZSIsImdldFZhbGlkYXRvckZvclByb3ZpZGVyIiwiZnJlZXplIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBRUEsTUFBTUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUFyQjs7QUFDQSxNQUFNQyxPQUFPLEdBQUdELE9BQU8sQ0FBQyxXQUFELENBQXZCOztBQUNB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T0FBUCxDQUFlZixlQUFmLEdBQWlDQSxlQUFqQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2FkQWRhcHRlciBmcm9tICcuLi9BZGFwdGVyTG9hZGVyJztcblxuY29uc3QgYXBwbGUgPSByZXF1aXJlKCcuL2FwcGxlJyk7XG5jb25zdCBnY2VudGVyID0gcmVxdWlyZSgnLi9nY2VudGVyJyk7XG5jb25zdCBncGdhbWVzID0gcmVxdWlyZSgnLi9ncGdhbWVzJyk7XG5jb25zdCBmYWNlYm9vayA9IHJlcXVpcmUoJy4vZmFjZWJvb2snKTtcbmNvbnN0IGluc3RhZ3JhbSA9IHJlcXVpcmUoJy4vaW5zdGFncmFtJyk7XG5jb25zdCBsaW5rZWRpbiA9IHJlcXVpcmUoJy4vbGlua2VkaW4nKTtcbmNvbnN0IG1lZXR1cCA9IHJlcXVpcmUoJy4vbWVldHVwJyk7XG5jb25zdCBnb29nbGUgPSByZXF1aXJlKCcuL2dvb2dsZScpO1xuY29uc3QgZ2l0aHViID0gcmVxdWlyZSgnLi9naXRodWInKTtcbmNvbnN0IHR3aXR0ZXIgPSByZXF1aXJlKCcuL3R3aXR0ZXInKTtcbmNvbnN0IHNwb3RpZnkgPSByZXF1aXJlKCcuL3Nwb3RpZnknKTtcbmNvbnN0IGRpZ2l0cyA9IHJlcXVpcmUoJy4vdHdpdHRlcicpOyAvLyBkaWdpdHMgdG9rZW5zIGFyZSB2YWxpZGF0ZWQgYnkgdHdpdHRlclxuY29uc3QgamFucmFpbmVuZ2FnZSA9IHJlcXVpcmUoJy4vamFucmFpbmVuZ2FnZScpO1xuY29uc3QgamFucmFpbmNhcHR1cmUgPSByZXF1aXJlKCcuL2phbnJhaW5jYXB0dXJlJyk7XG5jb25zdCBsaW5lID0gcmVxdWlyZSgnLi9saW5lJyk7XG5jb25zdCB2a29udGFrdGUgPSByZXF1aXJlKCcuL3Zrb250YWt0ZScpO1xuY29uc3QgcXEgPSByZXF1aXJlKCcuL3FxJyk7XG5jb25zdCB3ZWNoYXQgPSByZXF1aXJlKCcuL3dlY2hhdCcpO1xuY29uc3Qgd2VpYm8gPSByZXF1aXJlKCcuL3dlaWJvJyk7XG5jb25zdCBvYXV0aDIgPSByZXF1aXJlKCcuL29hdXRoMicpO1xuY29uc3QgcGhhbnRhdXRoID0gcmVxdWlyZSgnLi9waGFudGF1dGgnKTtcbmNvbnN0IG1pY3Jvc29mdCA9IHJlcXVpcmUoJy4vbWljcm9zb2Z0Jyk7XG5jb25zdCBrZXljbG9hayA9IHJlcXVpcmUoJy4va2V5Y2xvYWsnKTtcbmNvbnN0IGxkYXAgPSByZXF1aXJlKCcuL2xkYXAnKTtcblxuY29uc3QgYW5vbnltb3VzID0ge1xuICB2YWxpZGF0ZUF1dGhEYXRhOiAoKSA9PiB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9LFxuICB2YWxpZGF0ZUFwcElkOiAoKSA9PiB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9LFxufTtcblxuY29uc3QgcHJvdmlkZXJzID0ge1xuICBhcHBsZSxcbiAgZ2NlbnRlcixcbiAgZ3BnYW1lcyxcbiAgZmFjZWJvb2ssXG4gIGluc3RhZ3JhbSxcbiAgbGlua2VkaW4sXG4gIG1lZXR1cCxcbiAgZ29vZ2xlLFxuICBnaXRodWIsXG4gIHR3aXR0ZXIsXG4gIHNwb3RpZnksXG4gIGFub255bW91cyxcbiAgZGlnaXRzLFxuICBqYW5yYWluZW5nYWdlLFxuICBqYW5yYWluY2FwdHVyZSxcbiAgbGluZSxcbiAgdmtvbnRha3RlLFxuICBxcSxcbiAgd2VjaGF0LFxuICB3ZWlibyxcbiAgcGhhbnRhdXRoLFxuICBtaWNyb3NvZnQsXG4gIGtleWNsb2FrLFxuICBsZGFwLFxufTtcblxuZnVuY3Rpb24gYXV0aERhdGFWYWxpZGF0b3IoYWRhcHRlciwgYXBwSWRzLCBvcHRpb25zKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoYXV0aERhdGEpIHtcbiAgICByZXR1cm4gYWRhcHRlci52YWxpZGF0ZUF1dGhEYXRhKGF1dGhEYXRhLCBvcHRpb25zKS50aGVuKCgpID0+IHtcbiAgICAgIGlmIChhcHBJZHMpIHtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXIudmFsaWRhdGVBcHBJZChhcHBJZHMsIGF1dGhEYXRhLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gbG9hZEF1dGhBZGFwdGVyKHByb3ZpZGVyLCBhdXRoT3B0aW9ucykge1xuICBsZXQgZGVmYXVsdEFkYXB0ZXIgPSBwcm92aWRlcnNbcHJvdmlkZXJdO1xuICBjb25zdCBwcm92aWRlck9wdGlvbnMgPSBhdXRoT3B0aW9uc1twcm92aWRlcl07XG4gIGlmIChcbiAgICBwcm92aWRlck9wdGlvbnMgJiZcbiAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvdmlkZXJPcHRpb25zLCAnb2F1dGgyJykgJiZcbiAgICBwcm92aWRlck9wdGlvbnNbJ29hdXRoMiddID09PSB0cnVlXG4gICkge1xuICAgIGRlZmF1bHRBZGFwdGVyID0gb2F1dGgyO1xuICB9XG5cbiAgaWYgKCFkZWZhdWx0QWRhcHRlciAmJiAhcHJvdmlkZXJPcHRpb25zKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgYWRhcHRlciA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRBZGFwdGVyKTtcbiAgY29uc3QgYXBwSWRzID0gcHJvdmlkZXJPcHRpb25zID8gcHJvdmlkZXJPcHRpb25zLmFwcElkcyA6IHVuZGVmaW5lZDtcblxuICAvLyBUcnkgdGhlIGNvbmZpZ3VyYXRpb24gbWV0aG9kc1xuICBpZiAocHJvdmlkZXJPcHRpb25zKSB7XG4gICAgY29uc3Qgb3B0aW9uYWxBZGFwdGVyID0gbG9hZEFkYXB0ZXIocHJvdmlkZXJPcHRpb25zLCB1bmRlZmluZWQsIHByb3ZpZGVyT3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbmFsQWRhcHRlcikge1xuICAgICAgWyd2YWxpZGF0ZUF1dGhEYXRhJywgJ3ZhbGlkYXRlQXBwSWQnXS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGlmIChvcHRpb25hbEFkYXB0ZXJba2V5XSkge1xuICAgICAgICAgIGFkYXB0ZXJba2V5XSA9IG9wdGlvbmFsQWRhcHRlcltrZXldO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBUT0RPOiBjcmVhdGUgYSBuZXcgbW9kdWxlIGZyb20gdmFsaWRhdGVBZGFwdGVyKCkgaW5cbiAgLy8gc3JjL0NvbnRyb2xsZXJzL0FkYXB0YWJsZUNvbnRyb2xsZXIuanMgc28gd2UgY2FuIHVzZSBpdCBoZXJlIGZvciBhZGFwdGVyXG4gIC8vIHZhbGlkYXRpb24gYmFzZWQgb24gdGhlIHNyYy9BZGFwdGVycy9BdXRoL0F1dGhBZGFwdGVyLmpzIGV4cGVjdGVkIGNsYXNzXG4gIC8vIHNpZ25hdHVyZS5cbiAgaWYgKCFhZGFwdGVyLnZhbGlkYXRlQXV0aERhdGEgfHwgIWFkYXB0ZXIudmFsaWRhdGVBcHBJZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiB7IGFkYXB0ZXIsIGFwcElkcywgcHJvdmlkZXJPcHRpb25zIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGF1dGhPcHRpb25zID0ge30sIGVuYWJsZUFub255bW91c1VzZXJzID0gdHJ1ZSkge1xuICBsZXQgX2VuYWJsZUFub255bW91c1VzZXJzID0gZW5hYmxlQW5vbnltb3VzVXNlcnM7XG4gIGNvbnN0IHNldEVuYWJsZUFub255bW91c1VzZXJzID0gZnVuY3Rpb24gKGVuYWJsZSkge1xuICAgIF9lbmFibGVBbm9ueW1vdXNVc2VycyA9IGVuYWJsZTtcbiAgfTtcbiAgLy8gVG8gaGFuZGxlIHRoZSB0ZXN0IGNhc2VzIG9uIGNvbmZpZ3VyYXRpb25cbiAgY29uc3QgZ2V0VmFsaWRhdG9yRm9yUHJvdmlkZXIgPSBmdW5jdGlvbiAocHJvdmlkZXIpIHtcbiAgICBpZiAocHJvdmlkZXIgPT09ICdhbm9ueW1vdXMnICYmICFfZW5hYmxlQW5vbnltb3VzVXNlcnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7IGFkYXB0ZXIsIGFwcElkcywgcHJvdmlkZXJPcHRpb25zIH0gPSBsb2FkQXV0aEFkYXB0ZXIocHJvdmlkZXIsIGF1dGhPcHRpb25zKTtcblxuICAgIHJldHVybiBhdXRoRGF0YVZhbGlkYXRvcihhZGFwdGVyLCBhcHBJZHMsIHByb3ZpZGVyT3B0aW9ucyk7XG4gIH07XG5cbiAgcmV0dXJuIE9iamVjdC5mcmVlemUoe1xuICAgIGdldFZhbGlkYXRvckZvclByb3ZpZGVyLFxuICAgIHNldEVuYWJsZUFub255bW91c1VzZXJzLFxuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzLmxvYWRBdXRoQWRhcHRlciA9IGxvYWRBdXRoQWRhcHRlcjtcbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9BdXRoL2luZGV4LmpzIl0sIm5hbWVzIjpbImFwcGxlIiwicmVxdWlyZSIsImdjZW50ZXIiLCJncGdhbWVzIiwiZmFjZWJvb2siLCJpbnN0YWdyYW0iLCJsaW5rZWRpbiIsIm1lZXR1cCIsImdvb2dsZSIsImdpdGh1YiIsInR3aXR0ZXIiLCJzcG90aWZ5IiwiZGlnaXRzIiwiamFucmFpbmVuZ2FnZSIsImphbnJhaW5jYXB0dXJlIiwibGluZSIsInZrb250YWt0ZSIsInFxIiwid2VjaGF0Iiwid2VpYm8iLCJvYXV0aDIiLCJwaGFudGF1dGgiLCJtaWNyb3NvZnQiLCJrZXljbG9hayIsImxkYXAiLCJhbm9ueW1vdXMiLCJ2YWxpZGF0ZUF1dGhEYXRhIiwiUHJvbWlzZSIsInZhbGlkYXRlQXBwSWQiLCJwcm92aWRlcnMiLCJhZGFwdGVyIiwiZGVmYXVsdEFkYXB0ZXIiLCJwcm92aWRlck9wdGlvbnMiLCJhdXRoT3B0aW9ucyIsIk9iamVjdCIsImFwcElkcyIsIm9wdGlvbmFsQWRhcHRlciIsImtleSIsIm1vZHVsZSIsImVuYWJsZUFub255bW91c1VzZXJzIiwiX2VuYWJsZUFub255bW91c1VzZXJzIiwic2V0RW5hYmxlQW5vbnltb3VzVXNlcnMiLCJnZXRWYWxpZGF0b3JGb3JQcm92aWRlciIsInByb3ZpZGVyIiwibG9hZEF1dGhBZGFwdGVyIiwiYXV0aERhdGFWYWxpZGF0b3IiXSwibWFwcGluZ3MiOiI7eUZBQUEsR0FBQSxDQUFBLGNBQUEseUJBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsa0JBQUEsQ0FBQSxDQUFBLENBQUEsQyxnUEFFQSxLQUFNQSxDQUFBQSxLQUFLLHlCQUFHQyxPQUFPLENBQXJCLFNBQXFCLENBQVYsQ0FBWCxDQUNBLEtBQU1DLENBQUFBLE9BQU8seUJBQUdELE9BQU8sQ0FBdkIsV0FBdUIsQ0FBVixDQUFiLENBQ0EsS0FBTUUsQ0FBQUEsT0FBTyx5QkFBR0YsT0FBTyxDQUF2QixXQUF1QixDQUFW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LDJCQUF1Q1ksZUFBZSxDQUFBLFFBQUEsQ0FBNUQsV0FBNEQsQ0FBdEQsQ0FBTixDQUxrRCx3QkFPbEQsTUFBT0MsQ0FBQUEsaUJBQWlCLENBQUEsT0FBQSxDQUFBLE1BQUEsQ0FBeEIsZUFBd0IsQ0FBeEIsQ0FQRixDQUFBLENBTndFLHdCQWdCeEUsTUFBTyxDQUFBLE1BQU0sQ0FBTixNQUFBLENBQWMsQ0FBQSx1QkFBQSxDQUVuQkosdUJBRm1CLENBQWQsQ0FBUCxDQWhCRkgsQ0FBQUEsQyx3QkFzQkFBLE1BQU0sQ0FBTkEsT0FBQUEsQ0FBQUEsZUFBQUEsQ0FBQUEsZUFBQUEsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2FkQWRhcHRlciBmcm9tICcuLi9BZGFwdGVyTG9hZGVyJztcblxuY29uc3QgYXBwbGUgPSByZXF1aXJlKCcuL2FwcGxlJyk7XG5jb25zdCBnY2VudGVyID0gcmVxdWlyZSgnLi9nY2VudGVyJyk7XG5jb25zdCBncGdhbWVzID0gcmVxdWlyZSgnLi9ncGdhbWVzJyk7XG5jb25zdCBmYWNlYm9vayA9IHJlcXVpcmUoJy4vZmFjZWJvb2snKTtcbmNvbnN0IGluc3RhZ3JhbSA9IHJlcXVpcmUoJy4vaW5zdGFncmFtJyk7XG5jb25zdCBsaW5rZWRpbiA9IHJlcXVpcmUoJy4vbGlua2VkaW4nKTtcbmNvbnN0IG1lZXR1cCA9IHJlcXVpcmUoJy4vbWVldHVwJyk7XG5jb25zdCBnb29nbGUgPSByZXF1aXJlKCcuL2dvb2dsZScpO1xuY29uc3QgZ2l0aHViID0gcmVxdWlyZSgnLi9naXRodWInKTtcbmNvbnN0IHR3aXR0ZXIgPSByZXF1aXJlKCcuL3R3aXR0ZXInKTtcbmNvbnN0IHNwb3RpZnkgPSByZXF1aXJlKCcuL3Nwb3RpZnknKTtcbmNvbnN0IGRpZ2l0cyA9IHJlcXVpcmUoJy4vdHdpdHRlcicpOyAvLyBkaWdpdHMgdG9rZW5zIGFyZSB2YWxpZGF0ZWQgYnkgdHdpdHRlclxuY29uc3QgamFucmFpbmVuZ2FnZSA9IHJlcXVpcmUoJy4vamFucmFpbmVuZ2FnZScpO1xuY29uc3QgamFucmFpbmNhcHR1cmUgPSByZXF1aXJlKCcuL2phbnJhaW5jYXB0dXJlJyk7XG5jb25zdCBsaW5lID0gcmVxdWlyZSgnLi9saW5lJyk7XG5jb25zdCB2a29udGFrdGUgPSByZXF1aXJlKCcuL3Zrb250YWt0ZScpO1xuY29uc3QgcXEgPSByZXF1aXJlKCcuL3FxJyk7XG5jb25zdCB3ZWNoYXQgPSByZXF1aXJlKCcuL3dlY2hhdCcpO1xuY29uc3Qgd2VpYm8gPSByZXF1aXJlKCcuL3dlaWJvJyk7XG5jb25zdCBvYXV0aDIgPSByZXF1aXJlKCcuL29hdXRoMicpO1xuY29uc3QgcGhhbnRhdXRoID0gcmVxdWlyZSgnLi9waGFudGF1dGgnKTtcbmNvbnN0IG1pY3Jvc29mdCA9IHJlcXVpcmUoJy4vbWljcm9zb2Z0Jyk7XG5jb25zdCBrZXljbG9hayA9IHJlcXVpcmUoJy4va2V5Y2xvYWsnKTtcbmNvbnN0IGxkYXAgPSByZXF1aXJlKCcuL2xkYXAnKTtcblxuY29uc3QgYW5vbnltb3VzID0ge1xuICB2YWxpZGF0ZUF1dGhEYXRhOiAoKSA9PiB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9LFxuICB2YWxpZGF0ZUFwcElkOiAoKSA9PiB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9LFxufTtcblxuY29uc3QgcHJvdmlkZXJzID0ge1xuICBhcHBsZSxcbiAgZ2NlbnRlcixcbiAgZ3BnYW1lcyxcbiAgZmFjZWJvb2ssXG4gIGluc3RhZ3JhbSxcbiAgbGlua2VkaW4sXG4gIG1lZXR1cCxcbiAgZ29vZ2xlLFxuICBnaXRodWIsXG4gIHR3aXR0ZXIsXG4gIHNwb3RpZnksXG4gIGFub255bW91cyxcbiAgZGlnaXRzLFxuICBqYW5yYWluZW5nYWdlLFxuICBqYW5yYWluY2FwdHVyZSxcbiAgbGluZSxcbiAgdmtvbnRha3RlLFxuICBxcSxcbiAgd2VjaGF0LFxuICB3ZWlibyxcbiAgcGhhbnRhdXRoLFxuICBtaWNyb3NvZnQsXG4gIGtleWNsb2FrLFxuICBsZGFwLFxufTtcblxuZnVuY3Rpb24gYXV0aERhdGFWYWxpZGF0b3IoYWRhcHRlciwgYXBwSWRzLCBvcHRpb25zKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoYXV0aERhdGEpIHtcbiAgICByZXR1cm4gYWRhcHRlci52YWxpZGF0ZUF1dGhEYXRhKGF1dGhEYXRhLCBvcHRpb25zKS50aGVuKCgpID0+IHtcbiAgICAgIGlmIChhcHBJZHMpIHtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXIudmFsaWRhdGVBcHBJZChhcHBJZHMsIGF1dGhEYXRhLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gbG9hZEF1dGhBZGFwdGVyKHByb3ZpZGVyLCBhdXRoT3B0aW9ucykge1xuICBsZXQgZGVmYXVsdEFkYXB0ZXIgPSBwcm92aWRlcnNbcHJvdmlkZXJdO1xuICBjb25zdCBwcm92aWRlck9wdGlvbnMgPSBhdXRoT3B0aW9uc1twcm92aWRlcl07XG4gIGlmIChcbiAgICBwcm92aWRlck9wdGlvbnMgJiZcbiAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvdmlkZXJPcHRpb25zLCAnb2F1dGgyJykgJiZcbiAgICBwcm92aWRlck9wdGlvbnNbJ29hdXRoMiddID09PSB0cnVlXG4gICkge1xuICAgIGRlZmF1bHRBZGFwdGVyID0gb2F1dGgyO1xuICB9XG5cbiAgaWYgKCFkZWZhdWx0QWRhcHRlciAmJiAhcHJvdmlkZXJPcHRpb25zKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgYWRhcHRlciA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRBZGFwdGVyKTtcbiAgY29uc3QgYXBwSWRzID0gcHJvdmlkZXJPcHRpb25zID8gcHJvdmlkZXJPcHRpb25zLmFwcElkcyA6IHVuZGVmaW5lZDtcblxuICAvLyBUcnkgdGhlIGNvbmZpZ3VyYXRpb24gbWV0aG9kc1xuICBpZiAocHJvdmlkZXJPcHRpb25zKSB7XG4gICAgY29uc3Qgb3B0aW9uYWxBZGFwdGVyID0gbG9hZEFkYXB0ZXIocHJvdmlkZXJPcHRpb25zLCB1bmRlZmluZWQsIHByb3ZpZGVyT3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbmFsQWRhcHRlcikge1xuICAgICAgWyd2YWxpZGF0ZUF1dGhEYXRhJywgJ3ZhbGlkYXRlQXBwSWQnXS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGlmIChvcHRpb25hbEFkYXB0ZXJba2V5XSkge1xuICAgICAgICAgIGFkYXB0ZXJba2V5XSA9IG9wdGlvbmFsQWRhcHRlcltrZXldO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBUT0RPOiBjcmVhdGUgYSBuZXcgbW9kdWxlIGZyb20gdmFsaWRhdGVBZGFwdGVyKCkgaW5cbiAgLy8gc3JjL0NvbnRyb2xsZXJzL0FkYXB0YWJsZUNvbnRyb2xsZXIuanMgc28gd2UgY2FuIHVzZSBpdCBoZXJlIGZvciBhZGFwdGVyXG4gIC8vIHZhbGlkYXRpb24gYmFzZWQgb24gdGhlIHNyYy9BZGFwdGVycy9BdXRoL0F1dGhBZGFwdGVyLmpzIGV4cGVjdGVkIGNsYXNzXG4gIC8vIHNpZ25hdHVyZS5cbiAgaWYgKCFhZGFwdGVyLnZhbGlkYXRlQXV0aERhdGEgfHwgIWFkYXB0ZXIudmFsaWRhdGVBcHBJZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiB7IGFkYXB0ZXIsIGFwcElkcywgcHJvdmlkZXJPcHRpb25zIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGF1dGhPcHRpb25zID0ge30sIGVuYWJsZUFub255bW91c1VzZXJzID0gdHJ1ZSkge1xuICBsZXQgX2VuYWJsZUFub255bW91c1VzZXJzID0gZW5hYmxlQW5vbnltb3VzVXNlcnM7XG4gIGNvbnN0IHNldEVuYWJsZUFub255bW91c1VzZXJzID0gZnVuY3Rpb24gKGVuYWJsZSkge1xuICAgIF9lbmFibGVBbm9ueW1vdXNVc2VycyA9IGVuYWJsZTtcbiAgfTtcbiAgLy8gVG8gaGFuZGxlIHRoZSB0ZXN0IGNhc2VzIG9uIGNvbmZpZ3VyYXRpb25cbiAgY29uc3QgZ2V0VmFsaWRhdG9yRm9yUHJvdmlkZXIgPSBmdW5jdGlvbiAocHJvdmlkZXIpIHtcbiAgICBpZiAocHJvdmlkZXIgPT09ICdhbm9ueW1vdXMnICYmICFfZW5hYmxlQW5vbnltb3VzVXNlcnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7IGFkYXB0ZXIsIGFwcElkcywgcHJvdmlkZXJPcHRpb25zIH0gPSBsb2FkQXV0aEFkYXB0ZXIocHJvdmlkZXIsIGF1dGhPcHRpb25zKTtcblxuICAgIHJldHVybiBhdXRoRGF0YVZhbGlkYXRvcihhZGFwdGVyLCBhcHBJZHMsIHByb3ZpZGVyT3B0aW9ucyk7XG4gIH07XG5cbiAgcmV0dXJuIE9iamVjdC5mcmVlemUoe1xuICAgIGdldFZhbGlkYXRvckZvclByb3ZpZGVyLFxuICAgIHNldEVuYWJsZUFub255bW91c1VzZXJzLFxuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzLmxvYWRBdXRoQWRhcHRlciA9IGxvYWRBdXRoQWRhcHRlcjtcbiJdfQ==