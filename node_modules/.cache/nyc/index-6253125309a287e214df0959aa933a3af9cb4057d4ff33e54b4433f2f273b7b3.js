"use strict";function cov_1yxtq3aab8(){var path="/parse-server/lib/Controllers/index.js";var hash="761b8ca425a048aae153a6600a06d44dc8c472ac";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Controllers/index.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:40}},"2":{start:{line:7,column:0},end:{line:7,column:50}},"3":{start:{line:8,column:0},end:{line:8,column:48}},"4":{start:{line:9,column:0},end:{line:9,column:46}},"5":{start:{line:10,column:0},end:{line:10,column:48}},"6":{start:{line:11,column:0},end:{line:11,column:62}},"7":{start:{line:12,column:0},end:{line:12,column:56}},"8":{start:{line:13,column:0},end:{line:13,column:56}},"9":{start:{line:14,column:0},end:{line:14,column:54}},"10":{start:{line:15,column:0},end:{line:15,column:48}},"11":{start:{line:16,column:0},end:{line:16,column:46}},"12":{start:{line:17,column:0},end:{line:17,column:48}},"13":{start:{line:18,column:0},end:{line:18,column:48}},"14":{start:{line:20,column:12},end:{line:20,column:63}},"15":{start:{line:22,column:15},end:{line:22,column:36}},"16":{start:{line:24,column:21},end:{line:24,column:57}},"17":{start:{line:26,column:16},end:{line:26,column:62}},"18":{start:{line:28,column:11},end:{line:28,column:49}},"19":{start:{line:30,column:24},end:{line:30,column:53}},"20":{start:{line:32,column:23},end:{line:32,column:51}},"21":{start:{line:34,column:23},end:{line:34,column:51}},"22":{start:{line:36,column:22},end:{line:36,column:49}},"23":{start:{line:38,column:23},end:{line:38,column:51}},"24":{start:{line:40,column:27},end:{line:40,column:59}},"25":{start:{line:42,column:27},end:{line:42,column:59}},"26":{start:{line:44,column:22},end:{line:44,column:49}},"27":{start:{line:46,column:17},end:{line:46,column:45}},"28":{start:{line:48,column:18},end:{line:48,column:47}},"29":{start:{line:50,column:26},end:{line:50,column:81}},"30":{start:{line:52,column:27},end:{line:52,column:75}},"31":{start:{line:54,column:28},end:{line:54,column:78}},"32":{start:{line:56,column:28},end:{line:56,column:77}},"33":{start:{line:58,column:24},end:{line:58,column:73}},"34":{start:{line:60,column:27},end:{line:60,column:107}},"35":{start:{line:62,column:30},end:{line:62,column:116}},"36":{start:{line:64,column:19},end:{line:64,column:73}},"37":{start:{line:66,column:30},end:{line:66,column:89}},"38":{start:{line:68,column:19},end:{line:68,column:83}},"39":{start:{line:70,column:39},end:{line:70,column:93}},"40":{start:{line:72,column:54},end:{line:72,column:73}},"41":{start:{line:72,column:75},end:{line:72,column:330}},"42":{start:{line:72,column:125},end:{line:72,column:161}},"43":{start:{line:72,column:163},end:{line:72,column:296}},"44":{start:{line:72,column:185},end:{line:72,column:294}},"45":{start:{line:72,column:227},end:{line:72,column:290}},"46":{start:{line:72,column:297},end:{line:72,column:328}},"47":{start:{line:72,column:331},end:{line:72,column:343}},"48":{start:{line:74,column:33},end:{line:74,column:517}},"49":{start:{line:74,column:46},end:{line:74,column:47}},"50":{start:{line:74,column:91},end:{line:74,column:131}},"51":{start:{line:74,column:133},end:{line:74,column:515}},"52":{start:{line:74,column:146},end:{line:74,column:247}},"53":{start:{line:74,column:201},end:{line:74,column:243}},"54":{start:{line:74,column:255},end:{line:74,column:515}},"55":{start:{line:74,column:295},end:{line:74,column:369}},"56":{start:{line:74,column:379},end:{line:74,column:513}},"57":{start:{line:74,column:428},end:{line:74,column:509}},"58":{start:{line:74,column:518},end:{line:74,column:532}},"59":{start:{line:76,column:44},end:{line:76,column:195}},"60":{start:{line:76,column:62},end:{line:76,column:166}},"61":{start:{line:76,column:176},end:{line:76,column:193}},"62":{start:{line:76,column:196},end:{line:76,column:207}},"63":{start:{line:79,column:27},end:{line:79,column:55}},"64":{start:{line:80,column:26},end:{line:80,column:53}},"65":{start:{line:81,column:25},end:{line:81,column:51}},"66":{start:{line:88,column:6},end:{line:88,column:32}},"67":{start:{line:89,column:26},end:{line:89,column:53}},"68":{start:{line:90,column:30},end:{line:90,column:61}},"69":{start:{line:91,column:30},end:{line:91,column:61}},"70":{start:{line:92,column:29},end:{line:92,column:59}},"71":{start:{line:93,column:26},end:{line:93,column:73}},"72":{start:{line:94,column:26},end:{line:94,column:53}},"73":{start:{line:95,column:33},end:{line:98,column:4}},"74":{start:{line:99,column:2},end:{line:116,column:4}},"75":{start:{line:129,column:6},end:{line:129,column:13}},"76":{start:{line:130,column:24},end:{line:137,column:3}},"77":{start:{line:138,column:34},end:{line:138,column:139}},"78":{start:{line:139,column:2},end:{line:139,column:95}},"79":{start:{line:150,column:6},end:{line:150,column:13}},"80":{start:{line:152,column:2},end:{line:154,column:3}},"81":{start:{line:153,column:4},end:{line:153,column:97}},"82":{start:{line:156,column:33},end:{line:158,column:4}},"83":{start:{line:157,column:4},end:{line:157,column:82}},"84":{start:{line:159,column:2},end:{line:161,column:5}},"85":{start:{line:169,column:6},end:{line:169,column:13}},"86":{start:{line:170,column:33},end:{line:170,column:78}},"87":{start:{line:171,column:2},end:{line:173,column:5}},"88":{start:{line:182,column:6},end:{line:182,column:13}},"89":{start:{line:183,column:33},end:{line:187,column:4}},"90":{start:{line:188,column:2},end:{line:188,column:77}},"91":{start:{line:192,column:2},end:{line:194,column:22}},"92":{start:{line:200,column:6},end:{line:200,column:13}},"93":{start:{line:201,column:37},end:{line:201,column:122}},"94":{start:{line:202,column:2},end:{line:202,column:82}},"95":{start:{line:206,column:2},end:{line:206,column:73}},"96":{start:{line:214,column:6},end:{line:214,column:13}},"97":{start:{line:217,column:6},end:{line:217,column:13}},"98":{start:{line:219,column:2},end:{line:225,column:3}},"99":{start:{line:220,column:4},end:{line:220,column:106}},"100":{start:{line:221,column:9},end:{line:225,column:3}},"101":{start:{line:222,column:4},end:{line:222,column:89}},"102":{start:{line:224,column:4},end:{line:224,column:71}},"103":{start:{line:227,column:2},end:{line:227,column:58}},"104":{start:{line:234,column:6},end:{line:234,column:13}},"105":{start:{line:235,column:2},end:{line:235,column:85}},"106":{start:{line:242,column:6},end:{line:242,column:13}},"107":{start:{line:243,column:22},end:{line:243,column:45}},"108":{start:{line:244,column:27},end:{line:244,column:57}},"109":{start:{line:246,column:2},end:{line:248,column:3}},"110":{start:{line:247,column:4},end:{line:247,column:36}},"111":{start:{line:251,column:22},end:{line:251,column:124}},"112":{start:{line:254,column:25},end:{line:254,column:61}},"113":{start:{line:255,column:25},end:{line:255,column:48}},"114":{start:{line:256,column:34},end:{line:256,column:74}},"115":{start:{line:259,column:6},end:{line:259,column:22}},"116":{start:{line:260,column:30},end:{line:260,column:72}},"117":{start:{line:263,column:2},end:{line:265,column:3}},"118":{start:{line:264,column:4},end:{line:264,column:75}},"119":{start:{line:267,column:2},end:{line:273,column:4}},"120":{start:{line:280,column:6},end:{line:280,column:13}},"121":{start:{line:281,column:2},end:{line:281,column:56}},"122":{start:{line:287,column:2},end:{line:293,column:3}},"123":{start:{line:288,column:22},end:{line:288,column:53}},"124":{start:{line:290,column:4},end:{line:290,column:76}},"125":{start:{line:295,column:2},end:{line:309,column:3}},"126":{start:{line:297,column:6},end:{line:301,column:9}},"127":{start:{line:304,column:6},end:{line:308,column:9}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:70,column:9},end:{line:70,column:31}},loc:{start:{line:70,column:37},end:{line:70,column:95}},line:70},"1":{name:"ownKeys",decl:{start:{line:72,column:9},end:{line:72,column:16}},loc:{start:{line:72,column:41},end:{line:72,column:345}},line:72},"2":{name:"(anonymous_2)",decl:{start:{line:72,column:210},end:{line:72,column:211}},loc:{start:{line:72,column:225},end:{line:72,column:292}},line:72},"3":{name:"_objectSpread",decl:{start:{line:74,column:9},end:{line:74,column:22}},loc:{start:{line:74,column:31},end:{line:74,column:534}},line:74},"4":{name:"(anonymous_4)",decl:{start:{line:74,column:184},end:{line:74,column:185}},loc:{start:{line:74,column:199},end:{line:74,column:245}},line:74},"5":{name:"(anonymous_5)",decl:{start:{line:74,column:411},end:{line:74,column:412}},loc:{start:{line:74,column:426},end:{line:74,column:511}},line:74},"6":{name:"_defineProperty",decl:{start:{line:76,column:9},end:{line:76,column:24}},loc:{start:{line:76,column:42},end:{line:76,column:209}},line:76},"7":{name:"getControllers",decl:{start:{line:78,column:9},end:{line:78,column:23}},loc:{start:{line:78,column:33},end:{line:117,column:1}},line:78},"8":{name:"getLoggerController",decl:{start:{line:119,column:9},end:{line:119,column:28}},loc:{start:{line:119,column:38},end:{line:140,column:1}},line:119},"9":{name:"getFilesController",decl:{start:{line:142,column:9},end:{line:142,column:27}},loc:{start:{line:142,column:37},end:{line:162,column:1}},line:142},"10":{name:"(anonymous_10)",decl:{start:{line:156,column:79},end:{line:156,column:80}},loc:{start:{line:156,column:85},end:{line:158,column:3}},line:156},"11":{name:"getUserController",decl:{start:{line:164,column:9},end:{line:164,column:26}},loc:{start:{line:164,column:36},end:{line:174,column:1}},line:164},"12":{name:"getCacheController",decl:{start:{line:176,column:9},end:{line:176,column:27}},loc:{start:{line:176,column:37},end:{line:189,column:1}},line:176},"13":{name:"getParseGraphQLController",decl:{start:{line:191,column:9},end:{line:191,column:34}},loc:{start:{line:191,column:60},end:{line:195,column:1}},line:191},"14":{name:"getAnalyticsController",decl:{start:{line:197,column:9},end:{line:197,column:31}},loc:{start:{line:197,column:41},end:{line:203,column:1}},line:197},"15":{name:"getLiveQueryController",decl:{start:{line:205,column:9},end:{line:205,column:31}},loc:{start:{line:205,column:41},end:{line:207,column:1}},line:205},"16":{name:"getDatabaseController",decl:{start:{line:209,column:9},end:{line:209,column:30}},loc:{start:{line:209,column:40},end:{line:228,column:1}},line:209},"17":{name:"getHooksController",decl:{start:{line:230,column:9},end:{line:230,column:27}},loc:{start:{line:230,column:57},end:{line:236,column:1}},line:230},"18":{name:"getPushController",decl:{start:{line:238,column:9},end:{line:238,column:26}},loc:{start:{line:238,column:36},end:{line:274,column:1}},line:238},"19":{name:"getAuthDataManager",decl:{start:{line:276,column:9},end:{line:276,column:27}},loc:{start:{line:276,column:37},end:{line:282,column:1}},line:276},"20":{name:"getDatabaseAdapter",decl:{start:{line:284,column:9},end:{line:284,column:27}},loc:{start:{line:284,column:76},end:{line:310,column:1}},line:284}},branchMap:{"0":{loc:{start:{line:70,column:46},end:{line:70,column:92}},type:"cond-expr",locations:[{start:{line:70,column:70},end:{line:70,column:73}},{start:{line:70,column:76},end:{line:70,column:92}}],line:70},"1":{loc:{start:{line:70,column:46},end:{line:70,column:67}},type:"binary-expr",locations:[{start:{line:70,column:46},end:{line:70,column:49}},{start:{line:70,column:53},end:{line:70,column:67}}],line:70},"2":{loc:{start:{line:72,column:75},end:{line:72,column:330}},type:"if",locations:[{start:{line:72,column:75},end:{line:72,column:330}},{start:{line:72,column:75},end:{line:72,column:330}}],line:72},"3":{loc:{start:{line:72,column:163},end:{line:72,column:296}},type:"if",locations:[{start:{line:72,column:163},end:{line:72,column:296}},{start:{line:72,column:163},end:{line:72,column:296}}],line:72},"4":{loc:{start:{line:74,column:91},end:{line:74,column:131}},type:"cond-expr",locations:[{start:{line:74,column:114},end:{line:74,column:126}},{start:{line:74,column:129},end:{line:74,column:131}}],line:74},"5":{loc:{start:{line:74,column:133},end:{line:74,column:515}},type:"if",locations:[{start:{line:74,column:133},end:{line:74,column:515}},{start:{line:74,column:133},end:{line:74,column:515}}],line:74},"6":{loc:{start:{line:74,column:255},end:{line:74,column:515}},type:"if",locations:[{start:{line:74,column:255},end:{line:74,column:515}},{start:{line:74,column:255},end:{line:74,column:515}}],line:74},"7":{loc:{start:{line:76,column:44},end:{line:76,column:195}},type:"if",locations:[{start:{line:76,column:44},end:{line:76,column:195}},{start:{line:76,column:44},end:{line:76,column:195}}],line:76},"8":{loc:{start:{line:152,column:2},end:{line:154,column:3}},type:"if",locations:[{start:{line:152,column:2},end:{line:154,column:3}},{start:{line:152,column:2},end:{line:154,column:3}}],line:152},"9":{loc:{start:{line:152,column:6},end:{line:152,column:38}},type:"binary-expr",locations:[{start:{line:152,column:6},end:{line:152,column:19}},{start:{line:152,column:23},end:{line:152,column:38}}],line:152},"10":{loc:{start:{line:219,column:2},end:{line:225,column:3}},type:"if",locations:[{start:{line:219,column:2},end:{line:225,column:3}},{start:{line:219,column:2},end:{line:225,column:3}}],line:219},"11":{loc:{start:{line:219,column:6},end:{line:219,column:165}},type:"binary-expr",locations:[{start:{line:219,column:7},end:{line:219,column:22}},{start:{line:219,column:26},end:{line:219,column:37}},{start:{line:219,column:41},end:{line:219,column:86}},{start:{line:219,column:90},end:{line:219,column:145}},{start:{line:219,column:150},end:{line:219,column:165}}],line:219},"12":{loc:{start:{line:221,column:9},end:{line:225,column:3}},type:"if",locations:[{start:{line:221,column:9},end:{line:225,column:3}},{start:{line:221,column:9},end:{line:225,column:3}}],line:221},"13":{loc:{start:{line:244,column:27},end:{line:244,column:57}},type:"binary-expr",locations:[{start:{line:244,column:27},end:{line:244,column:51}},{start:{line:244,column:55},end:{line:244,column:57}}],line:244},"14":{loc:{start:{line:246,column:2},end:{line:248,column:3}},type:"if",locations:[{start:{line:246,column:2},end:{line:248,column:3}},{start:{line:246,column:2},end:{line:248,column:3}}],line:246},"15":{loc:{start:{line:251,column:54},end:{line:251,column:88}},type:"binary-expr",locations:[{start:{line:251,column:54},end:{line:251,column:65}},{start:{line:251,column:69},end:{line:251,column:88}}],line:251},"16":{loc:{start:{line:255,column:28},end:{line:255,column:47}},type:"binary-expr",locations:[{start:{line:255,column:28},end:{line:255,column:39}},{start:{line:255,column:43},end:{line:255,column:47}}],line:255},"17":{loc:{start:{line:256,column:34},end:{line:256,column:74}},type:"binary-expr",locations:[{start:{line:256,column:34},end:{line:256,column:48}},{start:{line:256,column:52},end:{line:256,column:74}}],line:256},"18":{loc:{start:{line:263,column:2},end:{line:265,column:3}},type:"if",locations:[{start:{line:263,column:2},end:{line:265,column:3}},{start:{line:263,column:2},end:{line:265,column:3}}],line:263},"19":{loc:{start:{line:290,column:15},end:{line:290,column:75}},type:"cond-expr",locations:[{start:{line:290,column:36},end:{line:290,column:68}},{start:{line:290,column:71},end:{line:290,column:75}}],line:290},"20":{loc:{start:{line:295,column:2},end:{line:309,column:3}},type:"switch",locations:[{start:{line:296,column:4},end:{line:301,column:9}},{start:{line:303,column:4},end:{line:308,column:9}}],line:295}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0,0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0]},inputSourceMap:{version:3,sources:["../../src/Controllers/index.js"],names:["getControllers","options","loggerController","getLoggerController","filesController","getFilesController","userController","getUserController","pushController","hasPushScheduledSupport","hasPushSupport","pushControllerQueue","pushWorker","getPushController","cacheController","getCacheController","analyticsController","getAnalyticsController","liveQueryController","getLiveQueryController","databaseController","getDatabaseController","hooksController","getHooksController","authDataManager","getAuthDataManager","parseGraphQLController","getParseGraphQLController","schemaCache","SchemaCache","appId","jsonLogs","logsFolder","verbose","logLevel","maxLogFiles","silent","loggerAdapter","loggerOptions","loggerControllerAdapter","WinstonLoggerAdapter","LoggerController","databaseURI","filesAdapter","databaseAdapter","preserveFileName","fileKey","filesControllerAdapter","GridFSBucketAdapter","FilesController","emailAdapter","verifyUserEmails","emailControllerAdapter","UserController","cacheAdapter","cacheTTL","cacheMaxSize","cacheControllerAdapter","InMemoryCacheAdapter","ttl","maxSize","CacheController","controllerDeps","ParseGraphQLController","mountGraphQL","analyticsAdapter","analyticsControllerAdapter","AnalyticsAdapter","AnalyticsController","LiveQueryController","liveQuery","collectionPrefix","databaseOptions","defaults","getDatabaseAdapter","DatabaseController","webhookKey","HooksController","scheduledPush","push","pushOptions","Object","assign","pushQueueOptions","queueOptions","pushAdapter","adapter","ParsePushAdapter","PushController","disablePushWorker","PushQueue","PushWorker","auth","enableAnonymousUsers","protocol","parsedURI","url","parse","toLowerCase","e","PostgresStorageAdapter","uri","MongoStorageAdapter","mongoOptions"],mappings:"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",sourcesContent:["import authDataManager from '../Adapters/Auth';\nimport { ParseServerOptions } from '../Options';\nimport { loadAdapter } from '../Adapters/AdapterLoader';\nimport defaults from '../defaults';\nimport url from 'url';\n// Controllers\nimport { LoggerController } from './LoggerController';\nimport { FilesController } from './FilesController';\nimport { HooksController } from './HooksController';\nimport { UserController } from './UserController';\nimport { CacheController } from './CacheController';\nimport { LiveQueryController } from './LiveQueryController';\nimport { AnalyticsController } from './AnalyticsController';\nimport { PushController } from './PushController';\nimport { PushQueue } from '../Push/PushQueue';\nimport { PushWorker } from '../Push/PushWorker';\nimport DatabaseController from './DatabaseController';\n\n// Adapters\nimport { GridFSBucketAdapter } from '../Adapters/Files/GridFSBucketAdapter';\nimport { WinstonLoggerAdapter } from '../Adapters/Logger/WinstonLoggerAdapter';\nimport { InMemoryCacheAdapter } from '../Adapters/Cache/InMemoryCacheAdapter';\nimport { AnalyticsAdapter } from '../Adapters/Analytics/AnalyticsAdapter';\nimport MongoStorageAdapter from '../Adapters/Storage/Mongo/MongoStorageAdapter';\nimport PostgresStorageAdapter from '../Adapters/Storage/Postgres/PostgresStorageAdapter';\nimport ParsePushAdapter from '@parse/push-adapter';\nimport ParseGraphQLController from './ParseGraphQLController';\nimport SchemaCache from '../Adapters/Cache/SchemaCache';\n\nexport function getControllers(options: ParseServerOptions) {\n  const loggerController = getLoggerController(options);\n  const filesController = getFilesController(options);\n  const userController = getUserController(options);\n  const {\n    pushController,\n    hasPushScheduledSupport,\n    hasPushSupport,\n    pushControllerQueue,\n    pushWorker,\n  } = getPushController(options);\n  const cacheController = getCacheController(options);\n  const analyticsController = getAnalyticsController(options);\n  const liveQueryController = getLiveQueryController(options);\n  const databaseController = getDatabaseController(options);\n  const hooksController = getHooksController(options, databaseController);\n  const authDataManager = getAuthDataManager(options);\n  const parseGraphQLController = getParseGraphQLController(options, {\n    databaseController,\n    cacheController,\n  });\n  return {\n    loggerController,\n    filesController,\n    userController,\n    pushController,\n    hasPushScheduledSupport,\n    hasPushSupport,\n    pushWorker,\n    pushControllerQueue,\n    analyticsController,\n    cacheController,\n    parseGraphQLController,\n    liveQueryController,\n    databaseController,\n    hooksController,\n    authDataManager,\n    schemaCache: SchemaCache,\n  };\n}\n\nexport function getLoggerController(options: ParseServerOptions): LoggerController {\n  const {\n    appId,\n    jsonLogs,\n    logsFolder,\n    verbose,\n    logLevel,\n    maxLogFiles,\n    silent,\n    loggerAdapter,\n  } = options;\n  const loggerOptions = {\n    jsonLogs,\n    logsFolder,\n    verbose,\n    logLevel,\n    silent,\n    maxLogFiles,\n  };\n  const loggerControllerAdapter = loadAdapter(loggerAdapter, WinstonLoggerAdapter, loggerOptions);\n  return new LoggerController(loggerControllerAdapter, appId, loggerOptions);\n}\n\nexport function getFilesController(options: ParseServerOptions): FilesController {\n  const { appId, databaseURI, filesAdapter, databaseAdapter, preserveFileName, fileKey } = options;\n  if (!filesAdapter && databaseAdapter) {\n    throw 'When using an explicit database adapter, you must also use an explicit filesAdapter.';\n  }\n  const filesControllerAdapter = loadAdapter(filesAdapter, () => {\n    return new GridFSBucketAdapter(databaseURI, {}, fileKey);\n  });\n  return new FilesController(filesControllerAdapter, appId, {\n    preserveFileName,\n  });\n}\n\nexport function getUserController(options: ParseServerOptions): UserController {\n  const { appId, emailAdapter, verifyUserEmails } = options;\n  const emailControllerAdapter = loadAdapter(emailAdapter);\n  return new UserController(emailControllerAdapter, appId, {\n    verifyUserEmails,\n  });\n}\n\nexport function getCacheController(options: ParseServerOptions): CacheController {\n  const { appId, cacheAdapter, cacheTTL, cacheMaxSize } = options;\n  const cacheControllerAdapter = loadAdapter(cacheAdapter, InMemoryCacheAdapter, {\n    appId: appId,\n    ttl: cacheTTL,\n    maxSize: cacheMaxSize,\n  });\n  return new CacheController(cacheControllerAdapter, appId);\n}\n\nexport function getParseGraphQLController(\n  options: ParseServerOptions,\n  controllerDeps\n): ParseGraphQLController {\n  return new ParseGraphQLController({\n    mountGraphQL: options.mountGraphQL,\n    ...controllerDeps,\n  });\n}\n\nexport function getAnalyticsController(options: ParseServerOptions): AnalyticsController {\n  const { analyticsAdapter } = options;\n  const analyticsControllerAdapter = loadAdapter(analyticsAdapter, AnalyticsAdapter);\n  return new AnalyticsController(analyticsControllerAdapter);\n}\n\nexport function getLiveQueryController(options: ParseServerOptions): LiveQueryController {\n  return new LiveQueryController(options.liveQuery);\n}\n\nexport function getDatabaseController(options: ParseServerOptions): DatabaseController {\n  const { databaseURI, collectionPrefix, databaseOptions } = options;\n  let { databaseAdapter } = options;\n  if (\n    (databaseOptions ||\n      (databaseURI && databaseURI !== defaults.databaseURI) ||\n      collectionPrefix !== defaults.collectionPrefix) &&\n    databaseAdapter\n  ) {\n    throw 'You cannot specify both a databaseAdapter and a databaseURI/databaseOptions/collectionPrefix.';\n  } else if (!databaseAdapter) {\n    databaseAdapter = getDatabaseAdapter(databaseURI, collectionPrefix, databaseOptions);\n  } else {\n    databaseAdapter = loadAdapter(databaseAdapter);\n  }\n  return new DatabaseController(databaseAdapter);\n}\n\nexport function getHooksController(\n  options: ParseServerOptions,\n  databaseController: DatabaseController\n): HooksController {\n  const { appId, webhookKey } = options;\n  return new HooksController(appId, databaseController, webhookKey);\n}\n\ninterface PushControlling {\n  pushController: PushController;\n  hasPushScheduledSupport: boolean;\n  pushControllerQueue: PushQueue;\n  pushWorker: PushWorker;\n}\n\nexport function getPushController(options: ParseServerOptions): PushControlling {\n  const { scheduledPush, push } = options;\n\n  const pushOptions = Object.assign({}, push);\n  const pushQueueOptions = pushOptions.queueOptions || {};\n  if (pushOptions.queueOptions) {\n    delete pushOptions.queueOptions;\n  }\n\n  // Pass the push options too as it works with the default\n  const pushAdapter = loadAdapter(\n    pushOptions && pushOptions.adapter,\n    ParsePushAdapter,\n    pushOptions\n  );\n  // We pass the options and the base class for the adatper,\n  // Note that passing an instance would work too\n  const pushController = new PushController();\n  const hasPushSupport = !!(pushAdapter && push);\n  const hasPushScheduledSupport = hasPushSupport && scheduledPush === true;\n\n  const { disablePushWorker } = pushQueueOptions;\n\n  const pushControllerQueue = new PushQueue(pushQueueOptions);\n  let pushWorker;\n  if (!disablePushWorker) {\n    pushWorker = new PushWorker(pushAdapter, pushQueueOptions);\n  }\n  return {\n    pushController,\n    hasPushSupport,\n    hasPushScheduledSupport,\n    pushControllerQueue,\n    pushWorker,\n  };\n}\n\nexport function getAuthDataManager(options: ParseServerOptions) {\n  const { auth, enableAnonymousUsers } = options;\n  return authDataManager(auth, enableAnonymousUsers);\n}\n\nexport function getDatabaseAdapter(databaseURI, collectionPrefix, databaseOptions) {\n  let protocol;\n  try {\n    const parsedURI = url.parse(databaseURI);\n    protocol = parsedURI.protocol ? parsedURI.protocol.toLowerCase() : null;\n  } catch (e) {\n    /* */\n  }\n  switch (protocol) {\n    case 'postgres:':\n      return new PostgresStorageAdapter({\n        uri: databaseURI,\n        collectionPrefix,\n        databaseOptions,\n      });\n    default:\n      return new MongoStorageAdapter({\n        uri: databaseURI,\n        collectionPrefix,\n        mongoOptions: databaseOptions,\n      });\n  }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"761b8ca425a048aae153a6600a06d44dc8c472ac"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1yxtq3aab8=function(){return actualCoverage;};}return actualCoverage;}cov_1yxtq3aab8();cov_1yxtq3aab8().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1yxtq3aab8().s[1]++;exports.getControllers=getControllers;cov_1yxtq3aab8().s[2]++;exports.getLoggerController=getLoggerController;cov_1yxtq3aab8().s[3]++;exports.getFilesController=getFilesController;cov_1yxtq3aab8().s[4]++;exports.getUserController=getUserController;cov_1yxtq3aab8().s[5]++;exports.getCacheController=getCacheController;cov_1yxtq3aab8().s[6]++;exports.getParseGraphQLController=getParseGraphQLController;cov_1yxtq3aab8().s[7]++;exports.getAnalyticsController=getAnalyticsController;cov_1yxtq3aab8().s[8]++;exports.getLiveQueryController=getLiveQueryController;cov_1yxtq3aab8().s[9]++;exports.getDatabaseController=getDatabaseController;cov_1yxtq3aab8().s[10]++;exports.getHooksController=getHooksController;cov_1yxtq3aab8().s[11]++;exports.getPushController=getPushController;cov_1yxtq3aab8().s[12]++;exports.getAuthDataManager=getAuthDataManager;cov_1yxtq3aab8().s[13]++;exports.getDatabaseAdapter=getDatabaseAdapter;var _Auth=(cov_1yxtq3aab8().s[14]++,_interopRequireDefault(require("../Adapters/Auth")));var _Options=(cov_1yxtq3aab8().s[15]++,require("../Options"));var _AdapterLoader=(cov_1yxtq3aab8().s[16]++,require("../Adapters/AdapterLoader"));var _defaults=(cov_1yxtq3aab8().s[17]++,_interopRequireDefault(require("../defaults")));var _url=(cov_1yxtq3aab8().s[18]++,_interopRequireDefault(require("url")));var _LoggerController=(cov_1yxtq3aab8().s[19]++,require("./LoggerController"));var _FilesController=(cov_1yxtq3aab8().s[20]++,require("./FilesController"));var _HooksController=(cov_1yxtq3aab8().s[21]++,require("./HooksController"));var _UserController=(cov_1yxtq3aab8().s[22]++,require("./UserController"));var _CacheController=(cov_1yxtq3aab8().s[23]++,require("./CacheController"));var _LiveQueryController=(cov_1yxtq3aab8().s[24]++,require("./LiveQueryController"));var _AnalyticsController=(cov_1yxtq3aab8().s[25]++,require("./AnalyticsController"));var _PushController=(cov_1yxtq3aab8().s[26]++,require("./PushController"));var _PushQueue=(cov_1yxtq3aab8().s[27]++,require("../Push/PushQueue"));var _PushWorker=(cov_1yxtq3aab8().s[28]++,require("../Push/PushWorker"));var _DatabaseController=(cov_1yxtq3aab8().s[29]++,_interopRequireDefault(require("./DatabaseController")));var _GridFSBucketAdapter=(cov_1yxtq3aab8().s[30]++,require("../Adapters/Files/GridFSBucketAdapter"));var _WinstonLoggerAdapter=(cov_1yxtq3aab8().s[31]++,require("../Adapters/Logger/WinstonLoggerAdapter"));var _InMemoryCacheAdapter=(cov_1yxtq3aab8().s[32]++,require("../Adapters/Cache/InMemoryCacheAdapter"));var _AnalyticsAdapter=(cov_1yxtq3aab8().s[33]++,require("../Adapters/Analytics/AnalyticsAdapter"));var _MongoStorageAdapter=(cov_1yxtq3aab8().s[34]++,_interopRequireDefault(require("../Adapters/Storage/Mongo/MongoStorageAdapter")));var _PostgresStorageAdapter=(cov_1yxtq3aab8().s[35]++,_interopRequireDefault(require("../Adapters/Storage/Postgres/PostgresStorageAdapter")));var _pushAdapter=(cov_1yxtq3aab8().s[36]++,_interopRequireDefault(require("@parse/push-adapter")));var _ParseGraphQLController=(cov_1yxtq3aab8().s[37]++,_interopRequireDefault(require("./ParseGraphQLController")));var _SchemaCache=(cov_1yxtq3aab8().s[38]++,_interopRequireDefault(require("../Adapters/Cache/SchemaCache")));function _interopRequireDefault(obj){cov_1yxtq3aab8().f[0]++;cov_1yxtq3aab8().s[39]++;return(cov_1yxtq3aab8().b[1][0]++,obj)&&(cov_1yxtq3aab8().b[1][1]++,obj.__esModule)?(cov_1yxtq3aab8().b[0][0]++,obj):(cov_1yxtq3aab8().b[0][1]++,{default:obj});}function ownKeys(object,enumerableOnly){cov_1yxtq3aab8().f[1]++;var keys=(cov_1yxtq3aab8().s[40]++,Object.keys(object));cov_1yxtq3aab8().s[41]++;if(Object.getOwnPropertySymbols){cov_1yxtq3aab8().b[2][0]++;var symbols=(cov_1yxtq3aab8().s[42]++,Object.getOwnPropertySymbols(object));cov_1yxtq3aab8().s[43]++;if(enumerableOnly){cov_1yxtq3aab8().b[3][0]++;cov_1yxtq3aab8().s[44]++;symbols=symbols.filter(function(sym){cov_1yxtq3aab8().f[2]++;cov_1yxtq3aab8().s[45]++;return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}else{cov_1yxtq3aab8().b[3][1]++;}cov_1yxtq3aab8().s[46]++;keys.push.apply(keys,symbols);}else{cov_1yxtq3aab8().b[2][1]++;}cov_1yxtq3aab8().s[47]++;return keys;}function _objectSpread(target){cov_1yxtq3aab8().f[3]++;cov_1yxtq3aab8().s[48]++;for(var i=(cov_1yxtq3aab8().s[49]++,1);i<arguments.length;i++){var source=(cov_1yxtq3aab8().s[50]++,arguments[i]!=null?(cov_1yxtq3aab8().b[4][0]++,arguments[i]):(cov_1yxtq3aab8().b[4][1]++,{}));cov_1yxtq3aab8().s[51]++;if(i%2){cov_1yxtq3aab8().b[5][0]++;cov_1yxtq3aab8().s[52]++;ownKeys(Object(source),true).forEach(function(key){cov_1yxtq3aab8().f[4]++;cov_1yxtq3aab8().s[53]++;_defineProperty(target,key,source[key]);});}else{cov_1yxtq3aab8().b[5][1]++;cov_1yxtq3aab8().s[54]++;if(Object.getOwnPropertyDescriptors){cov_1yxtq3aab8().b[6][0]++;cov_1yxtq3aab8().s[55]++;Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{cov_1yxtq3aab8().b[6][1]++;cov_1yxtq3aab8().s[56]++;ownKeys(Object(source)).forEach(function(key){cov_1yxtq3aab8().f[5]++;cov_1yxtq3aab8().s[57]++;Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}}cov_1yxtq3aab8().s[58]++;return target;}function _defineProperty(obj,key,value){cov_1yxtq3aab8().f[6]++;cov_1yxtq3aab8().s[59]++;if(key in obj){cov_1yxtq3aab8().b[7][0]++;cov_1yxtq3aab8().s[60]++;Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{cov_1yxtq3aab8().b[7][1]++;cov_1yxtq3aab8().s[61]++;obj[key]=value;}cov_1yxtq3aab8().s[62]++;return obj;}function getControllers(options){cov_1yxtq3aab8().f[7]++;const loggerController=(cov_1yxtq3aab8().s[63]++,getLoggerController(options));const filesController=(cov_1yxtq3aab8().s[64]++,getFilesController(options));const userController=(cov_1yxtq3aab8().s[65]++,getUserController(options));const{pushController,hasPushScheduledSupport,hasPushSupport,pushControllerQueue,pushWorker}=(cov_1yxtq3aab8().s[66]++,getPushController(options));const cacheController=(cov_1yxtq3aab8().s[67]++,getCacheController(options));const analyticsController=(cov_1yxtq3aab8().s[68]++,getAnalyticsController(options));const liveQueryController=(cov_1yxtq3aab8().s[69]++,getLiveQueryController(options));const databaseController=(cov_1yxtq3aab8().s[70]++,getDatabaseController(options));const hooksController=(cov_1yxtq3aab8().s[71]++,getHooksController(options,databaseController));const authDataManager=(cov_1yxtq3aab8().s[72]++,getAuthDataManager(options));const parseGraphQLController=(cov_1yxtq3aab8().s[73]++,getParseGraphQLController(options,{databaseController,cacheController}));cov_1yxtq3aab8().s[74]++;return{loggerController,filesController,userController,pushController,hasPushScheduledSupport,hasPushSupport,pushWorker,pushControllerQueue,analyticsController,cacheController,parseGraphQLController,liveQueryController,databaseController,hooksController,authDataManager,schemaCache:_SchemaCache.default};}function getLoggerController(options){cov_1yxtq3aab8().f[8]++;const{appId,jsonLogs,logsFolder,verbose,logLevel,maxLogFiles,silent,loggerAdapter}=(cov_1yxtq3aab8().s[75]++,options);const loggerOptions=(cov_1yxtq3aab8().s[76]++,{jsonLogs,logsFolder,verbose,logLevel,silent,maxLogFiles});const loggerControllerAdapter=(cov_1yxtq3aab8().s[77]++,(0,_AdapterLoader.loadAdapter)(loggerAdapter,_WinstonLoggerAdapter.WinstonLoggerAdapter,loggerOptions));cov_1yxtq3aab8().s[78]++;return new _LoggerController.LoggerController(loggerControllerAdapter,appId,loggerOptions);}function getFilesController(options){cov_1yxtq3aab8().f[9]++;const{appId,databaseURI,filesAdapter,databaseAdapter,preserveFileName,fileKey}=(cov_1yxtq3aab8().s[79]++,options);cov_1yxtq3aab8().s[80]++;if((cov_1yxtq3aab8().b[9][0]++,!filesAdapter)&&(cov_1yxtq3aab8().b[9][1]++,databaseAdapter)){cov_1yxtq3aab8().b[8][0]++;cov_1yxtq3aab8().s[81]++;throw'When using an explicit database adapter, you must also use an explicit filesAdapter.';}else{cov_1yxtq3aab8().b[8][1]++;}const filesControllerAdapter=(cov_1yxtq3aab8().s[82]++,(0,_AdapterLoader.loadAdapter)(filesAdapter,()=>{cov_1yxtq3aab8().f[10]++;cov_1yxtq3aab8().s[83]++;return new _GridFSBucketAdapter.GridFSBucketAdapter(databaseURI,{},fileKey);}));cov_1yxtq3aab8().s[84]++;return new _FilesController.FilesController(filesControllerAdapter,appId,{preserveFileName});}function getUserController(options){cov_1yxtq3aab8().f[11]++;const{appId,emailAdapter,verifyUserEmails}=(cov_1yxtq3aab8().s[85]++,options);const emailControllerAdapter=(cov_1yxtq3aab8().s[86]++,(0,_AdapterLoader.loadAdapter)(emailAdapter));cov_1yxtq3aab8().s[87]++;return new _UserController.UserController(emailControllerAdapter,appId,{verifyUserEmails});}function getCacheController(options){cov_1yxtq3aab8().f[12]++;const{appId,cacheAdapter,cacheTTL,cacheMaxSize}=(cov_1yxtq3aab8().s[88]++,options);const cacheControllerAdapter=(cov_1yxtq3aab8().s[89]++,(0,_AdapterLoader.loadAdapter)(cacheAdapter,_InMemoryCacheAdapter.InMemoryCacheAdapter,{appId:appId,ttl:cacheTTL,maxSize:cacheMaxSize}));cov_1yxtq3aab8().s[90]++;return new _CacheController.CacheController(cacheControllerAdapter,appId);}function getParseGraphQLController(options,controllerDeps){cov_1yxtq3aab8().f[13]++;cov_1yxtq3aab8().s[91]++;return new _ParseGraphQLController.default(_objectSpread({mountGraphQL:options.mountGraphQL},controllerDeps));}function getAnalyticsController(options){cov_1yxtq3aab8().f[14]++;const{analyticsAdapter}=(cov_1yxtq3aab8().s[92]++,options);const analyticsControllerAdapter=(cov_1yxtq3aab8().s[93]++,(0,_AdapterLoader.loadAdapter)(analyticsAdapter,_AnalyticsAdapter.AnalyticsAdapter));cov_1yxtq3aab8().s[94]++;return new _AnalyticsController.AnalyticsController(analyticsControllerAdapter);}function getLiveQueryController(options){cov_1yxtq3aab8().f[15]++;cov_1yxtq3aab8().s[95]++;return new _LiveQueryController.LiveQueryController(options.liveQuery);}function getDatabaseController(options){cov_1yxtq3aab8().f[16]++;const{databaseURI,collectionPrefix,databaseOptions}=(cov_1yxtq3aab8().s[96]++,options);let{databaseAdapter}=(cov_1yxtq3aab8().s[97]++,options);cov_1yxtq3aab8().s[98]++;if(((cov_1yxtq3aab8().b[11][0]++,databaseOptions)||(cov_1yxtq3aab8().b[11][1]++,databaseURI)&&(cov_1yxtq3aab8().b[11][2]++,databaseURI!==_defaults.default.databaseURI)||(cov_1yxtq3aab8().b[11][3]++,collectionPrefix!==_defaults.default.collectionPrefix))&&(cov_1yxtq3aab8().b[11][4]++,databaseAdapter)){cov_1yxtq3aab8().b[10][0]++;cov_1yxtq3aab8().s[99]++;throw'You cannot specify both a databaseAdapter and a databaseURI/databaseOptions/collectionPrefix.';}else{cov_1yxtq3aab8().b[10][1]++;cov_1yxtq3aab8().s[100]++;if(!databaseAdapter){cov_1yxtq3aab8().b[12][0]++;cov_1yxtq3aab8().s[101]++;databaseAdapter=getDatabaseAdapter(databaseURI,collectionPrefix,databaseOptions);}else{cov_1yxtq3aab8().b[12][1]++;cov_1yxtq3aab8().s[102]++;databaseAdapter=(0,_AdapterLoader.loadAdapter)(databaseAdapter);}}cov_1yxtq3aab8().s[103]++;return new _DatabaseController.default(databaseAdapter);}function getHooksController(options,databaseController){cov_1yxtq3aab8().f[17]++;const{appId,webhookKey}=(cov_1yxtq3aab8().s[104]++,options);cov_1yxtq3aab8().s[105]++;return new _HooksController.HooksController(appId,databaseController,webhookKey);}function getPushController(options){cov_1yxtq3aab8().f[18]++;const{scheduledPush,push}=(cov_1yxtq3aab8().s[106]++,options);const pushOptions=(cov_1yxtq3aab8().s[107]++,Object.assign({},push));const pushQueueOptions=(cov_1yxtq3aab8().s[108]++,(cov_1yxtq3aab8().b[13][0]++,pushOptions.queueOptions)||(cov_1yxtq3aab8().b[13][1]++,{}));cov_1yxtq3aab8().s[109]++;if(pushOptions.queueOptions){cov_1yxtq3aab8().b[14][0]++;cov_1yxtq3aab8().s[110]++;delete pushOptions.queueOptions;}else{cov_1yxtq3aab8().b[14][1]++;}// Pass the push options too as it works with the default
const pushAdapter=(cov_1yxtq3aab8().s[111]++,(0,_AdapterLoader.loadAdapter)((cov_1yxtq3aab8().b[15][0]++,pushOptions)&&(cov_1yxtq3aab8().b[15][1]++,pushOptions.adapter),_pushAdapter.default,pushOptions));// We pass the options and the base class for the adatper,
// Note that passing an instance would work too
const pushController=(cov_1yxtq3aab8().s[112]++,new _PushController.PushController());const hasPushSupport=(cov_1yxtq3aab8().s[113]++,!!((cov_1yxtq3aab8().b[16][0]++,pushAdapter)&&(cov_1yxtq3aab8().b[16][1]++,push)));const hasPushScheduledSupport=(cov_1yxtq3aab8().s[114]++,(cov_1yxtq3aab8().b[17][0]++,hasPushSupport)&&(cov_1yxtq3aab8().b[17][1]++,scheduledPush===true));const{disablePushWorker}=(cov_1yxtq3aab8().s[115]++,pushQueueOptions);const pushControllerQueue=(cov_1yxtq3aab8().s[116]++,new _PushQueue.PushQueue(pushQueueOptions));let pushWorker;cov_1yxtq3aab8().s[117]++;if(!disablePushWorker){cov_1yxtq3aab8().b[18][0]++;cov_1yxtq3aab8().s[118]++;pushWorker=new _PushWorker.PushWorker(pushAdapter,pushQueueOptions);}else{cov_1yxtq3aab8().b[18][1]++;}cov_1yxtq3aab8().s[119]++;return{pushController,hasPushSupport,hasPushScheduledSupport,pushControllerQueue,pushWorker};}function getAuthDataManager(options){cov_1yxtq3aab8().f[19]++;const{auth,enableAnonymousUsers}=(cov_1yxtq3aab8().s[120]++,options);cov_1yxtq3aab8().s[121]++;return(0,_Auth.default)(auth,enableAnonymousUsers);}function getDatabaseAdapter(databaseURI,collectionPrefix,databaseOptions){cov_1yxtq3aab8().f[20]++;let protocol;cov_1yxtq3aab8().s[122]++;try{const parsedURI=(cov_1yxtq3aab8().s[123]++,_url.default.parse(databaseURI));cov_1yxtq3aab8().s[124]++;protocol=parsedURI.protocol?(cov_1yxtq3aab8().b[19][0]++,parsedURI.protocol.toLowerCase()):(cov_1yxtq3aab8().b[19][1]++,null);}catch(e){/* */}cov_1yxtq3aab8().s[125]++;switch(protocol){case'postgres:':cov_1yxtq3aab8().b[20][0]++;cov_1yxtq3aab8().s[126]++;return new _PostgresStorageAdapter.default({uri:databaseURI,collectionPrefix,databaseOptions});default:cov_1yxtq3aab8().b[20][1]++;cov_1yxtq3aab8().s[127]++;return new _MongoStorageAdapter.default({uri:databaseURI,collectionPrefix,mongoOptions:databaseOptions});}}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Db250cm9sbGVycy9pbmRleC5qcyJdLCJuYW1lcyI6WyJnZXRDb250cm9sbGVycyIsIm9wdGlvbnMiLCJsb2dnZXJDb250cm9sbGVyIiwiZ2V0TG9nZ2VyQ29udHJvbGxlciIsImZpbGVzQ29udHJvbGxlciIsImdldEZpbGVzQ29udHJvbGxlciIsInVzZXJDb250cm9sbGVyIiwiZ2V0VXNlckNvbnRyb2xsZXIiLCJwdXNoQ29udHJvbGxlciIsImhhc1B1c2hTY2hlZHVsZWRTdXBwb3J0IiwiaGFzUHVzaFN1cHBvcnQiLCJwdXNoQ29udHJvbGxlclF1ZXVlIiwicHVzaFdvcmtlciIsImdldFB1c2hDb250cm9sbGVyIiwiY2FjaGVDb250cm9sbGVyIiwiZ2V0Q2FjaGVDb250cm9sbGVyIiwiYW5hbHl0aWNzQ29udHJvbGxlciIsImdldEFuYWx5dGljc0NvbnRyb2xsZXIiLCJsaXZlUXVlcnlDb250cm9sbGVyIiwiZ2V0TGl2ZVF1ZXJ5Q29udHJvbGxlciIsImRhdGFiYXNlQ29udHJvbGxlciIsImdldERhdGFiYXNlQ29udHJvbGxlciIsImhvb2tzQ29udHJvbGxlciIsImdldEhvb2tzQ29udHJvbGxlciIsImF1dGhEYXRhTWFuYWdlciIsImdldEF1dGhEYXRhTWFuYWdlciIsInBhcnNlR3JhcGhRTENvbnRyb2xsZXIiLCJnZXRQYXJzZUdyYXBoUUxDb250cm9sbGVyIiwic2NoZW1hQ2FjaGUiLCJTY2hlbWFDYWNoZSIsImFwcElkIiwianNvbkxvZ3MiLCJsb2dzRm9sZGVyIiwidmVyYm9zZSIsImxvZ0xldmVsIiwibWF4TG9nRmlsZXMiLCJzaWxlbnQiLCJsb2dnZXJBZGFwdGVyIiwibG9nZ2VyT3B0aW9ucyIsImxvZ2dlckNvbnRyb2xsZXJBZGFwdGVyIiwiV2luc3RvbkxvZ2dlckFkYXB0ZXIiLCJMb2dnZXJDb250cm9sbGVyIiwiZGF0YWJhc2VVUkkiLCJmaWxlc0FkYXB0ZXIiLCJkYXRhYmFzZUFkYXB0ZXIiLCJwcmVzZXJ2ZUZpbGVOYW1lIiwiZmlsZUtleSIsImZpbGVzQ29udHJvbGxlckFkYXB0ZXIiLCJHcmlkRlNCdWNrZXRBZGFwdGVyIiwiRmlsZXNDb250cm9sbGVyIiwiZW1haWxBZGFwdGVyIiwidmVyaWZ5VXNlckVtYWlscyIsImVtYWlsQ29udHJvbGxlckFkYXB0ZXIiLCJVc2VyQ29udHJvbGxlciIsImNhY2hlQWRhcHRlciIsImNhY2hlVFRMIiwiY2FjaGVNYXhTaXplIiwiY2FjaGVDb250cm9sbGVyQWRhcHRlciIsIkluTWVtb3J5Q2FjaGVBZGFwdGVyIiwidHRsIiwibWF4U2l6ZSIsIkNhY2hlQ29udHJvbGxlciIsImNvbnRyb2xsZXJEZXBzIiwiUGFyc2VHcmFwaFFMQ29udHJvbGxlciIsIm1vdW50R3JhcGhRTCIsImFuYWx5dGljc0FkYXB0ZXIiLCJhbmFseXRpY3NDb250cm9sbGVyQWRhcHRlciIsIkFuYWx5dGljc0FkYXB0ZXIiLCJBbmFseXRpY3NDb250cm9sbGVyIiwiTGl2ZVF1ZXJ5Q29udHJvbGxlciIsImxpdmVRdWVyeSIsImNvbGxlY3Rpb25QcmVmaXgiLCJkYXRhYmFzZU9wdGlvbnMiLCJkZWZhdWx0cyIsImdldERhdGFiYXNlQWRhcHRlciIsIkRhdGFiYXNlQ29udHJvbGxlciIsIndlYmhvb2tLZXkiLCJIb29rc0NvbnRyb2xsZXIiLCJzY2hlZHVsZWRQdXNoIiwicHVzaCIsInB1c2hPcHRpb25zIiwiT2JqZWN0IiwiYXNzaWduIiwicHVzaFF1ZXVlT3B0aW9ucyIsInF1ZXVlT3B0aW9ucyIsInB1c2hBZGFwdGVyIiwiYWRhcHRlciIsIlBhcnNlUHVzaEFkYXB0ZXIiLCJQdXNoQ29udHJvbGxlciIsImRpc2FibGVQdXNoV29ya2VyIiwiUHVzaFF1ZXVlIiwiUHVzaFdvcmtlciIsImF1dGgiLCJlbmFibGVBbm9ueW1vdXNVc2VycyIsInByb3RvY29sIiwicGFyc2VkVVJJIiwidXJsIiwicGFyc2UiLCJ0b0xvd2VyQ2FzZSIsImUiLCJQb3N0Z3Jlc1N0b3JhZ2VBZGFwdGVyIiwidXJpIiwiTW9uZ29TdG9y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N0JELFFBQUFBLEdBQUcsRUFBRTNELFdBRHdCO0FBRTdCNkIsUUFBQUEsZ0JBRjZCO0FBRzdCZ0MsUUFBQUEsWUFBWSxFQUFFL0I7QUFIZSxPQUF4QixDQUFQO0FBUko7QUFjRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhdXRoRGF0YU1hbmFnZXIgZnJvbSAnLi4vQWRhcHRlcnMvQXV0aCc7XG5pbXBvcnQgeyBQYXJzZVNlcnZlck9wdGlvbnMgfSBmcm9tICcuLi9PcHRpb25zJztcbmltcG9ydCB7IGxvYWRBZGFwdGVyIH0gZnJvbSAnLi4vQWRhcHRlcnMvQWRhcHRlckxvYWRlcic7XG5pbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi4vZGVmYXVsdHMnO1xuaW1wb3J0IHVybCBmcm9tICd1cmwnO1xuLy8gQ29udHJvbGxlcnNcbmltcG9ydCB7IExvZ2dlckNvbnRyb2xsZXIgfSBmcm9tICcuL0xvZ2dlckNvbnRyb2xsZXInO1xuaW1wb3J0IHsgRmlsZXNDb250cm9sbGVyIH0gZnJvbSAnLi9GaWxlc0NvbnRyb2xsZXInO1xuaW1wb3J0IHsgSG9va3NDb250cm9sbGVyIH0gZnJvbSAnLi9Ib29rc0NvbnRyb2xsZXInO1xuaW1wb3J0IHsgVXNlckNvbnRyb2xsZXIgfSBmcm9tICcuL1VzZXJDb250cm9sbGVyJztcbmltcG9ydCB7IENhY2hlQ29udHJvbGxlciB9IGZyb20gJy4vQ2FjaGVDb250cm9sbGVyJztcbmltcG9ydCB7IExpdmVRdWVyeUNvbnRyb2xsZXIgfSBmcm9tICcuL0xpdmVRdWVyeUNvbnRyb2xsZXInO1xuaW1wb3J0IHsgQW5hbHl0aWNzQ29udHJvbGxlciB9IGZyb20gJy4vQW5hbHl0aWNzQ29udHJvbGxlcic7XG5pbXBvcnQgeyBQdXNoQ29udHJvbGxlciB9IGZyb20gJy4vUHVzaENvbnRyb2xsZXInO1xuaW1wb3J0IHsgUHVzaFF1ZXVlIH0gZnJvbSAnLi4vUHVzaC9QdXNoUXVldWUnO1xuaW1wb3J0IHsgUHVzaFdvcmtlciB9IGZyb20gJy4uL1B1c2gvUHVzaFdvcmtlcic7XG5pbXBvcnQgRGF0YWJhc2VDb250cm9sbGVyIGZyb20gJy4vRGF0YWJhc2VDb250cm9sbGVyJztcblxuLy8gQWRhcHRlcnNcbmltcG9ydCB7IEdyaWRGU0J1Y2tldEFkYXB0ZXIgfSBmcm9tICcuLi9BZGFwdGVycy9GaWxlcy9HcmlkRlNCdWNrZXRBZGFwdGVyJztcbmltcG9ydCB7IFdpbnN0b25Mb2dnZXJBZGFwdGVyIH0gZnJvbSAnLi4vQWRhcHRlcnMvTG9nZ2VyL1dpbnN0b25Mb2dnZXJBZGFwdGVyJztcbmltcG9ydCB7IEluTWVtb3J5Q2FjaGVBZGFwdGVyIH0gZnJvbSAnLi4vQWRhcHRlcnMvQ2FjaGUvSW5NZW1vcnlDYWNoZUFkYXB0ZXInO1xuaW1wb3J0IHsgQW5hbHl0aWNzQWRhcHRlciB9IGZyb20gJy4uL0FkYXB0ZXJzL0FuYWx5dGljcy9BbmFseXRpY3NBZGFwdGVyJztcbmltcG9ydCBNb25nb1N0b3JhZ2VBZGFwdGVyIGZyb20gJy4uL0FkYXB0ZXJzL1N0b3JhZ2UvTW9uZ28vTW9uZ29TdG9yYWdlQWRhcHRlcic7XG5pbXBvcnQgUG9zdGdyZXNTdG9yYWdlQWRhcHRlciBmcm9tICcuLi9BZGFwdGVycy9TdG9yYWdlL1Bvc3RncmVzL1Bvc3RncmVzU3RvcmFnZUFkYXB0ZXInO1xuaW1wb3J0IFBhcnNlUHVzaEFkYXB0ZXIgZnJvbSAnQHBhcnNlL3B1c2gtYWRhcHRlcic7XG5pbXBvcnQgUGFyc2VHcmFwaFFMQ29udHJvbGxlciBmcm9tICcuL1BhcnNlR3JhcGhRTENvbnRyb2xsZXInO1xuaW1wb3J0IFNjaGVtYUNhY2hlIGZyb20gJy4uL0FkYXB0ZXJzL0NhY2hlL1NjaGVtYUNhY2hlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRyb2xsZXJzKG9wdGlvbnM6IFBhcnNlU2VydmVyT3B0aW9ucykge1xuICBjb25zdCBsb2dnZXJDb250cm9sbGVyID0gZ2V0TG9nZ2VyQ29udHJvbGxlcihvcHRpb25zKTtcbiAgY29uc3QgZmlsZXNDb250cm9sbGVyID0gZ2V0RmlsZXNDb250cm9sbGVyKG9wdGlvbnMpO1xuICBjb25zdCB1c2VyQ29udHJvbGxlciA9IGdldFVzZXJDb250cm9sbGVyKG9wdGlvbnMpO1xuICBjb25zdCB7XG4gICAgcHVzaENvbnRyb2xsZXIsXG4gICAgaGFzUHVzaFNjaGVkdWxlZFN1cHBvcnQsXG4gICAgaGFzUHVzaFN1cHBvcnQsXG4gICAgcHVzaENvbnRyb2xsZXJRdWV1ZSxcbiAgICBwdXNoV29ya2VyLFxuICB9ID0gZ2V0UHVzaENvbnRyb2xsZXIob3B0aW9ucyk7XG4gIGNvbnN0IGNhY2hlQ29udHJvbGxlciA9IGdldENhY2hlQ29udHJvbGxlcihvcHRpb25zKTtcbiAgY29uc3QgYW5hbHl0aWNzQ29udHJvbGxlciA9IGdldEFuYWx5dGljc0NvbnRyb2xsZXIob3B0aW9ucyk7XG4gIGNvbnN0IGxpdmVRdWVyeUNvbnRyb2xsZXIgPSBnZXRMaXZlUXVlcnlDb250cm9sbGVyKG9wdGlvbnMpO1xuICBjb25zdCBkYXRhYmFzZUNvbnRyb2xsZXIgPSBnZXREYXRhYmFzZUNvbnRyb2xsZXIob3B0aW9ucyk7XG4gIGNvbnN0IGhvb2tzQ29udHJvbGxlciA9IGdldEhvb2tzQ29udHJvbGxlcihvcHRpb25zLCBkYXRhYmFzZUNvbnRyb2xsZXIpO1xuICBjb25zdCBhdXRoRGF0YU1hbmFnZXIgPSBnZXRBdXRoRGF0YU1hbmFnZXIob3B0aW9ucyk7XG4gIGNvbnN0IHBhcnNlR3JhcGhRTENvbnRyb2xsZXIgPSBnZXRQYXJzZUdyYXBoUUxDb250cm9sbGVyKG9wdGlvbnMsIHtcbiAgICBkYXRhYmFzZUNvbnRyb2xsZXIsXG4gICAgY2FjaGVDb250cm9sbGVyLFxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBsb2dnZXJDb250cm9sbGVyLFxuICAgIGZpbGVzQ29udHJvbGxlcixcbiAgICB1c2VyQ29udHJvbGxlcixcbiAgICBwdXNoQ29udHJvbGxlcixcbiAgICBoYXNQdXNoU2NoZWR1bGVkU3VwcG9ydCxcbiAgICBoYXNQdXNoU3VwcG9ydCxcbiAgICBwdXNoV29ya2VyLFxuICAgIHB1c2hDb250cm9sbGVyUXVldWUsXG4gICAgYW5hbHl0aWNzQ29udHJvbGxlcixcbiAgICBjYWNoZUNvbnRyb2xsZXIsXG4gICAgcGFyc2VHcmFwaFFMQ29udHJvbGxlcixcbiAgICBsaXZlUXVlcnlDb250cm9sbGVyLFxuICAgIGRhdGFiYXNlQ29udHJvbGxlcixcbiAgICBob29rc0NvbnRyb2xsZXIsXG4gICAgYXV0aERhdGFNYW5hZ2VyLFxuICAgIHNjaGVtYUNhY2hlOiBTY2hlbWFDYWNoZSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExvZ2dlckNvbnRyb2xsZXIob3B0aW9uczogUGFyc2VTZXJ2ZXJPcHRpb25zKTogTG9nZ2VyQ29udHJvbGxlciB7XG4gIGNvbnN0IHtcbiAgICBhcHBJZCxcbiAgICBqc29uTG9ncyxcbiAgICBsb2dzRm9sZGVyLFxuICAgIHZlcmJvc2UsXG4gICAgbG9nTGV2ZWwsXG4gICAgbWF4TG9nRmlsZXMsXG4gICAgc2lsZW50LFxuICAgIGxvZ2dlckFkYXB0ZXIsXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBsb2dnZXJPcHRpb25zID0ge1xuICAgIGpzb25Mb2dzLFxuICAgIGxvZ3NGb2xkZXIsXG4gICAgdmVyYm9zZSxcbiAgICBsb2dMZXZlbCxcbiAgICBzaWxlbnQsXG4gICAgbWF4TG9nRmlsZXMsXG4gIH07XG4gIGNvbnN0IGxvZ2dlckNvbnRyb2xsZXJBZGFwdGVyID0gbG9hZEFkYXB0ZXIobG9nZ2VyQWRhcHRlciwgV2luc3RvbkxvZ2dlckFkYXB0ZXIsIGxvZ2dlck9wdGlvbnMpO1xuICByZXR1cm4gbmV3IExvZ2dlckNvbnRyb2xsZXIobG9nZ2VyQ29udHJvbGxlckFkYXB0ZXIsIGFwcElkLCBsb2dnZXJPcHRpb25zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVzQ29udHJvbGxlcihvcHRpb25zOiBQYXJzZVNlcnZlck9wdGlvbnMpOiBGaWxlc0NvbnRyb2xsZXIge1xuICBjb25zdCB7IGFwcElkLCBkYXRhYmFzZVVSSSwgZmlsZXNBZGFwdGVyLCBkYXRhYmFzZUFkYXB0ZXIsIHByZXNlcnZlRmlsZU5hbWUsIGZpbGVLZXkgfSA9IG9wdGlvbnM7XG4gIGlmICghZmlsZXNBZGFwdGVyICYmIGRhdGFiYXNlQWRhcHRlcikge1xuICAgIHRocm93ICdXaGVuIHVzaW5nIGFuIGV4cGxpY2l0IGRhdGFiYXNlIGFkYXB0ZXIsIHlvdSBtdXN0IGFsc28gdXNlIGFuIGV4cGxpY2l0IGZpbGVzQWRhcHRlci4nO1xuICB9XG4gIGNvbnN0IGZpbGVzQ29udHJvbGxlckFkYXB0ZXIgPSBsb2FkQWRhcHRlcihmaWxlc0FkYXB0ZXIsICgpID0+IHtcbiAgICByZXR1cm4gbmV3IEdyaWRGU0J1Y2tldEFkYXB0ZXIoZGF0YWJhc2VVUkksIHt9LCBmaWxlS2V5KTtcbiAgfSk7XG4gIHJldHVybiBuZXcgRmlsZXNDb250cm9sbGVyKGZpbGVzQ29udHJvbGxlckFkYXB0ZXIsIGFwcElkLCB7XG4gICAgcHJlc2VydmVGaWxlTmFtZSxcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyQ29udHJvbGxlcihvcHRpb25zOiBQYXJzZVNlcnZlck9wdGlvbnMpOiBVc2VyQ29udHJvbGxlciB7XG4gIGNvbnN0IHsgYXBwSWQsIGVtYWlsQWRhcHRlciwgdmVyaWZ5VXNlckVtYWlscyB9ID0gb3B0aW9ucztcbiAgY29uc3QgZW1haWxDb250cm9sbGVyQWRhcHRlciA9IGxvYWRBZGFwdGVyKGVtYWlsQWRhcHRlcik7XG4gIHJldHVybiBuZXcgVXNlckNvbnRyb2xsZXIoZW1haWxDb250cm9sbGVyQWRhcHRlciwgYXBwSWQsIHtcbiAgICB2ZXJpZnlVc2VyRW1haWxzLFxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENhY2hlQ29udHJvbGxlcihvcHRpb25zOiBQYXJzZVNlcnZlck9wdGlvbnMpOiBDYWNoZUNvbnRyb2xsZXIge1xuICBjb25zdCB7IGFwcElkLCBjYWNoZUFkYXB0ZXIsIGNhY2hlVFRMLCBjYWNoZU1heFNpemUgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGNhY2hlQ29udHJvbGxlckFkYXB0ZXIgPSBsb2FkQWRhcHRlcihjYWNoZUFkYXB0ZXIsIEluTWVtb3J5Q2FjaGVBZGFwdGVyLCB7XG4gICAgYXBwSWQ6IGFwcElkLFxuICAgIHR0bDogY2FjaGVUVEwsXG4gICAgbWF4U2l6ZTogY2FjaGVNYXhTaXplLFxuICB9KTtcbiAgcmV0dXJuIG5ldyBDYWNoZUNvbnRyb2xsZXIoY2FjaGVDb250cm9sbGVyQWRhcHRlciwgYXBwSWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFyc2VHcmFwaFFMQ29udHJvbGxlcihcbiAgb3B0aW9uczogUGFyc2VTZXJ2ZXJPcHRpb25zLFxuICBjb250cm9sbGVyRGVwc1xuKTogUGFyc2VHcmFwaFFMQ29udHJvbGxlciB7XG4gIHJldHVybiBuZXcgUGFyc2VHcmFwaFFMQ29udHJvbGxlcih7XG4gICAgbW91bnRHcmFwaFFMOiBvcHRpb25zLm1vdW50R3JhcGhRTCxcbiAgICAuLi5jb250cm9sbGVyRGVwcyxcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbmFseXRpY3NDb250cm9sbGVyKG9wdGlvbnM6IFBhcnNlU2VydmVyT3B0aW9ucyk6IEFuYWx5dGljc0NvbnRyb2xsZXIge1xuICBjb25zdCB7IGFuYWx5dGljc0FkYXB0ZXIgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGFuYWx5dGljc0NvbnRyb2xsZXJBZGFwdGVyID0gbG9hZEFkYXB0ZXIoYW5hbHl0aWNzQWRhcHRlciwgQW5hbHl0aWNzQWRhcHRlcik7XG4gIHJldHVybiBuZXcgQW5hbHl0aWNzQ29udHJvbGxlcihhbmFseXRpY3NDb250cm9sbGVyQWRhcHRlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMaXZlUXVlcnlDb250cm9sbGVyKG9wdGlvbnM6IFBhcnNlU2VydmVyT3B0aW9ucyk6IExpdmVRdWVyeUNvbnRyb2xsZXIge1xuICByZXR1cm4gbmV3IExpdmVRdWVyeUNvbnRyb2xsZXIob3B0aW9ucy5saXZlUXVlcnkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YWJhc2VDb250cm9sbGVyKG9wdGlvbnM6IFBhcnNlU2VydmVyT3B0aW9ucyk6IERhdGFiYXNlQ29udHJvbGxlciB7XG4gIGNvbnN0IHsgZGF0YWJhc2VVUkksIGNvbGxlY3Rpb25QcmVmaXgsIGRhdGFiYXNlT3B0aW9ucyB9ID0gb3B0aW9ucztcbiAgbGV0IHsgZGF0YWJhc2VBZGFwdGVyIH0gPSBvcHRpb25zO1xuICBpZiAoXG4gICAgKGRhdGFiYXNlT3B0aW9ucyB8fFxuICAgICAgKGRhdGFiYXNlVVJJICYmIGRhdGFiYXNlVVJJICE9PSBkZWZhdWx0cy5kYXRhYmFzZVVSSSkgfHxcbiAgICAgIGNvbGxlY3Rpb25QcmVmaXggIT09IGRlZmF1bHRzLmNvbGxlY3Rpb25QcmVmaXgpICYmXG4gICAgZGF0YWJhc2VBZGFwdGVyXG4gICkge1xuICAgIHRocm93ICdZb3UgY2Fubm90IHNwZWNpZnkgYm90aCBhIGRhdGFiYXNlQWRhcHRlciBhbmQgYSBkYXRhYmFzZVVSSS9kYXRhYmFzZU9wdGlvbnMvY29sbGVjdGlvblByZWZpeC4nO1xuICB9IGVsc2UgaWYgKCFkYXRhYmFzZUFkYXB0ZXIpIHtcbiAgICBkYXRhYmFzZUFkYXB0ZXIgPSBnZXREYXRhYmFzZUFkYXB0ZXIoZGF0YWJhc2VVUkksIGNvbGxlY3Rpb25QcmVmaXgsIGRhdGFiYXNlT3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgZGF0YWJhc2VBZGFwdGVyID0gbG9hZEFkYXB0ZXIoZGF0YWJhc2VBZGFwdGVyKTtcbiAgfVxuICByZXR1cm4gbmV3IERhdGFiYXNlQ29udHJvbGxlcihkYXRhYmFzZUFkYXB0ZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SG9va3NDb250cm9sbGVyKFxuICBvcHRpb25zOiBQYXJzZVNlcnZlck9wdGlvbnMsXG4gIGRhdGFiYXNlQ29udHJvbGxlcjogRGF0YWJhc2VDb250cm9sbGVyXG4pOiBIb29rc0NvbnRyb2xsZXIge1xuICBjb25zdCB7IGFwcElkLCB3ZWJob29rS2V5IH0gPSBvcHRpb25zO1xuICByZXR1cm4gbmV3IEhvb2tzQ29udHJvbGxlcihhcHBJZCwgZGF0YWJhc2VDb250cm9sbGVyLCB3ZWJob29rS2V5KTtcbn1cblxuaW50ZXJmYWNlIFB1c2hDb250cm9sbGluZyB7XG4gIHB1c2hDb250cm9sbGVyOiBQdXNoQ29udHJvbGxlcjtcbiAgaGFzUHVzaFNjaGVkdWxlZFN1cHBvcnQ6IGJvb2xlYW47XG4gIHB1c2hDb250cm9sbGVyUXVldWU6IFB1c2hRdWV1ZTtcbiAgcHVzaFdvcmtlcjogUHVzaFdvcmtlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFB1c2hDb250cm9sbGVyKG9wdGlvbnM6IFBhcnNlU2VydmVyT3B0aW9ucyk6IFB1c2hDb250cm9sbGluZyB7XG4gIGNvbnN0IHsgc2NoZWR1bGVkUHVzaCwgcHVzaCB9ID0gb3B0aW9ucztcblxuICBjb25zdCBwdXNoT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHB1c2gpO1xuICBjb25zdCBwdXNoUXVldWVPcHRpb25zID0gcHVzaE9wdGlvbnMucXVldWVPcHRpb25zIHx8IHt9O1xuICBpZiAocHVzaE9wdGlvbnMucXVldWVPcHRpb25zKSB7XG4gICAgZGVsZXRlIHB1c2hPcHRpb25zLnF1ZXVlT3B0aW9ucztcbiAgfVxuXG4gIC8vIFBhc3MgdGhlIHB1c2ggb3B0aW9ucyB0b28gYXMgaXQgd29ya3Mgd2l0aCB0aGUgZGVmYXVsdFxuICBjb25zdCBwdXNoQWRhcHRlciA9IGxvYWRBZGFwdGVyKFxuICAgIHB1c2hPcHRpb25zICYmIHB1c2hPcHRpb25zLmFkYXB0ZXIsXG4gICAgUGFyc2VQdXNoQWRhcHRlcixcbiAgICBwdXNoT3B0aW9uc1xuICApO1xuICAvLyBXZSBwYXNzIHRoZSBvcHRpb25zIGFuZCB0aGUgYmFzZSBjbGFzcyBmb3IgdGhlIGFkYXRwZXIsXG4gIC8vIE5vdGUgdGhhdCBwYXNzaW5nIGFuIGluc3RhbmNlIHdvdWxkIHdvcmsgdG9vXG4gIGNvbnN0IHB1c2hDb250cm9sbGVyID0gbmV3IFB1c2hDb250cm9sbGVyKCk7XG4gIGNvbnN0IGhhc1B1c2hTdXBwb3J0ID0gISEocHVzaEFkYXB0ZXIgJiYgcHVzaCk7XG4gIGNvbnN0IGhhc1B1c2hTY2hlZHVsZWRTdXBwb3J0ID0gaGFzUHVzaFN1cHBvcnQgJiYgc2NoZWR1bGVkUHVzaCA9PT0gdHJ1ZTtcblxuICBjb25zdCB7IGRpc2FibGVQdXNoV29ya2VyIH0gPSBwdXNoUXVldWVPcHRpb25zO1xuXG4gIGNvbnN0IHB1c2hDb250cm9sbGVyUXVldWUgPSBuZXcgUHVzaFF1ZXVlKHB1c2hRdWV1ZU9wdGlvbnMpO1xuICBsZXQgcHVzaFdvcmtlcjtcbiAgaWYgKCFkaXNhYmxlUHVzaFdvcmtlcikge1xuICAgIHB1c2hXb3JrZXIgPSBuZXcgUHVzaFdvcmtlcihwdXNoQWRhcHRlciwgcHVzaFF1ZXVlT3B0aW9ucyk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBwdXNoQ29udHJvbGxlcixcbiAgICBoYXNQdXNoU3VwcG9ydCxcbiAgICBoYXNQdXNoU2NoZWR1bGVkU3VwcG9ydCxcbiAgICBwdXNoQ29udHJvbGxlclF1ZXVlLFxuICAgIHB1c2hXb3JrZXIsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBdXRoRGF0YU1hbmFnZXIob3B0aW9uczogUGFyc2VTZXJ2ZXJPcHRpb25zKSB7XG4gIGNvbnN0IHsgYXV0aCwgZW5hYmxlQW5vbnltb3VzVXNlcnMgfSA9IG9wdGlvbnM7XG4gIHJldHVybiBhdXRoRGF0YU1hbmFnZXIoYXV0aCwgZW5hYmxlQW5vbnltb3VzVXNlcnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YWJhc2VBZGFwdGVyKGRhdGFiYXNlVVJJLCBjb2xsZWN0aW9uUHJlZml4LCBkYXRhYmFzZU9wdGlvbnMpIHtcbiAgbGV0IHByb3RvY29sO1xuICB0cnkge1xuICAgIGNvbnN0IHBhcnNlZFVSSSA9IHVybC5wYXJzZShkYXRhYmFzZVVSSSk7XG4gICAgcHJvdG9jb2wgPSBwYXJzZWRVUkkucHJvdG9jb2wgPyBwYXJzZWRVUkkucHJvdG9jb2wudG9Mb3dlckNhc2UoKSA6IG51bGw7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvKiAqL1xuICB9XG4gIHN3aXRjaCAocHJvdG9jb2wpIHtcbiAgICBjYXNlICdwb3N0Z3JlczonOlxuICAgICAgcmV0dXJuIG5ldyBQb3N0Z3Jlc1N0b3JhZ2VBZGFwdGVyKHtcbiAgICAgICAgdXJpOiBkYXRhYmFzZVVSSSxcbiAgICAgICAgY29sbGVjdGlvblByZWZpeCxcbiAgICAgICAgZGF0YWJhc2VPcHRpb25zLFxuICAgICAgfSk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBuZXcgTW9uZ29TdG9yYWdlQWRhcHRlcih7XG4gICAgICAgIHVyaTogZGF0YWJhc2VVUkksXG4gICAgICAgIGNvbGxlY3Rpb25QcmVmaXgsXG4gICAgICAgIG1vbmdvT3B0aW9uczogZGF0YWJhc2VPcHRpb25zLFxuICAgICAgfSk7XG4gIH1cbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Db250cm9sbGVycy9pbmRleC5qcyJdLCJuYW1lcyI6WyJsb2dnZXJDb250cm9sbGVyIiwiZ2V0TG9nZ2VyQ29udHJvbGxlciIsImZpbGVzQ29udHJvbGxlciIsImdldEZpbGVzQ29udHJvbGxlciIsInVzZXJDb250cm9sbGVyIiwiZ2V0VXNlckNvbnRyb2xsZXIiLCJwdXNoV29ya2VyIiwiZ2V0UHVzaENvbnRyb2xsZXIiLCJjYWNoZUNvbnRyb2xsZXIiLCJnZXRDYWNoZUNvbnRyb2xsZXIiLCJhbmFseXRpY3NDb250cm9sbGVyIiwiZ2V0QW5hbHl0aWNzQ29udHJvbGxlciIsImxpdmVRdWVyeUNvbnRyb2xsZXIiLCJnZXRMaXZlUXVlcnlDb250cm9sbGVyIiwiZGF0YWJhc2VDb250cm9sbGVyIiwiZ2V0RGF0YWJhc2VDb250cm9sbGVyIiwiaG9va3NDb250cm9sbGVyIiwiZ2V0SG9va3NDb250cm9sbGVyIiwiYXV0aERhdGFNYW5hZ2VyIiwiZ2V0QXV0aERhdGFNYW5hZ2VyIiwicGFyc2VHcmFwaFFMQ29udHJvbGxlciIsImdldFBhcnNlR3JhcGhRTENvbnRyb2xsZXIiLCJzY2hlbWFDYWNoZSIsIlNjaGVtYUNhY2hlIiwibG9nZ2VyQWRhcHRlciIsImxvZ2dlck9wdGlvbnMiLCJtYXhMb2dGaWxlcyIsImxvZ2dlckNvbnRyb2xsZXJBZGFwdGVyIiwiV2luc3RvbkxvZ2dlckFkYXB0ZXIiLCJMb2dnZXJDb250cm9sbGVyIiwiZmlsZUtleSIsImZpbGVzQ29udHJvbGxlckFkYXB0ZXIiLCJHcmlkRlNCdWNrZXRBZGFwdGVyIiwiRmlsZXNDb250cm9sbGVyIiwicHJlc2VydmVGaWxlTmFtZSIsInZlcmlmeVVzZXJFbWFpbHMiLCJlbWFpbENvbnRyb2xsZXJBZGFwdGVyIiwiVXNlckNvbnRyb2xsZXIiLCJjYWNoZU1heFNpemUiLCJjYWNoZUNvbnRyb2xsZXJBZGFwdGVyIiwiSW5NZW1vcnlDYWNoZUFkYXB0ZXIiLCJhcHBJZCIsInR0bCIsIm1heFNpemUiLCJDYWNoZUNvbnRyb2xsZXIiLCJQYXJzZUdyYXBoUUxDb250cm9sbGVyIiwibW91bnRHcmFwaFFMIiwib3B0aW9ucyIsImFuYWx5dGljc0FkYXB0ZXIiLCJhbmFseXRpY3NDb250cm9sbGVyQWRhcHRlciIsIkFuYWx5dGljc0FkYXB0ZXIiLCJBbmFseXRpY3NDb250cm9sbGVyIiwiTGl2ZVF1ZXJ5Q29udHJvbGxlciIsImRhdGFiYXNlT3B0aW9ucyIsImRhdGFiYXNlQWRhcHRlciIsImRhdGFiYXNlVVJJIiwiZGVmYXVsdHMiLCJjb2xsZWN0aW9uUHJlZml4IiwiZ2V0RGF0YWJhc2VBZGFwdGVyIiwiRGF0YWJhc2VDb250cm9sbGVyIiwid2ViaG9va0tleSIsIkhvb2tzQ29udHJvbGxlciIsInB1c2giLCJwdXNoT3B0aW9ucyIsIk9iamVjdCIsInB1c2hRdWV1ZU9wdGlvbnMiLCJwdXNoQWRhcHRlciIsIlBhcnNlUHVzaEFkYXB0ZXIiLCJwdXNoQ29udHJvbGxlciIsIlB1c2hDb250cm9sbGVyIiwiaGFzUHVzaFN1cHBvcnQiLCJoYXNQdXNoU2NoZWR1bGVkU3VwcG9ydCIsInNjaGVkdWxlZFB1c2giLCJkaXNhYmxlUHVzaFdvcmtlciIsInB1c2hDb250cm9sbGVyUXVldWUiLCJQdXNoUXVldWUiLCJQdXNoV29ya2VyIiwiZW5hYmxlQW5vbnltb3VzVXNlcnMiLCJwYXJzZWRVUkkiLCJ1cmwiLCJwcm90b2NvbCIsIlBvc3RncmVzU3RvcmFnZUFkYXB0ZXIiLCJ1cmkiLCJNb25nb1N0b3JhZ2VBZGFwdGVyIiwibW9uZ29PcHRpb25zIl0sIm1hcHBpbmdzIjoiO3dsQ0FBQSxHQUFBLENBQUEsS0FBQSwyQkFBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUEsQ0FBQSxDQUNBLEdBQUEsQ0FBQSxRQUFBLDJCQUFBLE9BQUEsQ0FBQSxZQUFBLENBQUEsQ0FBQSxDQUNBLEdBQUEsQ0FBQSxjQUFBLDJCQUFBLE9BQUEsQ0FBQSwyQkFBQSxDQUFBLENBQUEsQ0FDQSxHQUFB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LDBCQUM5RCxLQUFNLENBQUEsSUFBQSxDQUFRdUUsb0JBQVIsNkJBQU4sT0FBTSxDQUFOLENBRDhELDBCQUU5RCxNQUFPLENBQUEsRUFBQSxLQUFBLENBQUEsT0FBQSxFQUFBLElBQUEsQ0FBUCxvQkFBTyxDQUFQLENBQ0QsQ0FFTSxRQUFBLENBQUEsa0JBQUEsQ0FBQSxXQUFBLENBQUEsZ0JBQUEsQ0FBQSxlQUFBLENBQTRFLDBCQUNqRixHQUFBLENBQUEsUUFBQSxDQURpRiwwQkFFakYsR0FBSSxDQUNGLEtBQU1DLENBQUFBLFNBQVMsNEJBQUdDLElBQUFBLENBQUFBLE9BQUFBLENBQUFBLEtBQUFBLENBQWxCLFdBQWtCQSxDQUFILENBQWYsQ0FERSwwQkFFRkMsUUFBUSxDQUFHRixTQUFTLENBQVRBLFFBQUFBLDhCQUFxQkEsU0FBUyxDQUFUQSxRQUFBQSxDQUFyQkEsV0FBcUJBLEVBQXJCQSwrQkFBWEUsSUFBV0YsQ0FBWEUsQ0FGRixDQUdFLE1BQUEsQ0FBQSxDQUFVLENBQ1YsS0FDRCxDQVBnRiwwQkFRakYsT0FBQSxRQUFBLEVBQ0UsSUFBQSxXQUFBLHVEQUNFLE1BQU8sSUFBSUMsQ0FBQUEsdUJBQUFBLENBQUosT0FBQSxDQUEyQixDQUNoQ0MsR0FBRyxDQUQ2QixXQUFBLENBQUEsZ0JBQUEsQ0FHaEM3QixlQUhnQyxDQUEzQixDQUFQLENBS0YsOERBQ0UsTUFBTyxJQUFJOEIsQ0FBQUEsb0JBQUFBLENBQUosT0FBQSxDQUF3QixDQUM3QkQsR0FBRyxDQUQwQixXQUFBLENBQUEsZ0JBQUEsQ0FHN0JFLFlBQVksQ0FBRS9CLGVBSGUsQ0FBeEIsQ0FBUCxDQVJKLENBY0QsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhdXRoRGF0YU1hbmFnZXIgZnJvbSAnLi4vQWRhcHRlcnMvQXV0aCc7XG5pbXBvcnQgeyBQYXJzZVNlcnZlck9wdGlvbnMgfSBmcm9tICcuLi9PcHRpb25zJztcbmltcG9ydCB7IGxvYWRBZGFwdGVyIH0gZnJvbSAnLi4vQWRhcHRlcnMvQWRhcHRlckxvYWRlcic7XG5pbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi4vZGVmYXVsdHMnO1xuaW1wb3J0IHVybCBmcm9tICd1cmwnO1xuLy8gQ29udHJvbGxlcnNcbmltcG9ydCB7IExvZ2dlckNvbnRyb2xsZXIgfSBmcm9tICcuL0xvZ2dlckNvbnRyb2xsZXInO1xuaW1wb3J0IHsgRmlsZXNDb250cm9sbGVyIH0gZnJvbSAnLi9GaWxlc0NvbnRyb2xsZXInO1xuaW1wb3J0IHsgSG9va3NDb250cm9sbGVyIH0gZnJvbSAnLi9Ib29rc0NvbnRyb2xsZXInO1xuaW1wb3J0IHsgVXNlckNvbnRyb2xsZXIgfSBmcm9tICcuL1VzZXJDb250cm9sbGVyJztcbmltcG9ydCB7IENhY2hlQ29udHJvbGxlciB9IGZyb20gJy4vQ2FjaGVDb250cm9sbGVyJztcbmltcG9ydCB7IExpdmVRdWVyeUNvbnRyb2xsZXIgfSBmcm9tICcuL0xpdmVRdWVyeUNvbnRyb2xsZXInO1xuaW1wb3J0IHsgQW5hbHl0aWNzQ29udHJvbGxlciB9IGZyb20gJy4vQW5hbHl0aWNzQ29udHJvbGxlcic7XG5pbXBvcnQgeyBQdXNoQ29udHJvbGxlciB9IGZyb20gJy4vUHVzaENvbnRyb2xsZXInO1xuaW1wb3J0IHsgUHVzaFF1ZXVlIH0gZnJvbSAnLi4vUHVzaC9QdXNoUXVldWUnO1xuaW1wb3J0IHsgUHVzaFdvcmtlciB9IGZyb20gJy4uL1B1c2gvUHVzaFdvcmtlcic7XG5pbXBvcnQgRGF0YWJhc2VDb250cm9sbGVyIGZyb20gJy4vRGF0YWJhc2VDb250cm9sbGVyJztcblxuLy8gQWRhcHRlcnNcbmltcG9ydCB7IEdyaWRGU0J1Y2tldEFkYXB0ZXIgfSBmcm9tICcuLi9BZGFwdGVycy9GaWxlcy9HcmlkRlNCdWNrZXRBZGFwdGVyJztcbmltcG9ydCB7IFdpbnN0b25Mb2dnZXJBZGFwdGVyIH0gZnJvbSAnLi4vQWRhcHRlcnMvTG9nZ2VyL1dpbnN0b25Mb2dnZXJBZGFwdGVyJztcbmltcG9ydCB7IEluTWVtb3J5Q2FjaGVBZGFwdGVyIH0gZnJvbSAnLi4vQWRhcHRlcnMvQ2FjaGUvSW5NZW1vcnlDYWNoZUFkYXB0ZXInO1xuaW1wb3J0IHsgQW5hbHl0aWNzQWRhcHRlciB9IGZyb20gJy4uL0FkYXB0ZXJzL0FuYWx5dGljcy9BbmFseXRpY3NBZGFwdGVyJztcbmltcG9ydCBNb25nb1N0b3JhZ2VBZGFwdGVyIGZyb20gJy4uL0FkYXB0ZXJzL1N0b3JhZ2UvTW9uZ28vTW9uZ29TdG9yYWdlQWRhcHRlcic7XG5pbXBvcnQgUG9zdGdyZXNTdG9yYWdlQWRhcHRlciBmcm9tICcuLi9BZGFwdGVycy9TdG9yYWdlL1Bvc3RncmVzL1Bvc3RncmVzU3RvcmFnZUFkYXB0ZXInO1xuaW1wb3J0IFBhcnNlUHVzaEFkYXB0ZXIgZnJvbSAnQHBhcnNlL3B1c2gtYWRhcHRlcic7XG5pbXBvcnQgUGFyc2VHcmFwaFFMQ29udHJvbGxlciBmcm9tICcuL1BhcnNlR3JhcGhRTENvbnRyb2xsZXInO1xuaW1wb3J0IFNjaGVtYUNhY2hlIGZyb20gJy4uL0FkYXB0ZXJzL0NhY2hlL1NjaGVtYUNhY2hlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRyb2xsZXJzKG9wdGlvbnM6IFBhcnNlU2VydmVyT3B0aW9ucykge1xuICBjb25zdCBsb2dnZXJDb250cm9sbGVyID0gZ2V0TG9nZ2VyQ29udHJvbGxlcihvcHRpb25zKTtcbiAgY29uc3QgZmlsZXNDb250cm9sbGVyID0gZ2V0RmlsZXNDb250cm9sbGVyKG9wdGlvbnMpO1xuICBjb25zdCB1c2VyQ29udHJvbGxlciA9IGdldFVzZXJDb250cm9sbGVyKG9wdGlvbnMpO1xuICBjb25zdCB7XG4gICAgcHVzaENvbnRyb2xsZXIsXG4gICAgaGFzUHVzaFNjaGVkdWxlZFN1cHBvcnQsXG4gICAgaGFzUHVzaFN1cHBvcnQsXG4gICAgcHVzaENvbnRyb2xsZXJRdWV1ZSxcbiAgICBwdXNoV29ya2VyLFxuICB9ID0gZ2V0UHVzaENvbnRyb2xsZXIob3B0aW9ucyk7XG4gIGNvbnN0IGNhY2hlQ29udHJvbGxlciA9IGdldENhY2hlQ29udHJvbGxlcihvcHRpb25zKTtcbiAgY29uc3QgYW5hbHl0aWNzQ29udHJvbGxlciA9IGdldEFuYWx5dGljc0NvbnRyb2xsZXIob3B0aW9ucyk7XG4gIGNvbnN0IGxpdmVRdWVyeUNvbnRyb2xsZXIgPSBnZXRMaXZlUXVlcnlDb250cm9sbGVyKG9wdGlvbnMpO1xuICBjb25zdCBkYXRhYmFzZUNvbnRyb2xsZXIgPSBnZXREYXRhYmFzZUNvbnRyb2xsZXIob3B0aW9ucyk7XG4gIGNvbnN0IGhvb2tzQ29udHJvbGxlciA9IGdldEhvb2tzQ29udHJvbGxlcihvcHRpb25zLCBkYXRhYmFzZUNvbnRyb2xsZXIpO1xuICBjb25zdCBhdXRoRGF0YU1hbmFnZXIgPSBnZXRBdXRoRGF0YU1hbmFnZXIob3B0aW9ucyk7XG4gIGNvbnN0IHBhcnNlR3JhcGhRTENvbnRyb2xsZXIgPSBnZXRQYXJzZUdyYXBoUUxDb250cm9sbGVyKG9wdGlvbnMsIHtcbiAgICBkYXRhYmFzZUNvbnRyb2xsZXIsXG4gICAgY2FjaGVDb250cm9sbGVyLFxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBsb2dnZXJDb250cm9sbGVyLFxuICAgIGZpbGVzQ29udHJvbGxlcixcbiAgICB1c2VyQ29udHJvbGxlcixcbiAgICBwdXNoQ29udHJvbGxlcixcbiAgICBoYXNQdXNoU2NoZWR1bGVkU3VwcG9ydCxcbiAgICBoYXNQdXNoU3VwcG9ydCxcbiAgICBwdXNoV29ya2VyLFxuICAgIHB1c2hDb250cm9sbGVyUXVldWUsXG4gICAgYW5hbHl0aWNzQ29udHJvbGxlcixcbiAgICBjYWNoZUNvbnRyb2xsZXIsXG4gICAgcGFyc2VHcmFwaFFMQ29udHJvbGxlcixcbiAgICBsaXZlUXVlcnlDb250cm9sbGVyLFxuICAgIGRhdGFiYXNlQ29udHJvbGxlcixcbiAgICBob29rc0NvbnRyb2xsZXIsXG4gICAgYXV0aERhdGFNYW5hZ2VyLFxuICAgIHNjaGVtYUNhY2hlOiBTY2hlbWFDYWNoZSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExvZ2dlckNvbnRyb2xsZXIob3B0aW9uczogUGFyc2VTZXJ2ZXJPcHRpb25zKTogTG9nZ2VyQ29udHJvbGxlciB7XG4gIGNvbnN0IHtcbiAgICBhcHBJZCxcbiAgICBqc29uTG9ncyxcbiAgICBsb2dzRm9sZGVyLFxuICAgIHZlcmJvc2UsXG4gICAgbG9nTGV2ZWwsXG4gICAgbWF4TG9nRmlsZXMsXG4gICAgc2lsZW50LFxuICAgIGxvZ2dlckFkYXB0ZXIsXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBsb2dnZXJPcHRpb25zID0ge1xuICAgIGpzb25Mb2dzLFxuICAgIGxvZ3NGb2xkZXIsXG4gICAgdmVyYm9zZSxcbiAgICBsb2dMZXZlbCxcbiAgICBzaWxlbnQsXG4gICAgbWF4TG9nRmlsZXMsXG4gIH07XG4gIGNvbnN0IGxvZ2dlckNvbnRyb2xsZXJBZGFwdGVyID0gbG9hZEFkYXB0ZXIobG9nZ2VyQWRhcHRlciwgV2luc3RvbkxvZ2dlckFkYXB0ZXIsIGxvZ2dlck9wdGlvbnMpO1xuICByZXR1cm4gbmV3IExvZ2dlckNvbnRyb2xsZXIobG9nZ2VyQ29udHJvbGxlckFkYXB0ZXIsIGFwcElkLCBsb2dnZXJPcHRpb25zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVzQ29udHJvbGxlcihvcHRpb25zOiBQYXJzZVNlcnZlck9wdGlvbnMpOiBGaWxlc0NvbnRyb2xsZXIge1xuICBjb25zdCB7IGFwcElkLCBkYXRhYmFzZVVSSSwgZmlsZXNBZGFwdGVyLCBkYXRhYmFzZUFkYXB0ZXIsIHByZXNlcnZlRmlsZU5hbWUsIGZpbGVLZXkgfSA9IG9wdGlvbnM7XG4gIGlmICghZmlsZXNBZGFwdGVyICYmIGRhdGFiYXNlQWRhcHRlcikge1xuICAgIHRocm93ICdXaGVuIHVzaW5nIGFuIGV4cGxpY2l0IGRhdGFiYXNlIGFkYXB0ZXIsIHlvdSBtdXN0IGFsc28gdXNlIGFuIGV4cGxpY2l0IGZpbGVzQWRhcHRlci4nO1xuICB9XG4gIGNvbnN0IGZpbGVzQ29udHJvbGxlckFkYXB0ZXIgPSBsb2FkQWRhcHRlcihmaWxlc0FkYXB0ZXIsICgpID0+IHtcbiAgICByZXR1cm4gbmV3IEdyaWRGU0J1Y2tldEFkYXB0ZXIoZGF0YWJhc2VVUkksIHt9LCBmaWxlS2V5KTtcbiAgfSk7XG4gIHJldHVybiBuZXcgRmlsZXNDb250cm9sbGVyKGZpbGVzQ29udHJvbGxlckFkYXB0ZXIsIGFwcElkLCB7XG4gICAgcHJlc2VydmVGaWxlTmFtZSxcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyQ29udHJvbGxlcihvcHRpb25zOiBQYXJzZVNlcnZlck9wdGlvbnMpOiBVc2VyQ29udHJvbGxlciB7XG4gIGNvbnN0IHsgYXBwSWQsIGVtYWlsQWRhcHRlciwgdmVyaWZ5VXNlckVtYWlscyB9ID0gb3B0aW9ucztcbiAgY29uc3QgZW1haWxDb250cm9sbGVyQWRhcHRlciA9IGxvYWRBZGFwdGVyKGVtYWlsQWRhcHRlcik7XG4gIHJldHVybiBuZXcgVXNlckNvbnRyb2xsZXIoZW1haWxDb250cm9sbGVyQWRhcHRlciwgYXBwSWQsIHtcbiAgICB2ZXJpZnlVc2VyRW1haWxzLFxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENhY2hlQ29udHJvbGxlcihvcHRpb25zOiBQYXJzZVNlcnZlck9wdGlvbnMpOiBDYWNoZUNvbnRyb2xsZXIge1xuICBjb25zdCB7IGFwcElkLCBjYWNoZUFkYXB0ZXIsIGNhY2hlVFRMLCBjYWNoZU1heFNpemUgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGNhY2hlQ29udHJvbGxlckFkYXB0ZXIgPSBsb2FkQWRhcHRlcihjYWNoZUFkYXB0ZXIsIEluTWVtb3J5Q2FjaGVBZGFwdGVyLCB7XG4gICAgYXBwSWQ6IGFwcElkLFxuICAgIHR0bDogY2FjaGVUVEwsXG4gICAgbWF4U2l6ZTogY2FjaGVNYXhTaXplLFxuICB9KTtcbiAgcmV0dXJuIG5ldyBDYWNoZUNvbnRyb2xsZXIoY2FjaGVDb250cm9sbGVyQWRhcHRlciwgYXBwSWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFyc2VHcmFwaFFMQ29udHJvbGxlcihcbiAgb3B0aW9uczogUGFyc2VTZXJ2ZXJPcHRpb25zLFxuICBjb250cm9sbGVyRGVwc1xuKTogUGFyc2VHcmFwaFFMQ29udHJvbGxlciB7XG4gIHJldHVybiBuZXcgUGFyc2VHcmFwaFFMQ29udHJvbGxlcih7XG4gICAgbW91bnRHcmFwaFFMOiBvcHRpb25zLm1vdW50R3JhcGhRTCxcbiAgICAuLi5jb250cm9sbGVyRGVwcyxcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbmFseXRpY3NDb250cm9sbGVyKG9wdGlvbnM6IFBhcnNlU2VydmVyT3B0aW9ucyk6IEFuYWx5dGljc0NvbnRyb2xsZXIge1xuICBjb25zdCB7IGFuYWx5dGljc0FkYXB0ZXIgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGFuYWx5dGljc0NvbnRyb2xsZXJBZGFwdGVyID0gbG9hZEFkYXB0ZXIoYW5hbHl0aWNzQWRhcHRlciwgQW5hbHl0aWNzQWRhcHRlcik7XG4gIHJldHVybiBuZXcgQW5hbHl0aWNzQ29udHJvbGxlcihhbmFseXRpY3NDb250cm9sbGVyQWRhcHRlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMaXZlUXVlcnlDb250cm9sbGVyKG9wdGlvbnM6IFBhcnNlU2VydmVyT3B0aW9ucyk6IExpdmVRdWVyeUNvbnRyb2xsZXIge1xuICByZXR1cm4gbmV3IExpdmVRdWVyeUNvbnRyb2xsZXIob3B0aW9ucy5saXZlUXVlcnkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YWJhc2VDb250cm9sbGVyKG9wdGlvbnM6IFBhcnNlU2VydmVyT3B0aW9ucyk6IERhdGFiYXNlQ29udHJvbGxlciB7XG4gIGNvbnN0IHsgZGF0YWJhc2VVUkksIGNvbGxlY3Rpb25QcmVmaXgsIGRhdGFiYXNlT3B0aW9ucyB9ID0gb3B0aW9ucztcbiAgbGV0IHsgZGF0YWJhc2VBZGFwdGVyIH0gPSBvcHRpb25zO1xuICBpZiAoXG4gICAgKGRhdGFiYXNlT3B0aW9ucyB8fFxuICAgICAgKGRhdGFiYXNlVVJJICYmIGRhdGFiYXNlVVJJICE9PSBkZWZhdWx0cy5kYXRhYmFzZVVSSSkgfHxcbiAgICAgIGNvbGxlY3Rpb25QcmVmaXggIT09IGRlZmF1bHRzLmNvbGxlY3Rpb25QcmVmaXgpICYmXG4gICAgZGF0YWJhc2VBZGFwdGVyXG4gICkge1xuICAgIHRocm93ICdZb3UgY2Fubm90IHNwZWNpZnkgYm90aCBhIGRhdGFiYXNlQWRhcHRlciBhbmQgYSBkYXRhYmFzZVVSSS9kYXRhYmFzZU9wdGlvbnMvY29sbGVjdGlvblByZWZpeC4nO1xuICB9IGVsc2UgaWYgKCFkYXRhYmFzZUFkYXB0ZXIpIHtcbiAgICBkYXRhYmFzZUFkYXB0ZXIgPSBnZXREYXRhYmFzZUFkYXB0ZXIoZGF0YWJhc2VVUkksIGNvbGxlY3Rpb25QcmVmaXgsIGRhdGFiYXNlT3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgZGF0YWJhc2VBZGFwdGVyID0gbG9hZEFkYXB0ZXIoZGF0YWJhc2VBZGFwdGVyKTtcbiAgfVxuICByZXR1cm4gbmV3IERhdGFiYXNlQ29udHJvbGxlcihkYXRhYmFzZUFkYXB0ZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SG9va3NDb250cm9sbGVyKFxuICBvcHRpb25zOiBQYXJzZVNlcnZlck9wdGlvbnMsXG4gIGRhdGFiYXNlQ29udHJvbGxlcjogRGF0YWJhc2VDb250cm9sbGVyXG4pOiBIb29rc0NvbnRyb2xsZXIge1xuICBjb25zdCB7IGFwcElkLCB3ZWJob29rS2V5IH0gPSBvcHRpb25zO1xuICByZXR1cm4gbmV3IEhvb2tzQ29udHJvbGxlcihhcHBJZCwgZGF0YWJhc2VDb250cm9sbGVyLCB3ZWJob29rS2V5KTtcbn1cblxuaW50ZXJmYWNlIFB1c2hDb250cm9sbGluZyB7XG4gIHB1c2hDb250cm9sbGVyOiBQdXNoQ29udHJvbGxlcjtcbiAgaGFzUHVzaFNjaGVkdWxlZFN1cHBvcnQ6IGJvb2xlYW47XG4gIHB1c2hDb250cm9sbGVyUXVldWU6IFB1c2hRdWV1ZTtcbiAgcHVzaFdvcmtlcjogUHVzaFdvcmtlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFB1c2hDb250cm9sbGVyKG9wdGlvbnM6IFBhcnNlU2VydmVyT3B0aW9ucyk6IFB1c2hDb250cm9sbGluZyB7XG4gIGNvbnN0IHsgc2NoZWR1bGVkUHVzaCwgcHVzaCB9ID0gb3B0aW9ucztcblxuICBjb25zdCBwdXNoT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHB1c2gpO1xuICBjb25zdCBwdXNoUXVldWVPcHRpb25zID0gcHVzaE9wdGlvbnMucXVldWVPcHRpb25zIHx8IHt9O1xuICBpZiAocHVzaE9wdGlvbnMucXVldWVPcHRpb25zKSB7XG4gICAgZGVsZXRlIHB1c2hPcHRpb25zLnF1ZXVlT3B0aW9ucztcbiAgfVxuXG4gIC8vIFBhc3MgdGhlIHB1c2ggb3B0aW9ucyB0b28gYXMgaXQgd29ya3Mgd2l0aCB0aGUgZGVmYXVsdFxuICBjb25zdCBwdXNoQWRhcHRlciA9IGxvYWRBZGFwdGVyKFxuICAgIHB1c2hPcHRpb25zICYmIHB1c2hPcHRpb25zLmFkYXB0ZXIsXG4gICAgUGFyc2VQdXNoQWRhcHRlcixcbiAgICBwdXNoT3B0aW9uc1xuICApO1xuICAvLyBXZSBwYXNzIHRoZSBvcHRpb25zIGFuZCB0aGUgYmFzZSBjbGFzcyBmb3IgdGhlIGFkYXRwZXIsXG4gIC8vIE5vdGUgdGhhdCBwYXNzaW5nIGFuIGluc3RhbmNlIHdvdWxkIHdvcmsgdG9vXG4gIGNvbnN0IHB1c2hDb250cm9sbGVyID0gbmV3IFB1c2hDb250cm9sbGVyKCk7XG4gIGNvbnN0IGhhc1B1c2hTdXBwb3J0ID0gISEocHVzaEFkYXB0ZXIgJiYgcHVzaCk7XG4gIGNvbnN0IGhhc1B1c2hTY2hlZHVsZWRTdXBwb3J0ID0gaGFzUHVzaFN1cHBvcnQgJiYgc2NoZWR1bGVkUHVzaCA9PT0gdHJ1ZTtcblxuICBjb25zdCB7IGRpc2FibGVQdXNoV29ya2VyIH0gPSBwdXNoUXVldWVPcHRpb25zO1xuXG4gIGNvbnN0IHB1c2hDb250cm9sbGVyUXVldWUgPSBuZXcgUHVzaFF1ZXVlKHB1c2hRdWV1ZU9wdGlvbnMpO1xuICBsZXQgcHVzaFdvcmtlcjtcbiAgaWYgKCFkaXNhYmxlUHVzaFdvcmtlcikge1xuICAgIHB1c2hXb3JrZXIgPSBuZXcgUHVzaFdvcmtlcihwdXNoQWRhcHRlciwgcHVzaFF1ZXVlT3B0aW9ucyk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBwdXNoQ29udHJvbGxlcixcbiAgICBoYXNQdXNoU3VwcG9ydCxcbiAgICBoYXNQdXNoU2NoZWR1bGVkU3VwcG9ydCxcbiAgICBwdXNoQ29udHJvbGxlclF1ZXVlLFxuICAgIHB1c2hXb3JrZXIsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBdXRoRGF0YU1hbmFnZXIob3B0aW9uczogUGFyc2VTZXJ2ZXJPcHRpb25zKSB7XG4gIGNvbnN0IHsgYXV0aCwgZW5hYmxlQW5vbnltb3VzVXNlcnMgfSA9IG9wdGlvbnM7XG4gIHJldHVybiBhdXRoRGF0YU1hbmFnZXIoYXV0aCwgZW5hYmxlQW5vbnltb3VzVXNlcnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YWJhc2VBZGFwdGVyKGRhdGFiYXNlVVJJLCBjb2xsZWN0aW9uUHJlZml4LCBkYXRhYmFzZU9wdGlvbnMpIHtcbiAgbGV0IHByb3RvY29sO1xuICB0cnkge1xuICAgIGNvbnN0IHBhcnNlZFVSSSA9IHVybC5wYXJzZShkYXRhYmFzZVVSSSk7XG4gICAgcHJvdG9jb2wgPSBwYXJzZWRVUkkucHJvdG9jb2wgPyBwYXJzZWRVUkkucHJvdG9jb2wudG9Mb3dlckNhc2UoKSA6IG51bGw7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvKiAqL1xuICB9XG4gIHN3aXRjaCAocHJvdG9jb2wpIHtcbiAgICBjYXNlICdwb3N0Z3JlczonOlxuICAgICAgcmV0dXJuIG5ldyBQb3N0Z3Jlc1N0b3JhZ2VBZGFwdGVyKHtcbiAgICAgICAgdXJpOiBkYXRhYmFzZVVSSSxcbiAgICAgICAgY29sbGVjdGlvblByZWZpeCxcbiAgICAgICAgZGF0YWJhc2VPcHRpb25zLFxuICAgICAgfSk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBuZXcgTW9uZ29TdG9yYWdlQWRhcHRlcih7XG4gICAgICAgIHVyaTogZGF0YWJhc2VVUkksXG4gICAgICAgIGNvbGxlY3Rpb25QcmVmaXgsXG4gICAgICAgIG1vbmdvT3B0aW9uczogZGF0YWJhc2VPcHRpb25zLFxuICAgICAgfSk7XG4gIH1cbn1cbiJdfQ==