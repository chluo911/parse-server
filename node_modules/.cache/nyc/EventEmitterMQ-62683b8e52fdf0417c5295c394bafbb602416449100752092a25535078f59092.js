"use strict";function cov_2mupntzjpj(){var path="/parse-server/lib/Adapters/MessageQueue/EventEmitterMQ.js";var hash="aa50229ebb8b117c40636f44c48f4703c243b32d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Adapters/MessageQueue/EventEmitterMQ.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:32}},"2":{start:{line:8,column:14},end:{line:8,column:55}},"3":{start:{line:10,column:39},end:{line:10,column:93}},"4":{start:{line:12,column:16},end:{line:12,column:50}},"5":{start:{line:13,column:22},end:{line:13,column:31}},"6":{start:{line:16,column:2},end:{line:19,column:3}},"7":{start:{line:18,column:4},end:{line:18,column:11}},"8":{start:{line:22,column:2},end:{line:22,column:62}},"9":{start:{line:23,column:2},end:{line:23,column:32}},"10":{start:{line:28,column:4},end:{line:28,column:27}},"11":{start:{line:32,column:4},end:{line:32,column:40}},"12":{start:{line:39,column:4},end:{line:39,column:12}},"13":{start:{line:40,column:4},end:{line:40,column:27}},"14":{start:{line:44,column:4},end:{line:44,column:25}},"15":{start:{line:46,column:20},end:{line:48,column:5}},"16":{start:{line:47,column:6},end:{line:47,column:45}},"17":{start:{line:50,column:4},end:{line:50,column:40}},"18":{start:{line:51,column:4},end:{line:51,column:38}},"19":{start:{line:55,column:4},end:{line:55,column:25}},"20":{start:{line:61,column:2},end:{line:61,column:32}},"21":{start:{line:65,column:2},end:{line:65,column:31}},"22":{start:{line:68,column:23},end:{line:71,column:1}},"23":{start:{line:72,column:0},end:{line:72,column:40}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:10,column:9},end:{line:10,column:31}},loc:{start:{line:10,column:37},end:{line:10,column:95}},line:10},"1":{name:"unsubscribe",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:30},end:{line:24,column:1}},line:15},"2":{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:23},end:{line:29,column:3}},line:27},"3":{name:"(anonymous_3)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:28},end:{line:33,column:3}},line:31},"4":{name:"(anonymous_4)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:23},end:{line:41,column:3}},line:38},"5":{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:21},end:{line:52,column:3}},line:43},"6":{name:"(anonymous_6)",decl:{start:{line:46,column:20},end:{line:46,column:21}},loc:{start:{line:46,column:31},end:{line:48,column:5}},line:46},"7":{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:23},end:{line:56,column:3}},line:54},"8":{name:"createPublisher",decl:{start:{line:60,column:9},end:{line:60,column:24}},loc:{start:{line:60,column:27},end:{line:62,column:1}},line:60},"9":{name:"createSubscriber",decl:{start:{line:64,column:9},end:{line:64,column:25}},loc:{start:{line:64,column:28},end:{line:66,column:1}},line:64}},branchMap:{"0":{loc:{start:{line:10,column:46},end:{line:10,column:92}},type:"cond-expr",locations:[{start:{line:10,column:70},end:{line:10,column:73}},{start:{line:10,column:76},end:{line:10,column:92}}],line:10},"1":{loc:{start:{line:10,column:46},end:{line:10,column:67}},type:"binary-expr",locations:[{start:{line:10,column:46},end:{line:10,column:49}},{start:{line:10,column:53},end:{line:10,column:67}}],line:10},"2":{loc:{start:{line:16,column:2},end:{line:19,column:3}},type:"if",locations:[{start:{line:16,column:2},end:{line:19,column:3}},{start:{line:16,column:2},end:{line:19,column:3}}],line:16}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},inputSourceMap:{version:3,sources:["../../../src/Adapters/MessageQueue/EventEmitterMQ.js"],names:["emitter","events","EventEmitter","subscriptions","Map","unsubscribe","channel","has","removeListener","get","delete","Publisher","constructor","publish","message","emit","Consumer","subscribe","handler","set","on","createPublisher","createSubscriber","EventEmitterMQ"],mappings:";;;;;;;AAAA;;;;AAEA,MAAMA,OAAO,GAAG,IAAIC,gBAAOC,YAAX,EAAhB;AACA,MAAMC,aAAa,GAAG,IAAIC,GAAJ,EAAtB;;AAEA,SAASC,WAAT,CAAqBC,OAArB,EAAsC;AACpC,MAAI,CAACH,aAAa,CAACI,GAAd,CAAkBD,OAAlB,CAAL,EAAiC;AAC/B;AACA;AACD,GAJmC,CAKpC;;;AACAN,EAAAA,OAAO,CAACQ,cAAR,CAAuBF,OAAvB,EAAgCH,aAAa,CAACM,GAAd,CAAkBH,OAAlB,CAAhC;AACAH,EAAAA,aAAa,CAACO,MAAd,CAAqBJ,OAArB;AACD;;AAED,MAAMK,SAAN,CAAgB;AAGdC,EAAAA,WAAW,CAACZ,OAAD,EAAe;AACxB,SAAKA,OAAL,GAAeA,OAAf;AACD;;AAEDa,EAAAA,OAAO,CAACP,OAAD,EAAkBQ,OAAlB,EAAyC;AAC9C,SAAKd,OAAL,CAAae,IAAb,CAAkBT,OAAlB,EAA2BQ,OAA3B;AACD;;AATa;;AAYhB,MAAME,QAAN,SAAuBf,gBAAOC,YAA9B,CAA2C;AAGzCU,EAAAA,WAAW,CAACZ,OAAD,EAAe;AACxB;AACA,SAAKA,OAAL,GAAeA,OAAf;AACD;;AAEDiB,EAAAA,SAAS,CAACX,OAAD,EAAwB;AAC/BD,IAAAA,WAAW,CAACC,OAAD,CAAX;;AACA,UAAMY,OAAO,GAAGJ,OAAO,IAAI;AACzB,WAAKC,IAAL,CAAU,SAAV,EAAqBT,OAArB,EAA8BQ,OAA9B;AACD,KAFD;;AAGAX,IAAAA,aAAa,CAACgB,GAAd,CAAkBb,OAAlB,EAA2BY,OAA3B;AACA,SAAKlB,OAAL,CAAaoB,EAAb,CAAgBd,OAAhB,EAAyBY,OAAzB;AACD;;AAEDb,EAAAA,WAAW,CAACC,OAAD,EAAwB;AACjCD,IAAAA,WAAW,CAACC,OAAD,CAAX;AACD;;AAnBwC;;AAsB3C,SAASe,eAAT,GAAgC;AAC9B,SAAO,IAAIV,SAAJ,CAAcX,OAAd,CAAP;AACD;;AAED,SAASsB,gBAAT,GAAiC;AAC/B,SAAO,IAAIN,QAAJ,CAAahB,OAAb,CAAP;AACD;;AAED,MAAMuB,cAAc,GAAG;AACrBF,EAAAA,eADqB;AAErBC,EAAAA;AAFqB,CAAvB",sourcesContent:["import events from 'events';\n\nconst emitter = new events.EventEmitter();\nconst subscriptions = new Map();\n\nfunction unsubscribe(channel: string) {\n  if (!subscriptions.has(channel)) {\n    //console.log('No channel to unsub from');\n    return;\n  }\n  //console.log('unsub ', channel);\n  emitter.removeListener(channel, subscriptions.get(channel));\n  subscriptions.delete(channel);\n}\n\nclass Publisher {\n  emitter: any;\n\n  constructor(emitter: any) {\n    this.emitter = emitter;\n  }\n\n  publish(channel: string, message: string): void {\n    this.emitter.emit(channel, message);\n  }\n}\n\nclass Consumer extends events.EventEmitter {\n  emitter: any;\n\n  constructor(emitter: any) {\n    super();\n    this.emitter = emitter;\n  }\n\n  subscribe(channel: string): void {\n    unsubscribe(channel);\n    const handler = message => {\n      this.emit('message', channel, message);\n    };\n    subscriptions.set(channel, handler);\n    this.emitter.on(channel, handler);\n  }\n\n  unsubscribe(channel: string): void {\n    unsubscribe(channel);\n  }\n}\n\nfunction createPublisher(): any {\n  return new Publisher(emitter);\n}\n\nfunction createSubscriber(): any {\n  return new Consumer(emitter);\n}\n\nconst EventEmitterMQ = {\n  createPublisher,\n  createSubscriber,\n};\n\nexport { EventEmitterMQ };\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aa50229ebb8b117c40636f44c48f4703c243b32d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2mupntzjpj=function(){return actualCoverage;};}return actualCoverage;}cov_2mupntzjpj();cov_2mupntzjpj().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2mupntzjpj().s[1]++;exports.EventEmitterMQ=void 0;var _events=(cov_2mupntzjpj().s[2]++,_interopRequireDefault(require("events")));function _interopRequireDefault(obj){cov_2mupntzjpj().f[0]++;cov_2mupntzjpj().s[3]++;return(cov_2mupntzjpj().b[1][0]++,obj)&&(cov_2mupntzjpj().b[1][1]++,obj.__esModule)?(cov_2mupntzjpj().b[0][0]++,obj):(cov_2mupntzjpj().b[0][1]++,{default:obj});}const emitter=(cov_2mupntzjpj().s[4]++,new _events.default.EventEmitter());const subscriptions=(cov_2mupntzjpj().s[5]++,new Map());function unsubscribe(channel){cov_2mupntzjpj().f[1]++;cov_2mupntzjpj().s[6]++;if(!subscriptions.has(channel)){cov_2mupntzjpj().b[2][0]++;cov_2mupntzjpj().s[7]++;//console.log('No channel to unsub from');
return;}else{cov_2mupntzjpj().b[2][1]++;}//console.log('unsub ', channel);
cov_2mupntzjpj().s[8]++;emitter.removeListener(channel,subscriptions.get(channel));cov_2mupntzjpj().s[9]++;subscriptions.delete(channel);}class Publisher{constructor(emitter){cov_2mupntzjpj().f[2]++;cov_2mupntzjpj().s[10]++;this.emitter=emitter;}publish(channel,message){cov_2mupntzjpj().f[3]++;cov_2mupntzjpj().s[11]++;this.emitter.emit(channel,message);}}class Consumer extends(_events.default.EventEmitter){constructor(emitter){cov_2mupntzjpj().f[4]++;cov_2mupntzjpj().s[12]++;super();cov_2mupntzjpj().s[13]++;this.emitter=emitter;}subscribe(channel){cov_2mupntzjpj().f[5]++;cov_2mupntzjpj().s[14]++;unsubscribe(channel);cov_2mupntzjpj().s[15]++;const handler=message=>{cov_2mupntzjpj().f[6]++;cov_2mupntzjpj().s[16]++;this.emit('message',channel,message);};cov_2mupntzjpj().s[17]++;subscriptions.set(channel,handler);cov_2mupntzjpj().s[18]++;this.emitter.on(channel,handler);}unsubscribe(channel){cov_2mupntzjpj().f[7]++;cov_2mupntzjpj().s[19]++;unsubscribe(channel);}}function createPublisher(){cov_2mupntzjpj().f[8]++;cov_2mupntzjpj().s[20]++;return new Publisher(emitter);}function createSubscriber(){cov_2mupntzjpj().f[9]++;cov_2mupntzjpj().s[21]++;return new Consumer(emitter);}const EventEmitterMQ=(cov_2mupntzjpj().s[22]++,{createPublisher,createSubscriber});cov_2mupntzjpj().s[23]++;exports.EventEmitterMQ=EventEmitterMQ;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9NZXNzYWdlUXVldWUvRXZlbnRFbWl0dGVyTVEuanMiXSwibmFtZXMiOlsiZW1pdHRlciIsImV2ZW50cyIsIkV2ZW50RW1pdHRlciIsInN1YnNjcmlwdGlvbnMiLCJNYXAiLCJ1bnN1YnNjcmliZSIsImNoYW5uZWwiLCJoYXMiLCJyZW1vdmVMaXN0ZW5lciIsImdldCIsImRlbGV0ZSIsIlB1Ymxpc2hlciIsImNvbnN0cnVjdG9yIiwicHVibGlzaCIsIm1lc3NhZ2UiLCJlbWl0IiwiQ29uc3VtZXIiLCJzdWJzY3JpYmUiLCJoYW5kbGVyIiwic2V0Iiwib24iLCJjcmVhdGVQdWJsaXNoZXIiLCJjcmVhdGVTdWJzY3JpYmVyIiwiRXZlbnRFbWl0dGVyTVEiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBLE1BQU1BLE9BQU8sR0FBRyxJQUFJQyxnQkFBT0MsWUFBWCxFQUFoQjtBQUNBLE1BQU1DLGFBQWEsR0FBRyxJQUFJQyxHQUFKLEVBQXRCOztBQUVBLFNBQVNDLFdBQVQsQ0FBcUJDLE9BQXJCLEVBQXNDO0FBQ3BDLE1BQUksQ0FBQ0gsYUFBYSxDQUFDSSxHQUFkLENBQWtCRCxPQUFsQixDQUFMLEVBQWlDO0FBQy9CO0FBQ0E7QUFDRCxHQUptQyxDQUtwQzs7O0FBQ0FOLEVBQUFBLE9BQU8sQ0FBQ1EsY0FBUixDQUF1QkYsT0FBdkIsRUFBZ0NILGFBQWEsQ0FBQ00sR0FBZCxDQUFrQkgsT0FBbEIsQ0FBaEM7QUFDQUgsRUFBQUEsYUFBYSxDQUFDTyxNQUFkLENBQXFCSixPQUFyQjtBQUNEOztBQUVELE1BQU1LLFNBQU4sQ0FBZ0I7QUFHZEMsRUFBQUEsV0FBVyxDQUFDWixPQUFELEVBQWU7QUFDeEIsU0FBS0EsT0FBTCxHQUFlQSxPQUFmO0FBQ0Q7O0FBRURhLEVBQUFBLE9BQU8sQ0FBQ1AsT0FBRCxFQUFrQlEsT0FBbEIsRUFBeUM7QUFDOUMsU0FBS2QsT0FBTCxDQUFhZSxJQUFiLENBQWtCVCxPQUFsQixFQUEyQlEsT0FBM0I7QUFDRDs7QUFUYTs7QUFZaEIsTUFBTUUsUUFBTixTQUF1QmYsZ0JBQU9DLFlBQTlCLENBQTJDO0FBR3pDVSxFQUFBQSxXQUFXLENBQUNaLE9BQUQsRUFBZTtBQUN4QjtBQUNBLFNBQUtBLE9BQUwsR0FBZUEsT0FBZjtBQUNEOztBQUVEaUIsRUFBQUEsU0FBUyxDQUFDWCxPQUFELEVBQXdCO0FBQy9CRCxJQUFBQSxXQUFXLENBQUNDLE9BQUQsQ0FBWDs7QUFDQSxVQUFNWSxPQUFPLEdBQUdKLE9BQU8sSUFBSTtBQUN6QixXQUFLQyxJQUFMLENBQVUsU0FBVixFQUFxQlQsT0FBckIsRUFBOEJRLE9BQTlCO0FBQ0QsS0FGRDs7QUFHQVgsSUFBQUEsYUFBYSxDQUFDZ0IsR0FBZCxDQUFrQmIsT0FBbEIsRUFBMkJZLE9BQTNCO0FBQ0EsU0FBS2xCLE9BQUwsQ0FBYW9CLEVBQWIsQ0FBZ0JkLE9BQWhCLEVBQXlCWSxPQUF6QjtBQUNEOztBQUVEYixFQUFBQSxXQUFXLENBQUNDLE9BQUQsRUFBd0I7QUFDakNELElBQUFBLFdBQVcsQ0FBQ0MsT0FBRCxDQUFYO0FBQ0Q7O0FBbkJ3Qzs7QUFzQjNDLFNBQVNlLGVBQVQsR0FBZ0M7QUFDOUIsU0FBTyxJQUFJVixTQUFKLENBQWNYLE9BQWQsQ0FBUDtBQUNEOztBQUVELFNBQVNzQixnQkFBVCxHQUFpQztBQUMvQixTQUFPLElBQUlOLFFBQUosQ0FBYWhCLE9BQWIsQ0FBUDtBQUNEOztBQUVELE1BQU11QixjQUFjLEdBQUc7QUFDckJGLEVBQUFBLGVBRHFCO0FBRXJCQyxFQUFBQTtBQUZxQixDQUF2QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBldmVudHMgZnJvbSAnZXZlbnRzJztcblxuY29uc3QgZW1pdHRlciA9IG5ldyBldmVudHMuRXZlbnRFbWl0dGVyKCk7XG5jb25zdCBzdWJzY3JpcHRpb25zID0gbmV3IE1hcCgpO1xuXG5mdW5jdGlvbiB1bnN1YnNjcmliZShjaGFubmVsOiBzdHJpbmcpIHtcbiAgaWYgKCFzdWJzY3JpcHRpb25zLmhhcyhjaGFubmVsKSkge1xuICAgIC8vY29uc29sZS5sb2coJ05vIGNoYW5uZWwgdG8gdW5zdWIgZnJvbScpO1xuICAgIHJldHVybjtcbiAgfVxuICAvL2NvbnNvbGUubG9nKCd1bnN1YiAnLCBjaGFubmVsKTtcbiAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihjaGFubmVsLCBzdWJzY3JpcHRpb25zLmdldChjaGFubmVsKSk7XG4gIHN1YnNjcmlwdGlvbnMuZGVsZXRlKGNoYW5uZWwpO1xufVxuXG5jbGFzcyBQdWJsaXNoZXIge1xuICBlbWl0dGVyOiBhbnk7XG5cbiAgY29uc3RydWN0b3IoZW1pdHRlcjogYW55KSB7XG4gICAgdGhpcy5lbWl0dGVyID0gZW1pdHRlcjtcbiAgfVxuXG4gIHB1Ymxpc2goY2hhbm5lbDogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmVtaXR0ZXIuZW1pdChjaGFubmVsLCBtZXNzYWdlKTtcbiAgfVxufVxuXG5jbGFzcyBDb25zdW1lciBleHRlbmRzIGV2ZW50cy5FdmVudEVtaXR0ZXIge1xuICBlbWl0dGVyOiBhbnk7XG5cbiAgY29uc3RydWN0b3IoZW1pdHRlcjogYW55KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmVtaXR0ZXIgPSBlbWl0dGVyO1xuICB9XG5cbiAgc3Vic2NyaWJlKGNoYW5uZWw6IHN0cmluZyk6IHZvaWQge1xuICAgIHVuc3Vic2NyaWJlKGNoYW5uZWwpO1xuICAgIGNvbnN0IGhhbmRsZXIgPSBtZXNzYWdlID0+IHtcbiAgICAgIHRoaXMuZW1pdCgnbWVzc2FnZScsIGNoYW5uZWwsIG1lc3NhZ2UpO1xuICAgIH07XG4gICAgc3Vic2NyaXB0aW9ucy5zZXQoY2hhbm5lbCwgaGFuZGxlcik7XG4gICAgdGhpcy5lbWl0dGVyLm9uKGNoYW5uZWwsIGhhbmRsZXIpO1xuICB9XG5cbiAgdW5zdWJzY3JpYmUoY2hhbm5lbDogc3RyaW5nKTogdm9pZCB7XG4gICAgdW5zdWJzY3JpYmUoY2hhbm5lbCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUHVibGlzaGVyKCk6IGFueSB7XG4gIHJldHVybiBuZXcgUHVibGlzaGVyKGVtaXR0ZXIpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTdWJzY3JpYmVyKCk6IGFueSB7XG4gIHJldHVybiBuZXcgQ29uc3VtZXIoZW1pdHRlcik7XG59XG5cbmNvbnN0IEV2ZW50RW1pdHRlck1RID0ge1xuICBjcmVhdGVQdWJsaXNoZXIsXG4gIGNyZWF0ZVN1YnNjcmliZXIsXG59O1xuXG5leHBvcnQgeyBFdmVudEVtaXR0ZXJNUSB9O1xuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9NZXNzYWdlUXVldWUvRXZlbnRFbWl0dGVyTVEuanMiXSwibmFtZXMiOlsiZW1pdHRlciIsImV2ZW50cyIsInN1YnNjcmlwdGlvbnMiLCJjb25zdHJ1Y3RvciIsInB1Ymxpc2giLCJzdWJzY3JpYmUiLCJ1bnN1YnNjcmliZSIsImhhbmRsZXIiLCJtZXNzYWdlIiwiRXZlbnRFbWl0dGVyTVEiLCJjcmVhdGVTdWJzY3JpYmVyIl0sIm1hcHBpbmdzIjoib2pPQU1PRTtrT0FOUCxHQUFBLENBQUEsT0FBQSwwQkFBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxDQUFBLEMsc1BBRUEsS0FBTUYsQ0FBQUEsT0FBTywwQkFBRyxHQUFJQyxDQUFBQSxPQUFBQSxDQUFBQSxPQUFBQSxDQUFwQixZQUFnQixFQUFILENBQWIsQ0FDQSxLQUFNQyxDQUFBQSxhQUFhLDBCQUFHLEdBQXRCLENBQUEsR0FBc0IsRUFBSCxDQUFuQixDQUVBLFFBQUEsQ0FBQSxXQUFBLENBQUEsT0FBQSxDQUFzQyxpREFDcEMsR0FBSSxDQUFDQSxhQUFhLENBQWJBLEdBQUFBLENBQUwsT0FBS0EsQ0FBTCxDQUFpQyxvREFDL0I7QUFDQSxPQUhrQyxDQUNwQyxpQ0FJQTtBQUxvQyx3QkFNcENGLE9BQU8sQ0FBUEEsY0FBQUEsQ0FBQUEsT0FBQUEsQ0FBZ0NFLGFBQWEsQ0FBYkEsR0FBQUEsQ0FBaENGLE9BQWdDRSxDQUFoQ0YsRUFOb0Msd0JBT3BDRSxhQUFhLENBQWJBLE1BQUFBLENBQUFBLE9BQUFBLEVBQ0QsQ0FFRCxLQUFBLENBQUEsU0FBZ0IsQ0FHZEMsV0FBVyxDQUFBLE9BQUEsQ0FBZSxrREFDeEIsS0FBQSxPQUFBLENBQUEsT0FBQSxDQUNELENBRURDLE9BQU8sQ0FBQSxPQUFBLENBQUEsT0FBQSxDQUF5QyxrREFDOUMsS0FBQSxPQUFBLENBQUEsSUFBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLEVBQ0QsQ0FUYSxDQVloQixLQUFBLENBQUEsUUFBQSxTQUF1QkgsT0FBQUEsQ0FBQUEsT0FBQUEsQ0FBdkIsWUFBQSxDQUEyQyxDQUd6Q0UsV0FBVyxDQUFBLE9BQUEsQ0FBZSxrREFDeEIsUUFEd0IseUJBRXhCLEtBQUEsT0FBQSxDQUFBLE9BQUEsQ0FDRCxDQUVERSxTQUFTLENBQUEsT0FBQSxDQUF3QixrREFDL0JDLFdBQVcsQ0FBWEEsT0FBVyxDQUFYQSxDQUQrQix5QkFFL0IsS0FBTUMsQ0FBQUEsT0FBTyxDQUFHQyxPQUFPLEVBQUksa0RBQ3pCLEtBQUEsSUFBQSxDQUFBLFNBQUEsQ0FBQSxPQUFBLENBQUEsT0FBQSxFQURGLENBQUEsQ0FGK0IseUJBSy9CTixhQUFhLENBQWJBLEdBQUFBLENBQUFBLE9BQUFBLENBQUFBLE9BQUFBLEVBTCtCLHlCQU0vQixLQUFBLE9BQUEsQ0FBQSxFQUFBLENBQUEsT0FBQSxDQUFBLE9BQUEsRUFDRCxDQUVESSxXQUFXLENBQUEsT0FBQSxDQUF3QixrREFDakNBLFdBQVcsQ0FBWEEsT0FBVyxDQUFYQSxDQUNELENBbkJ3QyxDQXNCM0MsUUFBQSxDQUFBLGVBQUEsRUFBZ0Msa0RBQzlCLE1BQU8sSUFBQSxDQUFBLFNBQUEsQ0FBUCxPQUFPLENBQVAsQ0FDRCxDQUVELFFBQUEsQ0FBQSxnQkFBQSxFQUFpQyxrREFDL0IsTUFBTyxJQUFBLENBQUEsUUFBQSxDQUFQLE9BQU8sQ0FBUCxDQUNELENBRUQsS0FBTUcsQ0FBQUEsY0FBYywyQkFBRyxDQUFBLGVBQUEsQ0FFckJDLGdCQUZxQixDQUFILENBQXBCLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXZlbnRzIGZyb20gJ2V2ZW50cyc7XG5cbmNvbnN0IGVtaXR0ZXIgPSBuZXcgZXZlbnRzLkV2ZW50RW1pdHRlcigpO1xuY29uc3Qgc3Vic2NyaXB0aW9ucyA9IG5ldyBNYXAoKTtcblxuZnVuY3Rpb24gdW5zdWJzY3JpYmUoY2hhbm5lbDogc3RyaW5nKSB7XG4gIGlmICghc3Vic2NyaXB0aW9ucy5oYXMoY2hhbm5lbCkpIHtcbiAgICAvL2NvbnNvbGUubG9nKCdObyBjaGFubmVsIHRvIHVuc3ViIGZyb20nKTtcbiAgICByZXR1cm47XG4gIH1cbiAgLy9jb25zb2xlLmxvZygndW5zdWIgJywgY2hhbm5lbCk7XG4gIGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoY2hhbm5lbCwgc3Vic2NyaXB0aW9ucy5nZXQoY2hhbm5lbCkpO1xuICBzdWJzY3JpcHRpb25zLmRlbGV0ZShjaGFubmVsKTtcbn1cblxuY2xhc3MgUHVibGlzaGVyIHtcbiAgZW1pdHRlcjogYW55O1xuXG4gIGNvbnN0cnVjdG9yKGVtaXR0ZXI6IGFueSkge1xuICAgIHRoaXMuZW1pdHRlciA9IGVtaXR0ZXI7XG4gIH1cblxuICBwdWJsaXNoKGNoYW5uZWw6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5lbWl0dGVyLmVtaXQoY2hhbm5lbCwgbWVzc2FnZSk7XG4gIH1cbn1cblxuY2xhc3MgQ29uc3VtZXIgZXh0ZW5kcyBldmVudHMuRXZlbnRFbWl0dGVyIHtcbiAgZW1pdHRlcjogYW55O1xuXG4gIGNvbnN0cnVjdG9yKGVtaXR0ZXI6IGFueSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5lbWl0dGVyID0gZW1pdHRlcjtcbiAgfVxuXG4gIHN1YnNjcmliZShjaGFubmVsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB1bnN1YnNjcmliZShjaGFubmVsKTtcbiAgICBjb25zdCBoYW5kbGVyID0gbWVzc2FnZSA9PiB7XG4gICAgICB0aGlzLmVtaXQoJ21lc3NhZ2UnLCBjaGFubmVsLCBtZXNzYWdlKTtcbiAgICB9O1xuICAgIHN1YnNjcmlwdGlvbnMuc2V0KGNoYW5uZWwsIGhhbmRsZXIpO1xuICAgIHRoaXMuZW1pdHRlci5vbihjaGFubmVsLCBoYW5kbGVyKTtcbiAgfVxuXG4gIHVuc3Vic2NyaWJlKGNoYW5uZWw6IHN0cmluZyk6IHZvaWQge1xuICAgIHVuc3Vic2NyaWJlKGNoYW5uZWwpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVB1Ymxpc2hlcigpOiBhbnkge1xuICByZXR1cm4gbmV3IFB1Ymxpc2hlcihlbWl0dGVyKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlcigpOiBhbnkge1xuICByZXR1cm4gbmV3IENvbnN1bWVyKGVtaXR0ZXIpO1xufVxuXG5jb25zdCBFdmVudEVtaXR0ZXJNUSA9IHtcbiAgY3JlYXRlUHVibGlzaGVyLFxuICBjcmVhdGVTdWJzY3JpYmVyLFxufTtcblxuZXhwb3J0IHsgRXZlbnRFbWl0dGVyTVEgfTtcbiJdfQ==