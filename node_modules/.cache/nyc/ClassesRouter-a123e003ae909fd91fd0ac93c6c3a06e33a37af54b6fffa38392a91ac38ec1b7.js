"use strict";function cov_k920res22(){var path="/parse-server/lib/Routers/ClassesRouter.js";var hash="07254c21420a0fd25bb77358ee1822b0b25b48a7";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Routers/ClassesRouter.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:49}},"2":{start:{line:8,column:21},end:{line:8,column:72}},"3":{start:{line:10,column:12},end:{line:10,column:54}},"4":{start:{line:12,column:14},end:{line:12,column:55}},"5":{start:{line:14,column:12},end:{line:14,column:57}},"6":{start:{line:16,column:19},end:{line:16,column:44}},"7":{start:{line:18,column:39},end:{line:18,column:93}},"8":{start:{line:20,column:31},end:{line:20,column:134}},"9":{start:{line:24,column:4},end:{line:24,column:32}},"10":{start:{line:28,column:17},end:{line:28,column:80}},"11":{start:{line:29,column:20},end:{line:29,column:55}},"12":{start:{line:31,column:4},end:{line:34,column:5}},"13":{start:{line:33,column:6},end:{line:33,column:50}},"14":{start:{line:36,column:4},end:{line:38,column:5}},"15":{start:{line:37,column:6},end:{line:37,column:77}},"16":{start:{line:40,column:4},end:{line:42,column:5}},"17":{start:{line:41,column:6},end:{line:41,column:42}},"18":{start:{line:44,column:4},end:{line:48,column:7}},"19":{start:{line:45,column:6},end:{line:47,column:8}},"20":{start:{line:53,column:17},end:{line:53,column:80}},"21":{start:{line:54,column:20},end:{line:54,column:22}},"22":{start:{line:56,column:4},end:{line:60,column:5}},"23":{start:{line:57,column:6},end:{line:59,column:7}},"24":{start:{line:58,column:8},end:{line:58,column:105}},"25":{start:{line:62,column:4},end:{line:64,column:5}},"26":{start:{line:63,column:6},end:{line:63,column:39}},"27":{start:{line:66,column:4},end:{line:68,column:5}},"28":{start:{line:67,column:6},end:{line:67,column:45}},"29":{start:{line:70,column:4},end:{line:72,column:5}},"30":{start:{line:71,column:6},end:{line:71,column:53}},"31":{start:{line:74,column:4},end:{line:76,column:5}},"32":{start:{line:75,column:6},end:{line:75,column:51}},"33":{start:{line:78,column:4},end:{line:80,column:5}},"34":{start:{line:79,column:6},end:{line:79,column:65}},"35":{start:{line:82,column:4},end:{line:84,column:5}},"36":{start:{line:83,column:6},end:{line:83,column:67}},"37":{start:{line:86,column:4},end:{line:104,column:7}},"38":{start:{line:87,column:6},end:{line:89,column:7}},"39":{start:{line:88,column:8},end:{line:88,column:97}},"40":{start:{line:91,column:6},end:{line:99,column:7}},"41":{start:{line:92,column:8},end:{line:92,column:48}},"42":{start:{line:93,column:21},end:{line:93,column:40}},"43":{start:{line:95,column:8},end:{line:98,column:9}},"44":{start:{line:97,column:10},end:{line:97,column:67}},"45":{start:{line:101,column:6},end:{line:103,column:8}},"46":{start:{line:108,column:4},end:{line:108,column:123}},"47":{start:{line:112,column:18},end:{line:114,column:5}},"48":{start:{line:115,column:4},end:{line:115,column:130}},"49":{start:{line:119,column:4},end:{line:123,column:7}},"50":{start:{line:120,column:6},end:{line:122,column:8}},"51":{start:{line:127,column:17},end:{line:127,column:19}},"52":{start:{line:129,column:4},end:{line:135,column:5}},"53":{start:{line:130,column:6},end:{line:134,column:7}},"54":{start:{line:131,column:8},end:{line:131,column:38}},"55":{start:{line:133,column:8},end:{line:133,column:26}},"56":{start:{line:137,column:4},end:{line:137,column:16}},"57":{start:{line:141,column:29},end:{line:141,column:236}},"58":{start:{line:143,column:4},end:{line:147,column:5}},"59":{start:{line:144,column:6},end:{line:146,column:7}},"60":{start:{line:145,column:8},end:{line:145,column:112}},"61":{start:{line:149,column:20},end:{line:149,column:22}},"62":{start:{line:151,column:4},end:{line:153,column:5}},"63":{start:{line:152,column:6},end:{line:152,column:39}},"64":{start:{line:155,column:4},end:{line:159,column:5}},"65":{start:{line:156,column:6},end:{line:156,column:41}},"66":{start:{line:158,column:6},end:{line:158,column:34}},"67":{start:{line:161,column:4},end:{line:163,column:5}},"68":{start:{line:162,column:6},end:{line:162,column:41}},"69":{start:{line:165,column:4},end:{line:167,column:5}},"70":{start:{line:166,column:6},end:{line:166,column:27}},"71":{start:{line:169,column:4},end:{line:171,column:5}},"72":{start:{line:170,column:6},end:{line:170,column:39}},"73":{start:{line:173,column:4},end:{line:175,column:5}},"74":{start:{line:174,column:6},end:{line:174,column:53}},"75":{start:{line:177,column:4},end:{line:179,column:5}},"76":{start:{line:178,column:6},end:{line:178,column:45}},"77":{start:{line:181,column:4},end:{line:183,column:5}},"78":{start:{line:182,column:6},end:{line:182,column:32}},"79":{start:{line:185,column:4},end:{line:187,column:5}},"80":{start:{line:186,column:6},end:{line:186,column:51}},"81":{start:{line:189,column:4},end:{line:191,column:5}},"82":{start:{line:190,column:6},end:{line:190,column:65}},"83":{start:{line:193,column:4},end:{line:195,column:5}},"84":{start:{line:194,column:6},end:{line:194,column:67}},"85":{start:{line:197,column:4},end:{line:199,column:5}},"86":{start:{line:198,column:6},end:{line:198,column:31}},"87":{start:{line:201,column:4},end:{line:203,column:5}},"88":{start:{line:202,column:6},end:{line:202,column:37}},"89":{start:{line:205,column:4},end:{line:205,column:19}},"90":{start:{line:209,column:4},end:{line:211,column:7}},"91":{start:{line:210,column:6},end:{line:210,column:34}},"92":{start:{line:212,column:4},end:{line:214,column:7}},"93":{start:{line:213,column:6},end:{line:213,column:33}},"94":{start:{line:215,column:4},end:{line:217,column:7}},"95":{start:{line:216,column:6},end:{line:216,column:36}},"96":{start:{line:218,column:4},end:{line:220,column:7}},"97":{start:{line:219,column:6},end:{line:219,column:36}},"98":{start:{line:221,column:4},end:{line:223,column:7}},"99":{start:{line:222,column:6},end:{line:222,column:36}},"100":{start:{line:228,column:0},end:{line:228,column:38}},"101":{start:{line:229,column:15},end:{line:229,column:28}},"102":{start:{line:230,column:0},end:{line:230,column:27}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:18,column:9},end:{line:18,column:31}},loc:{start:{line:18,column:37},end:{line:18,column:95}},line:18},"1":{name:"(anonymous_1)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:17},end:{line:25,column:3}},line:23},"2":{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:18},end:{line:49,column:3}},line:27},"3":{name:"(anonymous_3)",decl:{start:{line:44,column:137},end:{line:44,column:138}},loc:{start:{line:44,column:149},end:{line:48,column:5}},line:44},"4":{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:17},end:{line:105,column:3}},line:52},"5":{name:"(anonymous_5)",decl:{start:{line:86,column:127},end:{line:86,column:128}},loc:{start:{line:86,column:139},end:{line:104,column:5}},line:86},"6":{name:"(anonymous_6)",decl:{start:{line:107,column:2},end:{line:107,column:3}},loc:{start:{line:107,column:20},end:{line:109,column:3}},line:107},"7":{name:"(anonymous_7)",decl:{start:{line:111,column:2},end:{line:111,column:3}},loc:{start:{line:111,column:20},end:{line:116,column:3}},line:111},"8":{name:"(anonymous_8)",decl:{start:{line:118,column:2},end:{line:118,column:3}},loc:{start:{line:118,column:20},end:{line:124,column:3}},line:118},"9":{name:"(anonymous_9)",decl:{start:{line:119,column:116},end:{line:119,column:117}},loc:{start:{line:119,column:122},end:{line:123,column:5}},line:119},"10":{name:"(anonymous_10)",decl:{start:{line:126,column:2},end:{line:126,column:3}},loc:{start:{line:126,column:30},end:{line:138,column:3}},line:126},"11":{name:"(anonymous_11)",decl:{start:{line:140,column:2},end:{line:140,column:3}},loc:{start:{line:140,column:31},end:{line:206,column:3}},line:140},"12":{name:"(anonymous_12)",decl:{start:{line:208,column:2},end:{line:208,column:3}},loc:{start:{line:208,column:16},end:{line:224,column:3}},line:208},"13":{name:"(anonymous_13)",decl:{start:{line:209,column:45},end:{line:209,column:46}},loc:{start:{line:209,column:52},end:{line:211,column:5}},line:209},"14":{name:"(anonymous_14)",decl:{start:{line:212,column:55},end:{line:212,column:56}},loc:{start:{line:212,column:62},end:{line:214,column:5}},line:212},"15":{name:"(anonymous_15)",decl:{start:{line:215,column:85},end:{line:215,column:86}},loc:{start:{line:215,column:92},end:{line:217,column:5}},line:215},"16":{name:"(anonymous_16)",decl:{start:{line:218,column:94},end:{line:218,column:95}},loc:{start:{line:218,column:101},end:{line:220,column:5}},line:218},"17":{name:"(anonymous_17)",decl:{start:{line:221,column:58},end:{line:221,column:59}},loc:{start:{line:221,column:65},end:{line:223,column:5}},line:221}},branchMap:{"0":{loc:{start:{line:18,column:46},end:{line:18,column:92}},type:"cond-expr",locations:[{start:{line:18,column:70},end:{line:18,column:73}},{start:{line:18,column:76},end:{line:18,column:92}}],line:18},"1":{loc:{start:{line:18,column:46},end:{line:18,column:67}},type:"binary-expr",locations:[{start:{line:18,column:46},end:{line:18,column:49}},{start:{line:18,column:53},end:{line:18,column:67}}],line:18},"2":{loc:{start:{line:31,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:31,column:4},end:{line:34,column:5}},{start:{line:31,column:4},end:{line:34,column:5}}],line:31},"3":{loc:{start:{line:31,column:8},end:{line:31,column:63}},type:"binary-expr",locations:[{start:{line:31,column:8},end:{line:31,column:27}},{start:{line:31,column:31},end:{line:31,column:63}}],line:31},"4":{loc:{start:{line:36,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:38,column:5}},{start:{line:36,column:4},end:{line:38,column:5}}],line:36},"5":{loc:{start:{line:40,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:42,column:5}},{start:{line:40,column:4},end:{line:42,column:5}}],line:40},"6":{loc:{start:{line:57,column:6},end:{line:59,column:7}},type:"if",locations:[{start:{line:57,column:6},end:{line:59,column:7}},{start:{line:57,column:6},end:{line:59,column:7}}],line:57},"7":{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:62,column:4},end:{line:64,column:5}}],line:62},"8":{loc:{start:{line:66,column:4},end:{line:68,column:5}},type:"if",locations:[{start:{line:66,column:4},end:{line:68,column:5}},{start:{line:66,column:4},end:{line:68,column:5}}],line:66},"9":{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:70,column:4},end:{line:72,column:5}}],line:70},"10":{loc:{start:{line:74,column:4},end:{line:76,column:5}},type:"if",locations:[{start:{line:74,column:4},end:{line:76,column:5}},{start:{line:74,column:4},end:{line:76,column:5}}],line:74},"11":{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:78,column:4},end:{line:80,column:5}}],line:78},"12":{loc:{start:{line:82,column:4},end:{line:84,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:84,column:5}},{start:{line:82,column:4},end:{line:84,column:5}}],line:82},"13":{loc:{start:{line:87,column:6},end:{line:89,column:7}},type:"if",locations:[{start:{line:87,column:6},end:{line:89,column:7}},{start:{line:87,column:6},end:{line:89,column:7}}],line:87},"14":{loc:{start:{line:87,column:10},end:{line:87,column:59}},type:"binary-expr",locations:[{start:{line:87,column:10},end:{line:87,column:27}},{start:{line:87,column:31},end:{line:87,column:59}}],line:87},"15":{loc:{start:{line:91,column:6},end:{line:99,column:7}},type:"if",locations:[{start:{line:91,column:6},end:{line:99,column:7}},{start:{line:91,column:6},end:{line:99,column:7}}],line:91},"16":{loc:{start:{line:95,column:8},end:{line:98,column:9}},type:"if",locations:[{start:{line:95,column:8},end:{line:98,column:9}},{start:{line:95,column:8},end:{line:98,column:9}}],line:95},"17":{loc:{start:{line:95,column:12},end:{line:95,column:62}},type:"binary-expr",locations:[{start:{line:95,column:12},end:{line:95,column:25}},{start:{line:95,column:29},end:{line:95,column:62}}],line:95},"18":{loc:{start:{line:144,column:6},end:{line:146,column:7}},type:"if",locations:[{start:{line:144,column:6},end:{line:146,column:7}},{start:{line:144,column:6},end:{line:146,column:7}}],line:144},"19":{loc:{start:{line:151,column:4},end:{line:153,column:5}},type:"if",locations:[{start:{line:151,column:4},end:{line:153,column:5}},{start:{line:151,column:4},end:{line:153,column:5}}],line:151},"20":{loc:{start:{line:155,column:4},end:{line:159,column:5}},type:"if",locations:[{start:{line:155,column:4},end:{line:159,column:5}},{start:{line:155,column:4},end:{line:159,column:5}}],line:155},"21":{loc:{start:{line:155,column:8},end:{line:155,column:38}},type:"binary-expr",locations:[{start:{line:155,column:8},end:{line:155,column:18}},{start:{line:155,column:22},end:{line:155,column:38}}],line:155},"22":{loc:{start:{line:161,column:4},end:{line:163,column:5}},type:"if",locations:[{start:{line:161,column:4},end:{line:163,column:5}},{start:{line:161,column:4},end:{line:163,column:5}}],line:161},"23":{loc:{start:{line:165,column:4},end:{line:167,column:5}},type:"if",locations:[{start:{line:165,column:4},end:{line:167,column:5}},{start:{line:165,column:4},end:{line:167,column:5}}],line:165},"24":{loc:{start:{line:169,column:4},end:{line:171,column:5}},type:"if",locations:[{start:{line:169,column:4},end:{line:171,column:5}},{start:{line:169,column:4},end:{line:171,column:5}}],line:169},"25":{loc:{start:{line:173,column:4},end:{line:175,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:175,column:5}},{start:{line:173,column:4},end:{line:175,column:5}}],line:173},"26":{loc:{start:{line:177,column:4},end:{line:179,column:5}},type:"if",locations:[{start:{line:177,column:4},end:{line:179,column:5}},{start:{line:177,column:4},end:{line:179,column:5}}],line:177},"27":{loc:{start:{line:181,column:4},end:{line:183,column:5}},type:"if",locations:[{start:{line:181,column:4},end:{line:183,column:5}},{start:{line:181,column:4},end:{line:183,column:5}}],line:181},"28":{loc:{start:{line:185,column:4},end:{line:187,column:5}},type:"if",locations:[{start:{line:185,column:4},end:{line:187,column:5}},{start:{line:185,column:4},end:{line:187,column:5}}],line:185},"29":{loc:{start:{line:189,column:4},end:{line:191,column:5}},type:"if",locations:[{start:{line:189,column:4},end:{line:191,column:5}},{start:{line:189,column:4},end:{line:191,column:5}}],line:189},"30":{loc:{start:{line:193,column:4},end:{line:195,column:5}},type:"if",locations:[{start:{line:193,column:4},end:{line:195,column:5}},{start:{line:193,column:4},end:{line:195,column:5}}],line:193},"31":{loc:{start:{line:197,column:4},end:{line:199,column:5}},type:"if",locations:[{start:{line:197,column:4},end:{line:199,column:5}},{start:{line:197,column:4},end:{line:199,column:5}}],line:197},"32":{loc:{start:{line:197,column:8},end:{line:197,column:85}},type:"binary-expr",locations:[{start:{line:197,column:8},end:{line:197,column:17}},{start:{line:197,column:22},end:{line:197,column:51}},{start:{line:197,column:55},end:{line:197,column:84}}],line:197},"33":{loc:{start:{line:201,column:4},end:{line:203,column:5}},type:"if",locations:[{start:{line:201,column:4},end:{line:203,column:5}},{start:{line:201,column:4},end:{line:203,column:5}}],line:201}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0,0],"33":[0,0]},inputSourceMap:{version:3,sources:["../../src/Routers/ClassesRouter.js"],names:["ALLOWED_GET_QUERY_KEYS","ClassesRouter","PromiseRouter","className","req","params","handleFind","body","Object","assign","JSONFromQuery","query","options","optionsFromBody","config","maxLimit","limit","Number","redirectClassNameForKey","String","where","JSON","parse","rest","find","auth","info","clientSDK","context","then","response","handleGet","key","keys","indexOf","Parse","Error","INVALID_QUERY","include","excludeKeys","readPreference","includeReadPreference","subqueryReadPreference","get","objectId","results","length","OBJECT_NOT_FOUND","sessionToken","user","id","handleCreate","create","handleUpdate","update","handleDelete","del","json","value","_","entries","e","allowConstraints","skip","order","count","includeAll","hint","explain","mountRoutes","route","promiseEnsureIdempotency"],mappings:"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",sourcesContent:["import PromiseRouter from '../PromiseRouter';\nimport rest from '../rest';\nimport _ from 'lodash';\nimport Parse from 'parse/node';\nimport { promiseEnsureIdempotency } from '../middlewares';\n\nconst ALLOWED_GET_QUERY_KEYS = [\n  'keys',\n  'include',\n  'excludeKeys',\n  'readPreference',\n  'includeReadPreference',\n  'subqueryReadPreference',\n];\n\nexport class ClassesRouter extends PromiseRouter {\n  className(req) {\n    return req.params.className;\n  }\n\n  handleFind(req) {\n    const body = Object.assign(req.body, ClassesRouter.JSONFromQuery(req.query));\n    const options = ClassesRouter.optionsFromBody(body);\n    if (req.config.maxLimit && body.limit > req.config.maxLimit) {\n      // Silently replace the limit on the query with the max configured\n      options.limit = Number(req.config.maxLimit);\n    }\n    if (body.redirectClassNameForKey) {\n      options.redirectClassNameForKey = String(body.redirectClassNameForKey);\n    }\n    if (typeof body.where === 'string') {\n      body.where = JSON.parse(body.where);\n    }\n    return rest\n      .find(\n        req.config,\n        req.auth,\n        this.className(req),\n        body.where,\n        options,\n        req.info.clientSDK,\n        req.info.context\n      )\n      .then(response => {\n        return { response: response };\n      });\n  }\n\n  // Returns a promise for a {response} object.\n  handleGet(req) {\n    const body = Object.assign(req.body, ClassesRouter.JSONFromQuery(req.query));\n    const options = {};\n\n    for (const key of Object.keys(body)) {\n      if (ALLOWED_GET_QUERY_KEYS.indexOf(key) === -1) {\n        throw new Parse.Error(Parse.Error.INVALID_QUERY, 'Improper encode of parameter');\n      }\n    }\n\n    if (body.keys != null) {\n      options.keys = String(body.keys);\n    }\n    if (body.include != null) {\n      options.include = String(body.include);\n    }\n    if (body.excludeKeys != null) {\n      options.excludeKeys = String(body.excludeKeys);\n    }\n    if (typeof body.readPreference === 'string') {\n      options.readPreference = body.readPreference;\n    }\n    if (typeof body.includeReadPreference === 'string') {\n      options.includeReadPreference = body.includeReadPreference;\n    }\n    if (typeof body.subqueryReadPreference === 'string') {\n      options.subqueryReadPreference = body.subqueryReadPreference;\n    }\n\n    return rest\n      .get(\n        req.config,\n        req.auth,\n        this.className(req),\n        req.params.objectId,\n        options,\n        req.info.clientSDK\n      )\n      .then(response => {\n        if (!response.results || response.results.length == 0) {\n          throw new Parse.Error(Parse.Error.OBJECT_NOT_FOUND, 'Object not found.');\n        }\n\n        if (this.className(req) === '_User') {\n          delete response.results[0].sessionToken;\n\n          const user = response.results[0];\n\n          if (req.auth.user && user.objectId == req.auth.user.id) {\n            // Force the session token\n            response.results[0].sessionToken = req.info.sessionToken;\n          }\n        }\n        return { response: response.results[0] };\n      });\n  }\n\n  handleCreate(req) {\n    return rest.create(\n      req.config,\n      req.auth,\n      this.className(req),\n      req.body,\n      req.info.clientSDK,\n      req.info.context\n    );\n  }\n\n  handleUpdate(req) {\n    const where = { objectId: req.params.objectId };\n    return rest.update(\n      req.config,\n      req.auth,\n      this.className(req),\n      where,\n      req.body,\n      req.info.clientSDK,\n      req.info.context\n    );\n  }\n\n  handleDelete(req) {\n    return rest\n      .del(req.config, req.auth, this.className(req), req.params.objectId, req.info.context)\n      .then(() => {\n        return { response: {} };\n      });\n  }\n\n  static JSONFromQuery(query) {\n    const json = {};\n    for (const [key, value] of _.entries(query)) {\n      try {\n        json[key] = JSON.parse(value);\n      } catch (e) {\n        json[key] = value;\n      }\n    }\n    return json;\n  }\n\n  static optionsFromBody(body) {\n    const allowConstraints = [\n      'skip',\n      'limit',\n      'order',\n      'count',\n      'keys',\n      'excludeKeys',\n      'include',\n      'includeAll',\n      'redirectClassNameForKey',\n      'where',\n      'readPreference',\n      'includeReadPreference',\n      'subqueryReadPreference',\n      'hint',\n      'explain',\n    ];\n\n    for (const key of Object.keys(body)) {\n      if (allowConstraints.indexOf(key) === -1) {\n        throw new Parse.Error(Parse.Error.INVALID_QUERY, `Invalid parameter for query: ${key}`);\n      }\n    }\n    const options = {};\n    if (body.skip) {\n      options.skip = Number(body.skip);\n    }\n    if (body.limit || body.limit === 0) {\n      options.limit = Number(body.limit);\n    } else {\n      options.limit = Number(100);\n    }\n    if (body.order) {\n      options.order = String(body.order);\n    }\n    if (body.count) {\n      options.count = true;\n    }\n    if (body.keys != null) {\n      options.keys = String(body.keys);\n    }\n    if (body.excludeKeys != null) {\n      options.excludeKeys = String(body.excludeKeys);\n    }\n    if (body.include != null) {\n      options.include = String(body.include);\n    }\n    if (body.includeAll) {\n      options.includeAll = true;\n    }\n    if (typeof body.readPreference === 'string') {\n      options.readPreference = body.readPreference;\n    }\n    if (typeof body.includeReadPreference === 'string') {\n      options.includeReadPreference = body.includeReadPreference;\n    }\n    if (typeof body.subqueryReadPreference === 'string') {\n      options.subqueryReadPreference = body.subqueryReadPreference;\n    }\n    if (body.hint && (typeof body.hint === 'string' || typeof body.hint === 'object')) {\n      options.hint = body.hint;\n    }\n    if (body.explain) {\n      options.explain = body.explain;\n    }\n    return options;\n  }\n\n  mountRoutes() {\n    this.route('GET', '/classes/:className', req => {\n      return this.handleFind(req);\n    });\n    this.route('GET', '/classes/:className/:objectId', req => {\n      return this.handleGet(req);\n    });\n    this.route('POST', '/classes/:className', promiseEnsureIdempotency, req => {\n      return this.handleCreate(req);\n    });\n    this.route('PUT', '/classes/:className/:objectId', promiseEnsureIdempotency, req => {\n      return this.handleUpdate(req);\n    });\n    this.route('DELETE', '/classes/:className/:objectId', req => {\n      return this.handleDelete(req);\n    });\n  }\n}\n\nexport default ClassesRouter;\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"07254c21420a0fd25bb77358ee1822b0b25b48a7"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_k920res22=function(){return actualCoverage;};}return actualCoverage;}cov_k920res22();cov_k920res22().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_k920res22().s[1]++;exports.default=exports.ClassesRouter=void 0;var _PromiseRouter=(cov_k920res22().s[2]++,_interopRequireDefault(require("../PromiseRouter")));var _rest=(cov_k920res22().s[3]++,_interopRequireDefault(require("../rest")));var _lodash=(cov_k920res22().s[4]++,_interopRequireDefault(require("lodash")));var _node=(cov_k920res22().s[5]++,_interopRequireDefault(require("parse/node")));var _middlewares=(cov_k920res22().s[6]++,require("../middlewares"));function _interopRequireDefault(obj){cov_k920res22().f[0]++;cov_k920res22().s[7]++;return(cov_k920res22().b[1][0]++,obj)&&(cov_k920res22().b[1][1]++,obj.__esModule)?(cov_k920res22().b[0][0]++,obj):(cov_k920res22().b[0][1]++,{default:obj});}const ALLOWED_GET_QUERY_KEYS=(cov_k920res22().s[8]++,['keys','include','excludeKeys','readPreference','includeReadPreference','subqueryReadPreference']);class ClassesRouter extends(_PromiseRouter.default){className(req){cov_k920res22().f[1]++;cov_k920res22().s[9]++;return req.params.className;}handleFind(req){cov_k920res22().f[2]++;const body=(cov_k920res22().s[10]++,Object.assign(req.body,ClassesRouter.JSONFromQuery(req.query)));const options=(cov_k920res22().s[11]++,ClassesRouter.optionsFromBody(body));cov_k920res22().s[12]++;if((cov_k920res22().b[3][0]++,req.config.maxLimit)&&(cov_k920res22().b[3][1]++,body.limit>req.config.maxLimit)){cov_k920res22().b[2][0]++;cov_k920res22().s[13]++;// Silently replace the limit on the query with the max configured
options.limit=Number(req.config.maxLimit);}else{cov_k920res22().b[2][1]++;}cov_k920res22().s[14]++;if(body.redirectClassNameForKey){cov_k920res22().b[4][0]++;cov_k920res22().s[15]++;options.redirectClassNameForKey=String(body.redirectClassNameForKey);}else{cov_k920res22().b[4][1]++;}cov_k920res22().s[16]++;if(typeof body.where==='string'){cov_k920res22().b[5][0]++;cov_k920res22().s[17]++;body.where=JSON.parse(body.where);}else{cov_k920res22().b[5][1]++;}cov_k920res22().s[18]++;return _rest.default.find(req.config,req.auth,this.className(req),body.where,options,req.info.clientSDK,req.info.context).then(response=>{cov_k920res22().f[3]++;cov_k920res22().s[19]++;return{response:response};});}// Returns a promise for a {response} object.
handleGet(req){cov_k920res22().f[4]++;const body=(cov_k920res22().s[20]++,Object.assign(req.body,ClassesRouter.JSONFromQuery(req.query)));const options=(cov_k920res22().s[21]++,{});cov_k920res22().s[22]++;for(const key of Object.keys(body)){cov_k920res22().s[23]++;if(ALLOWED_GET_QUERY_KEYS.indexOf(key)===-1){cov_k920res22().b[6][0]++;cov_k920res22().s[24]++;throw new _node.default.Error(_node.default.Error.INVALID_QUERY,'Improper encode of parameter');}else{cov_k920res22().b[6][1]++;}}cov_k920res22().s[25]++;if(body.keys!=null){cov_k920res22().b[7][0]++;cov_k920res22().s[26]++;options.keys=String(body.keys);}else{cov_k920res22().b[7][1]++;}cov_k920res22().s[27]++;if(body.include!=null){cov_k920res22().b[8][0]++;cov_k920res22().s[28]++;options.include=String(body.include);}else{cov_k920res22().b[8][1]++;}cov_k920res22().s[29]++;if(body.excludeKeys!=null){cov_k920res22().b[9][0]++;cov_k920res22().s[30]++;options.excludeKeys=String(body.excludeKeys);}else{cov_k920res22().b[9][1]++;}cov_k920res22().s[31]++;if(typeof body.readPreference==='string'){cov_k920res22().b[10][0]++;cov_k920res22().s[32]++;options.readPreference=body.readPreference;}else{cov_k920res22().b[10][1]++;}cov_k920res22().s[33]++;if(typeof body.includeReadPreference==='string'){cov_k920res22().b[11][0]++;cov_k920res22().s[34]++;options.includeReadPreference=body.includeReadPreference;}else{cov_k920res22().b[11][1]++;}cov_k920res22().s[35]++;if(typeof body.subqueryReadPreference==='string'){cov_k920res22().b[12][0]++;cov_k920res22().s[36]++;options.subqueryReadPreference=body.subqueryReadPreference;}else{cov_k920res22().b[12][1]++;}cov_k920res22().s[37]++;return _rest.default.get(req.config,req.auth,this.className(req),req.params.objectId,options,req.info.clientSDK).then(response=>{cov_k920res22().f[5]++;cov_k920res22().s[38]++;if((cov_k920res22().b[14][0]++,!response.results)||(cov_k920res22().b[14][1]++,response.results.length==0)){cov_k920res22().b[13][0]++;cov_k920res22().s[39]++;throw new _node.default.Error(_node.default.Error.OBJECT_NOT_FOUND,'Object not found.');}else{cov_k920res22().b[13][1]++;}cov_k920res22().s[40]++;if(this.className(req)==='_User'){cov_k920res22().b[15][0]++;cov_k920res22().s[41]++;delete response.results[0].sessionToken;const user=(cov_k920res22().s[42]++,response.results[0]);cov_k920res22().s[43]++;if((cov_k920res22().b[17][0]++,req.auth.user)&&(cov_k920res22().b[17][1]++,user.objectId==req.auth.user.id)){cov_k920res22().b[16][0]++;cov_k920res22().s[44]++;// Force the session token
response.results[0].sessionToken=req.info.sessionToken;}else{cov_k920res22().b[16][1]++;}}else{cov_k920res22().b[15][1]++;}cov_k920res22().s[45]++;return{response:response.results[0]};});}handleCreate(req){cov_k920res22().f[6]++;cov_k920res22().s[46]++;return _rest.default.create(req.config,req.auth,this.className(req),req.body,req.info.clientSDK,req.info.context);}handleUpdate(req){cov_k920res22().f[7]++;const where=(cov_k920res22().s[47]++,{objectId:req.params.objectId});cov_k920res22().s[48]++;return _rest.default.update(req.config,req.auth,this.className(req),where,req.body,req.info.clientSDK,req.info.context);}handleDelete(req){cov_k920res22().f[8]++;cov_k920res22().s[49]++;return _rest.default.del(req.config,req.auth,this.className(req),req.params.objectId,req.info.context).then(()=>{cov_k920res22().f[9]++;cov_k920res22().s[50]++;return{response:{}};});}static JSONFromQuery(query){cov_k920res22().f[10]++;const json=(cov_k920res22().s[51]++,{});cov_k920res22().s[52]++;for(const[key,value]of _lodash.default.entries(query)){cov_k920res22().s[53]++;try{cov_k920res22().s[54]++;json[key]=JSON.parse(value);}catch(e){cov_k920res22().s[55]++;json[key]=value;}}cov_k920res22().s[56]++;return json;}static optionsFromBody(body){cov_k920res22().f[11]++;const allowConstraints=(cov_k920res22().s[57]++,['skip','limit','order','count','keys','excludeKeys','include','includeAll','redirectClassNameForKey','where','readPreference','includeReadPreference','subqueryReadPreference','hint','explain']);cov_k920res22().s[58]++;for(const key of Object.keys(body)){cov_k920res22().s[59]++;if(allowConstraints.indexOf(key)===-1){cov_k920res22().b[18][0]++;cov_k920res22().s[60]++;throw new _node.default.Error(_node.default.Error.INVALID_QUERY,`Invalid parameter for query: ${key}`);}else{cov_k920res22().b[18][1]++;}}const options=(cov_k920res22().s[61]++,{});cov_k920res22().s[62]++;if(body.skip){cov_k920res22().b[19][0]++;cov_k920res22().s[63]++;options.skip=Number(body.skip);}else{cov_k920res22().b[19][1]++;}cov_k920res22().s[64]++;if((cov_k920res22().b[21][0]++,body.limit)||(cov_k920res22().b[21][1]++,body.limit===0)){cov_k920res22().b[20][0]++;cov_k920res22().s[65]++;options.limit=Number(body.limit);}else{cov_k920res22().b[20][1]++;cov_k920res22().s[66]++;options.limit=Number(100);}cov_k920res22().s[67]++;if(body.order){cov_k920res22().b[22][0]++;cov_k920res22().s[68]++;options.order=String(body.order);}else{cov_k920res22().b[22][1]++;}cov_k920res22().s[69]++;if(body.count){cov_k920res22().b[23][0]++;cov_k920res22().s[70]++;options.count=true;}else{cov_k920res22().b[23][1]++;}cov_k920res22().s[71]++;if(body.keys!=null){cov_k920res22().b[24][0]++;cov_k920res22().s[72]++;options.keys=String(body.keys);}else{cov_k920res22().b[24][1]++;}cov_k920res22().s[73]++;if(body.excludeKeys!=null){cov_k920res22().b[25][0]++;cov_k920res22().s[74]++;options.excludeKeys=String(body.excludeKeys);}else{cov_k920res22().b[25][1]++;}cov_k920res22().s[75]++;if(body.include!=null){cov_k920res22().b[26][0]++;cov_k920res22().s[76]++;options.include=String(body.include);}else{cov_k920res22().b[26][1]++;}cov_k920res22().s[77]++;if(body.includeAll){cov_k920res22().b[27][0]++;cov_k920res22().s[78]++;options.includeAll=true;}else{cov_k920res22().b[27][1]++;}cov_k920res22().s[79]++;if(typeof body.readPreference==='string'){cov_k920res22().b[28][0]++;cov_k920res22().s[80]++;options.readPreference=body.readPreference;}else{cov_k920res22().b[28][1]++;}cov_k920res22().s[81]++;if(typeof body.includeReadPreference==='string'){cov_k920res22().b[29][0]++;cov_k920res22().s[82]++;options.includeReadPreference=body.includeReadPreference;}else{cov_k920res22().b[29][1]++;}cov_k920res22().s[83]++;if(typeof body.subqueryReadPreference==='string'){cov_k920res22().b[30][0]++;cov_k920res22().s[84]++;options.subqueryReadPreference=body.subqueryReadPreference;}else{cov_k920res22().b[30][1]++;}cov_k920res22().s[85]++;if((cov_k920res22().b[32][0]++,body.hint)&&((cov_k920res22().b[32][1]++,typeof body.hint==='string')||(cov_k920res22().b[32][2]++,typeof body.hint==='object'))){cov_k920res22().b[31][0]++;cov_k920res22().s[86]++;options.hint=body.hint;}else{cov_k920res22().b[31][1]++;}cov_k920res22().s[87]++;if(body.explain){cov_k920res22().b[33][0]++;cov_k920res22().s[88]++;options.explain=body.explain;}else{cov_k920res22().b[33][1]++;}cov_k920res22().s[89]++;return options;}mountRoutes(){cov_k920res22().f[12]++;cov_k920res22().s[90]++;this.route('GET','/classes/:className',req=>{cov_k920res22().f[13]++;cov_k920res22().s[91]++;return this.handleFind(req);});cov_k920res22().s[92]++;this.route('GET','/classes/:className/:objectId',req=>{cov_k920res22().f[14]++;cov_k920res22().s[93]++;return this.handleGet(req);});cov_k920res22().s[94]++;this.route('POST','/classes/:className',_middlewares.promiseEnsureIdempotency,req=>{cov_k920res22().f[15]++;cov_k920res22().s[95]++;return this.handleCreate(req);});cov_k920res22().s[96]++;this.route('PUT','/classes/:className/:objectId',_middlewares.promiseEnsureIdempotency,req=>{cov_k920res22().f[16]++;cov_k920res22().s[97]++;return this.handleUpdate(req);});cov_k920res22().s[98]++;this.route('DELETE','/classes/:className/:objectId',req=>{cov_k920res22().f[17]++;cov_k920res22().s[99]++;return this.handleDelete(req);});}}cov_k920res22().s[100]++;exports.ClassesRouter=ClassesRouter;var _default=(cov_k920res22().s[101]++,ClassesRouter);cov_k920res22().s[102]++;exports.default=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Sb3V0ZXJzL0NsYXNzZXNSb3V0ZXIuanMiXSwibmFtZXMiOlsiQUxMT1dFRF9HRVRfUVVFUllfS0VZUyIsIkNsYXNzZXNSb3V0ZXIiLCJQcm9taXNlUm91dGVyIiwiY2xhc3NOYW1lIiwicmVxIiwicGFyYW1zIiwiaGFuZGxlRmluZCIsImJvZHkiLCJPYmplY3QiLCJhc3NpZ24iLCJKU09ORnJvbVF1ZXJ5IiwicXVlcnkiLCJvcHRpb25zIiwib3B0aW9uc0Zyb21Cb2R5IiwiY29uZmlnIiwibWF4TGltaXQiLCJsaW1pdCIsIk51bWJlciIsInJlZGlyZWN0Q2xhc3NOYW1lRm9yS2V5IiwiU3RyaW5nIiwid2hlcmUiLCJKU09OIiwicGFyc2UiLCJyZXN0IiwiZmluZCIsImF1dGgiLCJpbmZvIiwiY2xpZW50U0RLIiwiY29udGV4dCIsInRoZW4iLCJyZXNwb25zZSIsImhhbmRsZUdldCIsImtleSIsImtleXMiLCJpbmRleE9mIiwiUGFyc2UiLCJFcnJvciIsIklOVkFMSURfUVVFUlkiLCJpbmNsdWRlIiwiZXhjbHVkZUtleXMiLCJyZWFkUHJlZmVyZW5jZSIsImluY2x1ZGVSZWFkUHJlZmVyZW5jZSIsInN1YnF1ZXJ5UmVhZFByZWZlcmVuY2UiLCJnZXQiLCJvYmplY3RJZCIsInJlc3VsdHMiLCJsZW5ndGgiLCJPQkpFQ1RfTk9UX0ZPVU5EIiwic2Vzc2lvblRva2VuIiwidXNlciIsImlkIiwiaGFuZGxlQ3JlYXRlIiwiY3JlYXRlIiwiaGFuZGxlVXBkYXRlIiwidXBkYXRlIiwiaGFuZGxlRGVsZXRlIiwiZGVsIiwianNvbiIsInZhbHVlIiwiXyIsImVudHJpZXMiLCJlIiwiYWxsb3dDb25zdHJhaW50cyIsInNraXAiLCJvcmRlciIsImNvdW50IiwiaW5jbHVkZUFsbCIsImhpbnQiLCJleHBsYWluIiwibW91bnRSb3V0ZXMiLCJyb3V0ZSIsInByb21pc2VFbnN1cmVJZGVtcG90ZW5jeSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsc0JBQXNCLEdBQUcsQ0FDN0IsTUFENkIsRUFFN0IsU0FGNkIsRUFHN0IsYUFINkIsRUFJN0IsZ0JBSjZCLEVBSzdCLHVCQUw2QixFQU03Qix3QkFONkIsQ0FBL0I7O0FBU08sTUFBTUMsYUFBTixTQUE0QkMsc0JBQTVCLENBQTBDO0FBQy9DQyxFQUFBQSxTQUFTLENBQUNDLEdBQUQsRUFBTTtBQUNiLFdBQU9BLEdBQUcsQ0FBQ0MsTUFBSixDQUFXRixTQUFsQjtBQUNEOztBQUVERyxFQUFBQSxVQUFVLENBQUNGLEdBQUQsRUFBTTtBQUNkLFVBQU1HLElBQUksR0FBR0MsTUFBTSxDQUFDQyxNQUFQLENBQWNMLEdBQUcsQ0FBQ0csSUFBbEIsRUFBd0JOLGFBQWEsQ0FBQ1MsYUFBZCxDQUE0Qk4sR0FBRyxDQUFDTyxLQUFoQyxDQUF4QixDQUFiO0FBQ0EsVUFBTUMsT0FBTyxHQUFHWCxhQUFhLENBQUNZLGVBQWQsQ0FBOEJOLElBQTlCLENBQWhCOztBQUNBLFFBQUlILEdBQUcsQ0FBQ1UsTUFBSixDQUFXQyxRQUFYLElBQXVCUixJQUFJLENBQUNTLEtBQUwsR0FBYVosR0FBRyxDQUFDVSxNQUFKLENBQVdDLFFBQW5ELEVBQTZEO0FBQzNEO0FBQ0FILE1BQUFBLE9BQU8sQ0FBQ0ksS0FBUixHQUFnQkMsTUFBTSxDQUFDYixHQUFHLENBQUNVLE1BQUosQ0FBV0MsUUFBWixDQUF0QjtBQUNEOztBQUNELFFBQUlSLElBQUksQ0FBQ1csdUJBQVQsRUFBa0M7QUFDaENOLE1BQUFBLE9BQU8sQ0FBQ00sdUJBQVIsR0FBa0NDLE1BQU0sQ0FBQ1osSUFBSSxDQUFDVyx1QkFBTixDQUF4QztBQUNEOztBQUNELFFBQUksT0FBT1gsSUFBSSxDQUFDYSxLQUFaLEtBQXNCLFFBQTFCLEVBQW9DO0FBQ2xDYixNQUFBQSxJQUFJLENBQUNhLEtBQUwsR0FBYUMsSUFBSSxDQUFDQyxLQUFMLENBQVdmLElBQUksQ0FBQ2EsS0FBaEIsQ0FBYjtBQUNEOztBQUNELFdBQU9HLGNBQ0pDLElBREksQ0FFSHBCLEdBQUcsQ0FBQ1UsTUFGRCxFQUdIVixHQUFHLENBQUNxQixJQUhELEVBSUgsS0FBS3RCLFNBQUwsQ0FBZUMsR0FBZixDQUpHLEVBS0hHLElBQUksQ0FBQ2EsS0FMRixFQU1IUixPQU5HLEVBT0hSLEdBQUcsQ0FBQ3NCLElBQUosQ0FBU0MsU0FQTixFQVFIdkIsR0FBRyxDQUFDc0IsSUFBSixDQUFTRSxPQVJOLEVBVUpDLElBVkksQ0FVQ0MsUUFBUSxJQUFJO0FBQ2hCLGFBQU87QUFBRUEsUUFBQUEsUUFBUSxFQUFFQTtBQUFaLE9BQVA7QUFDRCxLQVpJLENBQVA7QUFhRCxHQS9COEMsQ0FpQy9DOzs7QUFDQUMsRUFBQUEsU0FBUyxDQUFDM0IsR0FBRCxFQUFNO0FBQ2IsVUFBTUcsSUFBSSxHQUFHQyxNQUFNLENBQUNDLE1BQVAsQ0FBY0wsR0FBRyxDQUFDRyxJQUFsQixFQUF3Qk4sYUFBYSxDQUFDUyxhQUFkLENBQTRCTixHQUFHLENBQUNPLEtBQWhDLENBQXhCLENBQWI7QUFDQSxVQUFNQyxPQUFPLEdBQUcsRUFBaEI7O0FBRUEsU0FBSyxNQUFNb0IsR0FBWCxJQUFrQnhCLE1BQU0sQ0FBQ3lCLElBQVAsQ0FBWTFCLElBQVosQ0FBbEIsRUFBcUM7QUFDbkMsVUFBSVAsc0JBQXNCLENBQUNrQyxPQUF2QixDQUErQkYsR0FBL0IsTUFBd0MsQ0FBQyxDQUE3QyxFQUFnRDtBQUM5QyxjQUFNLElBQUlHLGNBQU1DLEtBQVYsQ0FBZ0JELGNBQU1DLEtBQU4sQ0FBWUMsYUFBNUIsRUFBMkMsOEJBQTNDLENBQU47QUFDRDtBQUNGOztBQUVELFFBQUk5QixJQUFJLENBQUMwQixJQUFMLElBQWEsSUFBakIsRUFBdUI7QUFDckJyQixNQUFBQSxPQUFPLENBQUNxQixJQUFSLEdBQWVkLE1BQU0sQ0FBQ1osSUFBSSxDQUFDMEIsSUFBTixDQUFyQjtBQUNEOztBQUNELFFBQUkxQixJQUFJLENBQUMrQixPQUFMLElBQWdCLElBQXBCLEVBQTBCO0FBQ3hCMUIsTUFBQUEsT0FBTyxDQUFDMEIsT0FBUixHQUFrQm5CLE1BQU0sQ0FBQ1osSUFBSSxDQUFDK0IsT0FBTixDQUF4QjtBQUNEOztBQUNELFFBQUkvQixJQUFJLENBQUNnQyxXQUFMLElBQW9CLElBQXhCLEVBQThCO0FBQzVCM0IsTUFBQUEsT0FBTyxDQUFDMkIsV0FBUixHQUFzQnBCLE1BQU0sQ0FBQ1osSUFBSSxDQUFDZ0MsV0FBTixDQUE1QjtBQUNEOztBQUNELFFBQUksT0FBT2hDLElBQUksQ0FBQ2lDLGNBQVosS0FBK0IsUUFBbkMsRUFBNkM7QUFDM0M1QixNQUFBQSxPQUFPLENBQUM0QixjQUFSLEdBQXlCakMsSUFBSSxDQUFDaUMsY0FBOUI7QUFDRDs7QUFDRCxRQUFJLE9BQU9qQyxJQUFJLENBQUNrQyxxQkFBWixLQUFzQyxRQUExQyxFQUFvRDtBQUNsRDdCLE1BQUFBLE9BQU8sQ0FBQzZCLHFCQUFSLEdBQWdDbEMsSUFBSSxDQUFDa0MscUJBQXJDO0FBQ0Q7O0FBQ0QsUUFBSSxPQUFPbEMsSUFBSSxDQUFDbUMsc0JBQVosS0FBdUMsUUFBM0MsRUFBcUQ7QUFDbkQ5QixNQUFBQSxPQUFPLENBQUM4QixzQkFBUixHQUFpQ25DLElBQUksQ0FBQ21DLHNCQUF0QztBQUNEOztBQUVELFdBQU9uQixjQUNKb0IsR0FESSxDQUVIdkMsR0FBRyxDQUFDVSxNQUZELEVBR0hWLEdBQUcsQ0FBQ3FCLElBSEQsRUFJSCxLQUFLdEIsU0FBTCxDQUFlQyxHQUFmLENBSkcsRUFLSEEsR0FBRyxDQUFDQyxNQUFKLENBQVd1QyxRQUxSLEVBTUhoQyxPQU5HLEVBT0hSLEdBQUcsQ0FBQ3NCLElBQUosQ0FBU0MsU0FQTixFQVNKRSxJQVRJLENBU0NDLFFBQVEsSUFBSTtBQUNoQixVQUFJLENBQUNBLFFBQVEsQ0FBQ2UsT0FBVixJQUFxQmYsUUFBUSxDQUFDZSxPQUFULENBQWlCQyxNQUFqQixJQUEyQixDQUFwRCxFQUF1RDtBQUNyRCxjQUFNLElBQUlYLGNBQU1DLEtBQVYsQ0FBZ0JELGNBQU1DLEtBQU4sQ0FBWVcsZ0JBQTVCLEVBQThDLG1CQUE5QyxDQUFOO0FBQ0Q7O0FBRUQsVUFBSSxLQUFLNUMsU0FBTCxDQUFlQyxHQUFmLE1BQXdCLE9BQTVCLEVBQXFDO0FBQ25DLGVBQU8wQixRQUFRLENBQUNlLE9BQVQsQ0FBaUIsQ0FBakIsRUFBb0JHLFlBQTNCO0FBRUEsY0FBTUMsSUFBSSxHQUFHbkIsUUFBUSxDQUFDZSxPQUFULENBQWlCLENBQWpCLENBQWI7O0FBRUEsWUFBSXpDLEdBQUcsQ0FBQ3FCLElBQUosQ0FBU3dCLElBQVQsSUFBaUJBLElBQUksQ0FBQ0wsUUFBTCxJQUFpQnhDLEdBQUcsQ0FBQ3FCLElBQUosQ0FBU3dCLElBQVQsQ0FBY0MsRUFBcEQsRUFBd0Q7QUFDdEQ7QUFDQXBCLFVBQUFBLFFBQVEsQ0FBQ2UsT0FBVCxDQUFpQixDQUFqQixFQUFvQkcsWUFBcEIsR0FBbUM1QyxHQUFHLENBQUNzQixJQUFKLENBQVNzQixZQUE1QztBQUNEO0FBQ0Y7O0FBQ0QsYUFBTztBQUFFbEIsUUFBQUEsUUFBUSxFQUFFQSxRQUFRLENBQUNlLE9BQVQsQ0FBaUIsQ0FBakI7QUFBWixPQUFQO0FBQ0QsS0F6QkksQ0FBUDtBQTBCRDs7QUFFRE0sRUFBQUEsWUFBWSxDQUFDL0MsR0FBRCxFQUFNO0FBQ2hCLFdBQU9tQixjQUFLNkIsTUFBTCxDQUNMaEQsR0FBRyxDQUFDVSxNQURDLEVBRUxWLEdBQUcsQ0FBQ3FCLElBRkMsRUFHTCxLQUFLdEIsU0FBTCxDQUFlQyxHQUFmLENBSEssRUFJTEEsR0FBRyxDQUFDRyxJQUpDLEVBS0xILEdBQUcsQ0FBQ3NCLElBQUosQ0FBU0MsU0FMSixFQU1MdkIsR0FBRyxDQUFDc0IsSUFBSixDQUFTRSxPQU5KLENBQVA7QUFRRDs7QUFFRHlCLEVBQUFBLFlBQVksQ0FBQ2pELEdBQUQsRUFBTTtBQUNoQixVQUFNZ0IsS0FBSyxHQUFHO0FBQUV3QixNQUFBQSxRQUFRLEVBQUV4QyxHQUFHLENBQUNDLE1BQUosQ0FBV3VDO0FBQXZCLEtBQWQ7QUFDQSxXQUFPckIsY0FBSytCLE1BQUwsQ0FDTGxELEdBQUcsQ0FBQ1UsTUFEQyxFQUVMVixHQUFHLENBQUNxQixJQUZDLEVBR0wsS0FBS3RCLFNBQUwsQ0FBZUMsR0FBZixDQUhLLEVBSUxnQixLQUpLLEVBS0xoQixHQUFHLENBQUNHLElBTEMsRUFNTEgsR0FBRyxDQUFDc0IsSUFBSixDQUFTQyxTQU5KLEVBT0x2QixHQUFHLENBQUNzQixJQUFKLENBQVNFLE9BUEosQ0FBUDtBQVNEOztBQUVEMkIsRUFBQUEsWUFBWSxDQUFDbkQsR0FBRCxFQUFNO0FBQ2hCLFdBQU9tQixjQUNKaUMsR0FESSxDQUNBcEQsR0FBRyxDQUFDVSxNQURKLEVBQ1lWLEdBQUcsQ0FBQ3FCLElBRGhCLEVBQ3NCLEtBQUt0QixTQUFMLENBQWVDLEdBQWYsQ0FEdEIsRUFDMkNBLEdBQUcsQ0FBQ0MsTUFBSixDQUFXdUMsUUFEdEQsRUFDZ0V4QyxHQUFHLENBQUNzQixJQUFKLENBQVNFLE9BRHpFLEVBRUpDLElBRkksQ0FFQyxNQUFNO0FBQ1YsYUFBTztBQUFFQyxRQUFBQSxRQUFRLEVBQUU7QUFBWixPQUFQO0FBQ0QsS0FKSSxDQUFQO0FBS0Q7O0FBRW1CLFNBQWJwQixhQUFhLENBQUNDLEtBQUQsRUFBUTtBQUMxQixVQUFNOEMsSUFBSSxHQUFHLEVBQWI7O0FBQ0EsU0FBSyxNQUFNLENBQUN6QixHQUFELEVBQU0wQixLQUFOLENBQVgsSUFBMkJDLGdCQUFFQyxPQUFGLENBQVVqRCxLQUFWLENBQTNCLEVBQTZDO0FBQzNDLFVBQUk7QUFDRjhDLFFBQUFBLElBQUksQ0FBQ3pCLEdBQUQsQ0FBSixHQUFZWCxJQUFJLENBQUNDLEtBQUwsQ0FBV29DLEtBQVgsQ0FBWjtBQUNELE9BRkQsQ0FFRSxPQUFPRyxDQUFQLEVBQVU7QUFDVkosUUFBQUEsSUFBSSxDQUFDekIsR0FBRCxDQUFKLEdBQVkwQixLQUFaO0FBQ0Q7QUFDRjs7QUFDRCxXQUFPRCxJQUFQO0FBQ0Q7O0FBRXFCLFNBQWY1QyxlQUFlLENBQUNOLElBQUQsRUFBTztBQUMzQixVQUFNdUQsZ0JBQWdCLEdBQUcsQ0FDdkIsTUFEdUIsRUFFdkIsT0FGdUIsRUFHdkIsT0FIdUIsRUFJdkIsT0FKdUIsRUFLdkIsTUFMdUIsRUFNdkIsYUFOdUIsRUFPdkIsU0FQdUIsRUFRdkIsWUFSdUIsRUFTdkIseUJBVHVCLEVBVXZCLE9BVnVCLEVBV3ZCLGdCQVh1QixFQVl2Qix1QkFadUIsRUFhdkIsd0JBYnVCLEVBY3ZCLE1BZHVCLEVBZXZCLFNBZnVCLENBQXpCOztBQWtCQSxTQUFLLE1BQU05QixHQUFYLElBQWtCeEIsTUFBTSxDQUFDeUIsSUFBUCxDQUFZMUIsSUFBWixDQUFsQixFQUFxQztBQUNuQyxVQUFJdUQsZ0JBQWdCLENBQUM1QixPQUFqQixDQUF5QkYsR0FBekIsTUFBa0MsQ0FBQyxDQUF2QyxFQUEwQztBQUN4QyxjQUFNLElBQUlHLGNBQU1DLEtBQVYsQ0FBZ0JELGNBQU1DLEtBQU4sQ0FBWUMsYUFBNUIsRUFBNEMsZ0NBQStCTCxHQUFJLEVBQS9FLENBQU47QUFDRDtBQUNGOztBQUNELFVBQU1wQixPQUFPLEdBQUcsRUFBaEI7O0FBQ0EsUUFBSUwsSUFBSSxDQUFDd0QsSUFBVCxFQUFlO0FBQ2JuRCxNQUFBQSxPQUFPLENBQUNtRCxJQUFSLEdBQWU5QyxNQUFNLENBQUNWLElBQUksQ0FBQ3dELElBQU4sQ0FBckI7QUFDRDs7QUFDRCxRQUFJeEQsSUFBSSxDQUFDUyxLQUFMLElBQWNULElBQUksQ0FBQ1MsS0FBTCxLQUFlLENBQWpDLEVBQW9DO0FBQ2xDSixNQUFBQSxPQUFPLENBQUNJLEtBQVIsR0FBZ0JDLE1BQU0sQ0FBQ1YsSUFBSSxDQUFDUyxLQUFOLENBQXRCO0FBQ0QsS0FGRCxNQUVPO0FBQ0xKLE1BQUFBLE9BQU8sQ0FBQ0ksS0FBUixHQUFnQkMsTUFBTSxDQUFDLEdBQUQsQ0FBdEI7QUFDRDs7QUFDRCxRQUFJVixJQUFJLENBQUN5RCxLQUFULEVBQWdCO0FBQ2RwRCxNQUFBQSxPQUFPLENBQUNvRCxLQUFSLEdBQWdCN0MsTUFBTSxDQUFDWixJQUFJLENBQUN5RCxLQUFOLENBQXRCO0FBQ0Q7O0FBQ0QsUUFBSXpELElBQUksQ0FBQzBELEtBQVQsRUFBZ0I7QUFDZHJELE1BQUFBLE9BQU8sQ0FBQ3FELEtBQVIsR0FBZ0IsSUFBaEI7QUFDRDs7QUFDRCxRQUFJMUQsSUFBSSxDQUFDMEIsSUFBTCxJQUFhLElBQWpCLEVBQXVCO0FBQ3JCckIsTUFBQUEsT0FBTyxDQUFDcUIsSUFBUixHQUFlZCxNQUFNLENBQUNaLElBQUksQ0FBQzBCLElBQU4sQ0FBckI7QUFDRDs7QUFDRCxRQUFJMUIsSUFBSSxDQUFDZ0MsV0FBTCxJQUFvQixJQUF4QixFQUE4QjtBQUM1QjNCLE1BQUFBLE9BQU8sQ0FBQzJCLFdBQVIsR0FBc0JwQixNQUFNLENBQUNaLElBQUksQ0FBQ2dDLFdBQU4sQ0FBNUI7QUFDRDs7QUFDRCxRQUFJaEMsSUFBSSxDQUFDK0IsT0FBTCxJQUFnQixJQUFwQixFQUEwQjtBQUN4QjFCLE1BQUFBLE9BQU8sQ0FBQzBCLE9BQVIsR0FBa0JuQixNQUFNLENBQUNaLElBQUksQ0FBQytCLE9BQU4sQ0FBeEI7QUFDRDs7QUFDRCxRQUFJL0IsSUFBSSxDQUFDMkQsVUFBVCxFQUFxQjtBQUNuQnRELE1BQUFBLE9BQU8sQ0FBQ3NELFVBQVIsR0FBcUIsSUFBckI7QUFDRDs7QUFDRCxRQUFJLE9BQU8zRCxJQUFJLENBQUNpQyxjQUFaLEtBQStCLFFBQW5DLEVBQTZDO0FBQzNDNUIsTUFBQUEsT0FBTyxDQUFDNEIsY0FBUixHQUF5QmpDLElBQUksQ0FBQ2lDLGNBQTlCO0FBQ0Q7O0FBQ0QsUUFBSSxPQUFPakMsSUFBSSxDQUFDa0MscUJBQVosS0FBc0MsUUFBMUMsRUFBb0Q7QUFDbEQ3QixNQUFBQSxPQUFPLENBQUM2QixxQkFBUixHQUFnQ2xDLElBQUksQ0FBQ2tDLHFCQUFyQztBQUNEOztBQUNELFFBQUksT0FBT2xDLElBQUksQ0FBQ21DLHNCQUFaLEtBQXVDLFFBQTNDLEVBQXFEO0FBQ25EOUIsTUFBQUEsT0FBTyxDQUFDOEIsc0JBQVIsR0FBaUNuQyxJQUFJLENBQUNtQyxzQkFBdEM7QUFDRDs7QUFDRCxRQUFJbkMsSUFBSSxDQUFDNEQsSUFBTCxLQUFjLE9BQU81RCxJQUFJLENBQUM0RCxJQUFaLEtBQXFCLFFBQXJCLElBQWlDLE9BQU81RCxJQUFJLENBQUM0RCxJQUFaLEtBQXFCLFFBQXBFLENBQUosRUFBbUY7QUFDakZ2RCxNQUFBQSxPQUFPLENBQUN1RCxJQUFSLEdBQWU1RCxJQUFJLENBQUM0RCxJQUFwQjtBQUNEOztBQUNELFFBQUk1RCxJQUFJLENBQUM2RCxPQUFULEVBQWtCO0FBQ2hCeEQsTUFBQUEsT0FBTyxDQUFDd0QsT0FBUixHQUFrQjdELElBQUksQ0FBQzZELE9BQXZCO0FBQ0Q7O0FBQ0QsV0FBT3hELE9BQVA7QUFDRDs7QUFFRHlELEVBQUFBLFdBQVcsR0FBRztBQUNaLFNBQUtDLEtBQUwsQ0FBVyxLQUFYLEVBQWtCLHFCQUFsQixFQUF5Q2xFLEdBQUcsSUFBSTtBQUM5QyxhQUFPLEtBQUtFLFVBQUwsQ0FBZ0JGLEdBQWhCLENBQVA7QUFDRCxLQUZEO0FBR0EsU0FBS2tFLEtBQUwsQ0FBVyxLQUFYLEVBQWtCLCtCQUFsQixFQUFtRGxFLEdBQUcsSUFBSTtBQUN4RCxhQUFPLEtBQUsyQixTQUFMLENBQWUzQixHQUFmLENBQVA7QUFDRCxLQUZEO0FBR0EsU0FBS2tFLEtBQUwsQ0FBVyxNQUFYLEVBQW1CLHFCQUFuQixFQUEwQ0MscUNBQTFDLEVBQW9FbkUsR0FBRyxJQUFJO0FBQ3pFLGFBQU8sS0FBSytDLFlBQUwsQ0FBa0IvQyxHQUFsQixDQUFQO0FBQ0QsS0FGRDtBQUdBLFNBQUtrRSxLQUFMLENBQVcsS0FBWCxFQUFrQiwrQkFBbEIsRUFBbURDLHFDQUFuRCxFQUE2RW5FLEdBQUcsSUFBSTtBQUNsRixhQUFPLEtBQUtpRCxZQUFMLENBQWtCakQsR0FBbEIsQ0FBUDtBQUNELEtBRkQ7QUFHQSxTQUFLa0UsS0FBTCxDQUFXLFFBQVgsRUFBcUIsK0JBQXJCLEVBQXNEbEUsR0FBRyxJQUFJO0FBQzNELGFBQU8sS0FBS21ELFlBQUwsQ0FBa0JuRCxHQUFsQixDQUFQO0FBQ0QsS0FGRDtBQUdEOztBQTVOOEM7OztlQStObENILGEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHJvbWlzZVJvdXRlciBmcm9tICcuLi9Qcm9taXNlUm91dGVyJztcbmltcG9ydCByZXN0IGZyb20gJy4uL3Jlc3QnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBQYXJzZSBmcm9tICdwYXJzZS9ub2RlJztcbmltcG9ydCB7IHByb21pc2VFbnN1cmVJZGVtcG90ZW5jeSB9IGZyb20gJy4uL21pZGRsZXdhcmVzJztcblxuY29uc3QgQUxMT1dFRF9HRVRfUVVFUllfS0VZUyA9IFtcbiAgJ2tleXMnLFxuICAnaW5jbHVkZScsXG4gICdleGNsdWRlS2V5cycsXG4gICdyZWFkUHJlZmVyZW5jZScsXG4gICdpbmNsdWRlUmVhZFByZWZlcmVuY2UnLFxuICAnc3VicXVlcnlSZWFkUHJlZmVyZW5jZScsXG5dO1xuXG5leHBvcnQgY2xhc3MgQ2xhc3Nlc1JvdXRlciBleHRlbmRzIFByb21pc2VSb3V0ZXIge1xuICBjbGFzc05hbWUocmVxKSB7XG4gICAgcmV0dXJuIHJlcS5wYXJhbXMuY2xhc3NOYW1lO1xuICB9XG5cbiAgaGFuZGxlRmluZChyZXEpIHtcbiAgICBjb25zdCBib2R5ID0gT2JqZWN0LmFzc2lnbihyZXEuYm9keSwgQ2xhc3Nlc1JvdXRlci5KU09ORnJvbVF1ZXJ5KHJlcS5xdWVyeSkpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBDbGFzc2VzUm91dGVyLm9wdGlvbnNGcm9tQm9keShib2R5KTtcbiAgICBpZiAocmVxLmNvbmZpZy5tYXhMaW1pdCAmJiBib2R5LmxpbWl0ID4gcmVxLmNvbmZpZy5tYXhMaW1pdCkge1xuICAgICAgLy8gU2lsZW50bHkgcmVwbGFjZSB0aGUgbGltaXQgb24gdGhlIHF1ZXJ5IHdpdGggdGhlIG1heCBjb25maWd1cmVkXG4gICAgICBvcHRpb25zLmxpbWl0ID0gTnVtYmVyKHJlcS5jb25maWcubWF4TGltaXQpO1xuICAgIH1cbiAgICBpZiAoYm9keS5yZWRpcmVjdENsYXNzTmFtZUZvcktleSkge1xuICAgICAgb3B0aW9ucy5yZWRpcmVjdENsYXNzTmFtZUZvcktleSA9IFN0cmluZyhib2R5LnJlZGlyZWN0Q2xhc3NOYW1lRm9yS2V5KTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBib2R5LndoZXJlID09PSAnc3RyaW5nJykge1xuICAgICAgYm9keS53aGVyZSA9IEpTT04ucGFyc2UoYm9keS53aGVyZSk7XG4gICAgfVxuICAgIHJldHVybiByZXN0XG4gICAgICAuZmluZChcbiAgICAgICAgcmVxLmNvbmZpZyxcbiAgICAgICAgcmVxLmF1dGgsXG4gICAgICAgIHRoaXMuY2xhc3NOYW1lKHJlcSksXG4gICAgICAgIGJvZHkud2hlcmUsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHJlcS5pbmZvLmNsaWVudFNESyxcbiAgICAgICAgcmVxLmluZm8uY29udGV4dFxuICAgICAgKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICByZXR1cm4geyByZXNwb25zZTogcmVzcG9uc2UgfTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIHByb21pc2UgZm9yIGEge3Jlc3BvbnNlfSBvYmplY3QuXG4gIGhhbmRsZUdldChyZXEpIHtcbiAgICBjb25zdCBib2R5ID0gT2JqZWN0LmFzc2lnbihyZXEuYm9keSwgQ2xhc3Nlc1JvdXRlci5KU09ORnJvbVF1ZXJ5KHJlcS5xdWVyeSkpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcblxuICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGJvZHkpKSB7XG4gICAgICBpZiAoQUxMT1dFRF9HRVRfUVVFUllfS0VZUy5pbmRleE9mKGtleSkgPT09IC0xKSB7XG4gICAgICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihQYXJzZS5FcnJvci5JTlZBTElEX1FVRVJZLCAnSW1wcm9wZXIgZW5jb2RlIG9mIHBhcmFtZXRlcicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChib2R5LmtleXMgIT0gbnVsbCkge1xuICAgICAgb3B0aW9ucy5rZXlzID0gU3RyaW5nKGJvZHkua2V5cyk7XG4gICAgfVxuICAgIGlmIChib2R5LmluY2x1ZGUgIT0gbnVsbCkge1xuICAgICAgb3B0aW9ucy5pbmNsdWRlID0gU3RyaW5nKGJvZHkuaW5jbHVkZSk7XG4gICAgfVxuICAgIGlmIChib2R5LmV4Y2x1ZGVLZXlzICE9IG51bGwpIHtcbiAgICAgIG9wdGlvbnMuZXhjbHVkZUtleXMgPSBTdHJpbmcoYm9keS5leGNsdWRlS2V5cyk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYm9keS5yZWFkUHJlZmVyZW5jZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG9wdGlvbnMucmVhZFByZWZlcmVuY2UgPSBib2R5LnJlYWRQcmVmZXJlbmNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGJvZHkuaW5jbHVkZVJlYWRQcmVmZXJlbmNlID09PSAnc3RyaW5nJykge1xuICAgICAgb3B0aW9ucy5pbmNsdWRlUmVhZFByZWZlcmVuY2UgPSBib2R5LmluY2x1ZGVSZWFkUHJlZmVyZW5jZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBib2R5LnN1YnF1ZXJ5UmVhZFByZWZlcmVuY2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICBvcHRpb25zLnN1YnF1ZXJ5UmVhZFByZWZlcmVuY2UgPSBib2R5LnN1YnF1ZXJ5UmVhZFByZWZlcmVuY2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3RcbiAgICAgIC5nZXQoXG4gICAgICAgIHJlcS5jb25maWcsXG4gICAgICAgIHJlcS5hdXRoLFxuICAgICAgICB0aGlzLmNsYXNzTmFtZShyZXEpLFxuICAgICAgICByZXEucGFyYW1zLm9iamVjdElkLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICByZXEuaW5mby5jbGllbnRTREtcbiAgICAgIClcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5yZXN1bHRzIHx8IHJlc3BvbnNlLnJlc3VsdHMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgUGFyc2UuRXJyb3IoUGFyc2UuRXJyb3IuT0JKRUNUX05PVF9GT1VORCwgJ09iamVjdCBub3QgZm91bmQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jbGFzc05hbWUocmVxKSA9PT0gJ19Vc2VyJykge1xuICAgICAgICAgIGRlbGV0ZSByZXNwb25zZS5yZXN1bHRzWzBdLnNlc3Npb25Ub2tlbjtcblxuICAgICAgICAgIGNvbnN0IHVzZXIgPSByZXNwb25zZS5yZXN1bHRzWzBdO1xuXG4gICAgICAgICAgaWYgKHJlcS5hdXRoLnVzZXIgJiYgdXNlci5vYmplY3RJZCA9PSByZXEuYXV0aC51c2VyLmlkKSB7XG4gICAgICAgICAgICAvLyBGb3JjZSB0aGUgc2Vzc2lvbiB0b2tlblxuICAgICAgICAgICAgcmVzcG9uc2UucmVzdWx0c1swXS5zZXNzaW9uVG9rZW4gPSByZXEuaW5mby5zZXNzaW9uVG9rZW47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHJlc3BvbnNlOiByZXNwb25zZS5yZXN1bHRzWzBdIH07XG4gICAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZUNyZWF0ZShyZXEpIHtcbiAgICByZXR1cm4gcmVzdC5jcmVhdGUoXG4gICAgICByZXEuY29uZmlnLFxuICAgICAgcmVxLmF1dGgsXG4gICAgICB0aGlzLmNsYXNzTmFtZShyZXEpLFxuICAgICAgcmVxLmJvZHksXG4gICAgICByZXEuaW5mby5jbGllbnRTREssXG4gICAgICByZXEuaW5mby5jb250ZXh0XG4gICAgKTtcbiAgfVxuXG4gIGhhbmRsZVVwZGF0ZShyZXEpIHtcbiAgICBjb25zdCB3aGVyZSA9IHsgb2JqZWN0SWQ6IHJlcS5wYXJhbXMub2JqZWN0SWQgfTtcbiAgICByZXR1cm4gcmVzdC51cGRhdGUoXG4gICAgICByZXEuY29uZmlnLFxuICAgICAgcmVxLmF1dGgsXG4gICAgICB0aGlzLmNsYXNzTmFtZShyZXEpLFxuICAgICAgd2hlcmUsXG4gICAgICByZXEuYm9keSxcbiAgICAgIHJlcS5pbmZvLmNsaWVudFNESyxcbiAgICAgIHJlcS5pbmZvLmNvbnRleHRcbiAgICApO1xuICB9XG5cbiAgaGFuZGxlRGVsZXRlKHJlcSkge1xuICAgIHJldHVybiByZXN0XG4gICAgICAuZGVsKHJlcS5jb25maWcsIHJlcS5hdXRoLCB0aGlzLmNsYXNzTmFtZShyZXEpLCByZXEucGFyYW1zLm9iamVjdElkLCByZXEuaW5mby5jb250ZXh0KVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICByZXR1cm4geyByZXNwb25zZToge30gfTtcbiAgICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIEpTT05Gcm9tUXVlcnkocXVlcnkpIHtcbiAgICBjb25zdCBqc29uID0ge307XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgXy5lbnRyaWVzKHF1ZXJ5KSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAganNvbltrZXldID0gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGpzb25ba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ganNvbjtcbiAgfVxuXG4gIHN0YXRpYyBvcHRpb25zRnJvbUJvZHkoYm9keSkge1xuICAgIGNvbnN0IGFsbG93Q29uc3RyYWludHMgPSBbXG4gICAgICAnc2tpcCcsXG4gICAgICAnbGltaXQnLFxuICAgICAgJ29yZGVyJyxcbiAgICAgICdjb3VudCcsXG4gICAgICAna2V5cycsXG4gICAgICAnZXhjbHVkZUtleXMnLFxuICAgICAgJ2luY2x1ZGUnLFxuICAgICAgJ2luY2x1ZGVBbGwnLFxuICAgICAgJ3JlZGlyZWN0Q2xhc3NOYW1lRm9yS2V5JyxcbiAgICAgICd3aGVyZScsXG4gICAgICAncmVhZFByZWZlcmVuY2UnLFxuICAgICAgJ2luY2x1ZGVSZWFkUHJlZmVyZW5jZScsXG4gICAgICAnc3VicXVlcnlSZWFkUHJlZmVyZW5jZScsXG4gICAgICAnaGludCcsXG4gICAgICAnZXhwbGFpbicsXG4gICAgXTtcblxuICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGJvZHkpKSB7XG4gICAgICBpZiAoYWxsb3dDb25zdHJhaW50cy5pbmRleE9mKGtleSkgPT09IC0xKSB7XG4gICAgICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihQYXJzZS5FcnJvci5JTlZBTElEX1FVRVJZLCBgSW52YWxpZCBwYXJhbWV0ZXIgZm9yIHF1ZXJ5OiAke2tleX1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgb3B0aW9ucyA9IHt9O1xuICAgIGlmIChib2R5LnNraXApIHtcbiAgICAgIG9wdGlvbnMuc2tpcCA9IE51bWJlcihib2R5LnNraXApO1xuICAgIH1cbiAgICBpZiAoYm9keS5saW1pdCB8fCBib2R5LmxpbWl0ID09PSAwKSB7XG4gICAgICBvcHRpb25zLmxpbWl0ID0gTnVtYmVyKGJvZHkubGltaXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zLmxpbWl0ID0gTnVtYmVyKDEwMCk7XG4gICAgfVxuICAgIGlmIChib2R5Lm9yZGVyKSB7XG4gICAgICBvcHRpb25zLm9yZGVyID0gU3RyaW5nKGJvZHkub3JkZXIpO1xuICAgIH1cbiAgICBpZiAoYm9keS5jb3VudCkge1xuICAgICAgb3B0aW9ucy5jb3VudCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChib2R5LmtleXMgIT0gbnVsbCkge1xuICAgICAgb3B0aW9ucy5rZXlzID0gU3RyaW5nKGJvZHkua2V5cyk7XG4gICAgfVxuICAgIGlmIChib2R5LmV4Y2x1ZGVLZXlzICE9IG51bGwpIHtcbiAgICAgIG9wdGlvbnMuZXhjbHVkZUtleXMgPSBTdHJpbmcoYm9keS5leGNsdWRlS2V5cyk7XG4gICAgfVxuICAgIGlmIChib2R5LmluY2x1ZGUgIT0gbnVsbCkge1xuICAgICAgb3B0aW9ucy5pbmNsdWRlID0gU3RyaW5nKGJvZHkuaW5jbHVkZSk7XG4gICAgfVxuICAgIGlmIChib2R5LmluY2x1ZGVBbGwpIHtcbiAgICAgIG9wdGlvbnMuaW5jbHVkZUFsbCA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYm9keS5yZWFkUHJlZmVyZW5jZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG9wdGlvbnMucmVhZFByZWZlcmVuY2UgPSBib2R5LnJlYWRQcmVmZXJlbmNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGJvZHkuaW5jbHVkZVJlYWRQcmVmZXJlbmNlID09PSAnc3RyaW5nJykge1xuICAgICAgb3B0aW9ucy5pbmNsdWRlUmVhZFByZWZlcmVuY2UgPSBib2R5LmluY2x1ZGVSZWFkUHJlZmVyZW5jZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBib2R5LnN1YnF1ZXJ5UmVhZFByZWZlcmVuY2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICBvcHRpb25zLnN1YnF1ZXJ5UmVhZFByZWZlcmVuY2UgPSBib2R5LnN1YnF1ZXJ5UmVhZFByZWZlcmVuY2U7XG4gICAgfVxuICAgIGlmIChib2R5LmhpbnQgJiYgKHR5cGVvZiBib2R5LmhpbnQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBib2R5LmhpbnQgPT09ICdvYmplY3QnKSkge1xuICAgICAgb3B0aW9ucy5oaW50ID0gYm9keS5oaW50O1xuICAgIH1cbiAgICBpZiAoYm9keS5leHBsYWluKSB7XG4gICAgICBvcHRpb25zLmV4cGxhaW4gPSBib2R5LmV4cGxhaW47XG4gICAgfVxuICAgIHJldHVybiBvcHRpb25zO1xuICB9XG5cbiAgbW91bnRSb3V0ZXMoKSB7XG4gICAgdGhpcy5yb3V0ZSgnR0VUJywgJy9jbGFzc2VzLzpjbGFzc05hbWUnLCByZXEgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRmluZChyZXEpO1xuICAgIH0pO1xuICAgIHRoaXMucm91dGUoJ0dFVCcsICcvY2xhc3Nlcy86Y2xhc3NOYW1lLzpvYmplY3RJZCcsIHJlcSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVHZXQocmVxKTtcbiAgICB9KTtcbiAgICB0aGlzLnJvdXRlKCdQT1NUJywgJy9jbGFzc2VzLzpjbGFzc05hbWUnLCBwcm9taXNlRW5zdXJlSWRlbXBvdGVuY3ksIHJlcSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVDcmVhdGUocmVxKTtcbiAgICB9KTtcbiAgICB0aGlzLnJvdXRlKCdQVVQnLCAnL2NsYXNzZXMvOmNsYXNzTmFtZS86b2JqZWN0SWQnLCBwcm9taXNlRW5zdXJlSWRlbXBvdGVuY3ksIHJlcSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVVcGRhdGUocmVxKTtcbiAgICB9KTtcbiAgICB0aGlzLnJvdXRlKCdERUxFVEUnLCAnL2NsYXNzZXMvOmNsYXNzTmFtZS86b2JqZWN0SWQnLCByZXEgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRGVsZXRlKHJlcSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2xhc3Nlc1JvdXRlcjtcbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Sb3V0ZXJzL0NsYXNzZXNSb3V0ZXIuanMiXSwibmFtZXMiOlsiQUxMT1dFRF9HRVRfUVVFUllfS0VZUyIsIlByb21pc2VSb3V0ZXIiLCJjbGFzc05hbWUiLCJyZXEiLCJoYW5kbGVGaW5kIiwiYm9keSIsIk9iamVjdCIsIkNsYXNzZXNSb3V0ZXIiLCJvcHRpb25zIiwiTnVtYmVyIiwiU3RyaW5nIiwiSlNPTiIsInJlc3BvbnNlIiwiaGFuZGxlR2V0IiwiUGFyc2UiLCJ1c2VyIiwiaGFuZGxlQ3JlYXRlIiwicmVzdCIsImhhbmRsZVVwZGF0ZSIsIndoZXJlIiwib2JqZWN0SWQiLCJoYW5kbGVEZWxldGUiLCJKU09ORnJvbVF1ZXJ5IiwianNvbiIsIl8iLCJvcHRpb25zRnJvbUJvZHkiLCJhbGxvd0NvbnN0cmFpbnRzIiwia2V5IiwibW91bnRSb3V0ZXMiLCJwcm9taXNlRW5zdXJlSWRlbXBvdGVuY3kiXSwibWFwcGluZ3MiOiJ1bytCQUlBOzZPQUpBLEdBQUEsQ0FBQSxjQUFBLHlCQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLGtCQUFBLENBQUEsQ0FBQSxDQUFBLENBQ0EsR0FBQSxDQUFBLEtBQUEseUJBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsQ0FBQSxDQUNBLEdBQUEsQ0FBQSxPQUFBLHlCQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLENBQUEsQ0FDQSxHQUFBLENBQUEsS0FBQSx5QkFBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxZQUFBLENBQUEsQ0FBQSxDQUFBLENBQ0EsR0FBQSxDQUFBLFlBQUEseUJBQUEsT0FBQSxDQUFBLGdCQUFBLENBQUEsQ0FBQSxDLGdQQUVBLEtBQU1BLENBQUFBLHNCQUFzQix5QkFBRyxDQUFBLE1BQUEsQ0FBQSxTQUFBLENBQUEsYUFBQSxDQUFBLGdCQUFBLENBQUEsdUJBQUEsQ0FBL0Isd0JBQStCLENBQUgsQ0FBNUIsQ0FTTyxLQUFBLENBQUEsYUFB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LFNBQUEsQ0FBUCxHQUFPLENBQVAsQ0FERixDQUFBLEVBSlksd0JBT1osS0FBQSxLQUFBLENBQUEsTUFBQSxDQUFBLHFCQUFBLENBQTBDMEIsWUFBQUEsQ0FBMUMsd0JBQUEsQ0FBb0UxQixHQUFHLEVBQUksaURBQ3pFLE1BQU8sTUFBQSxZQUFBLENBQVAsR0FBTyxDQUFQLENBREYsQ0FBQSxFQVBZLHdCQVVaLEtBQUEsS0FBQSxDQUFBLEtBQUEsQ0FBQSwrQkFBQSxDQUFtRDBCLFlBQUFBLENBQW5ELHdCQUFBLENBQTZFMUIsR0FBRyxFQUFJLGlEQUNsRixNQUFPLE1BQUEsWUFBQSxDQUFQLEdBQU8sQ0FBUCxDQURGLENBQUEsRUFWWSx3QkFhWixLQUFBLEtBQUEsQ0FBQSxRQUFBLENBQUEsK0JBQUEsQ0FBc0RBLEdBQUcsRUFBSSxpREFDM0QsTUFBTyxNQUFBLFlBQUEsQ0FBUCxHQUFPLENBQVAsQ0FERixDQUFBLEVBR0QsQ0E1TjhDLEMsb0dBK05sQ0ksYSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9taXNlUm91dGVyIGZyb20gJy4uL1Byb21pc2VSb3V0ZXInO1xuaW1wb3J0IHJlc3QgZnJvbSAnLi4vcmVzdCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFBhcnNlIGZyb20gJ3BhcnNlL25vZGUnO1xuaW1wb3J0IHsgcHJvbWlzZUVuc3VyZUlkZW1wb3RlbmN5IH0gZnJvbSAnLi4vbWlkZGxld2FyZXMnO1xuXG5jb25zdCBBTExPV0VEX0dFVF9RVUVSWV9LRVlTID0gW1xuICAna2V5cycsXG4gICdpbmNsdWRlJyxcbiAgJ2V4Y2x1ZGVLZXlzJyxcbiAgJ3JlYWRQcmVmZXJlbmNlJyxcbiAgJ2luY2x1ZGVSZWFkUHJlZmVyZW5jZScsXG4gICdzdWJxdWVyeVJlYWRQcmVmZXJlbmNlJyxcbl07XG5cbmV4cG9ydCBjbGFzcyBDbGFzc2VzUm91dGVyIGV4dGVuZHMgUHJvbWlzZVJvdXRlciB7XG4gIGNsYXNzTmFtZShyZXEpIHtcbiAgICByZXR1cm4gcmVxLnBhcmFtcy5jbGFzc05hbWU7XG4gIH1cblxuICBoYW5kbGVGaW5kKHJlcSkge1xuICAgIGNvbnN0IGJvZHkgPSBPYmplY3QuYXNzaWduKHJlcS5ib2R5LCBDbGFzc2VzUm91dGVyLkpTT05Gcm9tUXVlcnkocmVxLnF1ZXJ5KSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IENsYXNzZXNSb3V0ZXIub3B0aW9uc0Zyb21Cb2R5KGJvZHkpO1xuICAgIGlmIChyZXEuY29uZmlnLm1heExpbWl0ICYmIGJvZHkubGltaXQgPiByZXEuY29uZmlnLm1heExpbWl0KSB7XG4gICAgICAvLyBTaWxlbnRseSByZXBsYWNlIHRoZSBsaW1pdCBvbiB0aGUgcXVlcnkgd2l0aCB0aGUgbWF4IGNvbmZpZ3VyZWRcbiAgICAgIG9wdGlvbnMubGltaXQgPSBOdW1iZXIocmVxLmNvbmZpZy5tYXhMaW1pdCk7XG4gICAgfVxuICAgIGlmIChib2R5LnJlZGlyZWN0Q2xhc3NOYW1lRm9yS2V5KSB7XG4gICAgICBvcHRpb25zLnJlZGlyZWN0Q2xhc3NOYW1lRm9yS2V5ID0gU3RyaW5nKGJvZHkucmVkaXJlY3RDbGFzc05hbWVGb3JLZXkpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGJvZHkud2hlcmUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBib2R5LndoZXJlID0gSlNPTi5wYXJzZShib2R5LndoZXJlKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3RcbiAgICAgIC5maW5kKFxuICAgICAgICByZXEuY29uZmlnLFxuICAgICAgICByZXEuYXV0aCxcbiAgICAgICAgdGhpcy5jbGFzc05hbWUocmVxKSxcbiAgICAgICAgYm9keS53aGVyZSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgcmVxLmluZm8uY2xpZW50U0RLLFxuICAgICAgICByZXEuaW5mby5jb250ZXh0XG4gICAgICApXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIHJldHVybiB7IHJlc3BvbnNlOiByZXNwb25zZSB9O1xuICAgICAgfSk7XG4gIH1cblxuICAvLyBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgYSB7cmVzcG9uc2V9IG9iamVjdC5cbiAgaGFuZGxlR2V0KHJlcSkge1xuICAgIGNvbnN0IGJvZHkgPSBPYmplY3QuYXNzaWduKHJlcS5ib2R5LCBDbGFzc2VzUm91dGVyLkpTT05Gcm9tUXVlcnkocmVxLnF1ZXJ5KSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHt9O1xuXG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoYm9keSkpIHtcbiAgICAgIGlmIChBTExPV0VEX0dFVF9RVUVSWV9LRVlTLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKFBhcnNlLkVycm9yLklOVkFMSURfUVVFUlksICdJbXByb3BlciBlbmNvZGUgb2YgcGFyYW1ldGVyJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGJvZHkua2V5cyAhPSBudWxsKSB7XG4gICAgICBvcHRpb25zLmtleXMgPSBTdHJpbmcoYm9keS5rZXlzKTtcbiAgICB9XG4gICAgaWYgKGJvZHkuaW5jbHVkZSAhPSBudWxsKSB7XG4gICAgICBvcHRpb25zLmluY2x1ZGUgPSBTdHJpbmcoYm9keS5pbmNsdWRlKTtcbiAgICB9XG4gICAgaWYgKGJvZHkuZXhjbHVkZUtleXMgIT0gbnVsbCkge1xuICAgICAgb3B0aW9ucy5leGNsdWRlS2V5cyA9IFN0cmluZyhib2R5LmV4Y2x1ZGVLZXlzKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBib2R5LnJlYWRQcmVmZXJlbmNlID09PSAnc3RyaW5nJykge1xuICAgICAgb3B0aW9ucy5yZWFkUHJlZmVyZW5jZSA9IGJvZHkucmVhZFByZWZlcmVuY2U7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYm9keS5pbmNsdWRlUmVhZFByZWZlcmVuY2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICBvcHRpb25zLmluY2x1ZGVSZWFkUHJlZmVyZW5jZSA9IGJvZHkuaW5jbHVkZVJlYWRQcmVmZXJlbmNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGJvZHkuc3VicXVlcnlSZWFkUHJlZmVyZW5jZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG9wdGlvbnMuc3VicXVlcnlSZWFkUHJlZmVyZW5jZSA9IGJvZHkuc3VicXVlcnlSZWFkUHJlZmVyZW5jZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdFxuICAgICAgLmdldChcbiAgICAgICAgcmVxLmNvbmZpZyxcbiAgICAgICAgcmVxLmF1dGgsXG4gICAgICAgIHRoaXMuY2xhc3NOYW1lKHJlcSksXG4gICAgICAgIHJlcS5wYXJhbXMub2JqZWN0SWQsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHJlcS5pbmZvLmNsaWVudFNES1xuICAgICAgKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICBpZiAoIXJlc3BvbnNlLnJlc3VsdHMgfHwgcmVzcG9uc2UucmVzdWx0cy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihQYXJzZS5FcnJvci5PQkpFQ1RfTk9UX0ZPVU5ELCAnT2JqZWN0IG5vdCBmb3VuZC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNsYXNzTmFtZShyZXEpID09PSAnX1VzZXInKSB7XG4gICAgICAgICAgZGVsZXRlIHJlc3BvbnNlLnJlc3VsdHNbMF0uc2Vzc2lvblRva2VuO1xuXG4gICAgICAgICAgY29uc3QgdXNlciA9IHJlc3BvbnNlLnJlc3VsdHNbMF07XG5cbiAgICAgICAgICBpZiAocmVxLmF1dGgudXNlciAmJiB1c2VyLm9iamVjdElkID09IHJlcS5hdXRoLnVzZXIuaWQpIHtcbiAgICAgICAgICAgIC8vIEZvcmNlIHRoZSBzZXNzaW9uIHRva2VuXG4gICAgICAgICAgICByZXNwb25zZS5yZXN1bHRzWzBdLnNlc3Npb25Ub2tlbiA9IHJlcS5pbmZvLnNlc3Npb25Ub2tlbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgcmVzcG9uc2U6IHJlc3BvbnNlLnJlc3VsdHNbMF0gfTtcbiAgICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlQ3JlYXRlKHJlcSkge1xuICAgIHJldHVybiByZXN0LmNyZWF0ZShcbiAgICAgIHJlcS5jb25maWcsXG4gICAgICByZXEuYXV0aCxcbiAgICAgIHRoaXMuY2xhc3NOYW1lKHJlcSksXG4gICAgICByZXEuYm9keSxcbiAgICAgIHJlcS5pbmZvLmNsaWVudFNESyxcbiAgICAgIHJlcS5pbmZvLmNvbnRleHRcbiAgICApO1xuICB9XG5cbiAgaGFuZGxlVXBkYXRlKHJlcSkge1xuICAgIGNvbnN0IHdoZXJlID0geyBvYmplY3RJZDogcmVxLnBhcmFtcy5vYmplY3RJZCB9O1xuICAgIHJldHVybiByZXN0LnVwZGF0ZShcbiAgICAgIHJlcS5jb25maWcsXG4gICAgICByZXEuYXV0aCxcbiAgICAgIHRoaXMuY2xhc3NOYW1lKHJlcSksXG4gICAgICB3aGVyZSxcbiAgICAgIHJlcS5ib2R5LFxuICAgICAgcmVxLmluZm8uY2xpZW50U0RLLFxuICAgICAgcmVxLmluZm8uY29udGV4dFxuICAgICk7XG4gIH1cblxuICBoYW5kbGVEZWxldGUocmVxKSB7XG4gICAgcmV0dXJuIHJlc3RcbiAgICAgIC5kZWwocmVxLmNvbmZpZywgcmVxLmF1dGgsIHRoaXMuY2xhc3NOYW1lKHJlcSksIHJlcS5wYXJhbXMub2JqZWN0SWQsIHJlcS5pbmZvLmNvbnRleHQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiB7IHJlc3BvbnNlOiB7fSB9O1xuICAgICAgfSk7XG4gIH1cblxuICBzdGF0aWMgSlNPTkZyb21RdWVyeShxdWVyeSkge1xuICAgIGNvbnN0IGpzb24gPSB7fTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBfLmVudHJpZXMocXVlcnkpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBqc29uW2tleV0gPSBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAganNvbltrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBqc29uO1xuICB9XG5cbiAgc3RhdGljIG9wdGlvbnNGcm9tQm9keShib2R5KSB7XG4gICAgY29uc3QgYWxsb3dDb25zdHJhaW50cyA9IFtcbiAgICAgICdza2lwJyxcbiAgICAgICdsaW1pdCcsXG4gICAgICAnb3JkZXInLFxuICAgICAgJ2NvdW50JyxcbiAgICAgICdrZXlzJyxcbiAgICAgICdleGNsdWRlS2V5cycsXG4gICAgICAnaW5jbHVkZScsXG4gICAgICAnaW5jbHVkZUFsbCcsXG4gICAgICAncmVkaXJlY3RDbGFzc05hbWVGb3JLZXknLFxuICAgICAgJ3doZXJlJyxcbiAgICAgICdyZWFkUHJlZmVyZW5jZScsXG4gICAgICAnaW5jbHVkZVJlYWRQcmVmZXJlbmNlJyxcbiAgICAgICdzdWJxdWVyeVJlYWRQcmVmZXJlbmNlJyxcbiAgICAgICdoaW50JyxcbiAgICAgICdleHBsYWluJyxcbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoYm9keSkpIHtcbiAgICAgIGlmIChhbGxvd0NvbnN0cmFpbnRzLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKFBhcnNlLkVycm9yLklOVkFMSURfUVVFUlksIGBJbnZhbGlkIHBhcmFtZXRlciBmb3IgcXVlcnk6ICR7a2V5fWApO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBvcHRpb25zID0ge307XG4gICAgaWYgKGJvZHkuc2tpcCkge1xuICAgICAgb3B0aW9ucy5za2lwID0gTnVtYmVyKGJvZHkuc2tpcCk7XG4gICAgfVxuICAgIGlmIChib2R5LmxpbWl0IHx8IGJvZHkubGltaXQgPT09IDApIHtcbiAgICAgIG9wdGlvbnMubGltaXQgPSBOdW1iZXIoYm9keS5saW1pdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnMubGltaXQgPSBOdW1iZXIoMTAwKTtcbiAgICB9XG4gICAgaWYgKGJvZHkub3JkZXIpIHtcbiAgICAgIG9wdGlvbnMub3JkZXIgPSBTdHJpbmcoYm9keS5vcmRlcik7XG4gICAgfVxuICAgIGlmIChib2R5LmNvdW50KSB7XG4gICAgICBvcHRpb25zLmNvdW50ID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGJvZHkua2V5cyAhPSBudWxsKSB7XG4gICAgICBvcHRpb25zLmtleXMgPSBTdHJpbmcoYm9keS5rZXlzKTtcbiAgICB9XG4gICAgaWYgKGJvZHkuZXhjbHVkZUtleXMgIT0gbnVsbCkge1xuICAgICAgb3B0aW9ucy5leGNsdWRlS2V5cyA9IFN0cmluZyhib2R5LmV4Y2x1ZGVLZXlzKTtcbiAgICB9XG4gICAgaWYgKGJvZHkuaW5jbHVkZSAhPSBudWxsKSB7XG4gICAgICBvcHRpb25zLmluY2x1ZGUgPSBTdHJpbmcoYm9keS5pbmNsdWRlKTtcbiAgICB9XG4gICAgaWYgKGJvZHkuaW5jbHVkZUFsbCkge1xuICAgICAgb3B0aW9ucy5pbmNsdWRlQWxsID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBib2R5LnJlYWRQcmVmZXJlbmNlID09PSAnc3RyaW5nJykge1xuICAgICAgb3B0aW9ucy5yZWFkUHJlZmVyZW5jZSA9IGJvZHkucmVhZFByZWZlcmVuY2U7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYm9keS5pbmNsdWRlUmVhZFByZWZlcmVuY2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICBvcHRpb25zLmluY2x1ZGVSZWFkUHJlZmVyZW5jZSA9IGJvZHkuaW5jbHVkZVJlYWRQcmVmZXJlbmNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGJvZHkuc3VicXVlcnlSZWFkUHJlZmVyZW5jZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG9wdGlvbnMuc3VicXVlcnlSZWFkUHJlZmVyZW5jZSA9IGJvZHkuc3VicXVlcnlSZWFkUHJlZmVyZW5jZTtcbiAgICB9XG4gICAgaWYgKGJvZHkuaGludCAmJiAodHlwZW9mIGJvZHkuaGludCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGJvZHkuaGludCA9PT0gJ29iamVjdCcpKSB7XG4gICAgICBvcHRpb25zLmhpbnQgPSBib2R5LmhpbnQ7XG4gICAgfVxuICAgIGlmIChib2R5LmV4cGxhaW4pIHtcbiAgICAgIG9wdGlvbnMuZXhwbGFpbiA9IGJvZHkuZXhwbGFpbjtcbiAgICB9XG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH1cblxuICBtb3VudFJvdXRlcygpIHtcbiAgICB0aGlzLnJvdXRlKCdHRVQnLCAnL2NsYXNzZXMvOmNsYXNzTmFtZScsIHJlcSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVGaW5kKHJlcSk7XG4gICAgfSk7XG4gICAgdGhpcy5yb3V0ZSgnR0VUJywgJy9jbGFzc2VzLzpjbGFzc05hbWUvOm9iamVjdElkJywgcmVxID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZUdldChyZXEpO1xuICAgIH0pO1xuICAgIHRoaXMucm91dGUoJ1BPU1QnLCAnL2NsYXNzZXMvOmNsYXNzTmFtZScsIHByb21pc2VFbnN1cmVJZGVtcG90ZW5jeSwgcmVxID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZUNyZWF0ZShyZXEpO1xuICAgIH0pO1xuICAgIHRoaXMucm91dGUoJ1BVVCcsICcvY2xhc3Nlcy86Y2xhc3NOYW1lLzpvYmplY3RJZCcsIHByb21pc2VFbnN1cmVJZGVtcG90ZW5jeSwgcmVxID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZVVwZGF0ZShyZXEpO1xuICAgIH0pO1xuICAgIHRoaXMucm91dGUoJ0RFTEVURScsICcvY2xhc3Nlcy86Y2xhc3NOYW1lLzpvYmplY3RJZCcsIHJlcSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVEZWxldGUocmVxKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDbGFzc2VzUm91dGVyO1xuIl19