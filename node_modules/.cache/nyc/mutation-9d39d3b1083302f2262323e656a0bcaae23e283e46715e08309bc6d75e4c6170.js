"use strict";function cov_vb98so5to(){var path="/parse-server/lib/GraphQL/transformers/mutation.js";var hash="918aa242ef2ef5ddb01aa533b428ea66c0c14e14";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/GraphQL/transformers/mutation.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:32}},"2":{start:{line:8,column:12},end:{line:8,column:57}},"3":{start:{line:10,column:20},end:{line:10,column:44}},"4":{start:{line:12,column:22},end:{line:12,column:58}},"5":{start:{line:14,column:26},end:{line:14,column:92}},"6":{start:{line:16,column:23},end:{line:16,column:86}},"7":{start:{line:18,column:49},end:{line:18,column:96}},"8":{start:{line:18,column:84},end:{line:18,column:96}},"9":{start:{line:18,column:121},end:{line:18,column:134}},"10":{start:{line:18,column:159},end:{line:18,column:172}},"11":{start:{line:18,column:174},end:{line:18,column:309}},"12":{start:{line:18,column:234},end:{line:18,column:292}},"13":{start:{line:20,column:53},end:{line:20,column:111}},"14":{start:{line:20,column:98},end:{line:20,column:109}},"15":{start:{line:20,column:112},end:{line:20,column:214}},"16":{start:{line:20,column:188},end:{line:20,column:212}},"17":{start:{line:20,column:227},end:{line:20,column:264}},"18":{start:{line:20,column:266},end:{line:20,column:321}},"19":{start:{line:20,column:297},end:{line:20,column:319}},"20":{start:{line:20,column:335},end:{line:20,column:337}},"21":{start:{line:20,column:367},end:{line:20,column:423}},"22":{start:{line:20,column:425},end:{line:20,column:726}},"23":{start:{line:20,column:448},end:{line:20,column:724}},"24":{start:{line:20,column:534},end:{line:20,column:606}},"25":{start:{line:20,column:608},end:{line:20,column:722}},"26":{start:{line:20,column:646},end:{line:20,column:687}},"27":{start:{line:20,column:697},end:{line:20,column:720}},"28":{start:{line:20,column:727},end:{line:20,column:748}},"29":{start:{line:20,column:749},end:{line:20,column:787}},"30":{start:{line:20,column:762},end:{line:20,column:785}},"31":{start:{line:20,column:788},end:{line:20,column:802}},"32":{start:{line:22,column:39},end:{line:22,column:93}},"33":{start:{line:24,column:54},end:{line:24,column:73}},"34":{start:{line:24,column:75},end:{line:24,column:330}},"35":{start:{line:24,column:125},end:{line:24,column:161}},"36":{start:{line:24,column:163},end:{line:24,column:296}},"37":{start:{line:24,column:185},end:{line:24,column:294}},"38":{start:{line:24,column:227},end:{line:24,column:290}},"39":{start:{line:24,column:297},end:{line:24,column:328}},"40":{start:{line:24,column:331},end:{line:24,column:343}},"41":{start:{line:26,column:33},end:{line:26,column:517}},"42":{start:{line:26,column:46},end:{line:26,column:47}},"43":{start:{line:26,column:91},end:{line:26,column:131}},"44":{start:{line:26,column:133},end:{line:26,column:515}},"45":{start:{line:26,column:146},end:{line:26,column:247}},"46":{start:{line:26,column:201},end:{line:26,column:243}},"47":{start:{line:26,column:255},end:{line:26,column:515}},"48":{start:{line:26,column:295},end:{line:26,column:369}},"49":{start:{line:26,column:379},end:{line:26,column:513}},"50":{start:{line:26,column:428},end:{line:26,column:509}},"51":{start:{line:26,column:518},end:{line:26,column:532}},"52":{start:{line:28,column:44},end:{line:28,column:195}},"53":{start:{line:28,column:62},end:{line:28,column:166}},"54":{start:{line:28,column:176},end:{line:28,column:193}},"55":{start:{line:28,column:196},end:{line:28,column:207}},"56":{start:{line:30,column:23},end:{line:117,column:1}},"57":{start:{line:42,column:6},end:{line:42,column:51}},"58":{start:{line:43,column:21},end:{line:43,column:97}},"59":{start:{line:43,column:67},end:{line:43,column:96}},"60":{start:{line:45,column:2},end:{line:114,column:3}},"61":{start:{line:46,column:41},end:{line:46,column:126}},"62":{start:{line:47,column:41},end:{line:47,column:126}},"63":{start:{line:48,column:21},end:{line:111,column:6}},"64":{start:{line:51,column:6},end:{line:55,column:7}},"65":{start:{line:52,column:8},end:{line:52,column:61}},"66":{start:{line:53,column:13},end:{line:55,column:7}},"67":{start:{line:54,column:8},end:{line:54,column:61}},"68":{start:{line:57,column:6},end:{line:110,column:7}},"69":{start:{line:58,column:8},end:{line:109,column:9}},"70":{start:{line:60,column:12},end:{line:65,column:13}},"71":{start:{line:61,column:14},end:{line:63,column:16}},"72":{start:{line:64,column:14},end:{line:64,column:20}},"73":{start:{line:67,column:12},end:{line:67,column:65}},"74":{start:{line:68,column:12},end:{line:68,column:18}},"75":{start:{line:71,column:12},end:{line:76,column:13}},"76":{start:{line:72,column:14},end:{line:74,column:16}},"77":{start:{line:75,column:14},end:{line:75,column:20}},"78":{start:{line:78,column:12},end:{line:78,column:64}},"79":{start:{line:79,column:12},end:{line:79,column:18}},"80":{start:{line:82,column:12},end:{line:82,column:72}},"81":{start:{line:83,column:12},end:{line:83,column:18}},"82":{start:{line:86,column:12},end:{line:86,column:141}},"83":{start:{line:87,column:12},end:{line:87,column:18}},"84":{start:{line:90,column:12},end:{line:95,column:13}},"85":{start:{line:91,column:14},end:{line:93,column:16}},"86":{start:{line:94,column:14},end:{line:94,column:20}},"87":{start:{line:97,column:12},end:{line:97,column:140}},"88":{start:{line:98,column:12},end:{line:98,column:18}},"89":{start:{line:101,column:12},end:{line:106,column:13}},"90":{start:{line:102,column:14},end:{line:104,column:16}},"91":{start:{line:105,column:14},end:{line:105,column:21}},"92":{start:{line:108,column:12},end:{line:108,column:18}},"93":{start:{line:112,column:4},end:{line:112,column:32}},"94":{start:{line:113,column:4},end:{line:113,column:62}},"95":{start:{line:113,column:20},end:{line:113,column:62}},"96":{start:{line:116,column:2},end:{line:116,column:16}},"97":{start:{line:119,column:0},end:{line:119,column:40}},"98":{start:{line:120,column:21},end:{line:309,column:1}},"99":{start:{line:124,column:4},end:{line:128,column:5}},"100":{start:{line:125,column:6},end:{line:127,column:8}},"101":{start:{line:133,column:8},end:{line:133,column:13}},"102":{start:{line:135,column:4},end:{line:148,column:5}},"103":{start:{line:138,column:10},end:{line:138,column:65}},"104":{start:{line:139,column:6},end:{line:141,column:9}},"105":{start:{line:142,column:11},end:{line:148,column:5}},"106":{start:{line:143,column:6},end:{line:147,column:8}},"107":{start:{line:150,column:4},end:{line:150,column:95}},"108":{start:{line:152,column:21},end:{line:155,column:3}},"109":{start:{line:154,column:39},end:{line:154,column:78}},"110":{start:{line:156,column:21},end:{line:158,column:4}},"111":{start:{line:160,column:21},end:{line:160,column:23}},"112":{start:{line:162,column:4},end:{line:167,column:5}},"113":{start:{line:163,column:6},end:{line:166,column:8}},"114":{start:{line:169,column:4},end:{line:182,column:5}},"115":{start:{line:170,column:6},end:{line:181,column:9}},"116":{start:{line:171,column:31},end:{line:171,column:75}},"117":{start:{line:173,column:8},end:{line:175,column:9}},"118":{start:{line:174,column:10},end:{line:174,column:42}},"119":{start:{line:177,column:8},end:{line:180,column:10}},"120":{start:{line:184,column:4},end:{line:191,column:5}},"121":{start:{line:185,column:6},end:{line:190,column:9}},"122":{start:{line:186,column:8},end:{line:189,column:10}},"123":{start:{line:193,column:4},end:{line:193,column:20}},"124":{start:{line:200,column:4},end:{line:200,column:197}},"125":{start:{line:200,column:41},end:{line:200,column:197}},"126":{start:{line:201,column:15},end:{line:204,column:5}},"127":{start:{line:205,column:29},end:{line:205,column:31}},"128":{start:{line:207,column:4},end:{line:224,column:5}},"129":{start:{line:208,column:6},end:{line:223,column:10}},"130":{start:{line:209,column:28},end:{line:217,column:10}},"131":{start:{line:218,column:8},end:{line:218,column:91}},"132":{start:{line:219,column:26},end:{line:223,column:7}},"133":{start:{line:226,column:4},end:{line:245,column:5}},"134":{start:{line:227,column:6},end:{line:227,column:37}},"135":{start:{line:227,column:22},end:{line:227,column:37}},"136":{start:{line:228,column:6},end:{line:240,column:9}},"137":{start:{line:229,column:31},end:{line:229,column:69}},"138":{start:{line:231,column:8},end:{line:233,column:9}},"139":{start:{line:232,column:10},end:{line:232,column:36}},"140":{start:{line:235,column:8},end:{line:239,column:10}},"141":{start:{line:241,column:6},end:{line:244,column:9}},"142":{start:{line:247,column:4},end:{line:264,column:5}},"143":{start:{line:248,column:6},end:{line:263,column:9}},"144":{start:{line:251,column:33},end:{line:251,column:71}},"145":{start:{line:253,column:10},end:{line:255,column:11}},"146":{start:{line:254,column:12},end:{line:254,column:38}},"147":{start:{line:257,column:10},end:{line:261,column:12}},"148":{start:{line:266,column:4},end:{line:266,column:14}},"149":{start:{line:273,column:4},end:{line:273,column:225}},"150":{start:{line:273,column:74},end:{line:273,column:225}},"151":{start:{line:276,column:4},end:{line:292,column:5}},"152":{start:{line:277,column:26},end:{line:285,column:8}},"153":{start:{line:286,column:6},end:{line:286,column:108}},"154":{start:{line:287,column:6},end:{line:291,column:8}},"155":{start:{line:294,column:4},end:{line:307,column:5}},"156":{start:{line:295,column:21},end:{line:295,column:31}},"157":{start:{line:296,column:29},end:{line:296,column:70}},"158":{start:{line:298,column:6},end:{line:300,column:7}},"159":{start:{line:299,column:8},end:{line:299,column:37}},"160":{start:{line:302,column:6},end:{line:306,column:8}}},fnMap:{"0":{name:"_getRequireWildcardCache",decl:{start:{line:18,column:9},end:{line:18,column:33}},loc:{start:{line:18,column:47},end:{line:18,column:311}},line:18},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:209},end:{line:18,column:210}},loc:{start:{line:18,column:232},end:{line:18,column:294}},line:18},"2":{name:"_interopRequireWildcard",decl:{start:{line:20,column:9},end:{line:20,column:32}},loc:{start:{line:20,column:51},end:{line:20,column:804}},line:20},"3":{name:"_interopRequireDefault",decl:{start:{line:22,column:9},end:{line:22,column:31}},loc:{start:{line:22,column:37},end:{line:22,column:95}},line:22},"4":{name:"ownKeys",decl:{start:{line:24,column:9},end:{line:24,column:16}},loc:{start:{line:24,column:41},end:{line:24,column:345}},line:24},"5":{name:"(anonymous_5)",decl:{start:{line:24,column:210},end:{line:24,column:211}},loc:{start:{line:24,column:225},end:{line:24,column:292}},line:24},"6":{name:"_objectSpread",decl:{start:{line:26,column:9},end:{line:26,column:22}},loc:{start:{line:26,column:31},end:{line:26,column:534}},line:26},"7":{name:"(anonymous_7)",decl:{start:{line:26,column:184},end:{line:26,column:185}},loc:{start:{line:26,column:199},end:{line:26,column:245}},line:26},"8":{name:"(anonymous_8)",decl:{start:{line:26,column:411},end:{line:26,column:412}},loc:{start:{line:26,column:426},end:{line:26,column:511}},line:26},"9":{name:"_defineProperty",decl:{start:{line:28,column:9},end:{line:28,column:24}},loc:{start:{line:28,column:42},end:{line:28,column:209}},line:28},"10":{name:"(anonymous_10)",decl:{start:{line:30,column:23},end:{line:30,column:24}},loc:{start:{line:34,column:6},end:{line:117,column:1}},line:34},"11":{name:"(anonymous_11)",decl:{start:{line:43,column:58},end:{line:43,column:59}},loc:{start:{line:43,column:67},end:{line:43,column:96}},line:43},"12":{name:"(anonymous_12)",decl:{start:{line:48,column:45},end:{line:48,column:46}},loc:{start:{line:48,column:60},end:{line:111,column:5}},line:48},"13":{name:"(anonymous_13)",decl:{start:{line:121,column:8},end:{line:121,column:9}},loc:{start:{line:123,column:8},end:{line:151,column:3}},line:123},"14":{name:"(anonymous_14)",decl:{start:{line:152,column:11},end:{line:152,column:12}},loc:{start:{line:152,column:21},end:{line:155,column:3}},line:152},"15":{name:"(anonymous_15)",decl:{start:{line:154,column:27},end:{line:154,column:28}},loc:{start:{line:154,column:39},end:{line:154,column:78}},line:154},"16":{name:"(anonymous_16)",decl:{start:{line:156,column:12},end:{line:156,column:13}},loc:{start:{line:156,column:21},end:{line:158,column:4}},line:156},"17":{name:"(anonymous_17)",decl:{start:{line:159,column:7},end:{line:159,column:8}},loc:{start:{line:159,column:16},end:{line:194,column:3}},line:159},"18":{name:"(anonymous_18)",decl:{start:{line:170,column:26},end:{line:170,column:27}},loc:{start:{line:170,column:34},end:{line:181,column:7}},line:170},"19":{name:"(anonymous_19)",decl:{start:{line:185,column:26},end:{line:185,column:27}},loc:{start:{line:185,column:34},end:{line:190,column:7}},line:185},"20":{name:"(anonymous_20)",decl:{start:{line:195,column:12},end:{line:195,column:13}},loc:{start:{line:199,column:8},end:{line:267,column:3}},line:199},"21":{name:"(anonymous_21)",decl:{start:{line:208,column:69},end:{line:208,column:70}},loc:{start:{line:208,column:84},end:{line:219,column:7}},line:208},"22":{name:"(anonymous_22)",decl:{start:{line:219,column:15},end:{line:219,column:16}},loc:{start:{line:219,column:26},end:{line:223,column:7}},line:219},"23":{name:"(anonymous_23)",decl:{start:{line:228,column:32},end:{line:228,column:33}},loc:{start:{line:228,column:41},end:{line:240,column:7}},line:228},"24":{name:"(anonymous_24)",decl:{start:{line:250,column:34},end:{line:250,column:35}},loc:{start:{line:250,column:43},end:{line:262,column:9}},line:250},"25":{name:"(anonymous_25)",decl:{start:{line:268,column:11},end:{line:268,column:12}},loc:{start:{line:272,column:8},end:{line:308,column:3}},line:272}},branchMap:{"0":{loc:{start:{line:18,column:49},end:{line:18,column:96}},type:"if",locations:[{start:{line:18,column:49},end:{line:18,column:96}},{start:{line:18,column:49},end:{line:18,column:96}}],line:18},"1":{loc:{start:{line:18,column:241},end:{line:18,column:291}},type:"cond-expr",locations:[{start:{line:18,column:255},end:{line:18,column:271}},{start:{line:18,column:274},end:{line:18,column:291}}],line:18},"2":{loc:{start:{line:20,column:53},end:{line:20,column:111}},type:"if",locations:[{start:{line:20,column:53},end:{line:20,column:111}},{start:{line:20,column:53},end:{line:20,column:111}}],line:20},"3":{loc:{start:{line:20,column:57},end:{line:20,column:94}},type:"binary-expr",locations:[{start:{line:20,column:57},end:{line:20,column:69}},{start:{line:20,column:73},end:{line:20,column:76}},{start:{line:20,column:80},end:{line:20,column:94}}],line:20},"4":{loc:{start:{line:20,column:112},end:{line:20,column:214}},type:"if",locations:[{start:{line:20,column:112},end:{line:20,column:214}},{start:{line:20,column:112},end:{line:20,column:214}}],line:20},"5":{loc:{start:{line:20,column:116},end:{line:20,column:184}},type:"binary-expr",locations:[{start:{line:20,column:116},end:{line:20,column:128}},{start:{line:20,column:132},end:{line:20,column:155}},{start:{line:20,column:159},end:{line:20,column:184}}],line:20},"6":{loc:{start:{line:20,column:266},end:{line:20,column:321}},type:"if",locations:[{start:{line:20,column:266},end:{line:20,column:321}},{start:{line:20,column:266},end:{line:20,column:321}}],line:20},"7":{loc:{start:{line:20,column:270},end:{line:20,column:293}},type:"binary-expr",locations:[{start:{line:20,column:270},end:{line:20,column:275}},{start:{line:20,column:279},end:{line:20,column:293}}],line:20},"8":{loc:{start:{line:20,column:367},end:{line:20,column:423}},type:"binary-expr",locations:[{start:{line:20,column:367},end:{line:20,column:388}},{start:{line:20,column:392},end:{line:20,column:423}}],line:20},"9":{loc:{start:{line:20,column:448},end:{line:20,column:724}},type:"if",locations:[{start:{line:20,column:448},end:{line:20,column:724}},{start:{line:20,column:448},end:{line:20,column:724}}],line:20},"10":{loc:{start:{line:20,column:452},end:{line:20,column:519}},type:"binary-expr",locations:[{start:{line:20,column:452},end:{line:20,column:469}},{start:{line:20,column:473},end:{line:20,column:519}}],line:20},"11":{loc:{start:{line:20,column:534},end:{line:20,column:606}},type:"cond-expr",locations:[{start:{line:20,column:558},end:{line:20,column:599}},{start:{line:20,column:602},end:{line:20,column:606}}],line:20},"12":{loc:{start:{line:20,column:608},end:{line:20,column:722}},type:"if",locations:[{start:{line:20,column:608},end:{line:20,column:722}},{start:{line:20,column:608},end:{line:20,column:722}}],line:20},"13":{loc:{start:{line:20,column:612},end:{line:20,column:642}},type:"binary-expr",locations:[{start:{line:20,column:612},end:{line:20,column:616}},{start:{line:20,column:621},end:{line:20,column:629}},{start:{line:20,column:633},end:{line:20,column:641}}],line:20},"14":{loc:{start:{line:20,column:749},end:{line:20,column:787}},type:"if",locations:[{start:{line:20,column:749},end:{line:20,column:787}},{start:{line:20,column:749},end:{line:20,column:787}}],line:20},"15":{loc:{start:{line:22,column:46},end:{line:22,column:92}},type:"cond-expr",locations:[{start:{line:22,column:70},end:{line:22,column:73}},{start:{line:22,column:76},end:{line:22,column:92}}],line:22},"16":{loc:{start:{line:22,column:46},end:{line:22,column:67}},type:"binary-expr",locations:[{start:{line:22,column:46},end:{line:22,column:49}},{start:{line:22,column:53},end:{line:22,column:67}}],line:22},"17":{loc:{start:{line:24,column:75},end:{line:24,column:330}},type:"if",locations:[{start:{line:24,column:75},end:{line:24,column:330}},{start:{line:24,column:75},end:{line:24,column:330}}],line:24},"18":{loc:{start:{line:24,column:163},end:{line:24,column:296}},type:"if",locations:[{start:{line:24,column:163},end:{line:24,column:296}},{start:{line:24,column:163},end:{line:24,column:296}}],line:24},"19":{loc:{start:{line:26,column:91},end:{line:26,column:131}},type:"cond-expr",locations:[{start:{line:26,column:114},end:{line:26,column:126}},{start:{line:26,column:129},end:{line:26,column:131}}],line:26},"20":{loc:{start:{line:26,column:133},end:{line:26,column:515}},type:"if",locations:[{start:{line:26,column:133},end:{line:26,column:515}},{start:{line:26,column:133},end:{line:26,column:515}}],line:26},"21":{loc:{start:{line:26,column:255},end:{line:26,column:515}},type:"if",locations:[{start:{line:26,column:255},end:{line:26,column:515}},{start:{line:26,column:255},end:{line:26,column:515}}],line:26},"22":{loc:{start:{line:28,column:44},end:{line:28,column:195}},type:"if",locations:[{start:{line:28,column:44},end:{line:28,column:195}},{start:{line:28,column:44},end:{line:28,column:195}}],line:28},"23":{loc:{start:{line:45,column:2},end:{line:114,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:114,column:3}},{start:{line:45,column:2},end:{line:114,column:3}}],line:45},"24":{loc:{start:{line:46,column:41},end:{line:46,column:126}},type:"cond-expr",locations:[{start:{line:46,column:85},end:{line:46,column:119}},{start:{line:46,column:122},end:{line:46,column:126}}],line:46},"25":{loc:{start:{line:46,column:41},end:{line:46,column:82}},type:"binary-expr",locations:[{start:{line:46,column:41},end:{line:46,column:56}},{start:{line:46,column:60},end:{line:46,column:82}}],line:46},"26":{loc:{start:{line:47,column:41},end:{line:47,column:126}},type:"cond-expr",locations:[{start:{line:47,column:85},end:{line:47,column:119}},{start:{line:47,column:122},end:{line:47,column:126}}],line:47},"27":{loc:{start:{line:47,column:41},end:{line:47,column:82}},type:"binary-expr",locations:[{start:{line:47,column:41},end:{line:47,column:56}},{start:{line:47,column:60},end:{line:47,column:82}}],line:47},"28":{loc:{start:{line:51,column:6},end:{line:55,column:7}},type:"if",locations:[{start:{line:51,column:6},end:{line:55,column:7}},{start:{line:51,column:6},end:{line:55,column:7}}],line:51},"29":{loc:{start:{line:51,column:10},end:{line:51,column:64}},type:"binary-expr",locations:[{start:{line:51,column:10},end:{line:51,column:32}},{start:{line:51,column:36},end:{line:51,column:64}}],line:51},"30":{loc:{start:{line:53,column:13},end:{line:55,column:7}},type:"if",locations:[{start:{line:53,column:13},end:{line:55,column:7}},{start:{line:53,column:13},end:{line:55,column:7}}],line:53},"31":{loc:{start:{line:57,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:57,column:6},end:{line:110,column:7}},{start:{line:57,column:6},end:{line:110,column:7}}],line:57},"32":{loc:{start:{line:58,column:8},end:{line:109,column:9}},type:"switch",locations:[{start:{line:59,column:10},end:{line:68,column:18}},{start:{line:70,column:10},end:{line:79,column:18}},{start:{line:81,column:10},end:{line:83,column:18}},{start:{line:85,column:10},end:{line:87,column:18}},{start:{line:89,column:10},end:{line:98,column:18}},{start:{line:100,column:10},end:{line:108,column:18}}],line:58},"33":{loc:{start:{line:60,column:12},end:{line:65,column:13}},type:"if",locations:[{start:{line:60,column:12},end:{line:65,column:13}},{start:{line:60,column:12},end:{line:65,column:13}}],line:60},"34":{loc:{start:{line:71,column:12},end:{line:76,column:13}},type:"if",locations:[{start:{line:71,column:12},end:{line:76,column:13}},{start:{line:71,column:12},end:{line:76,column:13}}],line:71},"35":{loc:{start:{line:90,column:12},end:{line:95,column:13}},type:"if",locations:[{start:{line:90,column:12},end:{line:95,column:13}},{start:{line:90,column:12},end:{line:95,column:13}}],line:90},"36":{loc:{start:{line:101,column:12},end:{line:106,column:13}},type:"if",locations:[{start:{line:101,column:12},end:{line:106,column:13}},{start:{line:101,column:12},end:{line:106,column:13}}],line:101},"37":{loc:{start:{line:113,column:4},end:{line:113,column:62}},type:"if",locations:[{start:{line:113,column:4},end:{line:113,column:62}},{start:{line:113,column:4},end:{line:113,column:62}}],line:113},"38":{loc:{start:{line:124,column:4},end:{line:128,column:5}},type:"if",locations:[{start:{line:124,column:4},end:{line:128,column:5}},{start:{line:124,column:4},end:{line:128,column:5}}],line:124},"39":{loc:{start:{line:135,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:135,column:4},end:{line:148,column:5}},{start:{line:135,column:4},end:{line:148,column:5}}],line:135},"40":{loc:{start:{line:142,column:11},end:{line:148,column:5}},type:"if",locations:[{start:{line:142,column:11},end:{line:148,column:5}},{start:{line:142,column:11},end:{line:148,column:5}}],line:142},"41":{loc:{start:{line:142,column:15},end:{line:142,column:32}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:19}},{start:{line:142,column:23},end:{line:142,column:32}}],line:142},"42":{loc:{start:{line:162,column:4},end:{line:167,column:5}},type:"if",locations:[{start:{line:162,column:4},end:{line:167,column:5}},{start:{line:162,column:4},end:{line:167,column:5}}],line:162},"43":{loc:{start:{line:169,column:4},end:{line:182,column:5}},type:"if",locations:[{start:{line:169,column:4},end:{line:182,column:5}},{start:{line:169,column:4},end:{line:182,column:5}}],line:169},"44":{loc:{start:{line:173,column:8},end:{line:175,column:9}},type:"if",locations:[{start:{line:173,column:8},end:{line:175,column:9}},{start:{line:173,column:8},end:{line:175,column:9}}],line:173},"45":{loc:{start:{line:184,column:4},end:{line:191,column:5}},type:"if",locations:[{start:{line:184,column:4},end:{line:191,column:5}},{start:{line:184,column:4},end:{line:191,column:5}}],line:184},"46":{loc:{start:{line:200,column:4},end:{line:200,column:197}},type:"if",locations:[{start:{line:200,column:4},end:{line:200,column:197}},{start:{line:200,column:4},end:{line:200,column:197}}],line:200},"47":{loc:{start:{line:207,column:4},end:{line:224,column:5}},type:"if",locations:[{start:{line:207,column:4},end:{line:224,column:5}},{start:{line:207,column:4},end:{line:224,column:5}}],line:207},"48":{loc:{start:{line:226,column:4},end:{line:245,column:5}},type:"if",locations:[{start:{line:226,column:4},end:{line:245,column:5}},{start:{line:226,column:4},end:{line:245,column:5}}],line:226},"49":{loc:{start:{line:226,column:8},end:{line:226,column:50}},type:"binary-expr",locations:[{start:{line:226,column:8},end:{line:226,column:17}},{start:{line:226,column:21},end:{line:226,column:50}}],line:226},"50":{loc:{start:{line:227,column:6},end:{line:227,column:37}},type:"if",locations:[{start:{line:227,column:6},end:{line:227,column:37}},{start:{line:227,column:6},end:{line:227,column:37}}],line:227},"51":{loc:{start:{line:231,column:8},end:{line:233,column:9}},type:"if",locations:[{start:{line:231,column:8},end:{line:233,column:9}},{start:{line:231,column:8},end:{line:233,column:9}}],line:231},"52":{loc:{start:{line:247,column:4},end:{line:264,column:5}},type:"if",locations:[{start:{line:247,column:4},end:{line:264,column:5}},{start:{line:247,column:4},end:{line:264,column:5}}],line:247},"53":{loc:{start:{line:253,column:10},end:{line:255,column:11}},type:"if",locations:[{start:{line:253,column:10},end:{line:255,column:11}},{start:{line:253,column:10},end:{line:255,column:11}}],line:253},"54":{loc:{start:{line:273,column:4},end:{line:273,column:225}},type:"if",locations:[{start:{line:273,column:4},end:{line:273,column:225}},{start:{line:273,column:4},end:{line:273,column:225}}],line:273},"55":{loc:{start:{line:273,column:8},end:{line:273,column:72}},type:"binary-expr",locations:[{start:{line:273,column:8},end:{line:273,column:37}},{start:{line:273,column:41},end:{line:273,column:72}}],line:273},"56":{loc:{start:{line:276,column:4},end:{line:292,column:5}},type:"if",locations:[{start:{line:276,column:4},end:{line:292,column:5}},{start:{line:276,column:4},end:{line:292,column:5}}],line:276},"57":{loc:{start:{line:294,column:4},end:{line:307,column:5}},type:"if",locations:[{start:{line:294,column:4},end:{line:307,column:5}},{start:{line:294,column:4},end:{line:307,column:5}}],line:294},"58":{loc:{start:{line:298,column:6},end:{line:300,column:7}},type:"if",locations:[{start:{line:298,column:6},end:{line:300,column:7}},{start:{line:298,column:6},end:{line:300,column:7}}],line:298}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0,0,0,0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0]},inputSourceMap:{version:3,sources:["../../../src/GraphQL/transformers/mutation.js"],names:["transformTypes","inputType","fields","className","parseGraphQLSchema","req","classGraphQLCreateType","classGraphQLUpdateType","config","isCreateEnabled","isUpdateEnabled","parseClassTypes","parseClass","parseClasses","find","clazz","classGraphQLCreateTypeFields","getFields","classGraphQLUpdateTypeFields","promises","Object","keys","map","field","inputTypeField","type","defaultGraphQLTypes","GEO_POINT_INPUT","__op","transformers","geoPoint","POLYGON_INPUT","polygon","FILE_INPUT","file","relation","targetClass","pointer","Promise","all","ACL","input","upload","fileInfo","__type","name","url","Parse","Error","FILE_SAVE_ERROR","value","coordinates","latitude","longitude","parseACL","public","read","write","users","forEach","rule","globalIdObject","userId","id","roles","roleName","auth","info","length","INVALID_POINTER","op","ops","nestedObjectsToAdd","createAndAdd","parseFields","objectsMutations","createObject","object","objectId","add","push","objects","remove","nestedObjectToAdd","createAndLink","link"],mappings:"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",sourcesContent:["import Parse from 'parse/node';\nimport { fromGlobalId } from 'graphql-relay';\nimport { handleUpload } from '../loaders/filesMutations';\nimport * as defaultGraphQLTypes from '../loaders/defaultGraphQLTypes';\nimport * as objectsMutations from '../helpers/objectsMutations';\n\nconst transformTypes = async (\n  inputType: 'create' | 'update',\n  fields,\n  { className, parseGraphQLSchema, req }\n) => {\n  const {\n    classGraphQLCreateType,\n    classGraphQLUpdateType,\n    config: { isCreateEnabled, isUpdateEnabled },\n  } = parseGraphQLSchema.parseClassTypes[className];\n  const parseClass = parseGraphQLSchema.parseClasses.find(clazz => clazz.className === className);\n  if (fields) {\n    const classGraphQLCreateTypeFields =\n      isCreateEnabled && classGraphQLCreateType ? classGraphQLCreateType.getFields() : null;\n    const classGraphQLUpdateTypeFields =\n      isUpdateEnabled && classGraphQLUpdateType ? classGraphQLUpdateType.getFields() : null;\n    const promises = Object.keys(fields).map(async field => {\n      let inputTypeField;\n      if (inputType === 'create' && classGraphQLCreateTypeFields) {\n        inputTypeField = classGraphQLCreateTypeFields[field];\n      } else if (classGraphQLUpdateTypeFields) {\n        inputTypeField = classGraphQLUpdateTypeFields[field];\n      }\n      if (inputTypeField) {\n        switch (true) {\n          case inputTypeField.type === defaultGraphQLTypes.GEO_POINT_INPUT:\n            if (fields[field] === null) {\n              fields[field] = { __op: 'Delete' };\n              break;\n            }\n            fields[field] = transformers.geoPoint(fields[field]);\n            break;\n          case inputTypeField.type === defaultGraphQLTypes.POLYGON_INPUT:\n            if (fields[field] === null) {\n              fields[field] = { __op: 'Delete' };\n              break;\n            }\n            fields[field] = transformers.polygon(fields[field]);\n            break;\n          case inputTypeField.type === defaultGraphQLTypes.FILE_INPUT:\n            fields[field] = await transformers.file(fields[field], req);\n            break;\n          case parseClass.fields[field].type === 'Relation':\n            fields[field] = await transformers.relation(\n              parseClass.fields[field].targetClass,\n              field,\n              fields[field],\n              parseGraphQLSchema,\n              req\n            );\n            break;\n          case parseClass.fields[field].type === 'Pointer':\n            if (fields[field] === null) {\n              fields[field] = { __op: 'Delete' };\n              break;\n            }\n            fields[field] = await transformers.pointer(\n              parseClass.fields[field].targetClass,\n              field,\n              fields[field],\n              parseGraphQLSchema,\n              req\n            );\n            break;\n          default:\n            if (fields[field] === null) {\n              fields[field] = { __op: 'Delete' };\n              return;\n            }\n            break;\n        }\n      }\n    });\n    await Promise.all(promises);\n    if (fields.ACL) fields.ACL = transformers.ACL(fields.ACL);\n  }\n  return fields;\n};\n\nconst transformers = {\n  file: async (input, { config }) => {\n    if (input === null) {\n      return { __op: 'Delete' };\n    }\n    const { file, upload } = input;\n    if (upload) {\n      const { fileInfo } = await handleUpload(upload, config);\n      return { ...fileInfo, __type: 'File' };\n    } else if (file && file.name) {\n      return { name: file.name, __type: 'File', url: file.url };\n    }\n    throw new Parse.Error(Parse.Error.FILE_SAVE_ERROR, 'Invalid file upload.');\n  },\n  polygon: value => ({\n    __type: 'Polygon',\n    coordinates: value.map(geoPoint => [geoPoint.latitude, geoPoint.longitude]),\n  }),\n  geoPoint: value => ({\n    ...value,\n    __type: 'GeoPoint',\n  }),\n  ACL: value => {\n    const parseACL = {};\n    if (value.public) {\n      parseACL['*'] = {\n        read: value.public.read,\n        write: value.public.write,\n      };\n    }\n    if (value.users) {\n      value.users.forEach(rule => {\n        const globalIdObject = fromGlobalId(rule.userId);\n        if (globalIdObject.type === '_User') {\n          rule.userId = globalIdObject.id;\n        }\n        parseACL[rule.userId] = {\n          read: rule.read,\n          write: rule.write,\n        };\n      });\n    }\n    if (value.roles) {\n      value.roles.forEach(rule => {\n        parseACL[`role:${rule.roleName}`] = {\n          read: rule.read,\n          write: rule.write,\n        };\n      });\n    }\n    return parseACL;\n  },\n  relation: async (targetClass, field, value, parseGraphQLSchema, { config, auth, info }) => {\n    if (Object.keys(value).length === 0)\n      throw new Parse.Error(\n        Parse.Error.INVALID_POINTER,\n        `You need to provide at least one operation on the relation mutation of field ${field}`\n      );\n\n    const op = {\n      __op: 'Batch',\n      ops: [],\n    };\n    let nestedObjectsToAdd = [];\n\n    if (value.createAndAdd) {\n      nestedObjectsToAdd = (\n        await Promise.all(\n          value.createAndAdd.map(async input => {\n            const parseFields = await transformTypes('create', input, {\n              className: targetClass,\n              parseGraphQLSchema,\n              req: { config, auth, info },\n            });\n            return objectsMutations.createObject(targetClass, parseFields, config, auth, info);\n          })\n        )\n      ).map(object => ({\n        __type: 'Pointer',\n        className: targetClass,\n        objectId: object.objectId,\n      }));\n    }\n\n    if (value.add || nestedObjectsToAdd.length > 0) {\n      if (!value.add) value.add = [];\n      value.add = value.add.map(input => {\n        const globalIdObject = fromGlobalId(input);\n        if (globalIdObject.type === targetClass) {\n          input = globalIdObject.id;\n        }\n        return {\n          __type: 'Pointer',\n          className: targetClass,\n          objectId: input,\n        };\n      });\n      op.ops.push({\n        __op: 'AddRelation',\n        objects: [...value.add, ...nestedObjectsToAdd],\n      });\n    }\n\n    if (value.remove) {\n      op.ops.push({\n        __op: 'RemoveRelation',\n        objects: value.remove.map(input => {\n          const globalIdObject = fromGlobalId(input);\n          if (globalIdObject.type === targetClass) {\n            input = globalIdObject.id;\n          }\n          return {\n            __type: 'Pointer',\n            className: targetClass,\n            objectId: input,\n          };\n        }),\n      });\n    }\n    return op;\n  },\n  pointer: async (targetClass, field, value, parseGraphQLSchema, { config, auth, info }) => {\n    if (Object.keys(value).length > 1 || Object.keys(value).length === 0)\n      throw new Parse.Error(\n        Parse.Error.INVALID_POINTER,\n        `You need to provide link OR createLink on the pointer mutation of field ${field}`\n      );\n\n    let nestedObjectToAdd;\n    if (value.createAndLink) {\n      const parseFields = await transformTypes('create', value.createAndLink, {\n        className: targetClass,\n        parseGraphQLSchema,\n        req: { config, auth, info },\n      });\n      nestedObjectToAdd = await objectsMutations.createObject(\n        targetClass,\n        parseFields,\n        config,\n        auth,\n        info\n      );\n      return {\n        __type: 'Pointer',\n        className: targetClass,\n        objectId: nestedObjectToAdd.objectId,\n      };\n    }\n    if (value.link) {\n      let objectId = value.link;\n      const globalIdObject = fromGlobalId(objectId);\n      if (globalIdObject.type === targetClass) {\n        objectId = globalIdObject.id;\n      }\n      return {\n        __type: 'Pointer',\n        className: targetClass,\n        objectId,\n      };\n    }\n  },\n};\n\nexport { transformTypes };\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"918aa242ef2ef5ddb01aa533b428ea66c0c14e14"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_vb98so5to=function(){return actualCoverage;};}return actualCoverage;}cov_vb98so5to();cov_vb98so5to().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_vb98so5to().s[1]++;exports.transformTypes=void 0;var _node=(cov_vb98so5to().s[2]++,_interopRequireDefault(require("parse/node")));var _graphqlRelay=(cov_vb98so5to().s[3]++,require("graphql-relay"));var _filesMutations=(cov_vb98so5to().s[4]++,require("../loaders/filesMutations"));var defaultGraphQLTypes=(cov_vb98so5to().s[5]++,_interopRequireWildcard(require("../loaders/defaultGraphQLTypes")));var objectsMutations=(cov_vb98so5to().s[6]++,_interopRequireWildcard(require("../helpers/objectsMutations")));function _getRequireWildcardCache(nodeInterop){cov_vb98so5to().f[0]++;cov_vb98so5to().s[7]++;if(typeof WeakMap!=="function"){cov_vb98so5to().b[0][0]++;cov_vb98so5to().s[8]++;return null;}else{cov_vb98so5to().b[0][1]++;}var cacheBabelInterop=(cov_vb98so5to().s[9]++,new WeakMap());var cacheNodeInterop=(cov_vb98so5to().s[10]++,new WeakMap());cov_vb98so5to().s[11]++;return(_getRequireWildcardCache=function(nodeInterop){cov_vb98so5to().f[1]++;cov_vb98so5to().s[12]++;return nodeInterop?(cov_vb98so5to().b[1][0]++,cacheNodeInterop):(cov_vb98so5to().b[1][1]++,cacheBabelInterop);})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){cov_vb98so5to().f[2]++;cov_vb98so5to().s[13]++;if((cov_vb98so5to().b[3][0]++,!nodeInterop)&&(cov_vb98so5to().b[3][1]++,obj)&&(cov_vb98so5to().b[3][2]++,obj.__esModule)){cov_vb98so5to().b[2][0]++;cov_vb98so5to().s[14]++;return obj;}else{cov_vb98so5to().b[2][1]++;}cov_vb98so5to().s[15]++;if((cov_vb98so5to().b[5][0]++,obj===null)||(cov_vb98so5to().b[5][1]++,typeof obj!=="object")&&(cov_vb98so5to().b[5][2]++,typeof obj!=="function")){cov_vb98so5to().b[4][0]++;cov_vb98so5to().s[16]++;return{default:obj};}else{cov_vb98so5to().b[4][1]++;}var cache=(cov_vb98so5to().s[17]++,_getRequireWildcardCache(nodeInterop));cov_vb98so5to().s[18]++;if((cov_vb98so5to().b[7][0]++,cache)&&(cov_vb98so5to().b[7][1]++,cache.has(obj))){cov_vb98so5to().b[6][0]++;cov_vb98so5to().s[19]++;return cache.get(obj);}else{cov_vb98so5to().b[6][1]++;}var newObj=(cov_vb98so5to().s[20]++,{});var hasPropertyDescriptor=(cov_vb98so5to().s[21]++,(cov_vb98so5to().b[8][0]++,Object.defineProperty)&&(cov_vb98so5to().b[8][1]++,Object.getOwnPropertyDescriptor));cov_vb98so5to().s[22]++;for(var key in obj){cov_vb98so5to().s[23]++;if((cov_vb98so5to().b[10][0]++,key!=="default")&&(cov_vb98so5to().b[10][1]++,Object.prototype.hasOwnProperty.call(obj,key))){cov_vb98so5to().b[9][0]++;var desc=(cov_vb98so5to().s[24]++,hasPropertyDescriptor?(cov_vb98so5to().b[11][0]++,Object.getOwnPropertyDescriptor(obj,key)):(cov_vb98so5to().b[11][1]++,null));cov_vb98so5to().s[25]++;if((cov_vb98so5to().b[13][0]++,desc)&&((cov_vb98so5to().b[13][1]++,desc.get)||(cov_vb98so5to().b[13][2]++,desc.set))){cov_vb98so5to().b[12][0]++;cov_vb98so5to().s[26]++;Object.defineProperty(newObj,key,desc);}else{cov_vb98so5to().b[12][1]++;cov_vb98so5to().s[27]++;newObj[key]=obj[key];}}else{cov_vb98so5to().b[9][1]++;}}cov_vb98so5to().s[28]++;newObj.default=obj;cov_vb98so5to().s[29]++;if(cache){cov_vb98so5to().b[14][0]++;cov_vb98so5to().s[30]++;cache.set(obj,newObj);}else{cov_vb98so5to().b[14][1]++;}cov_vb98so5to().s[31]++;return newObj;}function _interopRequireDefault(obj){cov_vb98so5to().f[3]++;cov_vb98so5to().s[32]++;return(cov_vb98so5to().b[16][0]++,obj)&&(cov_vb98so5to().b[16][1]++,obj.__esModule)?(cov_vb98so5to().b[15][0]++,obj):(cov_vb98so5to().b[15][1]++,{default:obj});}function ownKeys(object,enumerableOnly){cov_vb98so5to().f[4]++;var keys=(cov_vb98so5to().s[33]++,Object.keys(object));cov_vb98so5to().s[34]++;if(Object.getOwnPropertySymbols){cov_vb98so5to().b[17][0]++;var symbols=(cov_vb98so5to().s[35]++,Object.getOwnPropertySymbols(object));cov_vb98so5to().s[36]++;if(enumerableOnly){cov_vb98so5to().b[18][0]++;cov_vb98so5to().s[37]++;symbols=symbols.filter(function(sym){cov_vb98so5to().f[5]++;cov_vb98so5to().s[38]++;return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}else{cov_vb98so5to().b[18][1]++;}cov_vb98so5to().s[39]++;keys.push.apply(keys,symbols);}else{cov_vb98so5to().b[17][1]++;}cov_vb98so5to().s[40]++;return keys;}function _objectSpread(target){cov_vb98so5to().f[6]++;cov_vb98so5to().s[41]++;for(var i=(cov_vb98so5to().s[42]++,1);i<arguments.length;i++){var source=(cov_vb98so5to().s[43]++,arguments[i]!=null?(cov_vb98so5to().b[19][0]++,arguments[i]):(cov_vb98so5to().b[19][1]++,{}));cov_vb98so5to().s[44]++;if(i%2){cov_vb98so5to().b[20][0]++;cov_vb98so5to().s[45]++;ownKeys(Object(source),true).forEach(function(key){cov_vb98so5to().f[7]++;cov_vb98so5to().s[46]++;_defineProperty(target,key,source[key]);});}else{cov_vb98so5to().b[20][1]++;cov_vb98so5to().s[47]++;if(Object.getOwnPropertyDescriptors){cov_vb98so5to().b[21][0]++;cov_vb98so5to().s[48]++;Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{cov_vb98so5to().b[21][1]++;cov_vb98so5to().s[49]++;ownKeys(Object(source)).forEach(function(key){cov_vb98so5to().f[8]++;cov_vb98so5to().s[50]++;Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}}cov_vb98so5to().s[51]++;return target;}function _defineProperty(obj,key,value){cov_vb98so5to().f[9]++;cov_vb98so5to().s[52]++;if(key in obj){cov_vb98so5to().b[22][0]++;cov_vb98so5to().s[53]++;Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{cov_vb98so5to().b[22][1]++;cov_vb98so5to().s[54]++;obj[key]=value;}cov_vb98so5to().s[55]++;return obj;}cov_vb98so5to().s[56]++;const transformTypes=async(inputType,fields,{className,parseGraphQLSchema,req})=>{cov_vb98so5to().f[10]++;const{classGraphQLCreateType,classGraphQLUpdateType,config:{isCreateEnabled,isUpdateEnabled}}=(cov_vb98so5to().s[57]++,parseGraphQLSchema.parseClassTypes[className]);const parseClass=(cov_vb98so5to().s[58]++,parseGraphQLSchema.parseClasses.find(clazz=>{cov_vb98so5to().f[11]++;cov_vb98so5to().s[59]++;return clazz.className===className;}));cov_vb98so5to().s[60]++;if(fields){cov_vb98so5to().b[23][0]++;const classGraphQLCreateTypeFields=(cov_vb98so5to().s[61]++,(cov_vb98so5to().b[25][0]++,isCreateEnabled)&&(cov_vb98so5to().b[25][1]++,classGraphQLCreateType)?(cov_vb98so5to().b[24][0]++,classGraphQLCreateType.getFields()):(cov_vb98so5to().b[24][1]++,null));const classGraphQLUpdateTypeFields=(cov_vb98so5to().s[62]++,(cov_vb98so5to().b[27][0]++,isUpdateEnabled)&&(cov_vb98so5to().b[27][1]++,classGraphQLUpdateType)?(cov_vb98so5to().b[26][0]++,classGraphQLUpdateType.getFields()):(cov_vb98so5to().b[26][1]++,null));const promises=(cov_vb98so5to().s[63]++,Object.keys(fields).map(async field=>{cov_vb98so5to().f[12]++;let inputTypeField;cov_vb98so5to().s[64]++;if((cov_vb98so5to().b[29][0]++,inputType==='create')&&(cov_vb98so5to().b[29][1]++,classGraphQLCreateTypeFields)){cov_vb98so5to().b[28][0]++;cov_vb98so5to().s[65]++;inputTypeField=classGraphQLCreateTypeFields[field];}else{cov_vb98so5to().b[28][1]++;cov_vb98so5to().s[66]++;if(classGraphQLUpdateTypeFields){cov_vb98so5to().b[30][0]++;cov_vb98so5to().s[67]++;inputTypeField=classGraphQLUpdateTypeFields[field];}else{cov_vb98so5to().b[30][1]++;}}cov_vb98so5to().s[68]++;if(inputTypeField){cov_vb98so5to().b[31][0]++;cov_vb98so5to().s[69]++;switch(true){case inputTypeField.type===defaultGraphQLTypes.GEO_POINT_INPUT:cov_vb98so5to().b[32][0]++;cov_vb98so5to().s[70]++;if(fields[field]===null){cov_vb98so5to().b[33][0]++;cov_vb98so5to().s[71]++;fields[field]={__op:'Delete'};cov_vb98so5to().s[72]++;break;}else{cov_vb98so5to().b[33][1]++;}cov_vb98so5to().s[73]++;fields[field]=transformers.geoPoint(fields[field]);cov_vb98so5to().s[74]++;break;case inputTypeField.type===defaultGraphQLTypes.POLYGON_INPUT:cov_vb98so5to().b[32][1]++;cov_vb98so5to().s[75]++;if(fields[field]===null){cov_vb98so5to().b[34][0]++;cov_vb98so5to().s[76]++;fields[field]={__op:'Delete'};cov_vb98so5to().s[77]++;break;}else{cov_vb98so5to().b[34][1]++;}cov_vb98so5to().s[78]++;fields[field]=transformers.polygon(fields[field]);cov_vb98so5to().s[79]++;break;case inputTypeField.type===defaultGraphQLTypes.FILE_INPUT:cov_vb98so5to().b[32][2]++;cov_vb98so5to().s[80]++;fields[field]=await transformers.file(fields[field],req);cov_vb98so5to().s[81]++;break;case parseClass.fields[field].type==='Relation':cov_vb98so5to().b[32][3]++;cov_vb98so5to().s[82]++;fields[field]=await transformers.relation(parseClass.fields[field].targetClass,field,fields[field],parseGraphQLSchema,req);cov_vb98so5to().s[83]++;break;case parseClass.fields[field].type==='Pointer':cov_vb98so5to().b[32][4]++;cov_vb98so5to().s[84]++;if(fields[field]===null){cov_vb98so5to().b[35][0]++;cov_vb98so5to().s[85]++;fields[field]={__op:'Delete'};cov_vb98so5to().s[86]++;break;}else{cov_vb98so5to().b[35][1]++;}cov_vb98so5to().s[87]++;fields[field]=await transformers.pointer(parseClass.fields[field].targetClass,field,fields[field],parseGraphQLSchema,req);cov_vb98so5to().s[88]++;break;default:cov_vb98so5to().b[32][5]++;cov_vb98so5to().s[89]++;if(fields[field]===null){cov_vb98so5to().b[36][0]++;cov_vb98so5to().s[90]++;fields[field]={__op:'Delete'};cov_vb98so5to().s[91]++;return;}else{cov_vb98so5to().b[36][1]++;}cov_vb98so5to().s[92]++;break;}}else{cov_vb98so5to().b[31][1]++;}}));cov_vb98so5to().s[93]++;await Promise.all(promises);cov_vb98so5to().s[94]++;if(fields.ACL){cov_vb98so5to().b[37][0]++;cov_vb98so5to().s[95]++;fields.ACL=transformers.ACL(fields.ACL);}else{cov_vb98so5to().b[37][1]++;}}else{cov_vb98so5to().b[23][1]++;}cov_vb98so5to().s[96]++;return fields;};cov_vb98so5to().s[97]++;exports.transformTypes=transformTypes;const transformers=(cov_vb98so5to().s[98]++,{file:async(input,{config})=>{cov_vb98so5to().f[13]++;cov_vb98so5to().s[99]++;if(input===null){cov_vb98so5to().b[38][0]++;cov_vb98so5to().s[100]++;return{__op:'Delete'};}else{cov_vb98so5to().b[38][1]++;}const{file,upload}=(cov_vb98so5to().s[101]++,input);cov_vb98so5to().s[102]++;if(upload){cov_vb98so5to().b[39][0]++;const{fileInfo}=(cov_vb98so5to().s[103]++,await(0,_filesMutations.handleUpload)(upload,config));cov_vb98so5to().s[104]++;return _objectSpread(_objectSpread({},fileInfo),{},{__type:'File'});}else{cov_vb98so5to().b[39][1]++;cov_vb98so5to().s[105]++;if((cov_vb98so5to().b[41][0]++,file)&&(cov_vb98so5to().b[41][1]++,file.name)){cov_vb98so5to().b[40][0]++;cov_vb98so5to().s[106]++;return{name:file.name,__type:'File',url:file.url};}else{cov_vb98so5to().b[40][1]++;}}cov_vb98so5to().s[107]++;throw new _node.default.Error(_node.default.Error.FILE_SAVE_ERROR,'Invalid file upload.');},polygon:value=>{cov_vb98so5to().f[14]++;cov_vb98so5to().s[108]++;return{__type:'Polygon',coordinates:value.map(geoPoint=>{cov_vb98so5to().f[15]++;cov_vb98so5to().s[109]++;return[geoPoint.latitude,geoPoint.longitude];})};},geoPoint:value=>{cov_vb98so5to().f[16]++;cov_vb98so5to().s[110]++;return _objectSpread(_objectSpread({},value),{},{__type:'GeoPoint'});},ACL:value=>{cov_vb98so5to().f[17]++;const parseACL=(cov_vb98so5to().s[111]++,{});cov_vb98so5to().s[112]++;if(value.public){cov_vb98so5to().b[42][0]++;cov_vb98so5to().s[113]++;parseACL['*']={read:value.public.read,write:value.public.write};}else{cov_vb98so5to().b[42][1]++;}cov_vb98so5to().s[114]++;if(value.users){cov_vb98so5to().b[43][0]++;cov_vb98so5to().s[115]++;value.users.forEach(rule=>{cov_vb98so5to().f[18]++;const globalIdObject=(cov_vb98so5to().s[116]++,(0,_graphqlRelay.fromGlobalId)(rule.userId));cov_vb98so5to().s[117]++;if(globalIdObject.type==='_User'){cov_vb98so5to().b[44][0]++;cov_vb98so5to().s[118]++;rule.userId=globalIdObject.id;}else{cov_vb98so5to().b[44][1]++;}cov_vb98so5to().s[119]++;parseACL[rule.userId]={read:rule.read,write:rule.write};});}else{cov_vb98so5to().b[43][1]++;}cov_vb98so5to().s[120]++;if(value.roles){cov_vb98so5to().b[45][0]++;cov_vb98so5to().s[121]++;value.roles.forEach(rule=>{cov_vb98so5to().f[19]++;cov_vb98so5to().s[122]++;parseACL[`role:${rule.roleName}`]={read:rule.read,write:rule.write};});}else{cov_vb98so5to().b[45][1]++;}cov_vb98so5to().s[123]++;return parseACL;},relation:async(targetClass,field,value,parseGraphQLSchema,{config,auth,info})=>{cov_vb98so5to().f[20]++;cov_vb98so5to().s[124]++;if(Object.keys(value).length===0){cov_vb98so5to().b[46][0]++;cov_vb98so5to().s[125]++;throw new _node.default.Error(_node.default.Error.INVALID_POINTER,`You need to provide at least one operation on the relation mutation of field ${field}`);}else{cov_vb98so5to().b[46][1]++;}const op=(cov_vb98so5to().s[126]++,{__op:'Batch',ops:[]});let nestedObjectsToAdd=(cov_vb98so5to().s[127]++,[]);cov_vb98so5to().s[128]++;if(value.createAndAdd){cov_vb98so5to().b[47][0]++;cov_vb98so5to().s[129]++;nestedObjectsToAdd=(await Promise.all(value.createAndAdd.map(async input=>{cov_vb98so5to().f[21]++;const parseFields=(cov_vb98so5to().s[130]++,await transformTypes('create',input,{className:targetClass,parseGraphQLSchema,req:{config,auth,info}}));cov_vb98so5to().s[131]++;return objectsMutations.createObject(targetClass,parseFields,config,auth,info);}))).map(object=>{cov_vb98so5to().f[22]++;cov_vb98so5to().s[132]++;return{__type:'Pointer',className:targetClass,objectId:object.objectId};});}else{cov_vb98so5to().b[47][1]++;}cov_vb98so5to().s[133]++;if((cov_vb98so5to().b[49][0]++,value.add)||(cov_vb98so5to().b[49][1]++,nestedObjectsToAdd.length>0)){cov_vb98so5to().b[48][0]++;cov_vb98so5to().s[134]++;if(!value.add){cov_vb98so5to().b[50][0]++;cov_vb98so5to().s[135]++;value.add=[];}else{cov_vb98so5to().b[50][1]++;}cov_vb98so5to().s[136]++;value.add=value.add.map(input=>{cov_vb98so5to().f[23]++;const globalIdObject=(cov_vb98so5to().s[137]++,(0,_graphqlRelay.fromGlobalId)(input));cov_vb98so5to().s[138]++;if(globalIdObject.type===targetClass){cov_vb98so5to().b[51][0]++;cov_vb98so5to().s[139]++;input=globalIdObject.id;}else{cov_vb98so5to().b[51][1]++;}cov_vb98so5to().s[140]++;return{__type:'Pointer',className:targetClass,objectId:input};});cov_vb98so5to().s[141]++;op.ops.push({__op:'AddRelation',objects:[...value.add,...nestedObjectsToAdd]});}else{cov_vb98so5to().b[48][1]++;}cov_vb98so5to().s[142]++;if(value.remove){cov_vb98so5to().b[52][0]++;cov_vb98so5to().s[143]++;op.ops.push({__op:'RemoveRelation',objects:value.remove.map(input=>{cov_vb98so5to().f[24]++;const globalIdObject=(cov_vb98so5to().s[144]++,(0,_graphqlRelay.fromGlobalId)(input));cov_vb98so5to().s[145]++;if(globalIdObject.type===targetClass){cov_vb98so5to().b[53][0]++;cov_vb98so5to().s[146]++;input=globalIdObject.id;}else{cov_vb98so5to().b[53][1]++;}cov_vb98so5to().s[147]++;return{__type:'Pointer',className:targetClass,objectId:input};})});}else{cov_vb98so5to().b[52][1]++;}cov_vb98so5to().s[148]++;return op;},pointer:async(targetClass,field,value,parseGraphQLSchema,{config,auth,info})=>{cov_vb98so5to().f[25]++;cov_vb98so5to().s[149]++;if((cov_vb98so5to().b[55][0]++,Object.keys(value).length>1)||(cov_vb98so5to().b[55][1]++,Object.keys(value).length===0)){cov_vb98so5to().b[54][0]++;cov_vb98so5to().s[150]++;throw new _node.default.Error(_node.default.Error.INVALID_POINTER,`You need to provide link OR createLink on the pointer mutation of field ${field}`);}else{cov_vb98so5to().b[54][1]++;}let nestedObjectToAdd;cov_vb98so5to().s[151]++;if(value.createAndLink){cov_vb98so5to().b[56][0]++;const parseFields=(cov_vb98so5to().s[152]++,await transformTypes('create',value.createAndLink,{className:targetClass,parseGraphQLSchema,req:{config,auth,info}}));cov_vb98so5to().s[153]++;nestedObjectToAdd=await objectsMutations.createObject(targetClass,parseFields,config,auth,info);cov_vb98so5to().s[154]++;return{__type:'Pointer',className:targetClass,objectId:nestedObjectToAdd.objectId};}else{cov_vb98so5to().b[56][1]++;}cov_vb98so5to().s[155]++;if(value.link){cov_vb98so5to().b[57][0]++;let objectId=(cov_vb98so5to().s[156]++,value.link);const globalIdObject=(cov_vb98so5to().s[157]++,(0,_graphqlRelay.fromGlobalId)(objectId));cov_vb98so5to().s[158]++;if(globalIdObject.type===targetClass){cov_vb98so5to().b[58][0]++;cov_vb98so5to().s[159]++;objectId=globalIdObject.id;}else{cov_vb98so5to().b[58][1]++;}cov_vb98so5to().s[160]++;return{__type:'Pointer',className:targetClass,objectId};}else{cov_vb98so5to().b[57][1]++;}}});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9HcmFwaFFML3RyYW5zZm9ybWVycy9tdXRhdGlvbi5qcyJdLCJuYW1lcyI6WyJ0cmFuc2Zvcm1UeXBlcyIsImlucHV0VHlwZSIsImZpZWxkcyIsImNsYXNzTmFtZSIsInBhcnNlR3JhcGhRTFNjaGVtYSIsInJlcSIsImNsYXNzR3JhcGhRTENyZWF0ZVR5cGUiLCJjbGFzc0dyYXBoUUxVcGRhdGVUeXBlIiwiY29uZmlnIiwiaXNDcmVhdGVFbmFibGVkIiwiaXNVcGRhdGVFbmFibGVkIiwicGFyc2VDbGFzc1R5cGVzIiwicGFyc2VDbGFzcyIsInBhcnNlQ2xhc3NlcyIsImZpbmQiLCJjbGF6eiIsImNsYXNzR3JhcGhRTENyZWF0ZVR5cGVGaWVsZHMiLCJnZXRGaWVsZHMiLCJjbGFzc0dyYXBoUUxVcGRhdGVUeXBlRmllbGRzIiwicHJvbWlzZXMiLCJPYmplY3QiLCJrZXlzIiwibWFwIiwiZmllbGQiLCJpbnB1dFR5cGVGaWVsZCIsInR5cGUiLCJkZWZhdWx0R3JhcGhRTFR5cGVzIiwiR0VPX1BPSU5UX0lOUFVUIiwiX19vcCIsInRyYW5zZm9ybWVycyIsImdlb1BvaW50IiwiUE9MWUdPTl9JTlBVVCIsInBvbHlnb24iLCJGSUxFX0lOUFVUIiwiZmlsZSIsInJlbGF0aW9uIiwidGFyZ2V0Q2xhc3MiLCJwb2ludGVyIiwiUHJvbWlzZSIsImFsbCIsIkFDTCIsImlucHV0IiwidXBsb2FkIiwiZmlsZUluZm8iLCJfX3R5cGUiLCJuYW1lIiwidXJsIiwiUGFyc2UiLCJFcnJvciIsIkZJTEVfU0FWRV9FUlJPUiIsInZhbHVlIiwiY29vcmRpbmF0ZXMiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsInBhcnNlQUNMIiwicHVibGljIiwicmVhZCIsIndyaXRlIiwidXNlcnMiLCJmb3JFYWNoIiwicnVsZSIsImdsb2JhbElkT2JqZWN0IiwidXNlcklkIiwiaWQiLCJyb2xlcyIsInJvbGVOYW1lIiwiYXV0aCIsImluZm8iLCJsZW5ndGgiLCJJTlZBTElEX1BPSU5URVIiLCJvcCIsIm9wcyIsIm5lc3RlZE9iamVjdHNUb0FkZCIsImNyZWF0ZUFuZEFkZCIsInBhcnNlRmllbGRzIiwib2JqZWN0c011dGF0aW9ucyIsImNyZWF0ZU9iamVjdCIsIm9iamVjdCIsIm9iamVjdElkIiwiYWRkIiwicHVzaCIsIm9iamVjdHMiLCJyZW1vdmUiLCJuZXN0ZWRPYmplY3RUb0FkZCIsImNyZWF0ZUFuZExpbmsiLCJsaW5rIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FBRUEsTUFBTUEsY0FBYyxHQUFHLE9BQ3JCQyxTQURxQixFQUVyQkMsTUFGcUIsRUFHckI7QUFBRUMsRUFBQUEsU0FBRjtBQUFhQyxFQUFBQSxrQkFBYjtBQUFpQ0MsRUFBQUE7QUFBakMsQ0FIcUIsS0FJbEI7QUFDSCxRQUFNO0FBQ0pDLElBQUFBLHNCQURJO0FBRUpDLElBQUFBLHNCQUZJO0FBR0pDLElBQUFBLE1BQU0sRUFBRTtBQUFFQyxNQUFBQSxlQUFGO0FBQW1CQyxNQUFBQTtBQUFuQjtBQUhKLE1BSUZOLGtCQUFrQixDQUFDTyxlQUFuQixDQUFtQ1IsU0FBbkMsQ0FKSjtBQUtBLFFBQU1TLFVBQVUsR0FBR1Isa0JBQWtCLENBQUNTLFlBQW5CLENBQWdDQyxJQUFoQyxDQUFxQ0MsS0FBSyxJQUFJQSxLQUFLLENBQUNaLFNBQU4sS0FBb0JBLFNBQWxFLENBQW5COztBQUNBLE1BQUlELE1BQUosRUFBWTtBQUNWLFVBQU1jLDRCQUE0QixHQUNoQ1AsZUFBZSxJQUFJSCxzQkFBbkIsR0FBNENBLHNCQUFzQixDQUFDVyxTQUF2QixFQUE1QyxHQUFpRixJQURuRjtBQUVBLFVBQU1DLDRCQUE0QixHQUNoQ1IsZUFBZSxJQUFJSCxzQkFBbkIsR0FBNENBLHNCQUFzQixDQUFDVSxTQUF2QixFQUE1QyxHQUFpRixJQURuRjtBQUVBLFVBQU1FLFFBQVEsR0FBR0MsTUFBTSxDQUFDQyxJQUFQLENBQVluQixNQUFaLEVBQW9Cb0IsR0FBcEIs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RUFBRSxTQURIO0FBRUx6QyxRQUFBQSxTQUFTLEVBQUVpQyxXQUZOO0FBR0wwQyxRQUFBQTtBQUhLLE9BQVA7QUFLRDtBQUNGO0FBaEtrQixDQUFyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYXJzZSBmcm9tICdwYXJzZS9ub2RlJztcbmltcG9ydCB7IGZyb21HbG9iYWxJZCB9IGZyb20gJ2dyYXBocWwtcmVsYXknO1xuaW1wb3J0IHsgaGFuZGxlVXBsb2FkIH0gZnJvbSAnLi4vbG9hZGVycy9maWxlc011dGF0aW9ucyc7XG5pbXBvcnQgKiBhcyBkZWZhdWx0R3JhcGhRTFR5cGVzIGZyb20gJy4uL2xvYWRlcnMvZGVmYXVsdEdyYXBoUUxUeXBlcyc7XG5pbXBvcnQgKiBhcyBvYmplY3RzTXV0YXRpb25zIGZyb20gJy4uL2hlbHBlcnMvb2JqZWN0c011dGF0aW9ucyc7XG5cbmNvbnN0IHRyYW5zZm9ybVR5cGVzID0gYXN5bmMgKFxuICBpbnB1dFR5cGU6ICdjcmVhdGUnIHwgJ3VwZGF0ZScsXG4gIGZpZWxkcyxcbiAgeyBjbGFzc05hbWUsIHBhcnNlR3JhcGhRTFNjaGVtYSwgcmVxIH1cbikgPT4ge1xuICBjb25zdCB7XG4gICAgY2xhc3NHcmFwaFFMQ3JlYXRlVHlwZSxcbiAgICBjbGFzc0dyYXBoUUxVcGRhdGVUeXBlLFxuICAgIGNvbmZpZzogeyBpc0NyZWF0ZUVuYWJsZWQsIGlzVXBkYXRlRW5hYmxlZCB9LFxuICB9ID0gcGFyc2VHcmFwaFFMU2NoZW1hLnBhcnNlQ2xhc3NUeXBlc1tjbGFzc05hbWVdO1xuICBjb25zdCBwYXJzZUNsYXNzID0gcGFyc2VHcmFwaFFMU2NoZW1hLnBhcnNlQ2xhc3Nlcy5maW5kKGNsYXp6ID0+IGNsYXp6LmNsYXNzTmFtZSA9PT0gY2xhc3NOYW1lKTtcbiAgaWYgKGZpZWxkcykge1xuICAgIGNvbnN0IGNsYXNzR3JhcGhRTENyZWF0ZVR5cGVGaWVsZHMgPVxuICAgICAgaXNDcmVhdGVFbmFibGVkICYmIGNsYXNzR3JhcGhRTENyZWF0ZVR5cGUgPyBjbGFzc0dyYXBoUUxDcmVhdGVUeXBlLmdldEZpZWxkcygpIDogbnVsbDtcbiAgICBjb25zdCBjbGFzc0dyYXBoUUxVcGRhdGVUeXBlRmllbGRzID1cbiAgICAgIGlzVXBkYXRlRW5hYmxlZCAmJiBjbGFzc0dyYXBoUUxVcGRhdGVUeXBlID8gY2xhc3NHcmFwaFFMVXBkYXRlVHlwZS5nZXRGaWVsZHMoKSA6IG51bGw7XG4gICAgY29uc3QgcHJvbWlzZXMgPSBPYmplY3Qua2V5cyhmaWVsZHMpLm1hcChhc3luYyBmaWVsZCA9PiB7XG4gICAgICBsZXQgaW5wdXRUeXBlRmllbGQ7XG4gICAgICBpZiAoaW5wdXRUeXBlID09PSAnY3JlYXRlJyAmJiBjbGFzc0dyYXBoUUxDcmVhdGVUeXBlRmllbGRzKSB7XG4gICAgICAgIGlucHV0VHlwZUZpZWxkID0gY2xhc3NHcmFwaFFMQ3JlYXRlVHlwZUZpZWxkc1tmaWVsZF07XG4gICAgICB9IGVsc2UgaWYgKGNsYXNzR3JhcGhRTFVwZGF0ZVR5cGVGaWVsZHMpIHtcbiAgICAgICAgaW5wdXRUeXBlRmllbGQgPSBjbGFzc0dyYXBoUUxVcGRhdGVUeXBlRmllbGRzW2ZpZWxkXTtcbiAgICAgIH1cbiAgICAgIGlmIChpbnB1dFR5cGVGaWVsZCkge1xuICAgICAgICBzd2l0Y2ggKHRydWUpIHtcbiAgICAgICAgICBjYXNlIGlucHV0VHlwZUZpZWxkLnR5cGUgPT09IGRlZmF1bHRHcmFwaFFMVHlwZXMuR0VPX1BPSU5UX0lOUFVUOlxuICAgICAgICAgICAgaWYgKGZpZWxkc1tmaWVsZF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgZmllbGRzW2ZpZWxkXSA9IHsgX19vcDogJ0RlbGV0ZScgfTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaWVsZHNbZmllbGRdID0gdHJhbnNmb3JtZXJzLmdlb1BvaW50KGZpZWxkc1tmaWVsZF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBpbnB1dFR5cGVGaWVsZC50eXBlID09PSBkZWZhdWx0R3JhcGhRTFR5cGVzLlBPTFlHT05fSU5QVVQ6XG4gICAgICAgICAgICBpZiAoZmllbGRzW2ZpZWxkXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICBmaWVsZHNbZmllbGRdID0geyBfX29wOiAnRGVsZXRlJyB9O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpZWxkc1tmaWVsZF0gPSB0cmFuc2Zvcm1lcnMucG9seWdvbihmaWVsZHNbZmllbGRdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgaW5wdXRUeXBlRmllbGQudHlwZSA9PT0gZGVmYXVsdEdyYXBoUUxUeXBlcy5GSUxFX0lOUFVUOlxuICAgICAgICAgICAgZmllbGRzW2ZpZWxkXSA9IGF3YWl0IHRyYW5zZm9ybWVycy5maWxlKGZpZWxkc1tmaWVsZF0sIHJlcSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIHBhcnNlQ2xhc3MuZmllbGRzW2ZpZWxkXS50eXBlID09PSAnUmVsYXRpb24nOlxuICAgICAgICAgICAgZmllbGRzW2ZpZWxkXSA9IGF3YWl0IHRyYW5zZm9ybWVycy5yZWxhdGlvbihcbiAgICAgICAgICAgICAgcGFyc2VDbGFzcy5maWVsZHNbZmllbGRdLnRhcmdldENsYXNzLFxuICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgZmllbGRzW2ZpZWxkXSxcbiAgICAgICAgICAgICAgcGFyc2VHcmFwaFFMU2NoZW1hLFxuICAgICAgICAgICAgICByZXFcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIHBhcnNlQ2xhc3MuZmllbGRzW2ZpZWxkXS50eXBlID09PSAnUG9pbnRlcic6XG4gICAgICAgICAgICBpZiAoZmllbGRzW2ZpZWxkXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICBmaWVsZHNbZmllbGRdID0geyBfX29wOiAnRGVsZXRlJyB9O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpZWxkc1tmaWVsZF0gPSBhd2FpdCB0cmFuc2Zvcm1lcnMucG9pbnRlcihcbiAgICAgICAgICAgICAgcGFyc2VDbGFzcy5maWVsZHNbZmllbGRdLnRhcmdldENsYXNzLFxuICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgZmllbGRzW2ZpZWxkXSxcbiAgICAgICAgICAgICAgcGFyc2VHcmFwaFFMU2NoZW1hLFxuICAgICAgICAgICAgICByZXFcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgaWYgKGZpZWxkc1tmaWVsZF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgZmllbGRzW2ZpZWxkXSA9IHsgX19vcDogJ0RlbGV0ZScgfTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgaWYgKGZpZWxkcy5BQ0wpIGZpZWxkcy5BQ0wgPSB0cmFuc2Zvcm1lcnMuQUNMKGZpZWxkcy5BQ0wpO1xuICB9XG4gIHJldHVybiBmaWVsZHM7XG59O1xuXG5jb25zdCB0cmFuc2Zvcm1lcnMgPSB7XG4gIGZpbGU6IGFzeW5jIChpbnB1dCwgeyBjb25maWcgfSkgPT4ge1xuICAgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHsgX19vcDogJ0RlbGV0ZScgfTtcbiAgICB9XG4gICAgY29uc3QgeyBmaWxlLCB1cGxvYWQgfSA9IGlucHV0O1xuICAgIGlmICh1cGxvYWQpIHtcbiAgICAgIGNvbnN0IHsgZmlsZUluZm8gfSA9IGF3YWl0IGhhbmRsZVVwbG9hZCh1cGxvYWQsIGNvbmZpZyk7XG4gICAgICByZXR1cm4geyAuLi5maWxlSW5mbywgX190eXBlOiAnRmlsZScgfTtcbiAgICB9IGVsc2UgaWYgKGZpbGUgJiYgZmlsZS5uYW1lKSB7XG4gICAgICByZXR1cm4geyBuYW1lOiBmaWxlLm5hbWUsIF9fdHlwZTogJ0ZpbGUnLCB1cmw6IGZpbGUudXJsIH07XG4gICAgfVxuICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihQYXJzZS5FcnJvci5GSUxFX1NBVkVfRVJST1IsICdJbnZhbGlkIGZpbGUgdXBsb2FkLicpO1xuICB9LFxuICBwb2x5Z29uOiB2YWx1ZSA9PiAoe1xuICAgIF9fdHlwZTogJ1BvbHlnb24nLFxuICAgIGNvb3JkaW5hdGVzOiB2YWx1ZS5tYXAoZ2VvUG9pbnQgPT4gW2dlb1BvaW50LmxhdGl0dWRlLCBnZW9Qb2ludC5sb25naXR1ZGVdKSxcbiAgfSksXG4gIGdlb1BvaW50OiB2YWx1ZSA9PiAoe1xuICAgIC4uLnZhbHVlLFxuICAgIF9fdHlwZTogJ0dlb1BvaW50JyxcbiAgfSksXG4gIEFDTDogdmFsdWUgPT4ge1xuICAgIGNvbnN0IHBhcnNlQUNMID0ge307XG4gICAgaWYgKHZhbHVlLnB1YmxpYykge1xuICAgICAgcGFyc2VBQ0xbJyonXSA9IHtcbiAgICAgICAgcmVhZDogdmFsdWUucHVibGljLnJlYWQsXG4gICAgICAgIHdyaXRlOiB2YWx1ZS5wdWJsaWMud3JpdGUsXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAodmFsdWUudXNlcnMpIHtcbiAgICAgIHZhbHVlLnVzZXJzLmZvckVhY2gocnVsZSA9PiB7XG4gICAgICAgIGNvbnN0IGdsb2JhbElkT2JqZWN0ID0gZnJvbUdsb2JhbElkKHJ1bGUudXNlcklkKTtcbiAgICAgICAgaWYgKGdsb2JhbElkT2JqZWN0LnR5cGUgPT09ICdfVXNlcicpIHtcbiAgICAgICAgICBydWxlLnVzZXJJZCA9IGdsb2JhbElkT2JqZWN0LmlkO1xuICAgICAgICB9XG4gICAgICAgIHBhcnNlQUNMW3J1bGUudXNlcklkXSA9IHtcbiAgICAgICAgICByZWFkOiBydWxlLnJlYWQsXG4gICAgICAgICAgd3JpdGU6IHJ1bGUud3JpdGUsXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHZhbHVlLnJvbGVzKSB7XG4gICAgICB2YWx1ZS5yb2xlcy5mb3JFYWNoKHJ1bGUgPT4ge1xuICAgICAgICBwYXJzZUFDTFtgcm9sZToke3J1bGUucm9sZU5hbWV9YF0gPSB7XG4gICAgICAgICAgcmVhZDogcnVsZS5yZWFkLFxuICAgICAgICAgIHdyaXRlOiBydWxlLndyaXRlLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBwYXJzZUFDTDtcbiAgfSxcbiAgcmVsYXRpb246IGFzeW5jICh0YXJnZXRDbGFzcywgZmllbGQsIHZhbHVlLCBwYXJzZUdyYXBoUUxTY2hlbWEsIHsgY29uZmlnLCBhdXRoLCBpbmZvIH0pID0+IHtcbiAgICBpZiAoT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA9PT0gMClcbiAgICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihcbiAgICAgICAgUGFyc2UuRXJyb3IuSU5WQUxJRF9QT0lOVEVSLFxuICAgICAgICBgWW91IG5lZWQgdG8gcHJvdmlkZSBhdCBsZWFzdCBvbmUgb3BlcmF0aW9uIG9uIHRoZSByZWxhdGlvbiBtdXRhdGlvbiBvZiBmaWVsZCAke2ZpZWxkfWBcbiAgICAgICk7XG5cbiAgICBjb25zdCBvcCA9IHtcbiAgICAgIF9fb3A6ICdCYXRjaCcsXG4gICAgICBvcHM6IFtdLFxuICAgIH07XG4gICAgbGV0IG5lc3RlZE9iamVjdHNUb0FkZCA9IFtdO1xuXG4gICAgaWYgKHZhbHVlLmNyZWF0ZUFuZEFkZCkge1xuICAgICAgbmVzdGVkT2JqZWN0c1RvQWRkID0gKFxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICB2YWx1ZS5jcmVhdGVBbmRBZGQubWFwKGFzeW5jIGlucHV0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlRmllbGRzID0gYXdhaXQgdHJhbnNmb3JtVHlwZXMoJ2NyZWF0ZScsIGlucHV0LCB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogdGFyZ2V0Q2xhc3MsXG4gICAgICAgICAgICAgIHBhcnNlR3JhcGhRTFNjaGVtYSxcbiAgICAgICAgICAgICAgcmVxOiB7IGNvbmZpZywgYXV0aCwgaW5mbyB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0c011dGF0aW9ucy5jcmVhdGVPYmplY3QodGFyZ2V0Q2xhc3MsIHBhcnNlRmllbGRzLCBjb25maWcsIGF1dGgsIGluZm8pO1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICkubWFwKG9iamVjdCA9PiAoe1xuICAgICAgICBfX3R5cGU6ICdQb2ludGVyJyxcbiAgICAgICAgY2xhc3NOYW1lOiB0YXJnZXRDbGFzcyxcbiAgICAgICAgb2JqZWN0SWQ6IG9iamVjdC5vYmplY3RJZCxcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBpZiAodmFsdWUuYWRkIHx8IG5lc3RlZE9iamVjdHNUb0FkZC5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoIXZhbHVlLmFkZCkgdmFsdWUuYWRkID0gW107XG4gICAgICB2YWx1ZS5hZGQgPSB2YWx1ZS5hZGQubWFwKGlucHV0ID0+IHtcbiAgICAgICAgY29uc3QgZ2xvYmFsSWRPYmplY3QgPSBmcm9tR2xvYmFsSWQoaW5wdXQpO1xuICAgICAgICBpZiAoZ2xvYmFsSWRPYmplY3QudHlwZSA9PT0gdGFyZ2V0Q2xhc3MpIHtcbiAgICAgICAgICBpbnB1dCA9IGdsb2JhbElkT2JqZWN0LmlkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgX190eXBlOiAnUG9pbnRlcicsXG4gICAgICAgICAgY2xhc3NOYW1lOiB0YXJnZXRDbGFzcyxcbiAgICAgICAgICBvYmplY3RJZDogaW5wdXQsXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIG9wLm9wcy5wdXNoKHtcbiAgICAgICAgX19vcDogJ0FkZFJlbGF0aW9uJyxcbiAgICAgICAgb2JqZWN0czogWy4uLnZhbHVlLmFkZCwgLi4ubmVzdGVkT2JqZWN0c1RvQWRkXSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZS5yZW1vdmUpIHtcbiAgICAgIG9wLm9wcy5wdXNoKHtcbiAgICAgICAgX19vcDogJ1JlbW92ZVJlbGF0aW9uJyxcbiAgICAgICAgb2JqZWN0czogdmFsdWUucmVtb3ZlLm1hcChpbnB1dCA9PiB7XG4gICAgICAgICAgY29uc3QgZ2xvYmFsSWRPYmplY3QgPSBmcm9tR2xvYmFsSWQoaW5wdXQpO1xuICAgICAgICAgIGlmIChnbG9iYWxJZE9iamVjdC50eXBlID09PSB0YXJnZXRDbGFzcykge1xuICAgICAgICAgICAgaW5wdXQgPSBnbG9iYWxJZE9iamVjdC5pZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogJ1BvaW50ZXInLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiB0YXJnZXRDbGFzcyxcbiAgICAgICAgICAgIG9iamVjdElkOiBpbnB1dCxcbiAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gb3A7XG4gIH0sXG4gIHBvaW50ZXI6IGFzeW5jICh0YXJnZXRDbGFzcywgZmllbGQsIHZhbHVlLCBwYXJzZUdyYXBoUUxTY2hlbWEsIHsgY29uZmlnLCBhdXRoLCBpbmZvIH0pID0+IHtcbiAgICBpZiAoT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA+IDEgfHwgT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA9PT0gMClcbiAgICAgIHRocm93IG5ldyBQYXJzZS5FcnJvcihcbiAgICAgICAgUGFyc2UuRXJyb3IuSU5WQUxJRF9QT0lOVEVSLFxuICAgICAgICBgWW91IG5lZWQgdG8gcHJvdmlkZSBsaW5rIE9SIGNyZWF0ZUxpbmsgb24gdGhlIHBvaW50ZXIgbXV0YXRpb24gb2YgZmllbGQgJHtmaWVsZH1gXG4gICAgICApO1xuXG4gICAgbGV0IG5lc3RlZE9iamVjdFRvQWRkO1xuICAgIGlmICh2YWx1ZS5jcmVhdGVBbmRMaW5rKSB7XG4gICAgICBjb25zdCBwYXJzZUZpZWxkcyA9IGF3YWl0IHRyYW5zZm9ybVR5cGVzKCdjcmVhdGUnLCB2YWx1ZS5jcmVhdGVBbmRMaW5rLCB7XG4gICAgICAgIGNsYXNzTmFtZTogdGFyZ2V0Q2xhc3MsXG4gICAgICAgIHBhcnNlR3JhcGhRTFNjaGVtYSxcbiAgICAgICAgcmVxOiB7IGNvbmZpZywgYXV0aCwgaW5mbyB9LFxuICAgICAgfSk7XG4gICAgICBuZXN0ZWRPYmplY3RUb0FkZCA9IGF3YWl0IG9iamVjdHNNdXRhdGlvbnMuY3JlYXRlT2JqZWN0KFxuICAgICAgICB0YXJnZXRDbGFzcyxcbiAgICAgICAgcGFyc2VGaWVsZHMsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgYXV0aCxcbiAgICAgICAgaW5mb1xuICAgICAgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIF9fdHlwZTogJ1BvaW50ZXInLFxuICAgICAgICBjbGFzc05hbWU6IHRhcmdldENsYXNzLFxuICAgICAgICBvYmplY3RJZDogbmVzdGVkT2JqZWN0VG9BZGQub2JqZWN0SWQsXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAodmFsdWUubGluaykge1xuICAgICAgbGV0IG9iamVjdElkID0gdmFsdWUubGluaztcbiAgICAgIGNvbnN0IGdsb2JhbElkT2JqZWN0ID0gZnJvbUdsb2JhbElkKG9iamVjdElkKTtcbiAgICAgIGlmIChnbG9iYWxJZE9iamVjdC50eXBlID09PSB0YXJnZXRDbGFzcykge1xuICAgICAgICBvYmplY3RJZCA9IGdsb2JhbElkT2JqZWN0LmlkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgX190eXBlOiAnUG9pbnRlcicsXG4gICAgICAgIGNsYXNzTmFtZTogdGFyZ2V0Q2xhc3MsXG4gICAgICAgIG9iamVjdElkLFxuICAgICAgfTtcbiAgICB9XG4gIH0sXG59O1xuXG5leHBvcnQgeyB0cmFuc2Zvcm1UeXBlcyB9O1xuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9HcmFwaFFML3RyYW5zZm9ybWVycy9tdXRhdGlvbi5qcyJdLCJuYW1lcyI6WyJ0cmFuc2Zvcm1UeXBlcyIsInJlcSIsImNvbmZpZyIsImlzVXBkYXRlRW5hYmxlZCIsInBhcnNlR3JhcGhRTFNjaGVtYSIsInBhcnNlQ2xhc3MiLCJjbGF6eiIsImNsYXNzTmFtZSIsImNsYXNzR3JhcGhRTENyZWF0ZVR5cGVGaWVsZHMiLCJpc0NyZWF0ZUVuYWJsZWQiLCJjbGFzc0dyYXBoUUxDcmVhdGVUeXBlIiwiY2xhc3NHcmFwaFFMVXBkYXRlVHlwZUZpZWxkcyIsImNsYXNzR3JhcGhRTFVwZGF0ZVR5cGUiLCJwcm9taXNlcyIsImlucHV0VHlwZSIsImlucHV0VHlwZUZpZWxkIiwiZGVmYXVsdEdyYXBoUUxUeXBlcyIsImZpZWxkcyIsIl9fb3AiLCJ0cmFuc2Zvcm1lcnMiLCJQcm9taXNlIiwiZmlsZSIsImlucHV0IiwidXBsb2FkIiwiZmlsZUluZm8iLCJfX3R5cGUiLCJuYW1lIiwidXJsIiwiUGFyc2UiLCJwb2x5Z29uIiwidmFsdWUiLCJjb29yZGluYXRlcyIsImdlb1BvaW50IiwiQUNMIiwicGFyc2VBQ0wiLCJyZWFkIiwid3JpdGUiLCJydWxlIiwiZ2xvYmFsSWRPYmplY3QiLCJyb2xlTmFtZSIsInJlbGF0aW9uIiwiaW5mbyIsIk9iamVjdCIsImZpZWxkIiwib3AiLCJvcHMiLCJuZXN0ZWRPYmplY3RzVG9BZGQiLCJwYXJzZUZpZWxkcyIsIm9iamVjdHNNdXRhdGlvbnMiLCJvYmplY3QiLCJvYmplY3RJZCIsIm9iamVjdHMiLCJwb2ludGVyIiwibmVzdGVkT2JqZWN0VG9BZGQiXSwibWFwcGluZ3MiOiJ1eTRDQUlBOzhOQUpBLEdBQUEsQ0FBQSxLQUFBLHlCQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLFlBQUEsQ0FBQSxDQUFBLENBQUEsQ0FDQSxHQUFBLENBQUEsYUFBQSx5QkFBQSxPQUFBLENBQUEsZUFBQSxDQUFBLENBQUEsQ0FDQSxHQUFBLENBQUEsZUFBQSx5QkFBQSxPQUFBLENBQUEsMkJBQUEsQ0FBQSxDQUFBLENBQ0EsR0FBQSxDQUFBLG1CQUFBLHlCQUFBLHVCQUFBLENBQUEsT0FBQSxDQUFBLGdDQUFBLENBQUEsQ0FBQSxDQUFBLENBQ0EsR0FBQSxDQUFBLGdCQUFBLHlCQUFBLHVCQUFBLENBQUEsT0FBQSxDQUFBLDZCQUFBLENBQUEsQ0FBQSxDQUFBLEMsd3lKQUVBLEtBQU1BLENBQUFBLGNBQWMsQ0FBRyxNQUFBLFNBQUEsQ0FBQSxNQUFBLENBR3JCLENBQUEsU0FBQSxDQUFBLGtCQUFBLENBQWlDQyxHQUFqQyxDQUhxQixHQUlsQix5QkFDSCxLQUFNLENBQUEsc0JBQUEsQ0FBQSxzQkFBQSxDQUdKQyxNQUFNLENBQUUsQ0FBQSxlQUFBLENBQW1CQyxlQUFuQixDQUhKLDJCQUlGQyxrQkFBa0IsQ0FBbEJBLGVBQUFBLENBSkosU0FJSUEsQ0FKRSxDQUFOLENBS0EsS0FBTUMsQ0FBQUEsVUFBVSwwQkFBR0Qsa0JBQWtCLENBQWxCQSxZQUFBQSxDQUFBQSxJQUFBQSxDQUFxQ0UsS0FBSyxFQUFJQSx1REFBQUEsQ0FBQUEsS0FBSyxDQUFMQSxTQUFBQSxHQUFvQkMsU0FBcEJELENBQWpFLENBQW1CRixDQUFILENBQWhCLENBTkcsd0JBT0gsR0FBQSxNQUFBLENBQVksNEJBQ1YsS0FBTUksQ0FBQUEsNEJBQTRCLDBCQUNoQ0MsNEJBQUFBLGVBQWUsK0JBQWZBLHNCQUFlLENBQWZBLDZCQUE0Q0Msc0JBQXNCLENBQWxFRCxTQUE0Q0MsRUFBNUNELDhCQURGLElBQ0VBLENBRGdDLENBQWxDLENBRUEsS0FBTUUsQ0FBQUEsNEJBQTRCLDBCQUNoQ1IsNEJBQUFBLGVBQWUsK0JBQWZBLHNCQUFlLENBQWZBLDZCQUE0Q1Msc0JBQXNCLENBQWxFVCxTQUE0Q1MsRUFBNUNULDhCQURGLElBQ0VBLENBRGdDLENBQWxDLENBRUEsS0FBTVUsQ0FBQUEsUUFBUSwwQkFBRyxNQUFNLENBQU4sSUFBQSxDQUFBLE1BQUEsRUFBQSxHQUFBLENBQXdCLEtBQUEsQ0FBQSxLQUFBLEVBQWUseUJBQ3RELEdBQUEsQ0FBQSxjQUFBLENBRHNELHdCQUV0RCxHQUFJQyw0QkFBQUEsU0FBUyxHQUFUQSxRQUFBQSwrQkFBSiw0QkFBSUEsQ0FBSixDQUE0RCxvREFDMURDLGNBQWMsQ0FBR1AsNEJBQTRCLENBQTdDTyxLQUE2QyxDQUE3Q0EsQ0FERixDQUFBLElBRU8sdURBQUEsNEJBQUEsQ0FBa0Msb0RBQ3ZDQSxjQUFjLENBQUdKLDRCQUE0QixDQUE3Q0ksS0FBNkMsQ0FBN0NBLENBQ0QsQ0FGTSxpQ0FFTixDQU5xRCx3QkFPdEQsR0FBQSxjQUFBLENBQW9CLG9EQUNsQixPQUFBLElBQUEsRUFDRSxJQUFLQSxDQUFBQSxjQUFjLENBQWRBLElBQUFBLEdBQXdCQyxtQkFBbUIsQ0FBaEQsZUFBQSxvREFDRSxHQUFJQyxNQUFNLENBQU5BLEtBQU0sQ0FBTkEsR0FBSixJQUFBLENBQTRCLG9EQUMxQkEsTUFBTSxDQUFOQSxLQUFNLENBQU5BLENBQWdCLENBQUVDLElBQUksQ0FBRSxRQUFSLENBQWhCRCxDQUQwQix3QkFFMUIsTUFDRCxDQUhELGlDQURGLHdCQUtFQSxNQUFNLENBQU5BLEtBQU0sQ0FBTkEsQ0FBZ0JFLFlBQVksQ0FBWkEsUUFBQUEsQ0FBc0JGLE1BQU0sQ0FBNUNBLEtBQTRDLENBQTVCRSxDQUFoQkYsQ0FMRix3QkFNRSxNQUNGLElBQUtGLENBQUFBLGNBQWMsQ0FBZEEsSUFBQUEsR0FBd0JDLG1CQUFtQixDQUFoRCxhQUFBLG9EQUNFLEdBQUlDLE1BQU0sQ0FBTkEsS0FBTSxDQUFOQSxHQUFKLElBQUEsQ0FBNEIsb0RBQzFCQSxNQUFNLENBQU5BLEtBQU0sQ0FBTkEsQ0FBZ0IsQ0FBRUMsSUFBSSxDQUFFLFFBQVIsQ0FBaEJELENBRDBCLHdCQUUxQixNQUNELENBSEQsaUNBREYsd0JBS0VBLE1BQU0sQ0FBTkEsS0FBTSxDQUFOQSxDQUFnQkUsWUFBWSxDQUFaQSxPQUFBQSxDQUFxQkYsTUFBTSxDQUEzQ0EsS0FBMkMsQ0FBM0JFLENBQWhCRixDQUxGLHdCQU1FLE1BQ0YsSUFBS0YsQ0FBQUEsY0FBYyxDQUFkQSxJQUFBQSxHQUF3QkMsbUJBQW1CLENBQWhELFVBQUEsb0RBQ0VDLE1BQU0sQ0FBTkEsS0FBTSxDQUFOQSxDQUFnQixLQUFNRSxDQUFBQSxZQUFZLENBQVpBLElBQUFBLENBQWtCRixNQUFNLENBQXhCRSxLQUF3QixDQUF4QkEsQ0FBdEJGLEdBQXNCRSxDQUF0QkYsQ0FERix3QkFFRSxNQUNGLElBQUtaLENBQUFBLFVBQVUsQ0FBVkEsTUFBQUEsQ0FBQUEsS0FBQUEsRUFBQUEsSUFBQUEsR0FBTCxVQUFBLG9EQUNFWSxNQUFNLENBQU5BLEtBQU0sQ0FBTkEsQ0FBZ0IsS0FBTUUsQ0FBQUEsWUFBWSxDQUFaQSxRQUFBQSxDQUNwQmQsVUFBVSxDQUFWQSxNQUFBQSxDQUFBQSxLQUFBQSxFQURvQmMsV0FBQUEsQ0FBQUEsS0FBQUEsQ0FHcEJGLE1BQU0sQ0FIY0UsS0FHZCxDQUhjQSxDQUFBQSxrQkFBQUEsQ0FBdEJGLEdBQXNCRSxDQUF0QkYsQ0FERix3QkFRRSxNQUNGLElBQUtaLENBQUFBLFVBQVUsQ0FBVkEsTUFBQUEsQ0FBQUEsS0FBQUEsRUFBQUEsSUFBQUEsR0FBTCxTQUFBLG9EQUNFLEdBQUlZLE1BQU0sQ0FBTkEsS0FBTSxDQUFOQSxHQUFKLElBQUEsQ0FBNEIsb0RBQzFCQSxNQUFNLENBQU5BLEtBQU0sQ0FBTkEsQ0FBZ0IsQ0FBRUMsSUFBSSxDQUFFLFFBQVIsQ0FBaEJELENBRDBCLHdCQUUxQixNQUNELENBSEQsaUNBREYsd0JBS0VBLE1BQU0sQ0FBTkEsS0FBTSxDQUFOQSxDQUFnQixLQUFNRSxDQUFBQSxZQUFZLENBQVpBLE9BQUFBLENBQ3BCZCxVQUFVLENBQVZBLE1BQUFBLENBQUFBLEtBQUFBLEVBRG9CYyxXQUFBQSxDQUFBQSxLQUFBQSxDQUdwQkYsTUFBTSxDQUhjRSxLQUdkLENBSGNBLENBQUFBLGtCQUFBQSxDQUF0QkYsR0FBc0JFLENBQXRCRixDQUxGLHdCQVlFLE1BQ0YsMkRBQ0UsR0FBSUEsTUFBTSxDQUFOQSxLQUFNLENBQU5BLEdBQUosSUFBQSxDQUE0QixvREFDMUJBLE1BQU0sQ0FBTkEsS0FBTSxDQUFOQSxDQUFnQixDQUFFQyxJQUFJLENBQUUsUUFBUixDQUFoQkQsQ0FEMEIsd0JBRTFCLE9BQ0QsQ0FIRCxpQ0FERix3QkFLRSxNQTdDSixDQStDRCxDQWhERCxpQ0FQRixDQUFpQixDQUFILENBQWQsQ0FMVSx3QkE4RFYsS0FBTUcsQ0FBQUEsT0FBTyxDQUFQQSxHQUFBQSxDQUFOLFFBQU1BLENBQU4sQ0E5RFUsd0JBK0RWLEdBQUlILE1BQU0sQ0FBVixHQUFBLENBQWdCQSxvREFBQUEsTUFBTSxDQUFOQSxHQUFBQSxDQUFhRSxZQUFZLENBQVpBLEdBQUFBLENBQWlCRixNQUFNLENBQXBDQSxHQUFhRSxDQUFiRixDQUFBQSxDQUFoQixpQ0FDRCxDQWhFRCxpQ0FQRyx3QkF3RUgsTUFBQSxDQUFBLE1BQUEsQ0E1RUYsQ0FBQSxDLDhEQStFQSxLQUFNRSxDQUFBQSxZQUFZLDBCQUFHLENBQ25CRSxJQUFJLENBQUUsTUFBQSxLQUFBLENBQWMsQ0FBRW5CLE1BQUYsQ0FBZCxHQUE2QixpREFDakMsR0FBSW9CLEtBQUssR0FBVCxJQUFBLENBQW9CLHFEQUNsQixNQUFPLENBQUVKLElBQUksQ0FBRSxRQUFSLENBQVAsQ0FDRCxDQUZELGlDQUdBLEtBQU0sQ0FBQSxJQUFBLENBQVFLLE1BQVIsNEJBQU4sS0FBTSxDQUFOLENBSmlDLHlCQUtqQyxHQUFBLE1BQUEsQ0FBWSw0QkFDVixLQUFNLENBQUVDLFFBQUYsNEJBQWUsS0FBTSxDQUFBLEVBQUEsZUFBQSxDQUFBLFlBQUEsRUFBQSxNQUFBLENBQTNCLE1BQTJCLENBQXJCLENBQU4sQ0FEVSx5QkFFVixNQUFBLENBQUEsYUFBQSxDQUFBLGFBQUEsQ0FBQSxFQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsRUFBQSxDQUFBLENBQXNCQyxNQUFNLENBQUUsTUFBOUIsQ0FBQSxDQUFBLENBRkYsQ0FBQSxJQUdPLHdEQUFJSiw0QkFBQUEsSUFBSSwrQkFBSUEsSUFBSSxDQUFoQixJQUFRLENBQVIsQ0FBdUIscURBQzVCLE1BQU8sQ0FBRUssSUFBSSxDQUFFTCxJQUFJLENBQVosSUFBQSxDQUFtQkksTUFBTSxDQUF6QixNQUFBLENBQW1DRSxHQUFHLENBQUVOLElBQUksQ0FBQ00sR0FBN0MsQ0FBUCxDQUNELENBRk0saUNBRU4sQ0FWZ0MseUJBV2pDLEtBQU0sSUFBSUMsQ0FBQUEsS0FBQUEsQ0FBQUEsT0FBQUEsQ0FBSixLQUFBLENBQWdCQSxLQUFBQSxDQUFBQSxPQUFBQSxDQUFBQSxLQUFBQSxDQUFoQixlQUFBLENBQU4sc0JBQU0sQ0FBTixDQVppQixDQUFBLENBY25CQyxPQUFPLENBQUVDLEtBQUssRUFBSyx5REFDakJMLE1BQU0sQ0FEVyxTQUFBLENBRWpCTSxXQUFXLENBQUVELEtBQUssQ0FBTEEsR0FBQUEsQ0FBVUUsUUFBUSxFQUFJLHlEQUFDQSxRQUFRLENBQVQsUUFBQSxDQUFvQkEsUUFBUSxDQUE1QixTQUFBLEVBQXRCRixDQUFBQSxDQUZJLEVBZEEsQ0FBQSxDQWtCbkJFLFFBQVEsQ0FBRUYsS0FBSyxFQUFBLHdEQUFBLENBQUEsYUFBQSxDQUFBLGFBQUEsQ0FBQSxFQUFBLENBQUEsS0FBQSxDQUFBLENBQUEsRUFBQSxDQUFBLENBRWJMLE1BQU0sQ0FBRSxVQUZLLENBQUEsQ0FBQSxDQWxCSSxDQUFBLENBc0JuQlEsR0FBRyxDQUFFSCxLQUFLLEVBQUkseUJBQ1osS0FBTUksQ0FBQUEsUUFBUSwyQkFBZCxFQUFjLENBQWQsQ0FEWSx5QkFFWixHQUFJSixLQUFLLENBQVQsTUFBQSxDQUFrQixxREFDaEJJLFFBQVEsQ0FBUkEsR0FBUSxDQUFSQSxDQUFnQixDQUNkQyxJQUFJLENBQUVMLEtBQUssQ0FBTEEsTUFBQUEsQ0FEUSxJQUFBLENBRWRNLEtBQUssQ0FBRU4sS0FBSyxDQUFMQSxNQUFBQSxDQUFhTSxLQUZOLENBQWhCRixDQUlELENBTEQsaUNBRlkseUJBUVosR0FBSUosS0FBSyxDQUFULEtBQUEsQ0FBaUIscURBQ2ZBLEtBQUssQ0FBTEEsS0FBQUEsQ0FBQUEsT0FBQUEsQ0FBb0JPLElBQUksRUFBSSx5QkFDMUIsS0FBTUMsQ0FBQUEsY0FBYywyQkFBRyxDQUFBLEVBQUEsYUFBQSxDQUFBLFlBQUEsRUFBYUQsSUFBSSxDQUF4QyxNQUF1QixDQUFILENBQXBCLENBRDBCLHlCQUUxQixHQUFJQyxjQUFjLENBQWRBLElBQUFBLEdBQUosT0FBQSxDQUFxQyxxREFDbkNELElBQUksQ0FBSkEsTUFBQUEsQ0FBY0MsY0FBYyxDQUE1QkQsRUFBQUEsQ0FDRCxDQUZELGlDQUYwQix5QkFLMUJILFFBQVEsQ0FBQ0csSUFBSSxDQUFiSCxNQUFRLENBQVJBLENBQXdCLENBQ3RCQyxJQUFJLENBQUVFLElBQUksQ0FEWSxJQUFBLENBRXRCRCxLQUFLLENBQUVDLElBQUksQ0FBQ0QsS0FGVSxDQUF4QkYsQ0FMRkosQ0FBQUEsRUFVRCxDQVhELGlDQVJZLHlCQW9CWixHQUFJQSxLQUFLLENBQVQsS0FBQSxDQUFpQixxREFDZkEsS0FBSyxDQUFMQSxLQUFBQSxDQUFBQSxPQUFBQSxDQUFvQk8sSUFBSSxFQUFJLGtEQUMxQkgsUUFBUSxDQUFFLFFBQU9HLElBQUksQ0FBQ0UsUUFBdEJMLEVBQVEsQ0FBUkEsQ0FBb0MsQ0FDbENDLElBQUksQ0FBRUUsSUFBSSxDQUR3QixJQUFBLENBRWxDRCxLQUFLLENBQUVDLElBQUksQ0FBQ0QsS0FGc0IsQ0FBcENGLENBREZKLENBQUFBLEVBTUQsQ0FQRCxpQ0FwQlkseUJBNEJaLE1BQUEsQ0FBQSxRQUFBLENBbERpQixDQUFBLENBb0RuQlUsUUFBUSxDQUFFLE1BQUEsV0FBQSxDQUFBLEtBQUEsQ0FBQSxLQUFBLENBQUEsa0JBQUEsQ0FBc0QsQ0FBQSxNQUFBLENBQUEsSUFBQSxDQUFnQkMsSUFBaEIsQ0FBdEQsR0FBaUYsa0RBQ3pGLEdBQUlDLE1BQU0sQ0FBTkEsSUFBQUEsQ0FBQUEsS0FBQUEsRUFBQUEsTUFBQUEsR0FBSixDQUFBLENBQ0UsMERBQU0sSUFBSWQsQ0FBQUEsS0FBQUEsQ0FBQUEsT0FBQUEsQ0FBSixLQUFBLENBQ0pBLEtBQUFBLENBQUFBLE9BQUFBLENBQUFBLEtBQUFBLENBREksZUFBQSxDQUVILGdGQUErRWUsS0FGbEYsRUFBTSxDQUFOLENBQUEsQ0FERixpQ0FNQSxLQUFNQyxDQUFBQSxFQUFFLDJCQUFHLENBQ1QxQixJQUFJLENBREssT0FBQSxDQUVUMkIsR0FBRyxDQUFFLEVBRkksQ0FBSCxDQUFSLENBSUEsR0FBSUMsQ0FBQUEsa0JBQWtCLDJCQUF0QixFQUFzQixDQUF0QixDQVh5Rix5QkFhekYsR0FBSWhCLEtBQUssQ0FBVCxZQUFBLENBQXdCLHFEQUN0QmdCLGtCQUFrQixDQUFHLENBQ25CLEtBQU0sQ0FBQSxPQUFPLENBQVAsR0FBQSxDQUNKLEtBQUssQ0FBTCxZQUFBLENBQUEsR0FBQSxDQUF1QixLQUFBLENBQUEsS0FBQSxFQUFlLHlCQUNwQyxLQUFNQyxDQUFBQSxXQUFXLDJCQUFHLEtBQU0vQyxDQUFBQSxjQUFjLENBQUEsUUFBQSxDQUFBLEtBQUEsQ0FBa0IsQ0FDeERPLFNBQVMsQ0FEK0MsV0FBQSxDQUFBLGtCQUFBLENBR3hETixHQUFHLENBQUUsQ0FBQSxNQUFBLENBQUEsSUFBQSxDQUFnQndDLElBQWhCLENBSG1ELENBQWxCLENBQXZCLENBQWpCLENBRG9DLHlCQU1wQyxNQUFPTyxDQUFBQSxnQkFBZ0IsQ0FBaEJBLFlBQUFBLENBQUFBLFdBQUFBLENBQUFBLFdBQUFBLENBQUFBLE1BQUFBLENBQUFBLElBQUFBLENBQVAsSUFBT0EsQ0FBUCxDQVJlLENBRWpCLENBREksQ0FEYSxFQUFBLEdBQUEsQ0FXZkMsTUFBTSxFQUFLLHlEQUNmeEIsTUFBTSxDQURTLFNBQUEsQ0FFZmxCLFNBQVMsQ0FGTSxXQUFBLENBR2YyQyxRQUFRLENBQUVELE1BQU0sQ0FBQ0MsUUFIRixFQVhqQkosQ0FBcUIsQ0FBckJBLENBZ0JELENBakJELGlDQWJ5Rix5QkFnQ3pGLEdBQUloQiw0QkFBQUEsS0FBSyxDQUFMQSxHQUFBQSwrQkFBYWdCLGtCQUFrQixDQUFsQkEsTUFBQUEsQ0FBakIsQ0FBSWhCLENBQUosQ0FBZ0QscURBQzlDLEdBQUksQ0FBQ0EsS0FBSyxDQUFWLEdBQUEsQ0FBZ0JBLHFEQUFBQSxLQUFLLENBQUxBLEdBQUFBLENBQUFBLEVBQUFBLENBQUFBLENBQWhCLGlDQUQ4Qyx5QkFFOUNBLEtBQUssQ0FBTEEsR0FBQUEsQ0FBWSxLQUFLLENBQUwsR0FBQSxDQUFBLEdBQUEsQ0FBY1IsS0FBSyxFQUFJLHlCQUNqQyxLQUFNZ0IsQ0FBQUEsY0FBYywyQkFBRyxDQUFBLEVBQUEsYUFBQSxDQUFBLFlBQUEsRUFBdkIsS0FBdUIsQ0FBSCxDQUFwQixDQURpQyx5QkFFakMsR0FBSUEsY0FBYyxDQUFkQSxJQUFBQSxHQUFKLFdBQUEsQ0FBeUMscURBQ3ZDaEIsS0FBSyxDQUFHZ0IsY0FBYyxDQUF0QmhCLEVBQUFBLENBQ0QsQ0FGRCxpQ0FGaUMseUJBS2pDLE1BQU8sQ0FDTEcsTUFBTSxDQURELFNBQUEsQ0FFTGxCLFNBQVMsQ0FGSixXQUFBLENBR0wyQyxRQUFRLENBQUU1QixLQUhMLENBQVAsQ0FMRlEsQ0FBWSxDQUFaQSxDQUY4Qyx5QkFhOUNjLEVBQUUsQ0FBRkEsR0FBQUEsQ0FBQUEsSUFBQUEsQ0FBWSxDQUNWMUIsSUFBSSxDQURNLGFBQUEsQ0FFVmlDLE9BQU8sQ0FBRSxDQUFDLEdBQUdyQixLQUFLLENBQVQsR0FBQSxDQUFlLEdBQWYsa0JBQUEsQ0FGQyxDQUFaYyxFQUlELENBakJELGlDQWhDeUYseUJBbUR6RixHQUFJZCxLQUFLLENBQVQsTUFBQSxDQUFrQixxREFDaEJjLEVBQUUsQ0FBRkEsR0FBQUEsQ0FBQUEsSUFBQUEsQ0FBWSxDQUNWMUIsSUFBSSxDQURNLGdCQUFBLENBRVZpQyxPQUFPLENBQUUsS0FBSyxDQUFMLE1BQUEsQ0FBQSxHQUFBLENBQWlCN0IsS0FBSyxFQUFJLHlCQUNqQyxLQUFNZ0IsQ0FBQUEsY0FBYywyQkFBRyxDQUFBLEVBQUEsYUFBQSxDQUFBLFlBQUEsRUFBdkIsS0FBdUIsQ0FBSCxDQUFwQixDQURpQyx5QkFFakMsR0FBSUEsY0FBYyxDQUFkQSxJQUFBQSxHQUFKLFdBQUEsQ0FBeUMscURBQ3ZDaEIsS0FBSyxDQUFHZ0IsY0FBYyxDQUF0QmhCLEVBQUFBLENBQ0QsQ0FGRCxpQ0FGaUMseUJBS2pDLE1BQU8sQ0FDTEcsTUFBTSxDQURELFNBQUEsQ0FFTGxCLFNBQVMsQ0FGSixXQUFBLENBR0wyQyxRQUFRLENBQUU1QixLQUhMLENBQVAsQ0FMTyxDQUFBLENBRkMsQ0FBWnNCLEVBY0QsQ0FmRCxpQ0FuRHlGLHlCQW1FekYsTUFBQSxDQUFBLEVBQUEsQ0F2SGlCLENBQUEsQ0F5SG5CUSxPQUFPLENBQUUsTUFBQSxXQUFBLENBQUEsS0FBQSxDQUFBLEtBQUEsQ0FBQSxrQkFBQSxDQUFzRCxDQUFBLE1BQUEsQ0FBQSxJQUFBLENBQWdCWCxJQUFoQixDQUF0RCxHQUFpRixrREFDeEYsR0FBSUMsNEJBQUFBLE1BQU0sQ0FBTkEsSUFBQUEsQ0FBQUEsS0FBQUEsRUFBQUEsTUFBQUEsQ0FBQUEsQ0FBQUEsK0JBQWlDQSxNQUFNLENBQU5BLElBQUFBLENBQUFBLEtBQUFBLEVBQUFBLE1BQUFBLEdBQXJDLENBQUlBLENBQUosQ0FDRSwwREFBTSxJQUFJZCxDQUFBQSxLQUFBQSxDQUFBQSxPQUFBQSxDQUFKLEtBQUEsQ0FDSkEsS0FBQUEsQ0FBQUEsT0FBQUEsQ0FBQUEsS0FBQUEsQ0FESSxlQUFBLENBRUgsMkVBQTBFZSxLQUY3RSxFQUFNLENBQU4sQ0FBQSxDQURGLGlDQU1BLEdBQUEsQ0FBQSxpQkFBQSxDQVB3Rix5QkFReEYsR0FBSWIsS0FBSyxDQUFULGFBQUEsQ0FBeUIsNEJBQ3ZCLEtBQU1pQixDQUFBQSxXQUFXLDJCQUFHLEtBQU0vQyxDQUFBQSxjQUFjLENBQUEsUUFBQSxDQUFXOEIsS0FBSyxDQUFoQixhQUFBLENBQWdDLENBQ3RFdkIsU0FBUyxDQUQ2RCxXQUFBLENBQUEsa0JBQUEsQ0FHdEVOLEdBQUcsQ0FBRSxDQUFBLE1BQUEsQ0FBQSxJQUFBLENBQWdCd0MsSUFBaEIsQ0FIaUUsQ0FBaEMsQ0FBdkIsQ0FBakIsQ0FEdUIseUJBTXZCWSxpQkFBaUIsQ0FBRyxLQUFNTCxDQUFBQSxnQkFBZ0IsQ0FBaEJBLFlBQUFBLENBQUFBLFdBQUFBLENBQUFBLFdBQUFBLENBQUFBLE1BQUFBLENBQUFBLElBQUFBLENBQTFCSyxJQUEwQkwsQ0FBMUJLLENBTnVCLHlCQWF2QixNQUFPLENBQ0w1QixNQUFNLENBREQsU0FBQSxDQUVMbEIsU0FBUyxDQUZKLFdBQUEsQ0FHTDJDLFFBQVEsQ0FBRUcsaUJBQWlCLENBQUNILFFBSHZCLENBQVAsQ0FLRCxDQWxCRCxpQ0FSd0YseUJBMkJ4RixHQUFJcEIsS0FBSyxDQUFULElBQUEsQ0FBZ0IsNEJBQ2QsR0FBSW9CLENBQUFBLFFBQVEsMkJBQUdwQixLQUFLLENBQXBCLElBQVksQ0FBWixDQUNBLEtBQU1RLENBQUFBLGNBQWMsMkJBQUcsQ0FBQSxFQUFBLGFBQUEsQ0FBQSxZQUFBLEVBQXZCLFFBQXVCLENBQUgsQ0FBcEIsQ0FGYyx5QkFHZCxHQUFJQSxjQUFjLENBQWRBLElBQUFBLEdBQUosV0FBQSxDQUF5QyxxREFDdkNZLFFBQVEsQ0FBR1osY0FBYyxDQUF6QlksRUFBQUEsQ0FDRCxDQUZELGlDQUhjLHlCQU1kLE1BQU8sQ0FDTHpCLE1BQU0sQ0FERCxTQUFBLENBRUxsQixTQUFTLENBRkosV0FBQSxDQUdMMkMsUUFISyxDQUFQLENBS0QsQ0FYRCxpQ0FZRCxDQWhLa0IsQ0FBSCxDQUFsQixDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBhcnNlIGZyb20gJ3BhcnNlL25vZGUnO1xuaW1wb3J0IHsgZnJvbUdsb2JhbElkIH0gZnJvbSAnZ3JhcGhxbC1yZWxheSc7XG5pbXBvcnQgeyBoYW5kbGVVcGxvYWQgfSBmcm9tICcuLi9sb2FkZXJzL2ZpbGVzTXV0YXRpb25zJztcbmltcG9ydCAqIGFzIGRlZmF1bHRHcmFwaFFMVHlwZXMgZnJvbSAnLi4vbG9hZGVycy9kZWZhdWx0R3JhcGhRTFR5cGVzJztcbmltcG9ydCAqIGFzIG9iamVjdHNNdXRhdGlvbnMgZnJvbSAnLi4vaGVscGVycy9vYmplY3RzTXV0YXRpb25zJztcblxuY29uc3QgdHJhbnNmb3JtVHlwZXMgPSBhc3luYyAoXG4gIGlucHV0VHlwZTogJ2NyZWF0ZScgfCAndXBkYXRlJyxcbiAgZmllbGRzLFxuICB7IGNsYXNzTmFtZSwgcGFyc2VHcmFwaFFMU2NoZW1hLCByZXEgfVxuKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBjbGFzc0dyYXBoUUxDcmVhdGVUeXBlLFxuICAgIGNsYXNzR3JhcGhRTFVwZGF0ZVR5cGUsXG4gICAgY29uZmlnOiB7IGlzQ3JlYXRlRW5hYmxlZCwgaXNVcGRhdGVFbmFibGVkIH0sXG4gIH0gPSBwYXJzZUdyYXBoUUxTY2hlbWEucGFyc2VDbGFzc1R5cGVzW2NsYXNzTmFtZV07XG4gIGNvbnN0IHBhcnNlQ2xhc3MgPSBwYXJzZUdyYXBoUUxTY2hlbWEucGFyc2VDbGFzc2VzLmZpbmQoY2xhenogPT4gY2xhenouY2xhc3NOYW1lID09PSBjbGFzc05hbWUpO1xuICBpZiAoZmllbGRzKSB7XG4gICAgY29uc3QgY2xhc3NHcmFwaFFMQ3JlYXRlVHlwZUZpZWxkcyA9XG4gICAgICBpc0NyZWF0ZUVuYWJsZWQgJiYgY2xhc3NHcmFwaFFMQ3JlYXRlVHlwZSA/IGNsYXNzR3JhcGhRTENyZWF0ZVR5cGUuZ2V0RmllbGRzKCkgOiBudWxsO1xuICAgIGNvbnN0IGNsYXNzR3JhcGhRTFVwZGF0ZVR5cGVGaWVsZHMgPVxuICAgICAgaXNVcGRhdGVFbmFibGVkICYmIGNsYXNzR3JhcGhRTFVwZGF0ZVR5cGUgPyBjbGFzc0dyYXBoUUxVcGRhdGVUeXBlLmdldEZpZWxkcygpIDogbnVsbDtcbiAgICBjb25zdCBwcm9taXNlcyA9IE9iamVjdC5rZXlzKGZpZWxkcykubWFwKGFzeW5jIGZpZWxkID0+IHtcbiAgICAgIGxldCBpbnB1dFR5cGVGaWVsZDtcbiAgICAgIGlmIChpbnB1dFR5cGUgPT09ICdjcmVhdGUnICYmIGNsYXNzR3JhcGhRTENyZWF0ZVR5cGVGaWVsZHMpIHtcbiAgICAgICAgaW5wdXRUeXBlRmllbGQgPSBjbGFzc0dyYXBoUUxDcmVhdGVUeXBlRmllbGRzW2ZpZWxkXTtcbiAgICAgIH0gZWxzZSBpZiAoY2xhc3NHcmFwaFFMVXBkYXRlVHlwZUZpZWxkcykge1xuICAgICAgICBpbnB1dFR5cGVGaWVsZCA9IGNsYXNzR3JhcGhRTFVwZGF0ZVR5cGVGaWVsZHNbZmllbGRdO1xuICAgICAgfVxuICAgICAgaWYgKGlucHV0VHlwZUZpZWxkKSB7XG4gICAgICAgIHN3aXRjaCAodHJ1ZSkge1xuICAgICAgICAgIGNhc2UgaW5wdXRUeXBlRmllbGQudHlwZSA9PT0gZGVmYXVsdEdyYXBoUUxUeXBlcy5HRU9fUE9JTlRfSU5QVVQ6XG4gICAgICAgICAgICBpZiAoZmllbGRzW2ZpZWxkXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICBmaWVsZHNbZmllbGRdID0geyBfX29wOiAnRGVsZXRlJyB9O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpZWxkc1tmaWVsZF0gPSB0cmFuc2Zvcm1lcnMuZ2VvUG9pbnQoZmllbGRzW2ZpZWxkXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIGlucHV0VHlwZUZpZWxkLnR5cGUgPT09IGRlZmF1bHRHcmFwaFFMVHlwZXMuUE9MWUdPTl9JTlBVVDpcbiAgICAgICAgICAgIGlmIChmaWVsZHNbZmllbGRdID09PSBudWxsKSB7XG4gICAgICAgICAgICAgIGZpZWxkc1tmaWVsZF0gPSB7IF9fb3A6ICdEZWxldGUnIH07XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmllbGRzW2ZpZWxkXSA9IHRyYW5zZm9ybWVycy5wb2x5Z29uKGZpZWxkc1tmaWVsZF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBpbnB1dFR5cGVGaWVsZC50eXBlID09PSBkZWZhdWx0R3JhcGhRTFR5cGVzLkZJTEVfSU5QVVQ6XG4gICAgICAgICAgICBmaWVsZHNbZmllbGRdID0gYXdhaXQgdHJhbnNmb3JtZXJzLmZpbGUoZmllbGRzW2ZpZWxkXSwgcmVxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgcGFyc2VDbGFzcy5maWVsZHNbZmllbGRdLnR5cGUgPT09ICdSZWxhdGlvbic6XG4gICAgICAgICAgICBmaWVsZHNbZmllbGRdID0gYXdhaXQgdHJhbnNmb3JtZXJzLnJlbGF0aW9uKFxuICAgICAgICAgICAgICBwYXJzZUNsYXNzLmZpZWxkc1tmaWVsZF0udGFyZ2V0Q2xhc3MsXG4gICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICBmaWVsZHNbZmllbGRdLFxuICAgICAgICAgICAgICBwYXJzZUdyYXBoUUxTY2hlbWEsXG4gICAgICAgICAgICAgIHJlcVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgcGFyc2VDbGFzcy5maWVsZHNbZmllbGRdLnR5cGUgPT09ICdQb2ludGVyJzpcbiAgICAgICAgICAgIGlmIChmaWVsZHNbZmllbGRdID09PSBudWxsKSB7XG4gICAgICAgICAgICAgIGZpZWxkc1tmaWVsZF0gPSB7IF9fb3A6ICdEZWxldGUnIH07XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmllbGRzW2ZpZWxkXSA9IGF3YWl0IHRyYW5zZm9ybWVycy5wb2ludGVyKFxuICAgICAgICAgICAgICBwYXJzZUNsYXNzLmZpZWxkc1tmaWVsZF0udGFyZ2V0Q2xhc3MsXG4gICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICBmaWVsZHNbZmllbGRdLFxuICAgICAgICAgICAgICBwYXJzZUdyYXBoUUxTY2hlbWEsXG4gICAgICAgICAgICAgIHJlcVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBpZiAoZmllbGRzW2ZpZWxkXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICBmaWVsZHNbZmllbGRdID0geyBfX29wOiAnRGVsZXRlJyB9O1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICBpZiAoZmllbGRzLkFDTCkgZmllbGRzLkFDTCA9IHRyYW5zZm9ybWVycy5BQ0woZmllbGRzLkFDTCk7XG4gIH1cbiAgcmV0dXJuIGZpZWxkcztcbn07XG5cbmNvbnN0IHRyYW5zZm9ybWVycyA9IHtcbiAgZmlsZTogYXN5bmMgKGlucHV0LCB7IGNvbmZpZyB9KSA9PiB7XG4gICAgaWYgKGlucHV0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4geyBfX29wOiAnRGVsZXRlJyB9O1xuICAgIH1cbiAgICBjb25zdCB7IGZpbGUsIHVwbG9hZCB9ID0gaW5wdXQ7XG4gICAgaWYgKHVwbG9hZCkge1xuICAgICAgY29uc3QgeyBmaWxlSW5mbyB9ID0gYXdhaXQgaGFuZGxlVXBsb2FkKHVwbG9hZCwgY29uZmlnKTtcbiAgICAgIHJldHVybiB7IC4uLmZpbGVJbmZvLCBfX3R5cGU6ICdGaWxlJyB9O1xuICAgIH0gZWxzZSBpZiAoZmlsZSAmJiBmaWxlLm5hbWUpIHtcbiAgICAgIHJldHVybiB7IG5hbWU6IGZpbGUubmFtZSwgX190eXBlOiAnRmlsZScsIHVybDogZmlsZS51cmwgfTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKFBhcnNlLkVycm9yLkZJTEVfU0FWRV9FUlJPUiwgJ0ludmFsaWQgZmlsZSB1cGxvYWQuJyk7XG4gIH0sXG4gIHBvbHlnb246IHZhbHVlID0+ICh7XG4gICAgX190eXBlOiAnUG9seWdvbicsXG4gICAgY29vcmRpbmF0ZXM6IHZhbHVlLm1hcChnZW9Qb2ludCA9PiBbZ2VvUG9pbnQubGF0aXR1ZGUsIGdlb1BvaW50LmxvbmdpdHVkZV0pLFxuICB9KSxcbiAgZ2VvUG9pbnQ6IHZhbHVlID0+ICh7XG4gICAgLi4udmFsdWUsXG4gICAgX190eXBlOiAnR2VvUG9pbnQnLFxuICB9KSxcbiAgQUNMOiB2YWx1ZSA9PiB7XG4gICAgY29uc3QgcGFyc2VBQ0wgPSB7fTtcbiAgICBpZiAodmFsdWUucHVibGljKSB7XG4gICAgICBwYXJzZUFDTFsnKiddID0ge1xuICAgICAgICByZWFkOiB2YWx1ZS5wdWJsaWMucmVhZCxcbiAgICAgICAgd3JpdGU6IHZhbHVlLnB1YmxpYy53cml0ZSxcbiAgICAgIH07XG4gICAgfVxuICAgIGlmICh2YWx1ZS51c2Vycykge1xuICAgICAgdmFsdWUudXNlcnMuZm9yRWFjaChydWxlID0+IHtcbiAgICAgICAgY29uc3QgZ2xvYmFsSWRPYmplY3QgPSBmcm9tR2xvYmFsSWQocnVsZS51c2VySWQpO1xuICAgICAgICBpZiAoZ2xvYmFsSWRPYmplY3QudHlwZSA9PT0gJ19Vc2VyJykge1xuICAgICAgICAgIHJ1bGUudXNlcklkID0gZ2xvYmFsSWRPYmplY3QuaWQ7XG4gICAgICAgIH1cbiAgICAgICAgcGFyc2VBQ0xbcnVsZS51c2VySWRdID0ge1xuICAgICAgICAgIHJlYWQ6IHJ1bGUucmVhZCxcbiAgICAgICAgICB3cml0ZTogcnVsZS53cml0ZSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodmFsdWUucm9sZXMpIHtcbiAgICAgIHZhbHVlLnJvbGVzLmZvckVhY2gocnVsZSA9PiB7XG4gICAgICAgIHBhcnNlQUNMW2Byb2xlOiR7cnVsZS5yb2xlTmFtZX1gXSA9IHtcbiAgICAgICAgICByZWFkOiBydWxlLnJlYWQsXG4gICAgICAgICAgd3JpdGU6IHJ1bGUud3JpdGUsXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlQUNMO1xuICB9LFxuICByZWxhdGlvbjogYXN5bmMgKHRhcmdldENsYXNzLCBmaWVsZCwgdmFsdWUsIHBhcnNlR3JhcGhRTFNjaGVtYSwgeyBjb25maWcsIGF1dGgsIGluZm8gfSkgPT4ge1xuICAgIGlmIChPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID09PSAwKVxuICAgICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKFxuICAgICAgICBQYXJzZS5FcnJvci5JTlZBTElEX1BPSU5URVIsXG4gICAgICAgIGBZb3UgbmVlZCB0byBwcm92aWRlIGF0IGxlYXN0IG9uZSBvcGVyYXRpb24gb24gdGhlIHJlbGF0aW9uIG11dGF0aW9uIG9mIGZpZWxkICR7ZmllbGR9YFxuICAgICAgKTtcblxuICAgIGNvbnN0IG9wID0ge1xuICAgICAgX19vcDogJ0JhdGNoJyxcbiAgICAgIG9wczogW10sXG4gICAgfTtcbiAgICBsZXQgbmVzdGVkT2JqZWN0c1RvQWRkID0gW107XG5cbiAgICBpZiAodmFsdWUuY3JlYXRlQW5kQWRkKSB7XG4gICAgICBuZXN0ZWRPYmplY3RzVG9BZGQgPSAoXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgIHZhbHVlLmNyZWF0ZUFuZEFkZC5tYXAoYXN5bmMgaW5wdXQgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VGaWVsZHMgPSBhd2FpdCB0cmFuc2Zvcm1UeXBlcygnY3JlYXRlJywgaW5wdXQsIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiB0YXJnZXRDbGFzcyxcbiAgICAgICAgICAgICAgcGFyc2VHcmFwaFFMU2NoZW1hLFxuICAgICAgICAgICAgICByZXE6IHsgY29uZmlnLCBhdXRoLCBpbmZvIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3RzTXV0YXRpb25zLmNyZWF0ZU9iamVjdCh0YXJnZXRDbGFzcywgcGFyc2VGaWVsZHMsIGNvbmZpZywgYXV0aCwgaW5mbyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgKS5tYXAob2JqZWN0ID0+ICh7XG4gICAgICAgIF9fdHlwZTogJ1BvaW50ZXInLFxuICAgICAgICBjbGFzc05hbWU6IHRhcmdldENsYXNzLFxuICAgICAgICBvYmplY3RJZDogb2JqZWN0Lm9iamVjdElkLFxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZS5hZGQgfHwgbmVzdGVkT2JqZWN0c1RvQWRkLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmICghdmFsdWUuYWRkKSB2YWx1ZS5hZGQgPSBbXTtcbiAgICAgIHZhbHVlLmFkZCA9IHZhbHVlLmFkZC5tYXAoaW5wdXQgPT4ge1xuICAgICAgICBjb25zdCBnbG9iYWxJZE9iamVjdCA9IGZyb21HbG9iYWxJZChpbnB1dCk7XG4gICAgICAgIGlmIChnbG9iYWxJZE9iamVjdC50eXBlID09PSB0YXJnZXRDbGFzcykge1xuICAgICAgICAgIGlucHV0ID0gZ2xvYmFsSWRPYmplY3QuaWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBfX3R5cGU6ICdQb2ludGVyJyxcbiAgICAgICAgICBjbGFzc05hbWU6IHRhcmdldENsYXNzLFxuICAgICAgICAgIG9iamVjdElkOiBpbnB1dCxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgICAgb3Aub3BzLnB1c2goe1xuICAgICAgICBfX29wOiAnQWRkUmVsYXRpb24nLFxuICAgICAgICBvYmplY3RzOiBbLi4udmFsdWUuYWRkLCAuLi5uZXN0ZWRPYmplY3RzVG9BZGRdLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlLnJlbW92ZSkge1xuICAgICAgb3Aub3BzLnB1c2goe1xuICAgICAgICBfX29wOiAnUmVtb3ZlUmVsYXRpb24nLFxuICAgICAgICBvYmplY3RzOiB2YWx1ZS5yZW1vdmUubWFwKGlucHV0ID0+IHtcbiAgICAgICAgICBjb25zdCBnbG9iYWxJZE9iamVjdCA9IGZyb21HbG9iYWxJZChpbnB1dCk7XG4gICAgICAgICAgaWYgKGdsb2JhbElkT2JqZWN0LnR5cGUgPT09IHRhcmdldENsYXNzKSB7XG4gICAgICAgICAgICBpbnB1dCA9IGdsb2JhbElkT2JqZWN0LmlkO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgX190eXBlOiAnUG9pbnRlcicsXG4gICAgICAgICAgICBjbGFzc05hbWU6IHRhcmdldENsYXNzLFxuICAgICAgICAgICAgb2JqZWN0SWQ6IGlucHV0LFxuICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBvcDtcbiAgfSxcbiAgcG9pbnRlcjogYXN5bmMgKHRhcmdldENsYXNzLCBmaWVsZCwgdmFsdWUsIHBhcnNlR3JhcGhRTFNjaGVtYSwgeyBjb25maWcsIGF1dGgsIGluZm8gfSkgPT4ge1xuICAgIGlmIChPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID4gMSB8fCBPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID09PSAwKVxuICAgICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKFxuICAgICAgICBQYXJzZS5FcnJvci5JTlZBTElEX1BPSU5URVIsXG4gICAgICAgIGBZb3UgbmVlZCB0byBwcm92aWRlIGxpbmsgT1IgY3JlYXRlTGluayBvbiB0aGUgcG9pbnRlciBtdXRhdGlvbiBvZiBmaWVsZCAke2ZpZWxkfWBcbiAgICAgICk7XG5cbiAgICBsZXQgbmVzdGVkT2JqZWN0VG9BZGQ7XG4gICAgaWYgKHZhbHVlLmNyZWF0ZUFuZExpbmspIHtcbiAgICAgIGNvbnN0IHBhcnNlRmllbGRzID0gYXdhaXQgdHJhbnNmb3JtVHlwZXMoJ2NyZWF0ZScsIHZhbHVlLmNyZWF0ZUFuZExpbmssIHtcbiAgICAgICAgY2xhc3NOYW1lOiB0YXJnZXRDbGFzcyxcbiAgICAgICAgcGFyc2VHcmFwaFFMU2NoZW1hLFxuICAgICAgICByZXE6IHsgY29uZmlnLCBhdXRoLCBpbmZvIH0sXG4gICAgICB9KTtcbiAgICAgIG5lc3RlZE9iamVjdFRvQWRkID0gYXdhaXQgb2JqZWN0c011dGF0aW9ucy5jcmVhdGVPYmplY3QoXG4gICAgICAgIHRhcmdldENsYXNzLFxuICAgICAgICBwYXJzZUZpZWxkcyxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICBhdXRoLFxuICAgICAgICBpbmZvXG4gICAgICApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgX190eXBlOiAnUG9pbnRlcicsXG4gICAgICAgIGNsYXNzTmFtZTogdGFyZ2V0Q2xhc3MsXG4gICAgICAgIG9iamVjdElkOiBuZXN0ZWRPYmplY3RUb0FkZC5vYmplY3RJZCxcbiAgICAgIH07XG4gICAgfVxuICAgIGlmICh2YWx1ZS5saW5rKSB7XG4gICAgICBsZXQgb2JqZWN0SWQgPSB2YWx1ZS5saW5rO1xuICAgICAgY29uc3QgZ2xvYmFsSWRPYmplY3QgPSBmcm9tR2xvYmFsSWQob2JqZWN0SWQpO1xuICAgICAgaWYgKGdsb2JhbElkT2JqZWN0LnR5cGUgPT09IHRhcmdldENsYXNzKSB7XG4gICAgICAgIG9iamVjdElkID0gZ2xvYmFsSWRPYmplY3QuaWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBfX3R5cGU6ICdQb2ludGVyJyxcbiAgICAgICAgY2xhc3NOYW1lOiB0YXJnZXRDbGFzcyxcbiAgICAgICAgb2JqZWN0SWQsXG4gICAgICB9O1xuICAgIH1cbiAgfSxcbn07XG5cbmV4cG9ydCB7IHRyYW5zZm9ybVR5cGVzIH07XG4iXX0=