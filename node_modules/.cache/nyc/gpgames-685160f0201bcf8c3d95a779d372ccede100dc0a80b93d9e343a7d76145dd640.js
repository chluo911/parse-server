"use strict";/* Google Play Game Services
https://developers.google.com/games/services/web/api/players/get

const authData = {
  id: 'playerId',
  access_token: 'token',
};
*/function cov_2de0na0v1y(){var path="/parse-server/lib/Adapters/Auth/gpgames.js";var hash="399be6adb741ec516227d1658cceb67876d75289";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Adapters/Auth/gpgames.js",statementMap:{"0":{start:{line:13,column:4},end:{line:13,column:25}},"1":{start:{line:15,column:21},end:{line:15,column:46}},"2":{start:{line:19,column:19},end:{line:19,column:141}},"3":{start:{line:21,column:2},end:{line:23,column:3}},"4":{start:{line:22,column:4},end:{line:22,column:123}},"5":{start:{line:28,column:2},end:{line:28,column:27}},"6":{start:{line:31,column:0},end:{line:34,column:2}}},fnMap:{"0":{name:"validateAuthData",decl:{start:{line:18,column:15},end:{line:18,column:31}},loc:{start:{line:18,column:42},end:{line:24,column:1}},line:18},"1":{name:"validateAppId",decl:{start:{line:27,column:9},end:{line:27,column:22}},loc:{start:{line:27,column:25},end:{line:29,column:1}},line:27}},branchMap:{"0":{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:21,column:2},end:{line:23,column:3}}],line:21},"1":{loc:{start:{line:21,column:8},end:{line:21,column:53}},type:"binary-expr",locations:[{start:{line:21,column:8},end:{line:21,column:16}},{start:{line:21,column:20},end:{line:21,column:53}}],line:21}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},inputSourceMap:{version:3,sources:["../../../src/Adapters/Auth/gpgames.js"],names:["Parse","require","httpsRequest","validateAuthData","authData","response","get","id","access_token","playerId","Error","OBJECT_NOT_FOUND","validateAppId","Promise","resolve","module","exports"],mappings:";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AAAEA,EAAAA;AAAF,IAAYC,OAAO,CAAC,YAAD,CAAzB;;AACA,MAAMC,YAAY,GAAGD,OAAO,CAAC,gBAAD,CAA5B,C,CAEA;;;AACA,eAAeE,gBAAf,CAAgCC,QAAhC,EAA0C;AACxC,QAAMC,QAAQ,GAAG,MAAMH,YAAY,CAACI,GAAb,CACpB,+CAA8CF,QAAQ,CAACG,EAAG,iBAAgBH,QAAQ,CAACI,YAAa,EAD5E,CAAvB;;AAGA,MAAI,EAAEH,QAAQ,IAAIA,QAAQ,CAACI,QAAT,KAAsBL,QAAQ,CAACG,EAA7C,CAAJ,EAAsD;AACpD,UAAM,IAAIP,KAAK,CAACU,KAAV,CACJV,KAAK,CAACU,KAAN,CAAYC,gBADR,EAEJ,iEAFI,CAAN;AAID;AACF,C,CAED;;;AACA,SAASC,aAAT,GAAyB;AACvB,SAAOC,OAAO,CAACC,OAAR,EAAP;AACD;;AAEDC,MAAM,CAACC,OAAP,GAAiB;AACfJ,EAAAA,aADe;AAEfT,EAAAA;AAFe,CAAjB",sourcesContent:["/* Google Play Game Services\nhttps://developers.google.com/games/services/web/api/players/get\n\nconst authData = {\n  id: 'playerId',\n  access_token: 'token',\n};\n*/\nconst { Parse } = require('parse/node');\nconst httpsRequest = require('./httpsRequest');\n\n// Returns a promise that fulfills if this user id is valid.\nasync function validateAuthData(authData) {\n  const response = await httpsRequest.get(\n    `https://www.googleapis.com/games/v1/players/${authData.id}?access_token=${authData.access_token}`\n  );\n  if (!(response && response.playerId === authData.id)) {\n    throw new Parse.Error(\n      Parse.Error.OBJECT_NOT_FOUND,\n      'Google Play Games Services - authData is invalid for this user.'\n    );\n  }\n}\n\n// Returns a promise that fulfills if this app id is valid.\nfunction validateAppId() {\n  return Promise.resolve();\n}\n\nmodule.exports = {\n  validateAppId,\n  validateAuthData,\n};\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"399be6adb741ec516227d1658cceb67876d75289"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2de0na0v1y=function(){return actualCoverage;};}return actualCoverage;}cov_2de0na0v1y();const{Parse}=(cov_2de0na0v1y().s[0]++,require('parse/node'));const httpsRequest=(cov_2de0na0v1y().s[1]++,require('./httpsRequest'));// Returns a promise that fulfills if this user id is valid.
async function validateAuthData(authData){cov_2de0na0v1y().f[0]++;const response=(cov_2de0na0v1y().s[2]++,await httpsRequest.get(`https://www.googleapis.com/games/v1/players/${authData.id}?access_token=${authData.access_token}`));cov_2de0na0v1y().s[3]++;if(!((cov_2de0na0v1y().b[1][0]++,response)&&(cov_2de0na0v1y().b[1][1]++,response.playerId===authData.id))){cov_2de0na0v1y().b[0][0]++;cov_2de0na0v1y().s[4]++;throw new Parse.Error(Parse.Error.OBJECT_NOT_FOUND,'Google Play Games Services - authData is invalid for this user.');}else{cov_2de0na0v1y().b[0][1]++;}}// Returns a promise that fulfills if this app id is valid.
function validateAppId(){cov_2de0na0v1y().f[1]++;cov_2de0na0v1y().s[5]++;return Promise.resolve();}cov_2de0na0v1y().s[6]++;module.exports={validateAppId,validateAuthData};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9BdXRoL2dwZ2FtZXMuanMiXSwibmFtZXMiOlsiUGFyc2UiLCJyZXF1aXJlIiwiaHR0cHNSZXF1ZXN0IiwidmFsaWRhdGVBdXRoRGF0YSIsImF1dGhEYXRhIiwicmVzcG9uc2UiLCJnZXQiLCJpZCIsImFjY2Vzc190b2tlbiIsInBsYXllcklkIiwiRXJyb3IiLCJPQkpFQ1RfTk9UX0ZPVU5EIiwidmFsaWRhdGVBcHBJZCIsIlByb21pc2UiLCJyZXNvbHZlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUFFQSxFQUFBQTtBQUFGLElBQVlDLE9BQU8sQ0FBQyxZQUFELENBQXpCOztBQUNBLE1BQU1DLFlBQVksR0FBR0QsT0FBTyxDQUFDLGdCQUFELENBQTVCLEMsQ0FFQTs7O0FBQ0EsZUFBZUUsZ0JBQWYsQ0FBZ0NDLFFBQWhDLEVBQTBDO0FBQ3hDLFFBQU1DLFFBQVEsR0FBRyxNQUFNSCxZQUFZLENBQUNJLEdBQWIsQ0FDcEIsK0NBQThDRixRQUFRLENBQUNHLEVBQUcsaUJBQWdCSCxRQUFRLENBQUNJLFlBQWEsRUFENUUsQ0FBdkI7O0FBR0EsTUFBSSxFQUFFSCxRQUFRLElBQUlBLFFBQVEsQ0FBQ0ksUUFBVCxLQUFzQkwsUUFBUSxDQUFDRyxFQUE3QyxDQUFKLEVBQXNEO0FBQ3BELFVBQU0sSUFBSVAsS0FBSyxDQUFDVSxLQUFWLENBQ0pWLEtBQUssQ0FBQ1UsS0FBTixDQUFZQyxnQkFEUixFQUVKLGlFQUZJLENBQU47QUFJRDtBQUNGLEMsQ0FFRDs7O0FBQ0EsU0FBU0MsYUFBVCxHQUF5QjtBQUN2QixTQUFPQyxPQUFPLENBQUNDLE9BQVIsRUFBUDtBQUNEOztBQUVEQyxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDZkosRUFBQUEsYUFEZTtBQUVmVCxFQUFBQTtBQUZlLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiLyogR29vZ2xlIFBsYXkgR2FtZSBTZXJ2aWNlc1xuaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vZ2FtZXMvc2VydmljZXMvd2ViL2FwaS9wbGF5ZXJzL2dldFxuXG5jb25zdCBhdXRoRGF0YSA9IHtcbiAgaWQ6ICdwbGF5ZXJJZCcsXG4gIGFjY2Vzc190b2tlbjogJ3Rva2VuJyxcbn07XG4qL1xuY29uc3QgeyBQYXJzZSB9ID0gcmVxdWlyZSgncGFyc2Uvbm9kZScpO1xuY29uc3QgaHR0cHNSZXF1ZXN0ID0gcmVxdWlyZSgnLi9odHRwc1JlcXVlc3QnKTtcblxuLy8gUmV0dXJucyBhIHByb21pc2UgdGhhdCBmdWxmaWxscyBpZiB0aGlzIHVzZXIgaWQgaXMgdmFsaWQuXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUF1dGhEYXRhKGF1dGhEYXRhKSB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaHR0cHNSZXF1ZXN0LmdldChcbiAgICBgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZ2FtZXMvdjEvcGxheWVycy8ke2F1dGhEYXRhLmlkfT9hY2Nlc3NfdG9rZW49JHthdXRoRGF0YS5hY2Nlc3NfdG9rZW59YFxuICApO1xuICBpZiAoIShyZXNwb25zZSAmJiByZXNwb25zZS5wbGF5ZXJJZCA9PT0gYXV0aERhdGEuaWQpKSB7XG4gICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKFxuICAgICAgUGFyc2UuRXJyb3IuT0JKRUNUX05PVF9GT1VORCxcbiAgICAgICdHb29nbGUgUGxheSBHYW1lcyBTZXJ2aWNlcyAtIGF1dGhEYXRhIGlzIGludmFsaWQgZm9yIHRoaXMgdXNlci4nXG4gICAgKTtcbiAgfVxufVxuXG4vLyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIGlmIHRoaXMgYXBwIGlkIGlzIHZhbGlkLlxuZnVuY3Rpb24gdmFsaWRhdGVBcHBJZCgpIHtcbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgdmFsaWRhdGVBcHBJZCxcbiAgdmFsaWRhdGVBdXRoRGF0YSxcbn07XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9BdXRoL2dwZ2FtZXMuanMiXSwibmFtZXMiOlsiUGFyc2UiLCJyZXF1aXJlIiwiaHR0cHNSZXF1ZXN0IiwicmVzcG9uc2UiLCJhdXRoRGF0YSIsImlkIiwiYWNjZXNzX3Rva2VuIiwiUHJvbWlzZSIsIm1vZHVsZSIsInZhbGlkYXRlQXV0aERhdGEiXSwibWFwcGluZ3MiOiJhQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRTsyRkFDQSxLQUFNLENBQUVBLEtBQUYsMkJBQVlDLE9BQU8sQ0FBekIsWUFBeUIsQ0FBbkIsQ0FBTixDQUNBLEtBQU1DLENBQUFBLFlBQVksMEJBQUdELE9BQU8sQ0FBNUIsZ0JBQTRCLENBQVYsQ0FBbEIsQ0FFQTtBQUNBLGNBQUEsQ0FBQSxnQkFBQSxDQUFBLFFBQUEsQ0FBMEMseUJBQ3hDLEtBQU1FLENBQUFBLFFBQVEsMEJBQUcsS0FBTUQsQ0FBQUEsWUFBWSxDQUFaQSxHQUFBQSxDQUNwQiwrQ0FBOENFLFFBQVEsQ0FBQ0MsRUFBRyxpQkFBZ0JELFFBQVEsQ0FBQ0UsWUFEdEYsRUFBdUJKLENBQVQsQ0FBZCxDQUR3Qyx3QkFJeEMsR0FBSSxFQUFFQyw0QkFBQUEsUUFBUSwrQkFBSUEsUUFBUSxDQUFSQSxRQUFBQSxHQUFzQkMsUUFBUSxDQUFoRCxFQUFjLENBQVYsQ0FBSixDQUFzRCxvREFDcEQsS0FBTSxJQUFJSixDQUFBQSxLQUFLLENBQVQsS0FBQSxDQUNKQSxLQUFLLENBQUxBLEtBQUFBLENBREksZ0JBQUEsQ0FBTixpRUFBTSxDQUFOLENBSUQsQ0FMRCxpQyxDQVFGO0FBQ0EsUUFBQSxDQUFBLGFBQUEsRUFBeUIsaURBQ3ZCLE1BQU9PLENBQUFBLE9BQU8sQ0FBZCxPQUFPQSxFQUFQLENBQ0QsQyx3QkFFREMsTUFBTSxDQUFOQSxPQUFBQSxDQUFpQixDQUFBLGFBQUEsQ0FFZkMsZ0JBRmUsQ0FBakJELEMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBHb29nbGUgUGxheSBHYW1lIFNlcnZpY2VzXG5odHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9nYW1lcy9zZXJ2aWNlcy93ZWIvYXBpL3BsYXllcnMvZ2V0XG5cbmNvbnN0IGF1dGhEYXRhID0ge1xuICBpZDogJ3BsYXllcklkJyxcbiAgYWNjZXNzX3Rva2VuOiAndG9rZW4nLFxufTtcbiovXG5jb25zdCB7IFBhcnNlIH0gPSByZXF1aXJlKCdwYXJzZS9ub2RlJyk7XG5jb25zdCBodHRwc1JlcXVlc3QgPSByZXF1aXJlKCcuL2h0dHBzUmVxdWVzdCcpO1xuXG4vLyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIGlmIHRoaXMgdXNlciBpZCBpcyB2YWxpZC5cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlQXV0aERhdGEoYXV0aERhdGEpIHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBodHRwc1JlcXVlc3QuZ2V0KFxuICAgIGBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9nYW1lcy92MS9wbGF5ZXJzLyR7YXV0aERhdGEuaWR9P2FjY2Vzc190b2tlbj0ke2F1dGhEYXRhLmFjY2Vzc190b2tlbn1gXG4gICk7XG4gIGlmICghKHJlc3BvbnNlICYmIHJlc3BvbnNlLnBsYXllcklkID09PSBhdXRoRGF0YS5pZCkpIHtcbiAgICB0aHJvdyBuZXcgUGFyc2UuRXJyb3IoXG4gICAgICBQYXJzZS5FcnJvci5PQkpFQ1RfTk9UX0ZPVU5ELFxuICAgICAgJ0dvb2dsZSBQbGF5IEdhbWVzIFNlcnZpY2VzIC0gYXV0aERhdGEgaXMgaW52YWxpZCBmb3IgdGhpcyB1c2VyLidcbiAgICApO1xuICB9XG59XG5cbi8vIFJldHVybnMgYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgaWYgdGhpcyBhcHAgaWQgaXMgdmFsaWQuXG5mdW5jdGlvbiB2YWxpZGF0ZUFwcElkKCkge1xuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICB2YWxpZGF0ZUFwcElkLFxuICB2YWxpZGF0ZUF1dGhEYXRhLFxufTtcbiJdfQ==