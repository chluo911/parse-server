{"version":3,"sources":["../../../src/Adapters/Auth/instagram.js"],"names":["Parse","require","httpsRequest","defaultURL","validateAuthData","authData","apiURL","path","access_token","get","then","response","user","data","id","Error","OBJECT_NOT_FOUND","validateAppId","Promise","resolve","module","exports"],"mappings":";;AAAA;AACA,IAAIA,KAAK,GAAGC,OAAO,CAAC,YAAD,CAAP,CAAsBD,KAAlC;;AACA,MAAME,YAAY,GAAGD,OAAO,CAAC,gBAAD,CAA5B;;AACA,MAAME,UAAU,GAAG,8BAAnB,C,CAEA;;AACA,SAASC,gBAAT,CAA0BC,QAA1B,EAAoC;AAClC,QAAMC,MAAM,GAAGD,QAAQ,CAACC,MAAT,IAAmBH,UAAlC;AACA,QAAMI,IAAI,GAAI,GAAED,MAAO,6BAA4BD,QAAQ,CAACG,YAAa,EAAzE;AACA,SAAON,YAAY,CAACO,GAAb,CAAiBF,IAAjB,EAAuBG,IAAvB,CAA4BC,QAAQ,IAAI;AAC7C,UAAMC,IAAI,GAAGD,QAAQ,CAACE,IAAT,GAAgBF,QAAQ,CAACE,IAAzB,GAAgCF,QAA7C;;AACA,QAAIC,IAAI,IAAIA,IAAI,CAACE,EAAL,IAAWT,QAAQ,CAACS,EAAhC,EAAoC;AAClC;AACD;;AACD,UAAM,IAAId,KAAK,CAACe,KAAV,CAAgBf,KAAK,CAACe,KAAN,CAAYC,gBAA5B,EAA8C,0CAA9C,CAAN;AACD,GANM,CAAP;AAOD,C,CAED;;;AACA,SAASC,aAAT,GAAyB;AACvB,SAAOC,OAAO,CAACC,OAAR,EAAP;AACD;;AAEDC,MAAM,CAACC,OAAP,GAAiB;AACfJ,EAAAA,aADe;AAEfb,EAAAA;AAFe,CAAjB","sourcesContent":["// Helper functions for accessing the instagram API.\nvar Parse = require('parse/node').Parse;\nconst httpsRequest = require('./httpsRequest');\nconst defaultURL = 'https://graph.instagram.com/';\n\n// Returns a promise that fulfills if this user id is valid.\nfunction validateAuthData(authData) {\n  const apiURL = authData.apiURL || defaultURL;\n  const path = `${apiURL}me?fields=id&access_token=${authData.access_token}`;\n  return httpsRequest.get(path).then(response => {\n    const user = response.data ? response.data : response;\n    if (user && user.id == authData.id) {\n      return;\n    }\n    throw new Parse.Error(Parse.Error.OBJECT_NOT_FOUND, 'Instagram auth is invalid for this user.');\n  });\n}\n\n// Returns a promise that fulfills iff this app id is valid.\nfunction validateAppId() {\n  return Promise.resolve();\n}\n\nmodule.exports = {\n  validateAppId,\n  validateAuthData,\n};\n"]}