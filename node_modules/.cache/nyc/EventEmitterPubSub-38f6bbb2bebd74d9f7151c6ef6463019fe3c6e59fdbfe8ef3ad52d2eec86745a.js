"use strict";function cov_1o46lzjb7s(){var path="/parse-server/lib/Adapters/PubSub/EventEmitterPubSub.js";var hash="d63bd17caceacf217be38860ba12094019d15837";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Adapters/PubSub/EventEmitterPubSub.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:36}},"2":{start:{line:8,column:14},end:{line:8,column:55}},"3":{start:{line:10,column:39},end:{line:10,column:93}},"4":{start:{line:12,column:16},end:{line:12,column:50}},"5":{start:{line:16,column:4},end:{line:16,column:27}},"6":{start:{line:20,column:4},end:{line:20,column:40}},"7":{start:{line:27,column:4},end:{line:27,column:12}},"8":{start:{line:28,column:4},end:{line:28,column:27}},"9":{start:{line:29,column:4},end:{line:29,column:35}},"10":{start:{line:33,column:20},end:{line:35,column:5}},"11":{start:{line:34,column:6},end:{line:34,column:45}},"12":{start:{line:37,column:4},end:{line:37,column:45}},"13":{start:{line:38,column:4},end:{line:38,column:38}},"14":{start:{line:42,column:4},end:{line:44,column:5}},"15":{start:{line:43,column:6},end:{line:43,column:13}},"16":{start:{line:46,column:4},end:{line:46,column:74}},"17":{start:{line:47,column:4},end:{line:47,column:39}},"18":{start:{line:53,column:2},end:{line:53,column:32}},"19":{start:{line:60,column:2},end:{line:60,column:31}},"20":{start:{line:61,column:2},end:{line:61,column:33}},"21":{start:{line:64,column:27},end:{line:67,column:1}},"22":{start:{line:68,column:0},end:{line:68,column:48}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:10,column:9},end:{line:10,column:31}},loc:{start:{line:10,column:37},end:{line:10,column:95}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:23},end:{line:17,column:3}},line:15},"2":{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:28},end:{line:21,column:3}},line:19},"3":{name:"(anonymous_3)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:23},end:{line:30,column:3}},line:26},"4":{name:"(anonymous_4)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:21},end:{line:39,column:3}},line:32},"5":{name:"(anonymous_5)",decl:{start:{line:33,column:20},end:{line:33,column:21}},loc:{start:{line:33,column:31},end:{line:35,column:5}},line:33},"6":{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:23},end:{line:48,column:3}},line:41},"7":{name:"createPublisher",decl:{start:{line:52,column:9},end:{line:52,column:24}},loc:{start:{line:52,column:27},end:{line:54,column:1}},line:52},"8":{name:"createSubscriber",decl:{start:{line:56,column:9},end:{line:56,column:25}},loc:{start:{line:56,column:28},end:{line:62,column:1}},line:56}},branchMap:{"0":{loc:{start:{line:10,column:46},end:{line:10,column:92}},type:"cond-expr",locations:[{start:{line:10,column:70},end:{line:10,column:73}},{start:{line:10,column:76},end:{line:10,column:92}}],line:10},"1":{loc:{start:{line:10,column:46},end:{line:10,column:67}},type:"binary-expr",locations:[{start:{line:10,column:46},end:{line:10,column:49}},{start:{line:10,column:53},end:{line:10,column:67}}],line:10},"2":{loc:{start:{line:42,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:42,column:4},end:{line:44,column:5}},{start:{line:42,column:4},end:{line:44,column:5}}],line:42}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},inputSourceMap:{version:3,sources:["../../../src/Adapters/PubSub/EventEmitterPubSub.js"],names:["emitter","events","EventEmitter","Publisher","constructor","publish","channel","message","emit","Subscriber","subscriptions","Map","subscribe","handler","set","on","unsubscribe","has","removeListener","get","delete","createPublisher","createSubscriber","removeAllListeners","EventEmitterPubSub"],mappings:";;;;;;;AAAA;;;;AAEA,MAAMA,OAAO,GAAG,IAAIC,gBAAOC,YAAX,EAAhB;;AAEA,MAAMC,SAAN,CAAgB;AAGdC,EAAAA,WAAW,CAACJ,OAAD,EAAe;AACxB,SAAKA,OAAL,GAAeA,OAAf;AACD;;AAEDK,EAAAA,OAAO,CAACC,OAAD,EAAkBC,OAAlB,EAAyC;AAC9C,SAAKP,OAAL,CAAaQ,IAAb,CAAkBF,OAAlB,EAA2BC,OAA3B;AACD;;AATa;;AAYhB,MAAME,UAAN,SAAyBR,gBAAOC,YAAhC,CAA6C;AAI3CE,EAAAA,WAAW,CAACJ,OAAD,EAAe;AACxB;AACA,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKU,aAAL,GAAqB,IAAIC,GAAJ,EAArB;AACD;;AAEDC,EAAAA,SAAS,CAACN,OAAD,EAAwB;AAC/B,UAAMO,OAAO,GAAGN,OAAO,IAAI;AACzB,WAAKC,IAAL,CAAU,SAAV,EAAqBF,OAArB,EAA8BC,OAA9B;AACD,KAFD;;AAGA,SAAKG,aAAL,CAAmBI,GAAnB,CAAuBR,OAAvB,EAAgCO,OAAhC;AACA,SAAKb,OAAL,CAAae,EAAb,CAAgBT,OAAhB,EAAyBO,OAAzB;AACD;;AAEDG,EAAAA,WAAW,CAACV,OAAD,EAAwB;AACjC,QAAI,CAAC,KAAKI,aAAL,CAAmBO,GAAnB,CAAuBX,OAAvB,CAAL,EAAsC;AACpC;AACD;;AACD,SAAKN,OAAL,CAAakB,cAAb,CAA4BZ,OAA5B,EAAqC,KAAKI,aAAL,CAAmBS,GAAnB,CAAuBb,OAAvB,CAArC;AACA,SAAKI,aAAL,CAAmBU,MAAnB,CAA0Bd,OAA1B;AACD;;AAxB0C;;AA2B7C,SAASe,eAAT,GAAgC;AAC9B,SAAO,IAAIlB,SAAJ,CAAcH,OAAd,CAAP;AACD;;AAED,SAASsB,gBAAT,GAAiC;AAC/B;AACA;AACA;AACAtB,EAAAA,OAAO,CAACuB,kBAAR;AACA,SAAO,IAAId,UAAJ,CAAeT,OAAf,CAAP;AACD;;AAED,MAAMwB,kBAAkB,GAAG;AACzBH,EAAAA,eADyB;AAEzBC,EAAAA;AAFyB,CAA3B",sourcesContent:["import events from 'events';\n\nconst emitter = new events.EventEmitter();\n\nclass Publisher {\n  emitter: any;\n\n  constructor(emitter: any) {\n    this.emitter = emitter;\n  }\n\n  publish(channel: string, message: string): void {\n    this.emitter.emit(channel, message);\n  }\n}\n\nclass Subscriber extends events.EventEmitter {\n  emitter: any;\n  subscriptions: any;\n\n  constructor(emitter: any) {\n    super();\n    this.emitter = emitter;\n    this.subscriptions = new Map();\n  }\n\n  subscribe(channel: string): void {\n    const handler = message => {\n      this.emit('message', channel, message);\n    };\n    this.subscriptions.set(channel, handler);\n    this.emitter.on(channel, handler);\n  }\n\n  unsubscribe(channel: string): void {\n    if (!this.subscriptions.has(channel)) {\n      return;\n    }\n    this.emitter.removeListener(channel, this.subscriptions.get(channel));\n    this.subscriptions.delete(channel);\n  }\n}\n\nfunction createPublisher(): any {\n  return new Publisher(emitter);\n}\n\nfunction createSubscriber(): any {\n  // createSubscriber is called once at live query server start\n  // to avoid max listeners warning, we should clean up the event emitter\n  // each time this function is called\n  emitter.removeAllListeners();\n  return new Subscriber(emitter);\n}\n\nconst EventEmitterPubSub = {\n  createPublisher,\n  createSubscriber,\n};\n\nexport { EventEmitterPubSub };\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d63bd17caceacf217be38860ba12094019d15837"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1o46lzjb7s=function(){return actualCoverage;};}return actualCoverage;}cov_1o46lzjb7s();cov_1o46lzjb7s().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1o46lzjb7s().s[1]++;exports.EventEmitterPubSub=void 0;var _events=(cov_1o46lzjb7s().s[2]++,_interopRequireDefault(require("events")));function _interopRequireDefault(obj){cov_1o46lzjb7s().f[0]++;cov_1o46lzjb7s().s[3]++;return(cov_1o46lzjb7s().b[1][0]++,obj)&&(cov_1o46lzjb7s().b[1][1]++,obj.__esModule)?(cov_1o46lzjb7s().b[0][0]++,obj):(cov_1o46lzjb7s().b[0][1]++,{default:obj});}const emitter=(cov_1o46lzjb7s().s[4]++,new _events.default.EventEmitter());class Publisher{constructor(emitter){cov_1o46lzjb7s().f[1]++;cov_1o46lzjb7s().s[5]++;this.emitter=emitter;}publish(channel,message){cov_1o46lzjb7s().f[2]++;cov_1o46lzjb7s().s[6]++;this.emitter.emit(channel,message);}}class Subscriber extends(_events.default.EventEmitter){constructor(emitter){cov_1o46lzjb7s().f[3]++;cov_1o46lzjb7s().s[7]++;super();cov_1o46lzjb7s().s[8]++;this.emitter=emitter;cov_1o46lzjb7s().s[9]++;this.subscriptions=new Map();}subscribe(channel){cov_1o46lzjb7s().f[4]++;cov_1o46lzjb7s().s[10]++;const handler=message=>{cov_1o46lzjb7s().f[5]++;cov_1o46lzjb7s().s[11]++;this.emit('message',channel,message);};cov_1o46lzjb7s().s[12]++;this.subscriptions.set(channel,handler);cov_1o46lzjb7s().s[13]++;this.emitter.on(channel,handler);}unsubscribe(channel){cov_1o46lzjb7s().f[6]++;cov_1o46lzjb7s().s[14]++;if(!this.subscriptions.has(channel)){cov_1o46lzjb7s().b[2][0]++;cov_1o46lzjb7s().s[15]++;return;}else{cov_1o46lzjb7s().b[2][1]++;}cov_1o46lzjb7s().s[16]++;this.emitter.removeListener(channel,this.subscriptions.get(channel));cov_1o46lzjb7s().s[17]++;this.subscriptions.delete(channel);}}function createPublisher(){cov_1o46lzjb7s().f[7]++;cov_1o46lzjb7s().s[18]++;return new Publisher(emitter);}function createSubscriber(){cov_1o46lzjb7s().f[8]++;cov_1o46lzjb7s().s[19]++;// createSubscriber is called once at live query server start
// to avoid max listeners warning, we should clean up the event emitter
// each time this function is called
emitter.removeAllListeners();cov_1o46lzjb7s().s[20]++;return new Subscriber(emitter);}const EventEmitterPubSub=(cov_1o46lzjb7s().s[21]++,{createPublisher,createSubscriber});cov_1o46lzjb7s().s[22]++;exports.EventEmitterPubSub=EventEmitterPubSub;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9QdWJTdWIvRXZlbnRFbWl0dGVyUHViU3ViLmpzIl0sIm5hbWVzIjpbImVtaXR0ZXIiLCJldmVudHMiLCJFdmVudEVtaXR0ZXIiLCJQdWJsaXNoZXIiLCJjb25zdHJ1Y3RvciIsInB1Ymxpc2giLCJjaGFubmVsIiwibWVzc2FnZSIsImVtaXQiLCJTdWJzY3JpYmVyIiwic3Vic2NyaXB0aW9ucyIsIk1hcCIsInN1YnNjcmliZSIsImhhbmRsZXIiLCJzZXQiLCJvbiIsInVuc3Vic2NyaWJlIiwiaGFzIiwicmVtb3ZlTGlzdGVuZXIiLCJnZXQiLCJkZWxldGUiLCJjcmVhdGVQdWJsaXNoZXIiLCJjcmVhdGVTdWJzY3JpYmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiRXZlbnRFbWl0dGVyUHViU3ViIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFQSxNQUFNQSxPQUFPLEdBQUcsSUFBSUMsZ0JBQU9DLFlBQVgsRUFBaEI7O0FBRUEsTUFBTUMsU0FBTixDQUFnQjtBQUdkQyxFQUFBQSxXQUFXLENBQUNKLE9BQUQsRUFBZTtBQUN4QixTQUFLQSxPQUFMLEdBQWVBLE9BQWY7QUFDRDs7QUFFREssRUFBQUEsT0FBTyxDQUFDQyxPQUFELEVBQWtCQyxPQUFsQixFQUF5QztBQUM5QyxTQUFLUCxPQUFMLENBQWFRLElBQWIsQ0FBa0JGLE9BQWxCLEVBQTJCQyxPQUEzQjtBQUNEOztBQVRhOztBQVloQixNQUFNRSxVQUFOLFNBQXlCUixnQkFBT0MsWUFBaEMsQ0FBNkM7QUFJM0NFLEVBQUFBLFdBQVcsQ0FBQ0osT0FBRCxFQUFlO0FBQ3hCO0FBQ0EsU0FBS0EsT0FBTCxHQUFlQSxPQUFmO0FBQ0EsU0FBS1UsYUFBTCxHQUFxQixJQUFJQyxHQUFKLEVBQXJCO0FBQ0Q7O0FBRURDLEVBQUFBLFNBQVMsQ0FBQ04sT0FBRCxFQUF3QjtBQUMvQixVQUFNTyxPQUFPLEdBQUdOLE9BQU8sSUFBSTtBQUN6QixXQUFLQyxJQUFMLENBQVUsU0FBVixFQUFxQkYsT0FBckIsRUFBOEJDLE9BQTlCO0FBQ0QsS0FGRDs7QUFHQSxTQUFLRyxhQUFMLENBQW1CSSxHQUFuQixDQUF1QlIsT0FBdkIsRUFBZ0NPLE9BQWhDO0FBQ0EsU0FBS2IsT0FBTCxDQUFhZSxFQUFiLENBQWdCVCxPQUFoQixFQUF5Qk8sT0FBekI7QUFDRDs7QUFFREcsRUFBQUEsV0FBVyxDQUFDVixPQUFELEVBQXdCO0FBQ2pDLFFBQUksQ0FBQyxLQUFLSSxhQUFMLENBQW1CTyxHQUFuQixDQUF1QlgsT0FBdkIsQ0FBTCxFQUFzQztBQUNwQztBQUNEOztBQUNELFNBQUtOLE9BQUwsQ0FBYWtCLGNBQWIsQ0FBNEJaLE9BQTVCLEVBQXFDLEtBQUtJLGFBQUwsQ0FBbUJTLEdBQW5CLENBQXVCYixPQUF2QixDQUFyQztBQUNBLFNBQUtJLGFBQUwsQ0FBbUJVLE1BQW5CLENBQTBCZCxPQUExQjtBQUNEOztBQXhCMEM7O0FBMkI3QyxTQUFTZSxlQUFULEdBQWdDO0FBQzlCLFNBQU8sSUFBSWxCLFNBQUosQ0FBY0gsT0FBZCxDQUFQO0FBQ0Q7O0FBRUQsU0FBU3NCLGdCQUFULEdBQWlDO0FBQy9CO0FBQ0E7QUFDQTtBQUNBdEIsRUFBQUEsT0FBTyxDQUFDdUIsa0JBQVI7QUFDQSxTQUFPLElBQUlkLFVBQUosQ0FBZVQsT0FBZixDQUFQO0FBQ0Q7O0FBRUQsTUFBTXdCLGtCQUFrQixHQUFHO0FBQ3pCSCxFQUFBQSxlQUR5QjtBQUV6QkMsRUFBQUE7QUFGeUIsQ0FBM0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXZlbnRzIGZyb20gJ2V2ZW50cyc7XG5cbmNvbnN0IGVtaXR0ZXIgPSBuZXcgZXZlbnRzLkV2ZW50RW1pdHRlcigpO1xuXG5jbGFzcyBQdWJsaXNoZXIge1xuICBlbWl0dGVyOiBhbnk7XG5cbiAgY29uc3RydWN0b3IoZW1pdHRlcjogYW55KSB7XG4gICAgdGhpcy5lbWl0dGVyID0gZW1pdHRlcjtcbiAgfVxuXG4gIHB1Ymxpc2goY2hhbm5lbDogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmVtaXR0ZXIuZW1pdChjaGFubmVsLCBtZXNzYWdlKTtcbiAgfVxufVxuXG5jbGFzcyBTdWJzY3JpYmVyIGV4dGVuZHMgZXZlbnRzLkV2ZW50RW1pdHRlciB7XG4gIGVtaXR0ZXI6IGFueTtcbiAgc3Vic2NyaXB0aW9uczogYW55O1xuXG4gIGNvbnN0cnVjdG9yKGVtaXR0ZXI6IGFueSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5lbWl0dGVyID0gZW1pdHRlcjtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBuZXcgTWFwKCk7XG4gIH1cblxuICBzdWJzY3JpYmUoY2hhbm5lbDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgaGFuZGxlciA9IG1lc3NhZ2UgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgY2hhbm5lbCwgbWVzc2FnZSk7XG4gICAgfTtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuc2V0KGNoYW5uZWwsIGhhbmRsZXIpO1xuICAgIHRoaXMuZW1pdHRlci5vbihjaGFubmVsLCBoYW5kbGVyKTtcbiAgfVxuXG4gIHVuc3Vic2NyaWJlKGNoYW5uZWw6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghdGhpcy5zdWJzY3JpcHRpb25zLmhhcyhjaGFubmVsKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoY2hhbm5lbCwgdGhpcy5zdWJzY3JpcHRpb25zLmdldChjaGFubmVsKSk7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLmRlbGV0ZShjaGFubmVsKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVQdWJsaXNoZXIoKTogYW55IHtcbiAgcmV0dXJuIG5ldyBQdWJsaXNoZXIoZW1pdHRlcik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN1YnNjcmliZXIoKTogYW55IHtcbiAgLy8gY3JlYXRlU3Vic2NyaWJlciBpcyBjYWxsZWQgb25jZSBhdCBsaXZlIHF1ZXJ5IHNlcnZlciBzdGFydFxuICAvLyB0byBhdm9pZCBtYXggbGlzdGVuZXJzIHdhcm5pbmcsIHdlIHNob3VsZCBjbGVhbiB1cCB0aGUgZXZlbnQgZW1pdHRlclxuICAvLyBlYWNoIHRpbWUgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWRcbiAgZW1pdHRlci5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyKGVtaXR0ZXIpO1xufVxuXG5jb25zdCBFdmVudEVtaXR0ZXJQdWJTdWIgPSB7XG4gIGNyZWF0ZVB1Ymxpc2hlcixcbiAgY3JlYXRlU3Vic2NyaWJlcixcbn07XG5cbmV4cG9ydCB7IEV2ZW50RW1pdHRlclB1YlN1YiB9O1xuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9QdWJTdWIvRXZlbnRFbWl0dGVyUHViU3ViLmpzIl0sIm5hbWVzIjpbImVtaXR0ZXIiLCJldmVudHMiLCJjb25zdHJ1Y3RvciIsInB1Ymxpc2giLCJzdWJzY3JpYmUiLCJoYW5kbGVyIiwibWVzc2FnZSIsInVuc3Vic2NyaWJlIiwiRXZlbnRFbWl0dGVyUHViU3ViIiwiY3JlYXRlU3Vic2NyaWJlciJdLCJtYXBwaW5ncyI6InM1TkFRSTtzT0FSSixHQUFBLENBQUEsT0FBQSwwQkFBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxDQUFBLEMsc1BBRUEsS0FBTUEsQ0FBQUEsT0FBTywwQkFBRyxHQUFJQyxDQUFBQSxPQUFBQSxDQUFBQSxPQUFBQSxDQUFwQixZQUFnQixFQUFILENBQWIsQ0FFQSxLQUFBLENBQUEsU0FBZ0IsQ0FHZEMsV0FBVyxDQUFBLE9BQUEsQ0FBZSxpREFDeEIsS0FBS0YsT0FBTCxDQUFBLE9BQUEsQ0FDRCxDQUVERyxPQUFPLENBQUEsT0FBQSxDQUFBLE9BQUEsQ0FBeUMsaURBQzlDLEtBQUEsT0FBQSxDQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsT0FBQSxFQUNELENBVGEsQ0FZaEIsS0FBQSxDQUFBLFVBQUEsU0FBeUJGLE9BQUFBLENBQUFBLE9BQUFBLENBQXpCLFlBQUEsQ0FBNkMsQ0FJM0NDLFdBQVcsQ0FBQSxPQUFBLENBQWUsaURBQ3hCLFFBRHdCLHdCQUV4QixLQUFBLE9BQUEsQ0FBQSxPQUFBLENBRndCLHdCQUd4QixLQUFBLGFBQUEsQ0FBcUIsR0FBckIsQ0FBQSxHQUFxQixFQUFyQixDQUNELENBRURFLFNBQVMsQ0FBQSxPQUFBLENBQXdCLGtEQUMvQixLQUFNQyxDQUFBQSxPQUFPLENBQUdDLE9BQU8sRUFBSSxrREFDekIsS0FBQSxJQUFBLENBQUEsU0FBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLEVBREYsQ0FBQSxDQUQrQix5QkFJL0IsS0FBQSxhQUFBLENBQUEsR0FBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLEVBSitCLHlCQUsvQixLQUFBLE9BQUEsQ0FBQSxFQUFBLENBQUEsT0FBQSxDQUFBLE9BQUEsRUFDRCxDQUVEQyxXQUFXLENBQUEsT0FBQSxDQUF3QixrREFDakMsR0FBSSxDQUFDLEtBQUEsYUFBQSxDQUFBLEdBQUEsQ0FBTCxPQUFLLENBQUwsQ0FBc0MscURBQ3BDLE9BQ0QsQ0FGRCxpQ0FEaUMseUJBSWpDLEtBQUEsT0FBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLENBQXFDLEtBQUEsYUFBQSxDQUFBLEdBQUEsQ0FBckMsT0FBcUMsQ0FBckMsRUFKaUMseUJBS2pDLEtBQUEsYUFBQSxDQUFBLE1BQUEsQ0FBQSxPQUFBLEVBQ0QsQ0F4QjBDLENBMkI3QyxRQUFBLENBQUEsZUFBQSxFQUFnQyxrREFDOUIsTUFBTyxJQUFBLENBQUEsU0FBQSxDQUFQLE9BQU8sQ0FBUCxDQUNELENBRUQsUUFBQSxDQUFBLGdCQUFBLEVBQWlDLGtEQUMvQjtBQUNBO0FBQ0E7QUFDQVAsT0FBTyxDQUFQQSxrQkFBQUEsR0FKK0IseUJBSy9CLE1BQU8sSUFBQSxDQUFBLFVBQUEsQ0FBUCxPQUFPLENBQVAsQ0FDRCxDQUVELEtBQU1RLENBQUFBLGtCQUFrQiwyQkFBRyxDQUFBLGVBQUEsQ0FFekJDLGdCQUZ5QixDQUFILENBQXhCLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXZlbnRzIGZyb20gJ2V2ZW50cyc7XG5cbmNvbnN0IGVtaXR0ZXIgPSBuZXcgZXZlbnRzLkV2ZW50RW1pdHRlcigpO1xuXG5jbGFzcyBQdWJsaXNoZXIge1xuICBlbWl0dGVyOiBhbnk7XG5cbiAgY29uc3RydWN0b3IoZW1pdHRlcjogYW55KSB7XG4gICAgdGhpcy5lbWl0dGVyID0gZW1pdHRlcjtcbiAgfVxuXG4gIHB1Ymxpc2goY2hhbm5lbDogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmVtaXR0ZXIuZW1pdChjaGFubmVsLCBtZXNzYWdlKTtcbiAgfVxufVxuXG5jbGFzcyBTdWJzY3JpYmVyIGV4dGVuZHMgZXZlbnRzLkV2ZW50RW1pdHRlciB7XG4gIGVtaXR0ZXI6IGFueTtcbiAgc3Vic2NyaXB0aW9uczogYW55O1xuXG4gIGNvbnN0cnVjdG9yKGVtaXR0ZXI6IGFueSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5lbWl0dGVyID0gZW1pdHRlcjtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBuZXcgTWFwKCk7XG4gIH1cblxuICBzdWJzY3JpYmUoY2hhbm5lbDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgaGFuZGxlciA9IG1lc3NhZ2UgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgY2hhbm5lbCwgbWVzc2FnZSk7XG4gICAgfTtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuc2V0KGNoYW5uZWwsIGhhbmRsZXIpO1xuICAgIHRoaXMuZW1pdHRlci5vbihjaGFubmVsLCBoYW5kbGVyKTtcbiAgfVxuXG4gIHVuc3Vic2NyaWJlKGNoYW5uZWw6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghdGhpcy5zdWJzY3JpcHRpb25zLmhhcyhjaGFubmVsKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoY2hhbm5lbCwgdGhpcy5zdWJzY3JpcHRpb25zLmdldChjaGFubmVsKSk7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLmRlbGV0ZShjaGFubmVsKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVQdWJsaXNoZXIoKTogYW55IHtcbiAgcmV0dXJuIG5ldyBQdWJsaXNoZXIoZW1pdHRlcik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN1YnNjcmliZXIoKTogYW55IHtcbiAgLy8gY3JlYXRlU3Vic2NyaWJlciBpcyBjYWxsZWQgb25jZSBhdCBsaXZlIHF1ZXJ5IHNlcnZlciBzdGFydFxuICAvLyB0byBhdm9pZCBtYXggbGlzdGVuZXJzIHdhcm5pbmcsIHdlIHNob3VsZCBjbGVhbiB1cCB0aGUgZXZlbnQgZW1pdHRlclxuICAvLyBlYWNoIHRpbWUgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWRcbiAgZW1pdHRlci5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyKGVtaXR0ZXIpO1xufVxuXG5jb25zdCBFdmVudEVtaXR0ZXJQdWJTdWIgPSB7XG4gIGNyZWF0ZVB1Ymxpc2hlcixcbiAgY3JlYXRlU3Vic2NyaWJlcixcbn07XG5cbmV4cG9ydCB7IEV2ZW50RW1pdHRlclB1YlN1YiB9O1xuIl19