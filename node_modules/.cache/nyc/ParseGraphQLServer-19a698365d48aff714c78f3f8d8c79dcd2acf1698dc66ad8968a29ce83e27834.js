"use strict";function cov_gp55warc6(){var path="/parse-server/lib/GraphQL/ParseGraphQLServer.js";var hash="99fdb896e87d6e10714206c32a6221983fdf0067";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/GraphQL/ParseGraphQLServer.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:36}},"2":{start:{line:8,column:12},end:{line:8,column:51}},"3":{start:{line:10,column:18},end:{line:10,column:64}},"4":{start:{line:12,column:21},end:{line:12,column:46}},"5":{start:{line:14,column:21},end:{line:14,column:72}},"6":{start:{line:16,column:29},end:{line:16,column:78}},"7":{start:{line:18,column:15},end:{line:18,column:33}},"8":{start:{line:20,column:32},end:{line:20,column:69}},"9":{start:{line:22,column:19},end:{line:22,column:44}},"10":{start:{line:24,column:25},end:{line:24,column:80}},"11":{start:{line:26,column:14},end:{line:26,column:58}},"12":{start:{line:28,column:26},end:{line:28,column:57}},"13":{start:{line:30,column:30},end:{line:30,column:103}},"14":{start:{line:32,column:49},end:{line:32,column:96}},"15":{start:{line:32,column:84},end:{line:32,column:96}},"16":{start:{line:32,column:121},end:{line:32,column:134}},"17":{start:{line:32,column:159},end:{line:32,column:172}},"18":{start:{line:32,column:174},end:{line:32,column:309}},"19":{start:{line:32,column:234},end:{line:32,column:292}},"20":{start:{line:34,column:53},end:{line:34,column:111}},"21":{start:{line:34,column:98},end:{line:34,column:109}},"22":{start:{line:34,column:112},end:{line:34,column:214}},"23":{start:{line:34,column:188},end:{line:34,column:212}},"24":{start:{line:34,column:227},end:{line:34,column:264}},"25":{start:{line:34,column:266},end:{line:34,column:321}},"26":{start:{line:34,column:297},end:{line:34,column:319}},"27":{start:{line:34,column:335},end:{line:34,column:337}},"28":{start:{line:34,column:367},end:{line:34,column:423}},"29":{start:{line:34,column:425},end:{line:34,column:726}},"30":{start:{line:34,column:448},end:{line:34,column:724}},"31":{start:{line:34,column:534},end:{line:34,column:606}},"32":{start:{line:34,column:608},end:{line:34,column:722}},"33":{start:{line:34,column:646},end:{line:34,column:687}},"34":{start:{line:34,column:697},end:{line:34,column:720}},"35":{start:{line:34,column:727},end:{line:34,column:748}},"36":{start:{line:34,column:749},end:{line:34,column:787}},"37":{start:{line:34,column:762},end:{line:34,column:785}},"38":{start:{line:34,column:788},end:{line:34,column:802}},"39":{start:{line:36,column:39},end:{line:36,column:93}},"40":{start:{line:40,column:4},end:{line:40,column:114}},"41":{start:{line:42,column:4},end:{line:44,column:5}},"42":{start:{line:43,column:6},end:{line:43,column:80}},"43":{start:{line:46,column:4},end:{line:46,column:25}},"44":{start:{line:47,column:4},end:{line:47,column:81}},"45":{start:{line:48,column:4},end:{line:48,column:102}},"46":{start:{line:49,column:4},end:{line:55,column:7}},"47":{start:{line:59,column:4},end:{line:75,column:5}},"48":{start:{line:60,column:6},end:{line:71,column:8}},"49":{start:{line:69,column:10},end:{line:69,column:23}},"50":{start:{line:73,column:6},end:{line:73,column:87}},"51":{start:{line:74,column:6},end:{line:74,column:14}},"52":{start:{line:79,column:20},end:{line:83,column:5}},"53":{start:{line:84,column:4},end:{line:84,column:111}},"54":{start:{line:88,column:4},end:{line:90,column:5}},"55":{start:{line:89,column:6},end:{line:89,column:86}},"56":{start:{line:92,column:4},end:{line:94,column:8}},"57":{start:{line:95,column:4},end:{line:95,column:59}},"58":{start:{line:96,column:4},end:{line:96,column:65}},"59":{start:{line:97,column:4},end:{line:97,column:70}},"60":{start:{line:98,column:4},end:{line:98,column:69}},"61":{start:{line:99,column:4},end:{line:99,column:122}},"62":{start:{line:99,column:85},end:{line:99,column:119}},"63":{start:{line:103,column:4},end:{line:105,column:5}},"64":{start:{line:104,column:6},end:{line:104,column:86}},"65":{start:{line:107,column:4},end:{line:119,column:7}},"66":{start:{line:108,column:6},end:{line:108,column:49}},"67":{start:{line:109,column:6},end:{line:117,column:10}},"68":{start:{line:118,column:6},end:{line:118,column:16}},"69":{start:{line:123,column:4},end:{line:130,column:7}},"70":{start:{line:126,column:58},end:{line:126,column:136}},"71":{start:{line:134,column:4},end:{line:134,column:74}},"72":{start:{line:139,column:0},end:{line:139,column:48}}},fnMap:{"0":{name:"_getRequireWildcardCache",decl:{start:{line:32,column:9},end:{line:32,column:33}},loc:{start:{line:32,column:47},end:{line:32,column:311}},line:32},"1":{name:"(anonymous_1)",decl:{start:{line:32,column:209},end:{line:32,column:210}},loc:{start:{line:32,column:232},end:{line:32,column:294}},line:32},"2":{name:"_interopRequireWildcard",decl:{start:{line:34,column:9},end:{line:34,column:32}},loc:{start:{line:34,column:51},end:{line:34,column:804}},line:34},"3":{name:"_interopRequireDefault",decl:{start:{line:36,column:9},end:{line:36,column:31}},loc:{start:{line:36,column:37},end:{line:36,column:95}},line:36},"4":{name:"(anonymous_4)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:35},end:{line:56,column:3}},line:39},"5":{name:"(anonymous_5)",decl:{start:{line:58,column:2},end:{line:58,column:3}},loc:{start:{line:58,column:32},end:{line:76,column:3}},line:58},"6":{name:"(anonymous_6)",decl:{start:{line:67,column:21},end:{line:67,column:22}},loc:{start:{line:67,column:30},end:{line:70,column:9}},line:67},"7":{name:"(anonymous_7)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:48},end:{line:85,column:3}},line:78},"8":{name:"(anonymous_8)",decl:{start:{line:87,column:2},end:{line:87,column:3}},loc:{start:{line:87,column:20},end:{line:100,column:3}},line:87},"9":{name:"(anonymous_9)",decl:{start:{line:99,column:72},end:{line:99,column:73}},loc:{start:{line:99,column:85},end:{line:99,column:119}},line:99},"10":{name:"(anonymous_10)",decl:{start:{line:102,column:2},end:{line:102,column:3}},loc:{start:{line:102,column:23},end:{line:120,column:3}},line:102},"11":{name:"(anonymous_11)",decl:{start:{line:107,column:139},end:{line:107,column:140}},loc:{start:{line:107,column:154},end:{line:119,column:5}},line:107},"12":{name:"(anonymous_12)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:30},end:{line:131,column:3}},line:122},"13":{name:"(anonymous_13)",decl:{start:{line:126,column:19},end:{line:126,column:20}},loc:{start:{line:126,column:58},end:{line:126,column:136}},line:126},"14":{name:"(anonymous_14)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:34},end:{line:135,column:3}},line:133}},branchMap:{"0":{loc:{start:{line:32,column:49},end:{line:32,column:96}},type:"if",locations:[{start:{line:32,column:49},end:{line:32,column:96}},{start:{line:32,column:49},end:{line:32,column:96}}],line:32},"1":{loc:{start:{line:32,column:241},end:{line:32,column:291}},type:"cond-expr",locations:[{start:{line:32,column:255},end:{line:32,column:271}},{start:{line:32,column:274},end:{line:32,column:291}}],line:32},"2":{loc:{start:{line:34,column:53},end:{line:34,column:111}},type:"if",locations:[{start:{line:34,column:53},end:{line:34,column:111}},{start:{line:34,column:53},end:{line:34,column:111}}],line:34},"3":{loc:{start:{line:34,column:57},end:{line:34,column:94}},type:"binary-expr",locations:[{start:{line:34,column:57},end:{line:34,column:69}},{start:{line:34,column:73},end:{line:34,column:76}},{start:{line:34,column:80},end:{line:34,column:94}}],line:34},"4":{loc:{start:{line:34,column:112},end:{line:34,column:214}},type:"if",locations:[{start:{line:34,column:112},end:{line:34,column:214}},{start:{line:34,column:112},end:{line:34,column:214}}],line:34},"5":{loc:{start:{line:34,column:116},end:{line:34,column:184}},type:"binary-expr",locations:[{start:{line:34,column:116},end:{line:34,column:128}},{start:{line:34,column:132},end:{line:34,column:155}},{start:{line:34,column:159},end:{line:34,column:184}}],line:34},"6":{loc:{start:{line:34,column:266},end:{line:34,column:321}},type:"if",locations:[{start:{line:34,column:266},end:{line:34,column:321}},{start:{line:34,column:266},end:{line:34,column:321}}],line:34},"7":{loc:{start:{line:34,column:270},end:{line:34,column:293}},type:"binary-expr",locations:[{start:{line:34,column:270},end:{line:34,column:275}},{start:{line:34,column:279},end:{line:34,column:293}}],line:34},"8":{loc:{start:{line:34,column:367},end:{line:34,column:423}},type:"binary-expr",locations:[{start:{line:34,column:367},end:{line:34,column:388}},{start:{line:34,column:392},end:{line:34,column:423}}],line:34},"9":{loc:{start:{line:34,column:448},end:{line:34,column:724}},type:"if",locations:[{start:{line:34,column:448},end:{line:34,column:724}},{start:{line:34,column:448},end:{line:34,column:724}}],line:34},"10":{loc:{start:{line:34,column:452},end:{line:34,column:519}},type:"binary-expr",locations:[{start:{line:34,column:452},end:{line:34,column:469}},{start:{line:34,column:473},end:{line:34,column:519}}],line:34},"11":{loc:{start:{line:34,column:534},end:{line:34,column:606}},type:"cond-expr",locations:[{start:{line:34,column:558},end:{line:34,column:599}},{start:{line:34,column:602},end:{line:34,column:606}}],line:34},"12":{loc:{start:{line:34,column:608},end:{line:34,column:722}},type:"if",locations:[{start:{line:34,column:608},end:{line:34,column:722}},{start:{line:34,column:608},end:{line:34,column:722}}],line:34},"13":{loc:{start:{line:34,column:612},end:{line:34,column:642}},type:"binary-expr",locations:[{start:{line:34,column:612},end:{line:34,column:616}},{start:{line:34,column:621},end:{line:34,column:629}},{start:{line:34,column:633},end:{line:34,column:641}}],line:34},"14":{loc:{start:{line:34,column:749},end:{line:34,column:787}},type:"if",locations:[{start:{line:34,column:749},end:{line:34,column:787}},{start:{line:34,column:749},end:{line:34,column:787}}],line:34},"15":{loc:{start:{line:36,column:46},end:{line:36,column:92}},type:"cond-expr",locations:[{start:{line:36,column:70},end:{line:36,column:73}},{start:{line:36,column:76},end:{line:36,column:92}}],line:36},"16":{loc:{start:{line:36,column:46},end:{line:36,column:67}},type:"binary-expr",locations:[{start:{line:36,column:46},end:{line:36,column:49}},{start:{line:36,column:53},end:{line:36,column:67}}],line:36},"17":{loc:{start:{line:40,column:23},end:{line:40,column:113}},type:"binary-expr",locations:[{start:{line:40,column:23},end:{line:40,column:34}},{start:{line:40,column:38},end:{line:40,column:113}}],line:40},"18":{loc:{start:{line:42,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:42,column:4},end:{line:44,column:5}},{start:{line:42,column:4},end:{line:44,column:5}}],line:42},"19":{loc:{start:{line:42,column:8},end:{line:42,column:38}},type:"binary-expr",locations:[{start:{line:42,column:8},end:{line:42,column:15}},{start:{line:42,column:19},end:{line:42,column:38}}],line:42},"20":{loc:{start:{line:48,column:15},end:{line:48,column:101}},type:"binary-expr",locations:[{start:{line:48,column:15},end:{line:48,column:38}},{start:{line:48,column:42},end:{line:48,column:82}},{start:{line:48,column:86},end:{line:48,column:101}}],line:48},"21":{loc:{start:{line:73,column:21},end:{line:73,column:85}},type:"binary-expr",locations:[{start:{line:73,column:21},end:{line:73,column:28}},{start:{line:73,column:32},end:{line:73,column:64}},{start:{line:73,column:68},end:{line:73,column:80}},{start:{line:73,column:84},end:{line:73,column:85}}],line:73},"22":{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:88,column:4},end:{line:90,column:5}}],line:88},"23":{loc:{start:{line:88,column:8},end:{line:88,column:24}},type:"binary-expr",locations:[{start:{line:88,column:8},end:{line:88,column:12}},{start:{line:88,column:16},end:{line:88,column:24}}],line:88},"24":{loc:{start:{line:93,column:55},end:{line:93,column:102}},type:"binary-expr",locations:[{start:{line:93,column:55},end:{line:93,column:92}},{start:{line:93,column:96},end:{line:93,column:102}}],line:93},"25":{loc:{start:{line:103,column:4},end:{line:105,column:5}},type:"if",locations:[{start:{line:103,column:4},end:{line:105,column:5}},{start:{line:103,column:4},end:{line:105,column:5}}],line:103},"26":{loc:{start:{line:103,column:8},end:{line:103,column:24}},type:"binary-expr",locations:[{start:{line:103,column:8},end:{line:103,column:12}},{start:{line:103,column:16},end:{line:103,column:24}}],line:103},"27":{loc:{start:{line:107,column:12},end:{line:107,column:137}},type:"binary-expr",locations:[{start:{line:107,column:12},end:{line:107,column:38}},{start:{line:107,column:42},end:{line:107,column:137}}],line:107},"28":{loc:{start:{line:129,column:12},end:{line:129,column:147}},type:"binary-expr",locations:[{start:{line:129,column:12},end:{line:129,column:41}},{start:{line:129,column:45},end:{line:129,column:147}}],line:129}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0,0],"21":[0,0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},inputSourceMap:{version:3,sources:["../../src/GraphQL/ParseGraphQLServer.js"],names:["ParseGraphQLServer","constructor","parseServer","config","graphQLPath","parseGraphQLController","log","loggerController","defaultLogger","parseGraphQLSchema","ParseGraphQLSchema","databaseController","graphQLCustomTypeDefs","appId","_getGraphQLOptions","req","schema","load","context","info","auth","formatError","error","e","stack","toString","_transformMaxUploadSizeToBytes","maxUploadSize","unitMap","kb","mb","gb","Number","slice","Math","pow","toLowerCase","applyGraphQL","app","use","maxFileSize","bodyParser","json","handleParseHeaders","handleParseErrors","applyPlayground","get","playgroundPath","_req","res","setHeader","write","endpoint","version","subscriptionEndpoint","subscriptionsPath","headers","masterKey","end","createSubscriptions","server","SubscriptionServer","create","execute","subscribe","onOperation","_message","params","webSocket","Object","assign","upgradeReq","path","setGraphQLConfig","graphQLConfig","updateGraphQLConfig"],mappings:"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",sourcesContent:["import corsMiddleware from 'cors';\nimport bodyParser from 'body-parser';\nimport { graphqlUploadExpress } from 'graphql-upload';\nimport { graphqlExpress } from 'apollo-server-express/dist/expressApollo';\nimport { renderPlaygroundPage } from '@apollographql/graphql-playground-html';\nimport { execute, subscribe } from 'graphql';\nimport { SubscriptionServer } from 'subscriptions-transport-ws';\nimport { handleParseErrors, handleParseHeaders } from '../middlewares';\nimport requiredParameter from '../requiredParameter';\nimport defaultLogger from '../logger';\nimport { ParseGraphQLSchema } from './ParseGraphQLSchema';\nimport ParseGraphQLController, { ParseGraphQLConfig } from '../Controllers/ParseGraphQLController';\n\nclass ParseGraphQLServer {\n  parseGraphQLController: ParseGraphQLController;\n\n  constructor(parseServer, config) {\n    this.parseServer = parseServer || requiredParameter('You must provide a parseServer instance!');\n    if (!config || !config.graphQLPath) {\n      requiredParameter('You must provide a config.graphQLPath!');\n    }\n    this.config = config;\n    this.parseGraphQLController = this.parseServer.config.parseGraphQLController;\n    this.log =\n      (this.parseServer.config && this.parseServer.config.loggerController) || defaultLogger;\n    this.parseGraphQLSchema = new ParseGraphQLSchema({\n      parseGraphQLController: this.parseGraphQLController,\n      databaseController: this.parseServer.config.databaseController,\n      log: this.log,\n      graphQLCustomTypeDefs: this.config.graphQLCustomTypeDefs,\n      appId: this.parseServer.config.appId,\n    });\n  }\n\n  async _getGraphQLOptions(req) {\n    try {\n      return {\n        schema: await this.parseGraphQLSchema.load(),\n        context: {\n          info: req.info,\n          config: req.config,\n          auth: req.auth,\n        },\n        formatError: error => {\n          // Allow to console.log here to debug\n          return error;\n        },\n      };\n    } catch (e) {\n      this.log.error(e.stack || (typeof e.toString === 'function' && e.toString()) || e);\n      throw e;\n    }\n  }\n\n  _transformMaxUploadSizeToBytes(maxUploadSize) {\n    const unitMap = {\n      kb: 1,\n      mb: 2,\n      gb: 3,\n    };\n\n    return (\n      Number(maxUploadSize.slice(0, -2)) *\n      Math.pow(1024, unitMap[maxUploadSize.slice(-2).toLowerCase()])\n    );\n  }\n\n  applyGraphQL(app) {\n    if (!app || !app.use) {\n      requiredParameter('You must provide an Express.js app instance!');\n    }\n\n    app.use(\n      this.config.graphQLPath,\n      graphqlUploadExpress({\n        maxFileSize: this._transformMaxUploadSizeToBytes(\n          this.parseServer.config.maxUploadSize || '20mb'\n        ),\n      })\n    );\n    app.use(this.config.graphQLPath, corsMiddleware());\n    app.use(this.config.graphQLPath, bodyParser.json());\n    app.use(this.config.graphQLPath, handleParseHeaders);\n    app.use(this.config.graphQLPath, handleParseErrors);\n    app.use(\n      this.config.graphQLPath,\n      graphqlExpress(async req => await this._getGraphQLOptions(req))\n    );\n  }\n\n  applyPlayground(app) {\n    if (!app || !app.get) {\n      requiredParameter('You must provide an Express.js app instance!');\n    }\n    app.get(\n      this.config.playgroundPath ||\n        requiredParameter('You must provide a config.playgroundPath to applyPlayground!'),\n      (_req, res) => {\n        res.setHeader('Content-Type', 'text/html');\n        res.write(\n          renderPlaygroundPage({\n            endpoint: this.config.graphQLPath,\n            version: '1.7.25',\n            subscriptionEndpoint: this.config.subscriptionsPath,\n            headers: {\n              'X-Parse-Application-Id': this.parseServer.config.appId,\n              'X-Parse-Master-Key': this.parseServer.config.masterKey,\n            },\n          })\n        );\n        res.end();\n      }\n    );\n  }\n\n  createSubscriptions(server) {\n    SubscriptionServer.create(\n      {\n        execute,\n        subscribe,\n        onOperation: async (_message, params, webSocket) =>\n          Object.assign({}, params, await this._getGraphQLOptions(webSocket.upgradeReq)),\n      },\n      {\n        server,\n        path:\n          this.config.subscriptionsPath ||\n          requiredParameter('You must provide a config.subscriptionsPath to createSubscriptions!'),\n      }\n    );\n  }\n\n  setGraphQLConfig(graphQLConfig: ParseGraphQLConfig): Promise {\n    return this.parseGraphQLController.updateGraphQLConfig(graphQLConfig);\n  }\n}\n\nexport { ParseGraphQLServer };\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99fdb896e87d6e10714206c32a6221983fdf0067"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_gp55warc6=function(){return actualCoverage;};}return actualCoverage;}cov_gp55warc6();cov_gp55warc6().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_gp55warc6().s[1]++;exports.ParseGraphQLServer=void 0;var _cors=(cov_gp55warc6().s[2]++,_interopRequireDefault(require("cors")));var _bodyParser=(cov_gp55warc6().s[3]++,_interopRequireDefault(require("body-parser")));var _graphqlUpload=(cov_gp55warc6().s[4]++,require("graphql-upload"));var _expressApollo=(cov_gp55warc6().s[5]++,require("apollo-server-express/dist/expressApollo"));var _graphqlPlaygroundHtml=(cov_gp55warc6().s[6]++,require("@apollographql/graphql-playground-html"));var _graphql=(cov_gp55warc6().s[7]++,require("graphql"));var _subscriptionsTransportWs=(cov_gp55warc6().s[8]++,require("subscriptions-transport-ws"));var _middlewares=(cov_gp55warc6().s[9]++,require("../middlewares"));var _requiredParameter=(cov_gp55warc6().s[10]++,_interopRequireDefault(require("../requiredParameter")));var _logger=(cov_gp55warc6().s[11]++,_interopRequireDefault(require("../logger")));var _ParseGraphQLSchema=(cov_gp55warc6().s[12]++,require("./ParseGraphQLSchema"));var _ParseGraphQLController=(cov_gp55warc6().s[13]++,_interopRequireWildcard(require("../Controllers/ParseGraphQLController")));function _getRequireWildcardCache(nodeInterop){cov_gp55warc6().f[0]++;cov_gp55warc6().s[14]++;if(typeof WeakMap!=="function"){cov_gp55warc6().b[0][0]++;cov_gp55warc6().s[15]++;return null;}else{cov_gp55warc6().b[0][1]++;}var cacheBabelInterop=(cov_gp55warc6().s[16]++,new WeakMap());var cacheNodeInterop=(cov_gp55warc6().s[17]++,new WeakMap());cov_gp55warc6().s[18]++;return(_getRequireWildcardCache=function(nodeInterop){cov_gp55warc6().f[1]++;cov_gp55warc6().s[19]++;return nodeInterop?(cov_gp55warc6().b[1][0]++,cacheNodeInterop):(cov_gp55warc6().b[1][1]++,cacheBabelInterop);})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){cov_gp55warc6().f[2]++;cov_gp55warc6().s[20]++;if((cov_gp55warc6().b[3][0]++,!nodeInterop)&&(cov_gp55warc6().b[3][1]++,obj)&&(cov_gp55warc6().b[3][2]++,obj.__esModule)){cov_gp55warc6().b[2][0]++;cov_gp55warc6().s[21]++;return obj;}else{cov_gp55warc6().b[2][1]++;}cov_gp55warc6().s[22]++;if((cov_gp55warc6().b[5][0]++,obj===null)||(cov_gp55warc6().b[5][1]++,typeof obj!=="object")&&(cov_gp55warc6().b[5][2]++,typeof obj!=="function")){cov_gp55warc6().b[4][0]++;cov_gp55warc6().s[23]++;return{default:obj};}else{cov_gp55warc6().b[4][1]++;}var cache=(cov_gp55warc6().s[24]++,_getRequireWildcardCache(nodeInterop));cov_gp55warc6().s[25]++;if((cov_gp55warc6().b[7][0]++,cache)&&(cov_gp55warc6().b[7][1]++,cache.has(obj))){cov_gp55warc6().b[6][0]++;cov_gp55warc6().s[26]++;return cache.get(obj);}else{cov_gp55warc6().b[6][1]++;}var newObj=(cov_gp55warc6().s[27]++,{});var hasPropertyDescriptor=(cov_gp55warc6().s[28]++,(cov_gp55warc6().b[8][0]++,Object.defineProperty)&&(cov_gp55warc6().b[8][1]++,Object.getOwnPropertyDescriptor));cov_gp55warc6().s[29]++;for(var key in obj){cov_gp55warc6().s[30]++;if((cov_gp55warc6().b[10][0]++,key!=="default")&&(cov_gp55warc6().b[10][1]++,Object.prototype.hasOwnProperty.call(obj,key))){cov_gp55warc6().b[9][0]++;var desc=(cov_gp55warc6().s[31]++,hasPropertyDescriptor?(cov_gp55warc6().b[11][0]++,Object.getOwnPropertyDescriptor(obj,key)):(cov_gp55warc6().b[11][1]++,null));cov_gp55warc6().s[32]++;if((cov_gp55warc6().b[13][0]++,desc)&&((cov_gp55warc6().b[13][1]++,desc.get)||(cov_gp55warc6().b[13][2]++,desc.set))){cov_gp55warc6().b[12][0]++;cov_gp55warc6().s[33]++;Object.defineProperty(newObj,key,desc);}else{cov_gp55warc6().b[12][1]++;cov_gp55warc6().s[34]++;newObj[key]=obj[key];}}else{cov_gp55warc6().b[9][1]++;}}cov_gp55warc6().s[35]++;newObj.default=obj;cov_gp55warc6().s[36]++;if(cache){cov_gp55warc6().b[14][0]++;cov_gp55warc6().s[37]++;cache.set(obj,newObj);}else{cov_gp55warc6().b[14][1]++;}cov_gp55warc6().s[38]++;return newObj;}function _interopRequireDefault(obj){cov_gp55warc6().f[3]++;cov_gp55warc6().s[39]++;return(cov_gp55warc6().b[16][0]++,obj)&&(cov_gp55warc6().b[16][1]++,obj.__esModule)?(cov_gp55warc6().b[15][0]++,obj):(cov_gp55warc6().b[15][1]++,{default:obj});}class ParseGraphQLServer{constructor(parseServer,config){cov_gp55warc6().f[4]++;cov_gp55warc6().s[40]++;this.parseServer=(cov_gp55warc6().b[17][0]++,parseServer)||(cov_gp55warc6().b[17][1]++,(0,_requiredParameter.default)('You must provide a parseServer instance!'));cov_gp55warc6().s[41]++;if((cov_gp55warc6().b[19][0]++,!config)||(cov_gp55warc6().b[19][1]++,!config.graphQLPath)){cov_gp55warc6().b[18][0]++;cov_gp55warc6().s[42]++;(0,_requiredParameter.default)('You must provide a config.graphQLPath!');}else{cov_gp55warc6().b[18][1]++;}cov_gp55warc6().s[43]++;this.config=config;cov_gp55warc6().s[44]++;this.parseGraphQLController=this.parseServer.config.parseGraphQLController;cov_gp55warc6().s[45]++;this.log=(cov_gp55warc6().b[20][0]++,this.parseServer.config)&&(cov_gp55warc6().b[20][1]++,this.parseServer.config.loggerController)||(cov_gp55warc6().b[20][2]++,_logger.default);cov_gp55warc6().s[46]++;this.parseGraphQLSchema=new _ParseGraphQLSchema.ParseGraphQLSchema({parseGraphQLController:this.parseGraphQLController,databaseController:this.parseServer.config.databaseController,log:this.log,graphQLCustomTypeDefs:this.config.graphQLCustomTypeDefs,appId:this.parseServer.config.appId});}async _getGraphQLOptions(req){cov_gp55warc6().f[5]++;cov_gp55warc6().s[47]++;try{cov_gp55warc6().s[48]++;return{schema:await this.parseGraphQLSchema.load(),context:{info:req.info,config:req.config,auth:req.auth},formatError:error=>{cov_gp55warc6().f[6]++;cov_gp55warc6().s[49]++;// Allow to console.log here to debug
return error;}};}catch(e){cov_gp55warc6().s[50]++;this.log.error((cov_gp55warc6().b[21][0]++,e.stack)||(cov_gp55warc6().b[21][1]++,typeof e.toString==='function')&&(cov_gp55warc6().b[21][2]++,e.toString())||(cov_gp55warc6().b[21][3]++,e));cov_gp55warc6().s[51]++;throw e;}}_transformMaxUploadSizeToBytes(maxUploadSize){cov_gp55warc6().f[7]++;const unitMap=(cov_gp55warc6().s[52]++,{kb:1,mb:2,gb:3});cov_gp55warc6().s[53]++;return Number(maxUploadSize.slice(0,-2))*Math.pow(1024,unitMap[maxUploadSize.slice(-2).toLowerCase()]);}applyGraphQL(app){cov_gp55warc6().f[8]++;cov_gp55warc6().s[54]++;if((cov_gp55warc6().b[23][0]++,!app)||(cov_gp55warc6().b[23][1]++,!app.use)){cov_gp55warc6().b[22][0]++;cov_gp55warc6().s[55]++;(0,_requiredParameter.default)('You must provide an Express.js app instance!');}else{cov_gp55warc6().b[22][1]++;}cov_gp55warc6().s[56]++;app.use(this.config.graphQLPath,(0,_graphqlUpload.graphqlUploadExpress)({maxFileSize:this._transformMaxUploadSizeToBytes((cov_gp55warc6().b[24][0]++,this.parseServer.config.maxUploadSize)||(cov_gp55warc6().b[24][1]++,'20mb'))}));cov_gp55warc6().s[57]++;app.use(this.config.graphQLPath,(0,_cors.default)());cov_gp55warc6().s[58]++;app.use(this.config.graphQLPath,_bodyParser.default.json());cov_gp55warc6().s[59]++;app.use(this.config.graphQLPath,_middlewares.handleParseHeaders);cov_gp55warc6().s[60]++;app.use(this.config.graphQLPath,_middlewares.handleParseErrors);cov_gp55warc6().s[61]++;app.use(this.config.graphQLPath,(0,_expressApollo.graphqlExpress)(async req=>{cov_gp55warc6().f[9]++;cov_gp55warc6().s[62]++;return await this._getGraphQLOptions(req);}));}applyPlayground(app){cov_gp55warc6().f[10]++;cov_gp55warc6().s[63]++;if((cov_gp55warc6().b[26][0]++,!app)||(cov_gp55warc6().b[26][1]++,!app.get)){cov_gp55warc6().b[25][0]++;cov_gp55warc6().s[64]++;(0,_requiredParameter.default)('You must provide an Express.js app instance!');}else{cov_gp55warc6().b[25][1]++;}cov_gp55warc6().s[65]++;app.get((cov_gp55warc6().b[27][0]++,this.config.playgroundPath)||(cov_gp55warc6().b[27][1]++,(0,_requiredParameter.default)('You must provide a config.playgroundPath to applyPlayground!')),(_req,res)=>{cov_gp55warc6().f[11]++;cov_gp55warc6().s[66]++;res.setHeader('Content-Type','text/html');cov_gp55warc6().s[67]++;res.write((0,_graphqlPlaygroundHtml.renderPlaygroundPage)({endpoint:this.config.graphQLPath,version:'1.7.25',subscriptionEndpoint:this.config.subscriptionsPath,headers:{'X-Parse-Application-Id':this.parseServer.config.appId,'X-Parse-Master-Key':this.parseServer.config.masterKey}}));cov_gp55warc6().s[68]++;res.end();});}createSubscriptions(server){cov_gp55warc6().f[12]++;cov_gp55warc6().s[69]++;_subscriptionsTransportWs.SubscriptionServer.create({execute:_graphql.execute,subscribe:_graphql.subscribe,onOperation:async(_message,params,webSocket)=>{cov_gp55warc6().f[13]++;cov_gp55warc6().s[70]++;return Object.assign({},params,await this._getGraphQLOptions(webSocket.upgradeReq));}},{server,path:(cov_gp55warc6().b[28][0]++,this.config.subscriptionsPath)||(cov_gp55warc6().b[28][1]++,(0,_requiredParameter.default)('You must provide a config.subscriptionsPath to createSubscriptions!'))});}setGraphQLConfig(graphQLConfig){cov_gp55warc6().f[14]++;cov_gp55warc6().s[71]++;return this.parseGraphQLController.updateGraphQLConfig(graphQLConfig);}}cov_gp55warc6().s[72]++;exports.ParseGraphQLServer=ParseGraphQLServer;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9HcmFwaFFML1BhcnNlR3JhcGhRTFNlcnZlci5qcyJdLCJuYW1lcyI6WyJQYXJzZUdyYXBoUUxTZXJ2ZXIiLCJjb25zdHJ1Y3RvciIsInBhcnNlU2VydmVyIiwiY29uZmlnIiwiZ3JhcGhRTFBhdGgiLCJwYXJzZUdyYXBoUUxDb250cm9sbGVyIiwibG9nIiwibG9nZ2VyQ29udHJvbGxlciIsImRlZmF1bHRMb2dnZXIiLCJwYXJzZUdyYXBoUUxTY2hlbWEiLCJQYXJzZUdyYXBoUUxTY2hlbWEiLCJkYXRhYmFzZUNvbnRyb2xsZXIiLCJncmFwaFFMQ3VzdG9tVHlwZURlZnMiLCJhcHBJZCIsIl9nZXRHcmFwaFFMT3B0aW9ucyIsInJlcSIsInNjaGVtYSIsImxvYWQiLCJjb250ZXh0IiwiaW5mbyIsImF1dGgiLCJmb3JtYXRFcnJvciIsImVycm9yIiwiZSIsInN0YWNrIiwidG9TdHJpbmciLCJfdHJhbnNmb3JtTWF4VXBsb2FkU2l6ZVRvQnl0ZXMiLCJtYXhVcGxvYWRTaXplIiwidW5pdE1hcCIsImtiIiwibWIiLCJnYiIsIk51bWJlciIsInNsaWNlIiwiTWF0aCIsInBvdyIsInRvTG93ZXJDYXNlIiwiYXBwbHlHcmFwaFFMIiwiYXBwIiwidXNlIiwibWF4RmlsZVNpemUiLCJib2R5UGFyc2VyIiwianNvbiIsImhhbmRsZVBhcnNlSGVhZGVycyIsImhhbmRsZVBhcnNlRXJyb3JzIiwiYXBwbHlQbGF5Z3JvdW5kIiwiZ2V0IiwicGxheWdyb3VuZFBhdGgiLCJfcmVxIiwicmVzIiwic2V0SGVhZGVyIiwid3JpdGUiLCJlbmRwb2ludCIsInZlcnNpb24iLCJzdWJzY3JpcHRpb25FbmRwb2ludCIsInN1YnNjcmlwdGlvbnNQYXRoIiwiaGVhZGVycyIsIm1hc3RlcktleSIsImVuZCIsImNyZWF0ZVN1YnNjcmlwdGlvbnMiLCJzZXJ2ZXIiLCJTdWJzY3JpcHRpb25TZXJ2ZXIiLCJjcmVhdGUiLCJleGVjdXRlIiwic3Vic2NyaWJlIiwib25PcGVyYXRpb24iLCJfbWVzc2FnZSIsInBhcmFtcyIsIndlYlNvY2tldCIsIk9iamVjdCIsImFzc2lnbiIsInVwZ3JhZGVSZXEiLCJwYXRoIiwic2V0R3JhcGhRTENvbmZpZyIsImdyYXBoUUxDb25maWciLCJ1cGRhdGVHcmFwaFFMQ29uZmlnIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7O0FBRUEsTUFBTUEsa0JBQU4sQ0FBeUI7QUFHdkJDLEVBQUFBLFdBQVcsQ0FBQ0MsV0FBRCxFQUFjQyxNQUFkLEVBQXNCO0FBQy9CLFNBQUtELFdBQUwsR0FBbUJBLFdBQVcsSUFBSSxnQ0FBa0IsMENBQWxCLENBQWxDOztBQUNBLFFBQUksQ0FBQ0MsTUFBRCxJQUFXLENBQUNBLE1BQU0sQ0FBQ0MsV0FBdkIsRUFBb0M7QUFDbEMsc0NBQWtCLHdDQUFsQjtBQUNEOztBQUNELFNBQUtELE1BQUwsR0FBY0EsTUFBZDtBQUNBLFNBQUtFLHNCQUFMLEdBQThCLEtBQUtILFdBQUwsQ0FBaUJDLE1BQWpCLENBQXdCRSxzQkFBdEQ7QUFDQSxTQUFLQyxHQUFMLEdBQ0csS0FBS0osV0FBTCxDQUFpQkMsTUFBakIsSUFBMkIsS0FBS0QsV0FBTCxDQUFpQkMsTUFBakIsQ0FBd0JJLGdCQUFwRCxJQUF5RUMsZUFEM0U7QUFFQSxTQUFLQyxrQkFBTCxHQUEwQixJQUFJQyxzQ0FBSixDQUF1QjtBQUMvQ0wsTUFBQUEsc0JBQXNCLEVBQUUsS0FBS0Esc0JBRGtCO0FBRS9DTSxNQUFBQSxrQkFBa0IsRUFBRSxLQUFLVCxXQUFMLENBQWlCQyxNQUFqQixDQUF3QlEsa0JBRkc7QUFHL0NMLE1BQUFBLEdBQUcsRUFBRSxLQUFLQSxHQUhxQztBQUkvQ00sTUFBQUEscUJBQXFCLEVBQUUsS0FBS1QsTUFBTCxDQUFZUyxxQkFKWTtBQUsvQ0MsTUFBQUEsS0FBSyxFQUFFLEtBQUtYLFdBQUwsQ0FBaUJDLE1BQWpCLENBQXdC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QixDQUFnREQsYUFBaEQsQ0FBUDtBQUNEOztBQXpIc0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29yc01pZGRsZXdhcmUgZnJvbSAnY29ycyc7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgeyBncmFwaHFsVXBsb2FkRXhwcmVzcyB9IGZyb20gJ2dyYXBocWwtdXBsb2FkJztcbmltcG9ydCB7IGdyYXBocWxFeHByZXNzIH0gZnJvbSAnYXBvbGxvLXNlcnZlci1leHByZXNzL2Rpc3QvZXhwcmVzc0Fwb2xsbyc7XG5pbXBvcnQgeyByZW5kZXJQbGF5Z3JvdW5kUGFnZSB9IGZyb20gJ0BhcG9sbG9ncmFwaHFsL2dyYXBocWwtcGxheWdyb3VuZC1odG1sJztcbmltcG9ydCB7IGV4ZWN1dGUsIHN1YnNjcmliZSB9IGZyb20gJ2dyYXBocWwnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uU2VydmVyIH0gZnJvbSAnc3Vic2NyaXB0aW9ucy10cmFuc3BvcnQtd3MnO1xuaW1wb3J0IHsgaGFuZGxlUGFyc2VFcnJvcnMsIGhhbmRsZVBhcnNlSGVhZGVycyB9IGZyb20gJy4uL21pZGRsZXdhcmVzJztcbmltcG9ydCByZXF1aXJlZFBhcmFtZXRlciBmcm9tICcuLi9yZXF1aXJlZFBhcmFtZXRlcic7XG5pbXBvcnQgZGVmYXVsdExvZ2dlciBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IHsgUGFyc2VHcmFwaFFMU2NoZW1hIH0gZnJvbSAnLi9QYXJzZUdyYXBoUUxTY2hlbWEnO1xuaW1wb3J0IFBhcnNlR3JhcGhRTENvbnRyb2xsZXIsIHsgUGFyc2VHcmFwaFFMQ29uZmlnIH0gZnJvbSAnLi4vQ29udHJvbGxlcnMvUGFyc2VHcmFwaFFMQ29udHJvbGxlcic7XG5cbmNsYXNzIFBhcnNlR3JhcGhRTFNlcnZlciB7XG4gIHBhcnNlR3JhcGhRTENvbnRyb2xsZXI6IFBhcnNlR3JhcGhRTENvbnRyb2xsZXI7XG5cbiAgY29uc3RydWN0b3IocGFyc2VTZXJ2ZXIsIGNvbmZpZykge1xuICAgIHRoaXMucGFyc2VTZXJ2ZXIgPSBwYXJzZVNlcnZlciB8fCByZXF1aXJlZFBhcmFtZXRlcignWW91IG11c3QgcHJvdmlkZSBhIHBhcnNlU2VydmVyIGluc3RhbmNlIScpO1xuICAgIGlmICghY29uZmlnIHx8ICFjb25maWcuZ3JhcGhRTFBhdGgpIHtcbiAgICAgIHJlcXVpcmVkUGFyYW1ldGVyKCdZb3UgbXVzdCBwcm92aWRlIGEgY29uZmlnLmdyYXBoUUxQYXRoIScpO1xuICAgIH1cbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLnBhcnNlR3JhcGhRTENvbnRyb2xsZXIgPSB0aGlzLnBhcnNlU2VydmVyLmNvbmZpZy5wYXJzZUdyYXBoUUxDb250cm9sbGVyO1xuICAgIHRoaXMubG9nID1cbiAgICAgICh0aGlzLnBhcnNlU2VydmVyLmNvbmZpZyAmJiB0aGlzLnBhcnNlU2VydmVyLmNvbmZpZy5sb2dnZXJDb250cm9sbGVyKSB8fCBkZWZhdWx0TG9nZ2VyO1xuICAgIHRoaXMucGFyc2VHcmFwaFFMU2NoZW1hID0gbmV3IFBhcnNlR3JhcGhRTFNjaGVtYSh7XG4gICAgICBwYXJzZUdyYXBoUUxDb250cm9sbGVyOiB0aGlzLnBhcnNlR3JhcGhRTENvbnRyb2xsZXIsXG4gICAgICBkYXRhYmFzZUNvbnRyb2xsZXI6IHRoaXMucGFyc2VTZXJ2ZXIuY29uZmlnLmRhdGFiYXNlQ29udHJvbGxlcixcbiAgICAgIGxvZzogdGhpcy5sb2csXG4gICAgICBncmFwaFFMQ3VzdG9tVHlwZURlZnM6IHRoaXMuY29uZmlnLmdyYXBoUUxDdXN0b21UeXBlRGVmcyxcbiAgICAgIGFwcElkOiB0aGlzLnBhcnNlU2VydmVyLmNvbmZpZy5hcHBJZCxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIF9nZXRHcmFwaFFMT3B0aW9ucyhyZXEpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2NoZW1hOiBhd2FpdCB0aGlzLnBhcnNlR3JhcGhRTFNjaGVtYS5sb2FkKCksXG4gICAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgICBpbmZvOiByZXEuaW5mbyxcbiAgICAgICAgICBjb25maWc6IHJlcS5jb25maWcsXG4gICAgICAgICAgYXV0aDogcmVxLmF1dGgsXG4gICAgICAgIH0sXG4gICAgICAgIGZvcm1hdEVycm9yOiBlcnJvciA9PiB7XG4gICAgICAgICAgLy8gQWxsb3cgdG8gY29uc29sZS5sb2cgaGVyZSB0byBkZWJ1Z1xuICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5sb2cuZXJyb3IoZS5zdGFjayB8fCAodHlwZW9mIGUudG9TdHJpbmcgPT09ICdmdW5jdGlvbicgJiYgZS50b1N0cmluZygpKSB8fCBlKTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG5cbiAgX3RyYW5zZm9ybU1heFVwbG9hZFNpemVUb0J5dGVzKG1heFVwbG9hZFNpemUpIHtcbiAgICBjb25zdCB1bml0TWFwID0ge1xuICAgICAga2I6IDEsXG4gICAgICBtYjogMixcbiAgICAgIGdiOiAzLFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgTnVtYmVyKG1heFVwbG9hZFNpemUuc2xpY2UoMCwgLTIpKSAqXG4gICAgICBNYXRoLnBvdygxMDI0LCB1bml0TWFwW21heFVwbG9hZFNpemUuc2xpY2UoLTIpLnRvTG93ZXJDYXNlKCldKVxuICAgICk7XG4gIH1cblxuICBhcHBseUdyYXBoUUwoYXBwKSB7XG4gICAgaWYgKCFhcHAgfHwgIWFwcC51c2UpIHtcbiAgICAgIHJlcXVpcmVkUGFyYW1ldGVyKCdZb3UgbXVzdCBwcm92aWRlIGFuIEV4cHJlc3MuanMgYXBwIGluc3RhbmNlIScpO1xuICAgIH1cblxuICAgIGFwcC51c2UoXG4gICAgICB0aGlzLmNvbmZpZy5ncmFwaFFMUGF0aCxcbiAgICAgIGdyYXBocWxVcGxvYWRFeHByZXNzKHtcbiAgICAgICAgbWF4RmlsZVNpemU6IHRoaXMuX3RyYW5zZm9ybU1heFVwbG9hZFNpemVUb0J5dGVzKFxuICAgICAgICAgIHRoaXMucGFyc2VTZXJ2ZXIuY29uZmlnLm1heFVwbG9hZFNpemUgfHwgJzIwbWInXG4gICAgICAgICksXG4gICAgICB9KVxuICAgICk7XG4gICAgYXBwLnVzZSh0aGlzLmNvbmZpZy5ncmFwaFFMUGF0aCwgY29yc01pZGRsZXdhcmUoKSk7XG4gICAgYXBwLnVzZSh0aGlzLmNvbmZpZy5ncmFwaFFMUGF0aCwgYm9keVBhcnNlci5qc29uKCkpO1xuICAgIGFwcC51c2UodGhpcy5jb25maWcuZ3JhcGhRTFBhdGgsIGhhbmRsZVBhcnNlSGVhZGVycyk7XG4gICAgYXBwLnVzZSh0aGlzLmNvbmZpZy5ncmFwaFFMUGF0aCwgaGFuZGxlUGFyc2VFcnJvcnMpO1xuICAgIGFwcC51c2UoXG4gICAgICB0aGlzLmNvbmZpZy5ncmFwaFFMUGF0aCxcbiAgICAgIGdyYXBocWxFeHByZXNzKGFzeW5jIHJlcSA9PiBhd2FpdCB0aGlzLl9nZXRHcmFwaFFMT3B0aW9ucyhyZXEpKVxuICAgICk7XG4gIH1cblxuICBhcHBseVBsYXlncm91bmQoYXBwKSB7XG4gICAgaWYgKCFhcHAgfHwgIWFwcC5nZXQpIHtcbiAgICAgIHJlcXVpcmVkUGFyYW1ldGVyKCdZb3UgbXVzdCBwcm92aWRlIGFuIEV4cHJlc3MuanMgYXBwIGluc3RhbmNlIScpO1xuICAgIH1cbiAgICBhcHAuZ2V0KFxuICAgICAgdGhpcy5jb25maWcucGxheWdyb3VuZFBhdGggfHxcbiAgICAgICAgcmVxdWlyZWRQYXJhbWV0ZXIoJ1lvdSBtdXN0IHByb3ZpZGUgYSBjb25maWcucGxheWdyb3VuZFBhdGggdG8gYXBwbHlQbGF5Z3JvdW5kIScpLFxuICAgICAgKF9yZXEsIHJlcykgPT4ge1xuICAgICAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAndGV4dC9odG1sJyk7XG4gICAgICAgIHJlcy53cml0ZShcbiAgICAgICAgICByZW5kZXJQbGF5Z3JvdW5kUGFnZSh7XG4gICAgICAgICAgICBlbmRwb2ludDogdGhpcy5jb25maWcuZ3JhcGhRTFBhdGgsXG4gICAgICAgICAgICB2ZXJzaW9uOiAnMS43LjI1JyxcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbkVuZHBvaW50OiB0aGlzLmNvbmZpZy5zdWJzY3JpcHRpb25zUGF0aCxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgJ1gtUGFyc2UtQXBwbGljYXRpb24tSWQnOiB0aGlzLnBhcnNlU2VydmVyLmNvbmZpZy5hcHBJZCxcbiAgICAgICAgICAgICAgJ1gtUGFyc2UtTWFzdGVyLUtleSc6IHRoaXMucGFyc2VTZXJ2ZXIuY29uZmlnLm1hc3RlcktleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgcmVzLmVuZCgpO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBjcmVhdGVTdWJzY3JpcHRpb25zKHNlcnZlcikge1xuICAgIFN1YnNjcmlwdGlvblNlcnZlci5jcmVhdGUoXG4gICAgICB7XG4gICAgICAgIGV4ZWN1dGUsXG4gICAgICAgIHN1YnNjcmliZSxcbiAgICAgICAgb25PcGVyYXRpb246IGFzeW5jIChfbWVzc2FnZSwgcGFyYW1zLCB3ZWJTb2NrZXQpID0+XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zLCBhd2FpdCB0aGlzLl9nZXRHcmFwaFFMT3B0aW9ucyh3ZWJTb2NrZXQudXBncmFkZVJlcSkpLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgc2VydmVyLFxuICAgICAgICBwYXRoOlxuICAgICAgICAgIHRoaXMuY29uZmlnLnN1YnNjcmlwdGlvbnNQYXRoIHx8XG4gICAgICAgICAgcmVxdWlyZWRQYXJhbWV0ZXIoJ1lvdSBtdXN0IHByb3ZpZGUgYSBjb25maWcuc3Vic2NyaXB0aW9uc1BhdGggdG8gY3JlYXRlU3Vic2NyaXB0aW9ucyEnKSxcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgc2V0R3JhcGhRTENvbmZpZyhncmFwaFFMQ29uZmlnOiBQYXJzZUdyYXBoUUxDb25maWcpOiBQcm9taXNlIHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZUdyYXBoUUxDb250cm9sbGVyLnVwZGF0ZUdyYXBoUUxDb25maWcoZ3JhcGhRTENvbmZpZyk7XG4gIH1cbn1cblxuZXhwb3J0IHsgUGFyc2VHcmFwaFFMU2VydmVyIH07XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9HcmFwaFFML1BhcnNlR3JhcGhRTFNlcnZlci5qcyJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInBhcnNlU2VydmVyIiwiY29uZmlnIiwiZGVmYXVsdExvZ2dlciIsIlBhcnNlR3JhcGhRTFNjaGVtYSIsInBhcnNlR3JhcGhRTENvbnRyb2xsZXIiLCJkYXRhYmFzZUNvbnRyb2xsZXIiLCJsb2ciLCJncmFwaFFMQ3VzdG9tVHlwZURlZnMiLCJhcHBJZCIsIl9nZXRHcmFwaFFMT3B0aW9ucyIsInNjaGVtYSIsImNvbnRleHQiLCJpbmZvIiwicmVxIiwiYXV0aCIsImZvcm1hdEVycm9yIiwiZXJyb3IiLCJlIiwiX3RyYW5zZm9ybU1heFVwbG9hZFNpemVUb0J5dGVzIiwidW5pdE1hcCIsImtiIiwibWIiLCJnYiIsIk51bWJlciIsIm1heFVwbG9hZFNpemUiLCJNYXRoIiwiYXBwbHlHcmFwaFFMIiwiYXBwIiwibWF4RmlsZVNpemUiLCJib2R5UGFyc2VyIiwiaGFuZGxlUGFyc2VIZWFkZXJzIiwiaGFuZGxlUGFyc2VFcnJvcnMiLCJhcHBseVBsYXlncm91bmQiLCJyZXMiLCJlbmRwb2ludCIsInZlcnNpb24iLCJzdWJzY3JpcHRpb25FbmRwb2ludCIsImhlYWRlcnMiLCJtYXN0ZXJLZXkiLCJjcmVhdGVTdWJzY3JpcHRpb25zIiwiU3Vic2NyaXB0aW9uU2VydmVyIiwiZXhlY3V0ZSIsInN1YnNjcmliZSIsIm9uT3BlcmF0aW9uIiwiT2JqZWN0Iiwid2ViU29ja2V0IiwicGF0aCIsInNldEdyYXBoUUxDb25maWciXSwibWFwcGluZ3MiOiJnMnRCQUlBO2tPQUpBLEdBQUEsQ0FBQSxLQUFBLHlCQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLENBQUEsQ0FDQSxHQUFBLENBQUEsV0FBQSx5QkFBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxhQUFBLENBQUEsQ0FBQSxDQUFBLENBQ0EsR0FBQSxDQUFBLGNBQUEseUJBQUEsT0FB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QUFBLE1BQUEsQ0FEbkIsS0FBQSxDQUVQLHFCQUFzQixLQUFBLFdBQUEsQ0FBQSxNQUFBLENBQXdCQyxTQUZ2QyxDQUpVLENBQXJCLENBREZMLEVBRmEsd0JBYWJBLEdBQUcsQ0FBSEEsR0FBQUEsR0FoQkpOLENBQUFBLEVBbUJELENBRURZLG1CQUFtQixDQUFBLE1BQUEsQ0FBUyxpREFDMUJDLHlCQUFBQSxDQUFBQSxrQkFBQUEsQ0FBQUEsTUFBQUEsQ0FDRSxDQUNFQyxPQUFPLENBQVBBLFFBQUFBLENBREYsT0FBQSxDQUVFQyxTQUFTLENBQVRBLFFBQUFBLENBRkYsU0FBQSxDQUdFQyxXQUFXLENBQUUsTUFBQSxRQUFBLENBQUEsTUFBQSxDQUFBLFNBQUEsR0FDWEMsdURBQUFBLENBQUFBLE1BQU0sQ0FBTkEsTUFBQUEsQ0FBQUEsRUFBQUEsQ0FBQUEsTUFBQUEsQ0FBMEIsS0FBTSxNQUFBLGtCQUFBLENBQXdCQyxTQUFTLENBQWpFRCxVQUFnQyxDQUFoQ0EsRUFBQUEsQ0FKSixDQURGSixDQU9FLENBQUEsTUFBQSxDQUVFTSxJQUFJLENBQ0YsaUNBQUEsTUFBQSxDQUFBLGlCQUFBLCtCQUNBLENBQUEsRUFBQSxrQkFBQSxDQUFBLE9BQUEsRUFBQSxxRUFBQSxDQURBLENBSEosQ0FQRk4sRUFjRCxDQUVETyxnQkFBZ0IsQ0FBQSxhQUFBLENBQTZDLGlEQUMzRCxNQUFPLE1BQUEsc0JBQUEsQ0FBQSxtQkFBQSxDQUFQLGFBQU8sQ0FBUCxDQUNELENBekhzQixDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvcnNNaWRkbGV3YXJlIGZyb20gJ2NvcnMnO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IHsgZ3JhcGhxbFVwbG9hZEV4cHJlc3MgfSBmcm9tICdncmFwaHFsLXVwbG9hZCc7XG5pbXBvcnQgeyBncmFwaHFsRXhwcmVzcyB9IGZyb20gJ2Fwb2xsby1zZXJ2ZXItZXhwcmVzcy9kaXN0L2V4cHJlc3NBcG9sbG8nO1xuaW1wb3J0IHsgcmVuZGVyUGxheWdyb3VuZFBhZ2UgfSBmcm9tICdAYXBvbGxvZ3JhcGhxbC9ncmFwaHFsLXBsYXlncm91bmQtaHRtbCc7XG5pbXBvcnQgeyBleGVjdXRlLCBzdWJzY3JpYmUgfSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvblNlcnZlciB9IGZyb20gJ3N1YnNjcmlwdGlvbnMtdHJhbnNwb3J0LXdzJztcbmltcG9ydCB7IGhhbmRsZVBhcnNlRXJyb3JzLCBoYW5kbGVQYXJzZUhlYWRlcnMgfSBmcm9tICcuLi9taWRkbGV3YXJlcyc7XG5pbXBvcnQgcmVxdWlyZWRQYXJhbWV0ZXIgZnJvbSAnLi4vcmVxdWlyZWRQYXJhbWV0ZXInO1xuaW1wb3J0IGRlZmF1bHRMb2dnZXIgZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IFBhcnNlR3JhcGhRTFNjaGVtYSB9IGZyb20gJy4vUGFyc2VHcmFwaFFMU2NoZW1hJztcbmltcG9ydCBQYXJzZUdyYXBoUUxDb250cm9sbGVyLCB7IFBhcnNlR3JhcGhRTENvbmZpZyB9IGZyb20gJy4uL0NvbnRyb2xsZXJzL1BhcnNlR3JhcGhRTENvbnRyb2xsZXInO1xuXG5jbGFzcyBQYXJzZUdyYXBoUUxTZXJ2ZXIge1xuICBwYXJzZUdyYXBoUUxDb250cm9sbGVyOiBQYXJzZUdyYXBoUUxDb250cm9sbGVyO1xuXG4gIGNvbnN0cnVjdG9yKHBhcnNlU2VydmVyLCBjb25maWcpIHtcbiAgICB0aGlzLnBhcnNlU2VydmVyID0gcGFyc2VTZXJ2ZXIgfHwgcmVxdWlyZWRQYXJhbWV0ZXIoJ1lvdSBtdXN0IHByb3ZpZGUgYSBwYXJzZVNlcnZlciBpbnN0YW5jZSEnKTtcbiAgICBpZiAoIWNvbmZpZyB8fCAhY29uZmlnLmdyYXBoUUxQYXRoKSB7XG4gICAgICByZXF1aXJlZFBhcmFtZXRlcignWW91IG11c3QgcHJvdmlkZSBhIGNvbmZpZy5ncmFwaFFMUGF0aCEnKTtcbiAgICB9XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5wYXJzZUdyYXBoUUxDb250cm9sbGVyID0gdGhpcy5wYXJzZVNlcnZlci5jb25maWcucGFyc2VHcmFwaFFMQ29udHJvbGxlcjtcbiAgICB0aGlzLmxvZyA9XG4gICAgICAodGhpcy5wYXJzZVNlcnZlci5jb25maWcgJiYgdGhpcy5wYXJzZVNlcnZlci5jb25maWcubG9nZ2VyQ29udHJvbGxlcikgfHwgZGVmYXVsdExvZ2dlcjtcbiAgICB0aGlzLnBhcnNlR3JhcGhRTFNjaGVtYSA9IG5ldyBQYXJzZUdyYXBoUUxTY2hlbWEoe1xuICAgICAgcGFyc2VHcmFwaFFMQ29udHJvbGxlcjogdGhpcy5wYXJzZUdyYXBoUUxDb250cm9sbGVyLFxuICAgICAgZGF0YWJhc2VDb250cm9sbGVyOiB0aGlzLnBhcnNlU2VydmVyLmNvbmZpZy5kYXRhYmFzZUNvbnRyb2xsZXIsXG4gICAgICBsb2c6IHRoaXMubG9nLFxuICAgICAgZ3JhcGhRTEN1c3RvbVR5cGVEZWZzOiB0aGlzLmNvbmZpZy5ncmFwaFFMQ3VzdG9tVHlwZURlZnMsXG4gICAgICBhcHBJZDogdGhpcy5wYXJzZVNlcnZlci5jb25maWcuYXBwSWQsXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBfZ2V0R3JhcGhRTE9wdGlvbnMocmVxKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNjaGVtYTogYXdhaXQgdGhpcy5wYXJzZUdyYXBoUUxTY2hlbWEubG9hZCgpLFxuICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgaW5mbzogcmVxLmluZm8sXG4gICAgICAgICAgY29uZmlnOiByZXEuY29uZmlnLFxuICAgICAgICAgIGF1dGg6IHJlcS5hdXRoLFxuICAgICAgICB9LFxuICAgICAgICBmb3JtYXRFcnJvcjogZXJyb3IgPT4ge1xuICAgICAgICAgIC8vIEFsbG93IHRvIGNvbnNvbGUubG9nIGhlcmUgdG8gZGVidWdcbiAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMubG9nLmVycm9yKGUuc3RhY2sgfHwgKHR5cGVvZiBlLnRvU3RyaW5nID09PSAnZnVuY3Rpb24nICYmIGUudG9TdHJpbmcoKSkgfHwgZSk7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxuXG4gIF90cmFuc2Zvcm1NYXhVcGxvYWRTaXplVG9CeXRlcyhtYXhVcGxvYWRTaXplKSB7XG4gICAgY29uc3QgdW5pdE1hcCA9IHtcbiAgICAgIGtiOiAxLFxuICAgICAgbWI6IDIsXG4gICAgICBnYjogMyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIE51bWJlcihtYXhVcGxvYWRTaXplLnNsaWNlKDAsIC0yKSkgKlxuICAgICAgTWF0aC5wb3coMTAyNCwgdW5pdE1hcFttYXhVcGxvYWRTaXplLnNsaWNlKC0yKS50b0xvd2VyQ2FzZSgpXSlcbiAgICApO1xuICB9XG5cbiAgYXBwbHlHcmFwaFFMKGFwcCkge1xuICAgIGlmICghYXBwIHx8ICFhcHAudXNlKSB7XG4gICAgICByZXF1aXJlZFBhcmFtZXRlcignWW91IG11c3QgcHJvdmlkZSBhbiBFeHByZXNzLmpzIGFwcCBpbnN0YW5jZSEnKTtcbiAgICB9XG5cbiAgICBhcHAudXNlKFxuICAgICAgdGhpcy5jb25maWcuZ3JhcGhRTFBhdGgsXG4gICAgICBncmFwaHFsVXBsb2FkRXhwcmVzcyh7XG4gICAgICAgIG1heEZpbGVTaXplOiB0aGlzLl90cmFuc2Zvcm1NYXhVcGxvYWRTaXplVG9CeXRlcyhcbiAgICAgICAgICB0aGlzLnBhcnNlU2VydmVyLmNvbmZpZy5tYXhVcGxvYWRTaXplIHx8ICcyMG1iJ1xuICAgICAgICApLFxuICAgICAgfSlcbiAgICApO1xuICAgIGFwcC51c2UodGhpcy5jb25maWcuZ3JhcGhRTFBhdGgsIGNvcnNNaWRkbGV3YXJlKCkpO1xuICAgIGFwcC51c2UodGhpcy5jb25maWcuZ3JhcGhRTFBhdGgsIGJvZHlQYXJzZXIuanNvbigpKTtcbiAgICBhcHAudXNlKHRoaXMuY29uZmlnLmdyYXBoUUxQYXRoLCBoYW5kbGVQYXJzZUhlYWRlcnMpO1xuICAgIGFwcC51c2UodGhpcy5jb25maWcuZ3JhcGhRTFBhdGgsIGhhbmRsZVBhcnNlRXJyb3JzKTtcbiAgICBhcHAudXNlKFxuICAgICAgdGhpcy5jb25maWcuZ3JhcGhRTFBhdGgsXG4gICAgICBncmFwaHFsRXhwcmVzcyhhc3luYyByZXEgPT4gYXdhaXQgdGhpcy5fZ2V0R3JhcGhRTE9wdGlvbnMocmVxKSlcbiAgICApO1xuICB9XG5cbiAgYXBwbHlQbGF5Z3JvdW5kKGFwcCkge1xuICAgIGlmICghYXBwIHx8ICFhcHAuZ2V0KSB7XG4gICAgICByZXF1aXJlZFBhcmFtZXRlcignWW91IG11c3QgcHJvdmlkZSBhbiBFeHByZXNzLmpzIGFwcCBpbnN0YW5jZSEnKTtcbiAgICB9XG4gICAgYXBwLmdldChcbiAgICAgIHRoaXMuY29uZmlnLnBsYXlncm91bmRQYXRoIHx8XG4gICAgICAgIHJlcXVpcmVkUGFyYW1ldGVyKCdZb3UgbXVzdCBwcm92aWRlIGEgY29uZmlnLnBsYXlncm91bmRQYXRoIHRvIGFwcGx5UGxheWdyb3VuZCEnKSxcbiAgICAgIChfcmVxLCByZXMpID0+IHtcbiAgICAgICAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgJ3RleHQvaHRtbCcpO1xuICAgICAgICByZXMud3JpdGUoXG4gICAgICAgICAgcmVuZGVyUGxheWdyb3VuZFBhZ2Uoe1xuICAgICAgICAgICAgZW5kcG9pbnQ6IHRoaXMuY29uZmlnLmdyYXBoUUxQYXRoLFxuICAgICAgICAgICAgdmVyc2lvbjogJzEuNy4yNScsXG4gICAgICAgICAgICBzdWJzY3JpcHRpb25FbmRwb2ludDogdGhpcy5jb25maWcuc3Vic2NyaXB0aW9uc1BhdGgsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICdYLVBhcnNlLUFwcGxpY2F0aW9uLUlkJzogdGhpcy5wYXJzZVNlcnZlci5jb25maWcuYXBwSWQsXG4gICAgICAgICAgICAgICdYLVBhcnNlLU1hc3Rlci1LZXknOiB0aGlzLnBhcnNlU2VydmVyLmNvbmZpZy5tYXN0ZXJLZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIHJlcy5lbmQoKTtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgY3JlYXRlU3Vic2NyaXB0aW9ucyhzZXJ2ZXIpIHtcbiAgICBTdWJzY3JpcHRpb25TZXJ2ZXIuY3JlYXRlKFxuICAgICAge1xuICAgICAgICBleGVjdXRlLFxuICAgICAgICBzdWJzY3JpYmUsXG4gICAgICAgIG9uT3BlcmF0aW9uOiBhc3luYyAoX21lc3NhZ2UsIHBhcmFtcywgd2ViU29ja2V0KSA9PlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcywgYXdhaXQgdGhpcy5fZ2V0R3JhcGhRTE9wdGlvbnMod2ViU29ja2V0LnVwZ3JhZGVSZXEpKSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHNlcnZlcixcbiAgICAgICAgcGF0aDpcbiAgICAgICAgICB0aGlzLmNvbmZpZy5zdWJzY3JpcHRpb25zUGF0aCB8fFxuICAgICAgICAgIHJlcXVpcmVkUGFyYW1ldGVyKCdZb3UgbXVzdCBwcm92aWRlIGEgY29uZmlnLnN1YnNjcmlwdGlvbnNQYXRoIHRvIGNyZWF0ZVN1YnNjcmlwdGlvbnMhJyksXG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIHNldEdyYXBoUUxDb25maWcoZ3JhcGhRTENvbmZpZzogUGFyc2VHcmFwaFFMQ29uZmlnKTogUHJvbWlzZSB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2VHcmFwaFFMQ29udHJvbGxlci51cGRhdGVHcmFwaFFMQ29uZmlnKGdyYXBoUUxDb25maWcpO1xuICB9XG59XG5cbmV4cG9ydCB7IFBhcnNlR3JhcGhRTFNlcnZlciB9O1xuIl19