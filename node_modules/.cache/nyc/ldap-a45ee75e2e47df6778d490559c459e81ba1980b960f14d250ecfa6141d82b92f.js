"use strict";function cov_uw2dks631(){var path="/parse-server/lib/Adapters/Auth/ldap.js";var hash="ed8ab6c023c99196a5a548d17280a546e5b85961";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Adapters/Auth/ldap.js",statementMap:{"0":{start:{line:3,column:15},end:{line:3,column:32}},"1":{start:{line:5,column:14},end:{line:5,column:41}},"2":{start:{line:8,column:2},end:{line:12,column:3}},"3":{start:{line:9,column:4},end:{line:11,column:7}},"4":{start:{line:10,column:6},end:{line:10,column:100}},"5":{start:{line:14,column:24},end:{line:19,column:3}},"6":{start:{line:20,column:17},end:{line:20,column:51}},"7":{start:{line:21,column:17},end:{line:21,column:132}},"8":{start:{line:22,column:2},end:{line:55,column:5}},"9":{start:{line:23,column:4},end:{line:54,column:7}},"10":{start:{line:24,column:6},end:{line:24,column:31}},"11":{start:{line:26,column:6},end:{line:45,column:7}},"12":{start:{line:29,column:8},end:{line:40,column:9}},"13":{start:{line:31,column:12},end:{line:31,column:102}},"14":{start:{line:32,column:12},end:{line:32,column:18}},"15":{start:{line:35,column:12},end:{line:35,column:97}},"16":{start:{line:36,column:12},end:{line:36,column:18}},"17":{start:{line:39,column:12},end:{line:39,column:120}},"18":{start:{line:42,column:8},end:{line:42,column:22}},"19":{start:{line:43,column:8},end:{line:43,column:34}},"20":{start:{line:44,column:8},end:{line:44,column:15}},"21":{start:{line:47,column:6},end:{line:53,column:7}},"22":{start:{line:48,column:8},end:{line:48,column:70}},"23":{start:{line:50,column:8},end:{line:50,column:24}},"24":{start:{line:51,column:8},end:{line:51,column:25}},"25":{start:{line:52,column:8},end:{line:52,column:18}},"26":{start:{line:59,column:2},end:{line:59,column:229}},"27":{start:{line:63,column:17},end:{line:63,column:60}},"28":{start:{line:64,column:15},end:{line:67,column:3}},"29":{start:{line:68,column:14},end:{line:68,column:19}},"30":{start:{line:69,column:2},end:{line:96,column:5}},"31":{start:{line:70,column:4},end:{line:74,column:5}},"32":{start:{line:71,column:6},end:{line:71,column:22}},"33":{start:{line:72,column:6},end:{line:72,column:23}},"34":{start:{line:73,column:6},end:{line:73,column:100}},"35":{start:{line:76,column:4},end:{line:83,column:7}},"36":{start:{line:77,column:6},end:{line:82,column:7}},"37":{start:{line:78,column:8},end:{line:78,column:21}},"38":{start:{line:79,column:8},end:{line:79,column:24}},"39":{start:{line:80,column:8},end:{line:80,column:25}},"40":{start:{line:81,column:8},end:{line:81,column:25}},"41":{start:{line:84,column:4},end:{line:90,column:7}},"42":{start:{line:85,column:6},end:{line:89,column:7}},"43":{start:{line:86,column:8},end:{line:86,column:24}},"44":{start:{line:87,column:8},end:{line:87,column:25}},"45":{start:{line:88,column:8},end:{line:88,column:101}},"46":{start:{line:91,column:4},end:{line:95,column:7}},"47":{start:{line:92,column:6},end:{line:92,column:22}},"48":{start:{line:93,column:6},end:{line:93,column:23}},"49":{start:{line:94,column:6},end:{line:94,column:100}},"50":{start:{line:100,column:2},end:{line:100,column:27}},"51":{start:{line:103,column:0},end:{line:106,column:2}}},fnMap:{"0":{name:"validateAuthData",decl:{start:{line:7,column:9},end:{line:7,column:25}},loc:{start:{line:7,column:45},end:{line:56,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:23},end:{line:9,column:24}},loc:{start:{line:9,column:38},end:{line:11,column:5}},line:9},"2":{name:"(anonymous_2)",decl:{start:{line:22,column:21},end:{line:22,column:22}},loc:{start:{line:22,column:42},end:{line:55,column:3}},line:22},"3":{name:"(anonymous_3)",decl:{start:{line:23,column:43},end:{line:23,column:44}},loc:{start:{line:23,column:56},end:{line:54,column:5}},line:23},"4":{name:"optionsAreValid",decl:{start:{line:58,column:9},end:{line:58,column:24}},loc:{start:{line:58,column:34},end:{line:60,column:1}},line:58},"5":{name:"searchForGroup",decl:{start:{line:62,column:9},end:{line:62,column:23}},loc:{start:{line:62,column:62},end:{line:97,column:1}},line:62},"6":{name:"(anonymous_6)",decl:{start:{line:69,column:38},end:{line:69,column:39}},loc:{start:{line:69,column:60},end:{line:96,column:3}},line:69},"7":{name:"(anonymous_7)",decl:{start:{line:76,column:26},end:{line:76,column:27}},loc:{start:{line:76,column:35},end:{line:83,column:5}},line:76},"8":{name:"(anonymous_8)",decl:{start:{line:84,column:18},end:{line:84,column:19}},loc:{start:{line:84,column:24},end:{line:90,column:5}},line:84},"9":{name:"(anonymous_9)",decl:{start:{line:91,column:20},end:{line:91,column:21}},loc:{start:{line:91,column:26},end:{line:95,column:5}},line:91},"10":{name:"validateAppId",decl:{start:{line:99,column:9},end:{line:99,column:22}},loc:{start:{line:99,column:25},end:{line:101,column:1}},line:99}},branchMap:{"0":{loc:{start:{line:8,column:2},end:{line:12,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:12,column:3}},{start:{line:8,column:2},end:{line:12,column:3}}],line:8},"1":{loc:{start:{line:14,column:24},end:{line:19,column:3}},type:"cond-expr",locations:[{start:{line:14,column:61},end:{line:17,column:3}},{start:{line:17,column:6},end:{line:19,column:3}}],line:14},"2":{loc:{start:{line:21,column:17},end:{line:21,column:132}},type:"cond-expr",locations:[{start:{line:21,column:50},end:{line:21,column:91}},{start:{line:21,column:94},end:{line:21,column:132}}],line:21},"3":{loc:{start:{line:26,column:6},end:{line:45,column:7}},type:"if",locations:[{start:{line:26,column:6},end:{line:45,column:7}},{start:{line:26,column:6},end:{line:45,column:7}}],line:26},"4":{loc:{start:{line:29,column:8},end:{line:40,column:9}},type:"switch",locations:[{start:{line:30,column:10},end:{line:32,column:18}},{start:{line:34,column:10},end:{line:36,column:18}},{start:{line:38,column:10},end:{line:39,column:120}}],line:29},"5":{loc:{start:{line:47,column:6},end:{line:53,column:7}},type:"if",locations:[{start:{line:47,column:6},end:{line:53,column:7}},{start:{line:47,column:6},end:{line:53,column:7}}],line:47},"6":{loc:{start:{line:47,column:10},end:{line:47,column:88}},type:"binary-expr",locations:[{start:{line:47,column:10},end:{line:47,column:45}},{start:{line:47,column:49},end:{line:47,column:88}}],line:47},"7":{loc:{start:{line:59,column:9},end:{line:59,column:228}},type:"binary-expr",locations:[{start:{line:59,column:9},end:{line:59,column:36}},{start:{line:59,column:40},end:{line:59,column:74}},{start:{line:59,column:78},end:{line:59,column:109}},{start:{line:59,column:114},end:{line:59,column:147}},{start:{line:59,column:151},end:{line:59,column:185}},{start:{line:59,column:189},end:{line:59,column:227}}],line:59},"8":{loc:{start:{line:70,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:74,column:5}},{start:{line:70,column:4},end:{line:74,column:5}}],line:70},"9":{loc:{start:{line:77,column:6},end:{line:82,column:7}},type:"if",locations:[{start:{line:77,column:6},end:{line:82,column:7}},{start:{line:77,column:6},end:{line:82,column:7}}],line:77},"10":{loc:{start:{line:85,column:6},end:{line:89,column:7}},type:"if",locations:[{start:{line:85,column:6},end:{line:89,column:7}},{start:{line:85,column:6},end:{line:89,column:7}}],line:85}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0,0,0,0,0],"8":[0,0],"9":[0,0],"10":[0,0]},inputSourceMap:{version:3,sources:["../../../src/Adapters/Auth/ldap.js"],names:["ldapjs","require","Parse","validateAuthData","authData","options","optionsAreValid","Promise","_","reject","Error","INTERNAL_SERVER_ERROR","clientOptions","url","startsWith","tlsOptions","client","createClient","userCn","dn","replace","id","suffix","resolve","bind","password","ldapError","error","code","OBJECT_NOT_FOUND","destroy","groupCn","groupFilter","searchForGroup","unbind","filter","opts","scope","found","search","searchError","res","on","entry","object","cn","validateAppId","module","exports"],mappings:";;AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AACA,MAAMC,KAAK,GAAGD,OAAO,CAAC,YAAD,CAAP,CAAsBC,KAApC;;AAEA,SAASC,gBAAT,CAA0BC,QAA1B,EAAoCC,OAApC,EAA6C;AAC3C,MAAI,CAACC,eAAe,CAACD,OAAD,CAApB,EAA+B;AAC7B,WAAO,IAAIE,OAAJ,CAAY,CAACC,CAAD,EAAIC,MAAJ,KAAe;AAChCA,MAAAA,MAAM,CAAC,IAAIP,KAAK,CAACQ,KAAV,CAAgBR,KAAK,CAACQ,KAAN,CAAYC,qBAA5B,EAAmD,iCAAnD,CAAD,CAAN;AACD,KAFM,CAAP;AAGD;;AACD,QAAMC,aAAa,GAAGP,OAAO,CAACQ,GAAR,CAAYC,UAAZ,CAAuB,UAAvB,IAClB;AAAED,IAAAA,GAAG,EAAER,OAAO,CAACQ,GAAf;AAAoBE,IAAAA,UAAU,EAAEV,OAAO,CAACU;AAAxC,GADkB,GAElB;AAAEF,IAAAA,GAAG,EAAER,OAAO,CAACQ;AAAf,GAFJ;AAIA,QAAMG,MAAM,GAAGhB,MAAM,CAACiB,YAAP,CAAoBL,aAApB,CAAf;AACA,QAAMM,MAAM,GACV,OAAOb,OAAO,CAACc,EAAf,KAAsB,QAAtB,GACId,OAAO,CAACc,EAAR,CAAWC,OAAX,CAAmB,QAAnB,EAA6BhB,QAAQ,CAACiB,EAAtC,CADJ,GAEK,OAAMjB,QAAQ,CAACiB,EAAG,IAAGhB,OAAO,CAACiB,MAAO,EAH3C;AAKA,SAAO,IAAIf,OAAJ,CAAY,CAACgB,OAAD,EAAUd,MAAV,KAAqB;AACtCO,IAAAA,MAAM,CAACQ,IAAP,CAAYN,MAAZ,EAAoBd,QAAQ,CAACqB,QAA7B,EAAuCC,SAAS,IAAI;AAClD,aAAOtB,QAAQ,CAACqB,QAAhB;;AACA,UAAIC,SAAJ,EAAe;AACb,YAAIC,KAAJ;;AACA,gBAAQD,SAAS,CAACE,IAAlB;AACE,eAAK,EAAL;AACED,YAAAA,KAAK,GAAG,IAAIzB,KAAK,CAACQ,KAAV,CACNR,KAAK,CAACQ,KAAN,CAAYmB,gBADN,EAEN,kCAFM,CAAR;AAIA;;AACF,eAAK,6BAAL;AACEF,YAAAA,KAAK,GAAG,IAAIzB,KAAK,CAACQ,KAAV,CAAgBR,KAAK,CAACQ,KAAN,CAAYmB,gBAA5B,EAA8C,6BAA9C,CAAR;AACA;;AACF;AACEF,YAAAA,KAAK,GAAG,IAAIzB,KAAK,CAACQ,KAAV,CACNR,KAAK,CAACQ,KAAN,CAAYmB,gBADN,EAEN,gCAAgCH,SAAS,CAACE,IAA1C,GAAiD,GAF3C,CAAR;AAXJ;;AAgBAnB,QAAAA,MAAM,CAACkB,KAAD,CAAN;AACAX,QAAAA,MAAM,CAACc,OAAP,CAAeJ,SAAf;AACA;AACD;;AAED,UAAI,OAAOrB,OAAO,CAAC0B,OAAf,KAA2B,QAA3B,IAAuC,OAAO1B,OAAO,CAAC2B,WAAf,KAA+B,QAA1E,EAAoF;AAClFC,QAAAA,cAAc,CAACjB,MAAD,EAASX,OAAT,EAAkBD,QAAQ,CAACiB,EAA3B,EAA+BE,OAA/B,EAAwCd,MAAxC,CAAd;AACD,OAFD,MAEO;AACLO,QAAAA,MAAM,CAACkB,MAAP;AACAlB,QAAAA,MAAM,CAACc,OAAP;AACAP,QAAAA,OAAO;AACR;AACF,KAhCD;AAiCD,GAlCM,CAAP;AAmCD;;AAED,SAASjB,eAAT,CAAyBD,OAAzB,EAAkC;AAChC,SACE,OAAOA,OAAP,KAAmB,QAAnB,IACA,OAAOA,OAAO,CAACiB,MAAf,KAA0B,QAD1B,IAEA,OAAOjB,OAAO,CAACQ,GAAf,KAAuB,QAFvB,KAGCR,OAAO,CAACQ,GAAR,CAAYC,UAAZ,CAAuB,SAAvB,KACET,OAAO,CAACQ,GAAR,CAAYC,UAAZ,CAAuB,UAAvB,KAAsC,OAAOT,OAAO,CAACU,UAAf,KAA8B,QAJvE,CADF;AAOD;;AAED,SAASkB,cAAT,CAAwBjB,MAAxB,EAAgCX,OAAhC,EAAyCgB,EAAzC,EAA6CE,OAA7C,EAAsDd,MAAtD,EAA8D;AAC5D,QAAM0B,MAAM,GAAG9B,OAAO,CAAC2B,WAAR,CAAoBZ,OAApB,CAA4B,UAA5B,EAAwCC,EAAxC,CAAf;AACA,QAAMe,IAAI,GAAG;AACXC,IAAAA,KAAK,EAAE,KADI;AAEXF,IAAAA,MAAM,EAAEA;AAFG,GAAb;AAIA,MAAIG,KAAK,GAAG,KAAZ;AACAtB,EAAAA,MAAM,CAACuB,MAAP,CAAclC,OAAO,CAACiB,MAAtB,EAA8Bc,IAA9B,EAAoC,CAACI,WAAD,EAAcC,GAAd,KAAsB;AACxD,QAAID,WAAJ,EAAiB;AACfxB,MAAAA,MAAM,CAACkB,MAAP;AACAlB,MAAAA,MAAM,CAACc,OAAP;AACA,aAAOrB,MAAM,CAAC,IAAIP,KAAK,CAACQ,KAAV,CAAgBR,KAAK,CAACQ,KAAN,CAAYC,qBAA5B,EAAmD,0BAAnD,CAAD,CAAb;AACD;;AACD8B,IAAAA,GAAG,CAACC,EAAJ,CAAO,aAAP,EAAsBC,KAAK,IAAI;AAC7B,UAAIA,KAAK,CAACC,MAAN,CAAaC,EAAb,KAAoBxC,OAAO,CAAC0B,OAAhC,EAAyC;AACvCO,QAAAA,KAAK,GAAG,IAAR;AACAtB,QAAAA,MAAM,CAACkB,MAAP;AACAlB,QAAAA,MAAM,CAACc,OAAP;AACA,eAAOP,OAAO,EAAd;AACD;AACF,KAPD;AAQAkB,IAAAA,GAAG,CAACC,EAAJ,CAAO,KAAP,EAAc,MAAM;AAClB,UAAI,CAACJ,KAAL,EAAY;AACVtB,QAAAA,MAAM,CAACkB,MAAP;AACAlB,QAAAA,MAAM,CAACc,OAAP;AACA,eAAOrB,MAAM,CACX,IAAIP,KAAK,CAACQ,KAAV,CAAgBR,KAAK,CAACQ,KAAN,CAAYC,qBAA5B,EAAmD,yBAAnD,CADW,CAAb;AAGD;AACF,KARD;AASA8B,IAAAA,GAAG,CAACC,EAAJ,CAAO,OAAP,EAAgB,MAAM;AACpB1B,MAAAA,MAAM,CAACkB,MAAP;AACAlB,MAAAA,MAAM,CAACc,OAAP;AACA,aAAOrB,MAAM,CAAC,IAAIP,KAAK,CAACQ,KAAV,CAAgBR,KAAK,CAACQ,KAAN,CAAYC,qBAA5B,EAAmD,0BAAnD,CAAD,CAAb;AACD,KAJD;AAKD,GA5BD;AA6BD;;AAED,SAASmC,aAAT,GAAyB;AACvB,SAAOvC,OAAO,CAACgB,OAAR,EAAP;AACD;;AAEDwB,MAAM,CAACC,OAAP,GAAiB;AACfF,EAAAA,aADe;AAEf3C,EAAAA;AAFe,CAAjB",sourcesContent:["const ldapjs = require('ldapjs');\nconst Parse = require('parse/node').Parse;\n\nfunction validateAuthData(authData, options) {\n  if (!optionsAreValid(options)) {\n    return new Promise((_, reject) => {\n      reject(new Parse.Error(Parse.Error.INTERNAL_SERVER_ERROR, 'LDAP auth configuration missing'));\n    });\n  }\n  const clientOptions = options.url.startsWith('ldaps://')\n    ? { url: options.url, tlsOptions: options.tlsOptions }\n    : { url: options.url };\n\n  const client = ldapjs.createClient(clientOptions);\n  const userCn =\n    typeof options.dn === 'string'\n      ? options.dn.replace('{{id}}', authData.id)\n      : `uid=${authData.id},${options.suffix}`;\n\n  return new Promise((resolve, reject) => {\n    client.bind(userCn, authData.password, ldapError => {\n      delete authData.password;\n      if (ldapError) {\n        let error;\n        switch (ldapError.code) {\n          case 49:\n            error = new Parse.Error(\n              Parse.Error.OBJECT_NOT_FOUND,\n              'LDAP: Wrong username or password'\n            );\n            break;\n          case 'DEPTH_ZERO_SELF_SIGNED_CERT':\n            error = new Parse.Error(Parse.Error.OBJECT_NOT_FOUND, 'LDAPS: Certificate mismatch');\n            break;\n          default:\n            error = new Parse.Error(\n              Parse.Error.OBJECT_NOT_FOUND,\n              'LDAP: Somthing went wrong (' + ldapError.code + ')'\n            );\n        }\n        reject(error);\n        client.destroy(ldapError);\n        return;\n      }\n\n      if (typeof options.groupCn === 'string' && typeof options.groupFilter === 'string') {\n        searchForGroup(client, options, authData.id, resolve, reject);\n      } else {\n        client.unbind();\n        client.destroy();\n        resolve();\n      }\n    });\n  });\n}\n\nfunction optionsAreValid(options) {\n  return (\n    typeof options === 'object' &&\n    typeof options.suffix === 'string' &&\n    typeof options.url === 'string' &&\n    (options.url.startsWith('ldap://') ||\n      (options.url.startsWith('ldaps://') && typeof options.tlsOptions === 'object'))\n  );\n}\n\nfunction searchForGroup(client, options, id, resolve, reject) {\n  const filter = options.groupFilter.replace(/{{id}}/gi, id);\n  const opts = {\n    scope: 'sub',\n    filter: filter,\n  };\n  let found = false;\n  client.search(options.suffix, opts, (searchError, res) => {\n    if (searchError) {\n      client.unbind();\n      client.destroy();\n      return reject(new Parse.Error(Parse.Error.INTERNAL_SERVER_ERROR, 'LDAP group search failed'));\n    }\n    res.on('searchEntry', entry => {\n      if (entry.object.cn === options.groupCn) {\n        found = true;\n        client.unbind();\n        client.destroy();\n        return resolve();\n      }\n    });\n    res.on('end', () => {\n      if (!found) {\n        client.unbind();\n        client.destroy();\n        return reject(\n          new Parse.Error(Parse.Error.INTERNAL_SERVER_ERROR, 'LDAP: User not in group')\n        );\n      }\n    });\n    res.on('error', () => {\n      client.unbind();\n      client.destroy();\n      return reject(new Parse.Error(Parse.Error.INTERNAL_SERVER_ERROR, 'LDAP group search failed'));\n    });\n  });\n}\n\nfunction validateAppId() {\n  return Promise.resolve();\n}\n\nmodule.exports = {\n  validateAppId,\n  validateAuthData,\n};\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ed8ab6c023c99196a5a548d17280a546e5b85961"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_uw2dks631=function(){return actualCoverage;};}return actualCoverage;}cov_uw2dks631();const ldapjs=(cov_uw2dks631().s[0]++,require('ldapjs'));const Parse=(cov_uw2dks631().s[1]++,require('parse/node').Parse);function validateAuthData(authData,options){cov_uw2dks631().f[0]++;cov_uw2dks631().s[2]++;if(!optionsAreValid(options)){cov_uw2dks631().b[0][0]++;cov_uw2dks631().s[3]++;return new Promise((_,reject)=>{cov_uw2dks631().f[1]++;cov_uw2dks631().s[4]++;reject(new Parse.Error(Parse.Error.INTERNAL_SERVER_ERROR,'LDAP auth configuration missing'));});}else{cov_uw2dks631().b[0][1]++;}const clientOptions=(cov_uw2dks631().s[5]++,options.url.startsWith('ldaps://')?(cov_uw2dks631().b[1][0]++,{url:options.url,tlsOptions:options.tlsOptions}):(cov_uw2dks631().b[1][1]++,{url:options.url}));const client=(cov_uw2dks631().s[6]++,ldapjs.createClient(clientOptions));const userCn=(cov_uw2dks631().s[7]++,typeof options.dn==='string'?(cov_uw2dks631().b[2][0]++,options.dn.replace('{{id}}',authData.id)):(cov_uw2dks631().b[2][1]++,`uid=${authData.id},${options.suffix}`));cov_uw2dks631().s[8]++;return new Promise((resolve,reject)=>{cov_uw2dks631().f[2]++;cov_uw2dks631().s[9]++;client.bind(userCn,authData.password,ldapError=>{cov_uw2dks631().f[3]++;cov_uw2dks631().s[10]++;delete authData.password;cov_uw2dks631().s[11]++;if(ldapError){cov_uw2dks631().b[3][0]++;let error;cov_uw2dks631().s[12]++;switch(ldapError.code){case 49:cov_uw2dks631().b[4][0]++;cov_uw2dks631().s[13]++;error=new Parse.Error(Parse.Error.OBJECT_NOT_FOUND,'LDAP: Wrong username or password');cov_uw2dks631().s[14]++;break;case'DEPTH_ZERO_SELF_SIGNED_CERT':cov_uw2dks631().b[4][1]++;cov_uw2dks631().s[15]++;error=new Parse.Error(Parse.Error.OBJECT_NOT_FOUND,'LDAPS: Certificate mismatch');cov_uw2dks631().s[16]++;break;default:cov_uw2dks631().b[4][2]++;cov_uw2dks631().s[17]++;error=new Parse.Error(Parse.Error.OBJECT_NOT_FOUND,'LDAP: Somthing went wrong ('+ldapError.code+')');}cov_uw2dks631().s[18]++;reject(error);cov_uw2dks631().s[19]++;client.destroy(ldapError);cov_uw2dks631().s[20]++;return;}else{cov_uw2dks631().b[3][1]++;}cov_uw2dks631().s[21]++;if((cov_uw2dks631().b[6][0]++,typeof options.groupCn==='string')&&(cov_uw2dks631().b[6][1]++,typeof options.groupFilter==='string')){cov_uw2dks631().b[5][0]++;cov_uw2dks631().s[22]++;searchForGroup(client,options,authData.id,resolve,reject);}else{cov_uw2dks631().b[5][1]++;cov_uw2dks631().s[23]++;client.unbind();cov_uw2dks631().s[24]++;client.destroy();cov_uw2dks631().s[25]++;resolve();}});});}function optionsAreValid(options){cov_uw2dks631().f[4]++;cov_uw2dks631().s[26]++;return(cov_uw2dks631().b[7][0]++,typeof options==='object')&&(cov_uw2dks631().b[7][1]++,typeof options.suffix==='string')&&(cov_uw2dks631().b[7][2]++,typeof options.url==='string')&&((cov_uw2dks631().b[7][3]++,options.url.startsWith('ldap://'))||(cov_uw2dks631().b[7][4]++,options.url.startsWith('ldaps://'))&&(cov_uw2dks631().b[7][5]++,typeof options.tlsOptions==='object'));}function searchForGroup(client,options,id,resolve,reject){cov_uw2dks631().f[5]++;const filter=(cov_uw2dks631().s[27]++,options.groupFilter.replace(/{{id}}/gi,id));const opts=(cov_uw2dks631().s[28]++,{scope:'sub',filter:filter});let found=(cov_uw2dks631().s[29]++,false);cov_uw2dks631().s[30]++;client.search(options.suffix,opts,(searchError,res)=>{cov_uw2dks631().f[6]++;cov_uw2dks631().s[31]++;if(searchError){cov_uw2dks631().b[8][0]++;cov_uw2dks631().s[32]++;client.unbind();cov_uw2dks631().s[33]++;client.destroy();cov_uw2dks631().s[34]++;return reject(new Parse.Error(Parse.Error.INTERNAL_SERVER_ERROR,'LDAP group search failed'));}else{cov_uw2dks631().b[8][1]++;}cov_uw2dks631().s[35]++;res.on('searchEntry',entry=>{cov_uw2dks631().f[7]++;cov_uw2dks631().s[36]++;if(entry.object.cn===options.groupCn){cov_uw2dks631().b[9][0]++;cov_uw2dks631().s[37]++;found=true;cov_uw2dks631().s[38]++;client.unbind();cov_uw2dks631().s[39]++;client.destroy();cov_uw2dks631().s[40]++;return resolve();}else{cov_uw2dks631().b[9][1]++;}});cov_uw2dks631().s[41]++;res.on('end',()=>{cov_uw2dks631().f[8]++;cov_uw2dks631().s[42]++;if(!found){cov_uw2dks631().b[10][0]++;cov_uw2dks631().s[43]++;client.unbind();cov_uw2dks631().s[44]++;client.destroy();cov_uw2dks631().s[45]++;return reject(new Parse.Error(Parse.Error.INTERNAL_SERVER_ERROR,'LDAP: User not in group'));}else{cov_uw2dks631().b[10][1]++;}});cov_uw2dks631().s[46]++;res.on('error',()=>{cov_uw2dks631().f[9]++;cov_uw2dks631().s[47]++;client.unbind();cov_uw2dks631().s[48]++;client.destroy();cov_uw2dks631().s[49]++;return reject(new Parse.Error(Parse.Error.INTERNAL_SERVER_ERROR,'LDAP group search failed'));});});}function validateAppId(){cov_uw2dks631().f[10]++;cov_uw2dks631().s[50]++;return Promise.resolve();}cov_uw2dks631().s[51]++;module.exports={validateAppId,validateAuthData};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9BdXRoL2xkYXAuanMiXSwibmFtZXMiOlsibGRhcGpzIiwicmVxdWlyZSIsIlBhcnNlIiwidmFsaWRhdGVBdXRoRGF0YSIsImF1dGhEYXRhIiwib3B0aW9ucyIsIm9wdGlvbnNBcmVWYWxpZCIsIlByb21pc2UiLCJfIiwicmVqZWN0IiwiRXJyb3IiLCJJTlRFUk5BTF9TRVJWRVJfRVJST1IiLCJjbGllbnRPcHRpb25zIiwidXJsIiwic3RhcnRzV2l0aCIsInRsc09wdGlvbnMiLCJjbGllbnQiLCJjcmVhdGVDbGllbnQiLCJ1c2VyQ24iLCJkbiIsInJlcGxhY2UiLCJpZCIsInN1ZmZpeCIsInJlc29sdmUiLCJiaW5kIiwicGFzc3dvcmQiLCJsZGFwRXJyb3IiLCJlcnJvciIsImNvZGUiLCJPQkpFQ1RfTk9UX0ZPVU5EIiwiZGVzdHJveSIsImdyb3VwQ24iLCJncm91cEZpbHRlciIsInNlYXJjaEZvckdyb3VwIiwidW5iaW5kIiwiZmlsdGVyIiwib3B0cyIsInNjb3BlIiwiZm91bmQiLCJzZWFyY2giLCJzZWFyY2hFcnJvciIsInJlcyIsIm9uIiwiZW50cnkiLCJvYmplY3QiLCJjbiIsInZhbGlkYXRlQXBwSWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFFBQUQsQ0FBdEI7O0FBQ0EsTUFBTUMsS0FBSyxHQUFHRCxPQUFPLENBQUMsWUFBRCxDQUFQLENBQXNCQyxLQUFwQzs7QUFFQSxTQUFTQyxnQkFBVCxDQUEwQkMsUUFBMUIsRUFBb0NDLE9BQXBDLEVBQTZDO0FBQzNDLE1BQUksQ0FBQ0MsZUFBZSxDQUFDRCxPQUFELENBQXBCLEVBQStCO0FBQzdCLFdBQU8sSUFBSUUsT0FBSixDQUFZLENBQUNDLENBQUQsRUFBSUMsTUFBSixLQUFlO0FBQ2hDQSxNQUFBQSxNQUFNLENBQUMsSUFBSVAsS0FBSyxDQUFDUSxLQUFWLENBQWdCUixLQUFLLENB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TTtBQUNsQixVQUFJLENBQUNKLEtBQUwsRUFBWTtBQUNWdEIsUUFBQUEsTUFBTSxDQUFDa0IsTUFBUDtBQUNBbEIsUUFBQUEsTUFBTSxDQUFDYyxPQUFQO0FBQ0EsZUFBT3JCLE1BQU0sQ0FDWCxJQUFJUCxLQUFLLENBQUNRLEtBQVYsQ0FBZ0JSLEtBQUssQ0FBQ1EsS0FBTixDQUFZQyxxQkFBNUIsRUFBbUQseUJBQW5ELENBRFcsQ0FBYjtBQUdEO0FBQ0YsS0FSRDtBQVNBOEIsSUFBQUEsR0FBRyxDQUFDQyxFQUFKLENBQU8sT0FBUCxFQUFnQixNQUFNO0FBQ3BCMUIsTUFBQUEsTUFBTSxDQUFDa0IsTUFBUDtBQUNBbEIsTUFBQUEsTUFBTSxDQUFDYyxPQUFQO0FBQ0EsYUFBT3JCLE1BQU0sQ0FBQyxJQUFJUCxLQUFLLENBQUNRLEtBQVYsQ0FBZ0JSLEtBQUssQ0FBQ1EsS0FBTixDQUFZQyxxQkFBNUIsRUFBbUQsMEJBQW5ELENBQUQsQ0FBYjtBQUNELEtBSkQ7QUFLRCxHQTVCRDtBQTZCRDs7QUFFRCxTQUFTbUMsYUFBVCxHQUF5QjtBQUN2QixTQUFPdkMsT0FBTyxDQUFDZ0IsT0FBUixFQUFQO0FBQ0Q7O0FBRUR3QixNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDZkYsRUFBQUEsYUFEZTtBQUVmM0MsRUFBQUE7QUFGZSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGxkYXBqcyA9IHJlcXVpcmUoJ2xkYXBqcycpO1xuY29uc3QgUGFyc2UgPSByZXF1aXJlKCdwYXJzZS9ub2RlJykuUGFyc2U7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlQXV0aERhdGEoYXV0aERhdGEsIG9wdGlvbnMpIHtcbiAgaWYgKCFvcHRpb25zQXJlVmFsaWQob3B0aW9ucykpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgICAgcmVqZWN0KG5ldyBQYXJzZS5FcnJvcihQYXJzZS5FcnJvci5JTlRFUk5BTF9TRVJWRVJfRVJST1IsICdMREFQIGF1dGggY29uZmlndXJhdGlvbiBtaXNzaW5nJykpO1xuICAgIH0pO1xuICB9XG4gIGNvbnN0IGNsaWVudE9wdGlvbnMgPSBvcHRpb25zLnVybC5zdGFydHNXaXRoKCdsZGFwczovLycpXG4gICAgPyB7IHVybDogb3B0aW9ucy51cmwsIHRsc09wdGlvbnM6IG9wdGlvbnMudGxzT3B0aW9ucyB9XG4gICAgOiB7IHVybDogb3B0aW9ucy51cmwgfTtcblxuICBjb25zdCBjbGllbnQgPSBsZGFwanMuY3JlYXRlQ2xpZW50KGNsaWVudE9wdGlvbnMpO1xuICBjb25zdCB1c2VyQ24gPVxuICAgIHR5cGVvZiBvcHRpb25zLmRuID09PSAnc3RyaW5nJ1xuICAgICAgPyBvcHRpb25zLmRuLnJlcGxhY2UoJ3t7aWR9fScsIGF1dGhEYXRhLmlkKVxuICAgICAgOiBgdWlkPSR7YXV0aERhdGEuaWR9LCR7b3B0aW9ucy5zdWZmaXh9YDtcblxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNsaWVudC5iaW5kKHVzZXJDbiwgYXV0aERhdGEucGFzc3dvcmQsIGxkYXBFcnJvciA9PiB7XG4gICAgICBkZWxldGUgYXV0aERhdGEucGFzc3dvcmQ7XG4gICAgICBpZiAobGRhcEVycm9yKSB7XG4gICAgICAgIGxldCBlcnJvcjtcbiAgICAgICAgc3dpdGNoIChsZGFwRXJyb3IuY29kZSkge1xuICAgICAgICAgIGNhc2UgNDk6XG4gICAgICAgICAgICBlcnJvciA9IG5ldyBQYXJzZS5FcnJvcihcbiAgICAgICAgICAgICAgUGFyc2UuRXJyb3IuT0JKRUNUX05PVF9GT1VORCxcbiAgICAgICAgICAgICAgJ0xEQVA6IFdyb25nIHVzZXJuYW1lIG9yIHBhc3N3b3JkJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ0RFUFRIX1pFUk9fU0VMRl9TSUdORURfQ0VSVCc6XG4gICAgICAgICAgICBlcnJvciA9IG5ldyBQYXJzZS5FcnJvcihQYXJzZS5FcnJvci5PQkpFQ1RfTk9UX0ZPVU5ELCAnTERBUFM6IENlcnRpZmljYXRlIG1pc21hdGNoJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgZXJyb3IgPSBuZXcgUGFyc2UuRXJyb3IoXG4gICAgICAgICAgICAgIFBhcnNlLkVycm9yLk9CSkVDVF9OT1RfRk9VTkQsXG4gICAgICAgICAgICAgICdMREFQOiBTb210aGluZyB3ZW50IHdyb25nICgnICsgbGRhcEVycm9yLmNvZGUgKyAnKSdcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgY2xpZW50LmRlc3Ryb3kobGRhcEVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMuZ3JvdXBDbiA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIG9wdGlvbnMuZ3JvdXBGaWx0ZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNlYXJjaEZvckdyb3VwKGNsaWVudCwgb3B0aW9ucywgYXV0aERhdGEuaWQsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGllbnQudW5iaW5kKCk7XG4gICAgICAgIGNsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG9wdGlvbnNBcmVWYWxpZChvcHRpb25zKSB7XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmXG4gICAgdHlwZW9mIG9wdGlvbnMuc3VmZml4ID09PSAnc3RyaW5nJyAmJlxuICAgIHR5cGVvZiBvcHRpb25zLnVybCA9PT0gJ3N0cmluZycgJiZcbiAgICAob3B0aW9ucy51cmwuc3RhcnRzV2l0aCgnbGRhcDovLycpIHx8XG4gICAgICAob3B0aW9ucy51cmwuc3RhcnRzV2l0aCgnbGRhcHM6Ly8nKSAmJiB0eXBlb2Ygb3B0aW9ucy50bHNPcHRpb25zID09PSAnb2JqZWN0JykpXG4gICk7XG59XG5cbmZ1bmN0aW9uIHNlYXJjaEZvckdyb3VwKGNsaWVudCwgb3B0aW9ucywgaWQsIHJlc29sdmUsIHJlamVjdCkge1xuICBjb25zdCBmaWx0ZXIgPSBvcHRpb25zLmdyb3VwRmlsdGVyLnJlcGxhY2UoL3t7aWR9fS9naSwgaWQpO1xuICBjb25zdCBvcHRzID0ge1xuICAgIHNjb3BlOiAnc3ViJyxcbiAgICBmaWx0ZXI6IGZpbHRlcixcbiAgfTtcbiAgbGV0IGZvdW5kID0gZmFsc2U7XG4gIGNsaWVudC5zZWFyY2gob3B0aW9ucy5zdWZmaXgsIG9wdHMsIChzZWFyY2hFcnJvciwgcmVzKSA9PiB7XG4gICAgaWYgKHNlYXJjaEVycm9yKSB7XG4gICAgICBjbGllbnQudW5iaW5kKCk7XG4gICAgICBjbGllbnQuZGVzdHJveSgpO1xuICAgICAgcmV0dXJuIHJlamVjdChuZXcgUGFyc2UuRXJyb3IoUGFyc2UuRXJyb3IuSU5URVJOQUxfU0VSVkVSX0VSUk9SLCAnTERBUCBncm91cCBzZWFyY2ggZmFpbGVkJykpO1xuICAgIH1cbiAgICByZXMub24oJ3NlYXJjaEVudHJ5JywgZW50cnkgPT4ge1xuICAgICAgaWYgKGVudHJ5Lm9iamVjdC5jbiA9PT0gb3B0aW9ucy5ncm91cENuKSB7XG4gICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgY2xpZW50LnVuYmluZCgpO1xuICAgICAgICBjbGllbnQuZGVzdHJveSgpO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJlcy5vbignZW5kJywgKCkgPT4ge1xuICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICBjbGllbnQudW5iaW5kKCk7XG4gICAgICAgIGNsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIHJldHVybiByZWplY3QoXG4gICAgICAgICAgbmV3IFBhcnNlLkVycm9yKFBhcnNlLkVycm9yLklOVEVSTkFMX1NFUlZFUl9FUlJPUiwgJ0xEQVA6IFVzZXIgbm90IGluIGdyb3VwJylcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXMub24oJ2Vycm9yJywgKCkgPT4ge1xuICAgICAgY2xpZW50LnVuYmluZCgpO1xuICAgICAgY2xpZW50LmRlc3Ryb3koKTtcbiAgICAgIHJldHVybiByZWplY3QobmV3IFBhcnNlLkVycm9yKFBhcnNlLkVycm9yLklOVEVSTkFMX1NFUlZFUl9FUlJPUiwgJ0xEQVAgZ3JvdXAgc2VhcmNoIGZhaWxlZCcpKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlQXBwSWQoKSB7XG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHZhbGlkYXRlQXBwSWQsXG4gIHZhbGlkYXRlQXV0aERhdGEsXG59O1xuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9BdXRoL2xkYXAuanMiXSwibmFtZXMiOlsibGRhcGpzIiwicmVxdWlyZSIsIlBhcnNlIiwib3B0aW9uc0FyZVZhbGlkIiwicmVqZWN0IiwiY2xpZW50T3B0aW9ucyIsInVybCIsIm9wdGlvbnMiLCJ0bHNPcHRpb25zIiwiY2xpZW50IiwidXNlckNuIiwiYXV0aERhdGEiLCJpZCIsInN1ZmZpeCIsImxkYXBFcnJvciIsImVycm9yIiwic2VhcmNoRm9yR3JvdXAiLCJyZXNvbHZlIiwiZmlsdGVyIiwib3B0cyIsInNjb3BlIiwiZm91bmQiLCJyZXMiLCJlbnRyeSIsIlByb21pc2UiLCJtb2R1bGUiLCJ2YWxpZGF0ZUF1dGhEYXRhIl0sIm1hcHBpbmdzIjoib3hlQVUwQlE7eUZBVjFCLEtBQU1SLENBQUFBLE1BQU0seUJBQUdDLE9BQU8sQ0FBdEIsUUFBc0IsQ0FBVixDQUFaLENBQ0EsS0FBTUMsQ0FBQUEsS0FBSyx5QkFBR0QsT0FBTyxDQUFQQSxZQUFPLENBQVBBLENBQWQsS0FBVyxDQUFYLENBRUEsUUFBQSxDQUFBLGdCQUFBLENBQUEsUUFBQSxDQUFBLE9BQUEsQ0FBNkMsK0NBQzNDLEdBQUksQ0FBQ0UsZUFBZSxDQUFwQixPQUFvQixDQUFwQixDQUErQixrREFDN0IsTUFBTyxJQUFBLENBQUEsT0FBQSxDQUFZLENBQUEsQ0FBQSxDQUFBLE1BQUEsR0FBZSwrQ0FDaENDLE1BQU0sQ0FBQyxHQUFJRixDQUFBQSxLQUFLLENBQVQsS0FBQSxDQUFnQkEsS0FBSyxDQUFMQSxLQUFBQSxDQUFoQixxQkFBQSxDQUFQRSxpQ0FBTyxDQUFELENBQU5BLENBREYsQ0FBTyxDQUFQLENBR0QsQ0FKRCxnQ0FLQSxLQUFNQyxDQUFBQSxhQUFhLHlCQUFHLE9BQU8sQ0FBUCxHQUFBLENBQUEsVUFBQSxDQUFBLFVBQUEsNkJBQ2xCLENBQUVDLEdBQUcsQ0FBRUMsT0FBTyxDQUFkLEdBQUEsQ0FBb0JDLFVBQVUsQ0FBRUQsT0FBTyxDQUFD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Q0FBTkEsTUFBQUEsR0FEVSx3QkFFVkEsTUFBTSxDQUFOQSxPQUFBQSxHQUZVLHdCQUdWLE1BQU9MLENBQUFBLE1BQU0sQ0FDWCxHQUFJRixDQUFBQSxLQUFLLENBQVQsS0FBQSxDQUFnQkEsS0FBSyxDQUFMQSxLQUFBQSxDQUFoQixxQkFBQSxDQURGLHlCQUNFLENBRFcsQ0FBYixDQUdELENBTkQsaUNBREZvQixDQUFBQSxFQWR3RCx3QkF1QnhEQSxHQUFHLENBQUhBLEVBQUFBLENBQUFBLE9BQUFBLENBQWdCLElBQU0sZ0RBQ3BCYixNQUFNLENBQU5BLE1BQUFBLEdBRG9CLHdCQUVwQkEsTUFBTSxDQUFOQSxPQUFBQSxHQUZvQix3QkFHcEIsTUFBT0wsQ0FBQUEsTUFBTSxDQUFDLEdBQUlGLENBQUFBLEtBQUssQ0FBVCxLQUFBLENBQWdCQSxLQUFLLENBQUxBLEtBQUFBLENBQWhCLHFCQUFBLENBQWQsMEJBQWMsQ0FBRCxDQUFiLENBSEZvQixDQUFBQSxFQXZCRmIsQ0FBQUEsRUE2QkQsQ0FFRCxRQUFBLENBQUEsYUFBQSxFQUF5QixpREFDdkIsTUFBT2UsQ0FBQUEsT0FBTyxDQUFkLE9BQU9BLEVBQVAsQ0FDRCxDLHdCQUVEQyxNQUFNLENBQU5BLE9BQUFBLENBQWlCLENBQUEsYUFBQSxDQUVmQyxnQkFGZSxDQUFqQkQsQyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGxkYXBqcyA9IHJlcXVpcmUoJ2xkYXBqcycpO1xuY29uc3QgUGFyc2UgPSByZXF1aXJlKCdwYXJzZS9ub2RlJykuUGFyc2U7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlQXV0aERhdGEoYXV0aERhdGEsIG9wdGlvbnMpIHtcbiAgaWYgKCFvcHRpb25zQXJlVmFsaWQob3B0aW9ucykpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgICAgcmVqZWN0KG5ldyBQYXJzZS5FcnJvcihQYXJzZS5FcnJvci5JTlRFUk5BTF9TRVJWRVJfRVJST1IsICdMREFQIGF1dGggY29uZmlndXJhdGlvbiBtaXNzaW5nJykpO1xuICAgIH0pO1xuICB9XG4gIGNvbnN0IGNsaWVudE9wdGlvbnMgPSBvcHRpb25zLnVybC5zdGFydHNXaXRoKCdsZGFwczovLycpXG4gICAgPyB7IHVybDogb3B0aW9ucy51cmwsIHRsc09wdGlvbnM6IG9wdGlvbnMudGxzT3B0aW9ucyB9XG4gICAgOiB7IHVybDogb3B0aW9ucy51cmwgfTtcblxuICBjb25zdCBjbGllbnQgPSBsZGFwanMuY3JlYXRlQ2xpZW50KGNsaWVudE9wdGlvbnMpO1xuICBjb25zdCB1c2VyQ24gPVxuICAgIHR5cGVvZiBvcHRpb25zLmRuID09PSAnc3RyaW5nJ1xuICAgICAgPyBvcHRpb25zLmRuLnJlcGxhY2UoJ3t7aWR9fScsIGF1dGhEYXRhLmlkKVxuICAgICAgOiBgdWlkPSR7YXV0aERhdGEuaWR9LCR7b3B0aW9ucy5zdWZmaXh9YDtcblxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNsaWVudC5iaW5kKHVzZXJDbiwgYXV0aERhdGEucGFzc3dvcmQsIGxkYXBFcnJvciA9PiB7XG4gICAgICBkZWxldGUgYXV0aERhdGEucGFzc3dvcmQ7XG4gICAgICBpZiAobGRhcEVycm9yKSB7XG4gICAgICAgIGxldCBlcnJvcjtcbiAgICAgICAgc3dpdGNoIChsZGFwRXJyb3IuY29kZSkge1xuICAgICAgICAgIGNhc2UgNDk6XG4gICAgICAgICAgICBlcnJvciA9IG5ldyBQYXJzZS5FcnJvcihcbiAgICAgICAgICAgICAgUGFyc2UuRXJyb3IuT0JKRUNUX05PVF9GT1VORCxcbiAgICAgICAgICAgICAgJ0xEQVA6IFdyb25nIHVzZXJuYW1lIG9yIHBhc3N3b3JkJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ0RFUFRIX1pFUk9fU0VMRl9TSUdORURfQ0VSVCc6XG4gICAgICAgICAgICBlcnJvciA9IG5ldyBQYXJzZS5FcnJvcihQYXJzZS5FcnJvci5PQkpFQ1RfTk9UX0ZPVU5ELCAnTERBUFM6IENlcnRpZmljYXRlIG1pc21hdGNoJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgZXJyb3IgPSBuZXcgUGFyc2UuRXJyb3IoXG4gICAgICAgICAgICAgIFBhcnNlLkVycm9yLk9CSkVDVF9OT1RfRk9VTkQsXG4gICAgICAgICAgICAgICdMREFQOiBTb210aGluZyB3ZW50IHdyb25nICgnICsgbGRhcEVycm9yLmNvZGUgKyAnKSdcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgY2xpZW50LmRlc3Ryb3kobGRhcEVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMuZ3JvdXBDbiA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIG9wdGlvbnMuZ3JvdXBGaWx0ZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNlYXJjaEZvckdyb3VwKGNsaWVudCwgb3B0aW9ucywgYXV0aERhdGEuaWQsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGllbnQudW5iaW5kKCk7XG4gICAgICAgIGNsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG9wdGlvbnNBcmVWYWxpZChvcHRpb25zKSB7XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmXG4gICAgdHlwZW9mIG9wdGlvbnMuc3VmZml4ID09PSAnc3RyaW5nJyAmJlxuICAgIHR5cGVvZiBvcHRpb25zLnVybCA9PT0gJ3N0cmluZycgJiZcbiAgICAob3B0aW9ucy51cmwuc3RhcnRzV2l0aCgnbGRhcDovLycpIHx8XG4gICAgICAob3B0aW9ucy51cmwuc3RhcnRzV2l0aCgnbGRhcHM6Ly8nKSAmJiB0eXBlb2Ygb3B0aW9ucy50bHNPcHRpb25zID09PSAnb2JqZWN0JykpXG4gICk7XG59XG5cbmZ1bmN0aW9uIHNlYXJjaEZvckdyb3VwKGNsaWVudCwgb3B0aW9ucywgaWQsIHJlc29sdmUsIHJlamVjdCkge1xuICBjb25zdCBmaWx0ZXIgPSBvcHRpb25zLmdyb3VwRmlsdGVyLnJlcGxhY2UoL3t7aWR9fS9naSwgaWQpO1xuICBjb25zdCBvcHRzID0ge1xuICAgIHNjb3BlOiAnc3ViJyxcbiAgICBmaWx0ZXI6IGZpbHRlcixcbiAgfTtcbiAgbGV0IGZvdW5kID0gZmFsc2U7XG4gIGNsaWVudC5zZWFyY2gob3B0aW9ucy5zdWZmaXgsIG9wdHMsIChzZWFyY2hFcnJvciwgcmVzKSA9PiB7XG4gICAgaWYgKHNlYXJjaEVycm9yKSB7XG4gICAgICBjbGllbnQudW5iaW5kKCk7XG4gICAgICBjbGllbnQuZGVzdHJveSgpO1xuICAgICAgcmV0dXJuIHJlamVjdChuZXcgUGFyc2UuRXJyb3IoUGFyc2UuRXJyb3IuSU5URVJOQUxfU0VSVkVSX0VSUk9SLCAnTERBUCBncm91cCBzZWFyY2ggZmFpbGVkJykpO1xuICAgIH1cbiAgICByZXMub24oJ3NlYXJjaEVudHJ5JywgZW50cnkgPT4ge1xuICAgICAgaWYgKGVudHJ5Lm9iamVjdC5jbiA9PT0gb3B0aW9ucy5ncm91cENuKSB7XG4gICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgY2xpZW50LnVuYmluZCgpO1xuICAgICAgICBjbGllbnQuZGVzdHJveSgpO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJlcy5vbignZW5kJywgKCkgPT4ge1xuICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICBjbGllbnQudW5iaW5kKCk7XG4gICAgICAgIGNsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIHJldHVybiByZWplY3QoXG4gICAgICAgICAgbmV3IFBhcnNlLkVycm9yKFBhcnNlLkVycm9yLklOVEVSTkFMX1NFUlZFUl9FUlJPUiwgJ0xEQVA6IFVzZXIgbm90IGluIGdyb3VwJylcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXMub24oJ2Vycm9yJywgKCkgPT4ge1xuICAgICAgY2xpZW50LnVuYmluZCgpO1xuICAgICAgY2xpZW50LmRlc3Ryb3koKTtcbiAgICAgIHJldHVybiByZWplY3QobmV3IFBhcnNlLkVycm9yKFBhcnNlLkVycm9yLklOVEVSTkFMX1NFUlZFUl9FUlJPUiwgJ0xEQVAgZ3JvdXAgc2VhcmNoIGZhaWxlZCcpKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlQXBwSWQoKSB7XG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHZhbGlkYXRlQXBwSWQsXG4gIHZhbGlkYXRlQXV0aERhdGEsXG59O1xuIl19