"use strict";function cov_2qjhg2u0oy(){var path="/parse-server/lib/ParseServerRESTController.js";var hash="29d7babd402ba7b3b55679334c2f406f6afcde94";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/ParseServerRESTController.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:62}},"2":{start:{line:7,column:0},end:{line:7,column:25}},"3":{start:{line:9,column:54},end:{line:9,column:73}},"4":{start:{line:9,column:75},end:{line:9,column:330}},"5":{start:{line:9,column:125},end:{line:9,column:161}},"6":{start:{line:9,column:163},end:{line:9,column:296}},"7":{start:{line:9,column:185},end:{line:9,column:294}},"8":{start:{line:9,column:227},end:{line:9,column:290}},"9":{start:{line:9,column:297},end:{line:9,column:328}},"10":{start:{line:9,column:331},end:{line:9,column:343}},"11":{start:{line:11,column:33},end:{line:11,column:517}},"12":{start:{line:11,column:46},end:{line:11,column:47}},"13":{start:{line:11,column:91},end:{line:11,column:131}},"14":{start:{line:11,column:133},end:{line:11,column:515}},"15":{start:{line:11,column:146},end:{line:11,column:247}},"16":{start:{line:11,column:201},end:{line:11,column:243}},"17":{start:{line:11,column:255},end:{line:11,column:515}},"18":{start:{line:11,column:295},end:{line:11,column:369}},"19":{start:{line:11,column:379},end:{line:11,column:513}},"20":{start:{line:11,column:428},end:{line:11,column:509}},"21":{start:{line:11,column:518},end:{line:11,column:532}},"22":{start:{line:13,column:44},end:{line:13,column:195}},"23":{start:{line:13,column:62},end:{line:13,column:166}},"24":{start:{line:13,column:176},end:{line:13,column:193}},"25":{start:{line:13,column:196},end:{line:13,column:207}},"26":{start:{line:15,column:15},end:{line:15,column:34}},"27":{start:{line:17,column:13},end:{line:17,column:30}},"28":{start:{line:19,column:23},end:{line:19,column:63}},"29":{start:{line:21,column:12},end:{line:21,column:26}},"30":{start:{line:23,column:14},end:{line:23,column:35}},"31":{start:{line:26,column:2},end:{line:28,column:3}},"32":{start:{line:27,column:4},end:{line:27,column:49}},"33":{start:{line:30,column:2},end:{line:30,column:31}},"34":{start:{line:34,column:25},end:{line:34,column:58}},"35":{start:{line:36,column:2},end:{line:42,column:3}},"36":{start:{line:37,column:4},end:{line:41,column:8}},"37":{start:{line:44,column:2},end:{line:58,column:5}},"38":{start:{line:45,column:4},end:{line:57,column:5}},"39":{start:{line:46,column:6},end:{line:46,column:42}},"40":{start:{line:47,column:6},end:{line:51,column:9}},"41":{start:{line:53,column:6},end:{line:56,column:10}},"42":{start:{line:64,column:17},end:{line:64,column:26}},"43":{start:{line:66,column:4},end:{line:68,column:5}},"44":{start:{line:67,column:6},end:{line:67,column:41}},"45":{start:{line:70,column:22},end:{line:70,column:49}},"46":{start:{line:72,column:4},end:{line:74,column:5}},"47":{start:{line:73,column:6},end:{line:73,column:60}},"48":{start:{line:76,column:4},end:{line:78,column:5}},"49":{start:{line:77,column:6},end:{line:77,column:24}},"50":{start:{line:80,column:4},end:{line:137,column:5}},"51":{start:{line:81,column:20},end:{line:134,column:7}},"52":{start:{line:82,column:29},end:{line:82,column:46}},"53":{start:{line:84,column:8},end:{line:86,column:9}},"54":{start:{line:85,column:10},end:{line:85,column:72}},"55":{start:{line:88,column:8},end:{line:133,column:11}},"56":{start:{line:89,column:27},end:{line:111,column:12}},"57":{start:{line:90,column:12},end:{line:110,column:15}},"58":{start:{line:91,column:14},end:{line:98,column:15}},"59":{start:{line:92,column:31},end:{line:92,column:47}},"60":{start:{line:93,column:16},end:{line:93,column:40}},"61":{start:{line:94,column:16},end:{line:97,column:18}},"62":{start:{line:100,column:14},end:{line:102,column:16}},"63":{start:{line:104,column:14},end:{line:109,column:16}},"64":{start:{line:112,column:10},end:{line:132,column:13}},"65":{start:{line:113,column:12},end:{line:125,column:13}},"66":{start:{line:114,column:14},end:{line:122,column:15}},"67":{start:{line:114,column:44},end:{line:114,column:80}},"68":{start:{line:115,column:16},end:{line:117,column:19}},"69":{start:{line:116,column:18},end:{line:116,column:48}},"70":{start:{line:119,column:16},end:{line:121,column:19}},"71":{start:{line:120,column:18},end:{line:120,column:32}},"72":{start:{line:124,column:14},end:{line:124,column:28}},"73":{start:{line:127,column:12},end:{line:129,column:13}},"74":{start:{line:127,column:49},end:{line:127,column:116}},"75":{start:{line:128,column:14},end:{line:128,column:51}},"76":{start:{line:131,column:12},end:{line:131,column:24}},"77":{start:{line:136,column:6},end:{line:136,column:22}},"78":{start:{line:141,column:4},end:{line:143,column:5}},"79":{start:{line:142,column:6},end:{line:142,column:19}},"80":{start:{line:145,column:4},end:{line:182,column:7}},"81":{start:{line:146,column:6},end:{line:181,column:17}},"82":{start:{line:147,column:24},end:{line:158,column:9}},"83":{start:{line:159,column:8},end:{line:180,column:11}},"84":{start:{line:160,column:10},end:{line:160,column:63}},"85":{start:{line:165,column:14},end:{line:165,column:18}},"86":{start:{line:167,column:10},end:{line:173,column:11}},"87":{start:{line:168,column:12},end:{line:170,column:16}},"88":{start:{line:172,column:12},end:{line:172,column:30}},"89":{start:{line:175,column:10},end:{line:179,column:11}},"90":{start:{line:176,column:12},end:{line:176,column:75}},"91":{start:{line:178,column:12},end:{line:178,column:24}},"92":{start:{line:185,column:2},end:{line:189,column:4}},"93":{start:{line:192,column:15},end:{line:192,column:40}},"94":{start:{line:193,column:0},end:{line:193,column:27}}},fnMap:{"0":{name:"ownKeys",decl:{start:{line:9,column:9},end:{line:9,column:16}},loc:{start:{line:9,column:41},end:{line:9,column:345}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:210},end:{line:9,column:211}},loc:{start:{line:9,column:225},end:{line:9,column:292}},line:9},"2":{name:"_objectSpread",decl:{start:{line:11,column:9},end:{line:11,column:22}},loc:{start:{line:11,column:31},end:{line:11,column:534}},line:11},"3":{name:"(anonymous_3)",decl:{start:{line:11,column:184},end:{line:11,column:185}},loc:{start:{line:11,column:199},end:{line:11,column:245}},line:11},"4":{name:"(anonymous_4)",decl:{start:{line:11,column:411},end:{line:11,column:412}},loc:{start:{line:11,column:426},end:{line:11,column:511}},line:11},"5":{name:"_defineProperty",decl:{start:{line:13,column:9},end:{line:13,column:24}},loc:{start:{line:13,column:42},end:{line:13,column:209}},line:13},"6":{name:"getSessionToken",decl:{start:{line:25,column:9},end:{line:25,column:24}},loc:{start:{line:25,column:34},end:{line:31,column:1}},line:25},"7":{name:"getAuth",decl:{start:{line:33,column:9},end:{line:33,column:16}},loc:{start:{line:33,column:39},end:{line:59,column:1}},line:33},"8":{name:"(anonymous_8)",decl:{start:{line:44,column:39},end:{line:44,column:40}},loc:{start:{line:44,column:55},end:{line:58,column:3}},line:44},"9":{name:"ParseServerRESTController",decl:{start:{line:61,column:9},end:{line:61,column:34}},loc:{start:{line:61,column:58},end:{line:190,column:1}},line:61},"10":{name:"handleRequest",decl:{start:{line:62,column:11},end:{line:62,column:24}},loc:{start:{line:62,column:72},end:{line:183,column:3}},line:62},"11":{name:"(anonymous_11)",decl:{start:{line:81,column:20},end:{line:81,column:21}},loc:{start:{line:81,column:42},end:{line:134,column:7}},line:81},"12":{name:"(anonymous_12)",decl:{start:{line:88,column:35},end:{line:88,column:36}},loc:{start:{line:88,column:41},end:{line:133,column:9}},line:88},"13":{name:"(anonymous_13)",decl:{start:{line:89,column:45},end:{line:89,column:46}},loc:{start:{line:89,column:56},end:{line:111,column:11}},line:89},"14":{name:"(anonymous_14)",decl:{start:{line:90,column:99},end:{line:90,column:100}},loc:{start:{line:90,column:111},end:{line:103,column:13}},line:90},"15":{name:"(anonymous_15)",decl:{start:{line:103,column:15},end:{line:103,column:16}},loc:{start:{line:103,column:24},end:{line:110,column:13}},line:103},"16":{name:"(anonymous_16)",decl:{start:{line:112,column:44},end:{line:112,column:45}},loc:{start:{line:112,column:54},end:{line:126,column:11}},line:112},"17":{name:"(anonymous_17)",decl:{start:{line:114,column:30},end:{line:114,column:31}},loc:{start:{line:114,column:44},end:{line:114,column:80}},line:114},"18":{name:"(anonymous_18)",decl:{start:{line:115,column:72},end:{line:115,column:73}},loc:{start:{line:115,column:78},end:{line:117,column:17}},line:115},"19":{name:"(anonymous_19)",decl:{start:{line:119,column:73},end:{line:119,column:74}},loc:{start:{line:119,column:79},end:{line:121,column:17}},line:119},"20":{name:"(anonymous_20)",decl:{start:{line:126,column:19},end:{line:126,column:20}},loc:{start:{line:126,column:28},end:{line:132,column:11}},line:126},"21":{name:"(anonymous_21)",decl:{start:{line:127,column:36},end:{line:127,column:37}},loc:{start:{line:127,column:49},end:{line:127,column:116}},line:127},"22":{name:"(anonymous_22)",decl:{start:{line:145,column:23},end:{line:145,column:24}},loc:{start:{line:145,column:44},end:{line:182,column:5}},line:145},"23":{name:"(anonymous_23)",decl:{start:{line:146,column:36},end:{line:146,column:37}},loc:{start:{line:146,column:44},end:{line:181,column:7}},line:146},"24":{name:"(anonymous_24)",decl:{start:{line:159,column:38},end:{line:159,column:39}},loc:{start:{line:159,column:44},end:{line:161,column:9}},line:159},"25":{name:"(anonymous_25)",decl:{start:{line:161,column:16},end:{line:161,column:17}},loc:{start:{line:161,column:24},end:{line:174,column:9}},line:161},"26":{name:"(anonymous_26)",decl:{start:{line:174,column:11},end:{line:174,column:12}},loc:{start:{line:174,column:18},end:{line:180,column:9}},line:174}},branchMap:{"0":{loc:{start:{line:9,column:75},end:{line:9,column:330}},type:"if",locations:[{start:{line:9,column:75},end:{line:9,column:330}},{start:{line:9,column:75},end:{line:9,column:330}}],line:9},"1":{loc:{start:{line:9,column:163},end:{line:9,column:296}},type:"if",locations:[{start:{line:9,column:163},end:{line:9,column:296}},{start:{line:9,column:163},end:{line:9,column:296}}],line:9},"2":{loc:{start:{line:11,column:91},end:{line:11,column:131}},type:"cond-expr",locations:[{start:{line:11,column:114},end:{line:11,column:126}},{start:{line:11,column:129},end:{line:11,column:131}}],line:11},"3":{loc:{start:{line:11,column:133},end:{line:11,column:515}},type:"if",locations:[{start:{line:11,column:133},end:{line:11,column:515}},{start:{line:11,column:133},end:{line:11,column:515}}],line:11},"4":{loc:{start:{line:11,column:255},end:{line:11,column:515}},type:"if",locations:[{start:{line:11,column:255},end:{line:11,column:515}},{start:{line:11,column:255},end:{line:11,column:515}}],line:11},"5":{loc:{start:{line:13,column:44},end:{line:13,column:195}},type:"if",locations:[{start:{line:13,column:44},end:{line:13,column:195}},{start:{line:13,column:44},end:{line:13,column:195}}],line:13},"6":{loc:{start:{line:26,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:26,column:2},end:{line:28,column:3}},{start:{line:26,column:2},end:{line:28,column:3}}],line:26},"7":{loc:{start:{line:26,column:6},end:{line:26,column:57}},type:"binary-expr",locations:[{start:{line:26,column:6},end:{line:26,column:13}},{start:{line:26,column:17},end:{line:26,column:57}}],line:26},"8":{loc:{start:{line:33,column:17},end:{line:33,column:29}},type:"default-arg",locations:[{start:{line:33,column:27},end:{line:33,column:29}}],line:33},"9":{loc:{start:{line:34,column:25},end:{line:34,column:58}},type:"binary-expr",locations:[{start:{line:34,column:25},end:{line:34,column:47}},{start:{line:34,column:51},end:{line:34,column:58}}],line:34},"10":{loc:{start:{line:36,column:2},end:{line:42,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:42,column:3}},{start:{line:36,column:2},end:{line:42,column:3}}],line:36},"11":{loc:{start:{line:45,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:57,column:5}},{start:{line:45,column:4},end:{line:57,column:5}}],line:45},"12":{loc:{start:{line:62,column:39},end:{line:62,column:48}},type:"default-arg",locations:[{start:{line:62,column:46},end:{line:62,column:48}}],line:62},"13":{loc:{start:{line:62,column:50},end:{line:62,column:62}},type:"default-arg",locations:[{start:{line:62,column:60},end:{line:62,column:62}}],line:62},"14":{loc:{start:{line:66,column:4},end:{line:68,column:5}},type:"if",locations:[{start:{line:66,column:4},end:{line:68,column:5}},{start:{line:66,column:4},end:{line:68,column:5}}],line:66},"15":{loc:{start:{line:72,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:72,column:4},end:{line:74,column:5}},{start:{line:72,column:4},end:{line:74,column:5}}],line:72},"16":{loc:{start:{line:76,column:4},end:{line:78,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:78,column:5}},{start:{line:76,column:4},end:{line:78,column:5}}],line:76},"17":{loc:{start:{line:80,column:4},end:{line:137,column:5}},type:"if",locations:[{start:{line:80,column:4},end:{line:137,column:5}},{start:{line:80,column:4},end:{line:137,column:5}}],line:80},"18":{loc:{start:{line:84,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:84,column:8},end:{line:86,column:9}},{start:{line:84,column:8},end:{line:86,column:9}}],line:84},"19":{loc:{start:{line:91,column:14},end:{line:98,column:15}},type:"if",locations:[{start:{line:91,column:14},end:{line:98,column:15}},{start:{line:91,column:14},end:{line:98,column:15}}],line:91},"20":{loc:{start:{line:113,column:12},end:{line:125,column:13}},type:"if",locations:[{start:{line:113,column:12},end:{line:125,column:13}},{start:{line:113,column:12},end:{line:125,column:13}}],line:113},"21":{loc:{start:{line:114,column:14},end:{line:122,column:15}},type:"if",locations:[{start:{line:114,column:14},end:{line:122,column:15}},{start:{line:114,column:14},end:{line:122,column:15}}],line:114},"22":{loc:{start:{line:127,column:12},end:{line:129,column:13}},type:"if",locations:[{start:{line:127,column:12},end:{line:129,column:13}},{start:{line:127,column:12},end:{line:129,column:13}}],line:127},"23":{loc:{start:{line:127,column:16},end:{line:127,column:143}},type:"binary-expr",locations:[{start:{line:127,column:16},end:{line:127,column:21}},{start:{line:127,column:25},end:{line:127,column:117}},{start:{line:127,column:121},end:{line:127,column:143}}],line:127},"24":{loc:{start:{line:127,column:49},end:{line:127,column:116}},type:"binary-expr",locations:[{start:{line:127,column:49},end:{line:127,column:84}},{start:{line:127,column:88},end:{line:127,column:116}}],line:127},"25":{loc:{start:{line:141,column:4},end:{line:143,column:5}},type:"if",locations:[{start:{line:141,column:4},end:{line:143,column:5}},{start:{line:141,column:4},end:{line:143,column:5}}],line:141},"26":{loc:{start:{line:155,column:21},end:{line:155,column:42}},type:"binary-expr",locations:[{start:{line:155,column:21},end:{line:155,column:36}},{start:{line:155,column:40},end:{line:155,column:42}}],line:155},"27":{loc:{start:{line:167,column:10},end:{line:173,column:11}},type:"if",locations:[{start:{line:167,column:10},end:{line:173,column:11}},{start:{line:167,column:10},end:{line:173,column:11}}],line:167},"28":{loc:{start:{line:175,column:10},end:{line:179,column:11}},type:"if",locations:[{start:{line:175,column:10},end:{line:179,column:11}},{start:{line:175,column:10},end:{line:179,column:11}}],line:175},"29":{loc:{start:{line:175,column:14},end:{line:175,column:131}},type:"binary-expr",locations:[{start:{line:175,column:14},end:{line:175,column:40}},{start:{line:175,column:44},end:{line:175,column:80}},{start:{line:175,column:84},end:{line:175,column:131}}],line:175}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0],"13":[0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0,0]},inputSourceMap:{version:3,sources:["../src/ParseServerRESTController.js"],names:["Config","require","Auth","RESTController","URL","Parse","getSessionToken","options","sessionToken","Promise","resolve","getAuth","config","installationId","useMasterKey","isMaster","then","getAuthForSessionToken","ParseServerRESTController","applicationId","router","handleRequest","method","path","data","args","arguments","get","serverURL","parse","indexOf","slice","length","batch","transactionRetries","initialPromise","transaction","database","createTransactionalSession","promises","requests","map","request","body","response","returnStatus","status","_status","success","error","code","message","all","result","find","resultItem","abortTransactionalSession","reject","commitTransactionalSession","catch","errorItem","query","auth","info","context","tryRouteRequest","resp","err","Error","INVALID_JSON","apply","ajax","handleError"],mappings:"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",sourcesContent:["const Config = require('./Config');\nconst Auth = require('./Auth');\nconst RESTController = require('parse/lib/node/RESTController');\nconst URL = require('url');\nconst Parse = require('parse/node');\n\nfunction getSessionToken(options) {\n  if (options && typeof options.sessionToken === 'string') {\n    return Promise.resolve(options.sessionToken);\n  }\n  return Promise.resolve(null);\n}\n\nfunction getAuth(options = {}, config) {\n  const installationId = options.installationId || 'cloud';\n  if (options.useMasterKey) {\n    return Promise.resolve(new Auth.Auth({ config, isMaster: true, installationId }));\n  }\n  return getSessionToken(options).then(sessionToken => {\n    if (sessionToken) {\n      options.sessionToken = sessionToken;\n      return Auth.getAuthForSessionToken({\n        config,\n        sessionToken: sessionToken,\n        installationId,\n      });\n    } else {\n      return Promise.resolve(new Auth.Auth({ config, installationId }));\n    }\n  });\n}\n\nfunction ParseServerRESTController(applicationId, router) {\n  function handleRequest(method, path, data = {}, options = {}, config) {\n    // Store the arguments, for later use if internal fails\n    const args = arguments;\n\n    if (!config) {\n      config = Config.get(applicationId);\n    }\n    const serverURL = URL.parse(config.serverURL);\n    if (path.indexOf(serverURL.path) === 0) {\n      path = path.slice(serverURL.path.length, path.length);\n    }\n\n    if (path[0] !== '/') {\n      path = '/' + path;\n    }\n\n    if (path === '/batch') {\n      const batch = transactionRetries => {\n        let initialPromise = Promise.resolve();\n        if (data.transaction === true) {\n          initialPromise = config.database.createTransactionalSession();\n        }\n        return initialPromise.then(() => {\n          const promises = data.requests.map(request => {\n            return handleRequest(request.method, request.path, request.body, options, config).then(\n              response => {\n                if (options.returnStatus) {\n                  const status = response._status;\n                  delete response._status;\n                  return { success: response, _status: status };\n                }\n                return { success: response };\n              },\n              error => {\n                return {\n                  error: { code: error.code, error: error.message },\n                };\n              }\n            );\n          });\n          return Promise.all(promises)\n            .then(result => {\n              if (data.transaction === true) {\n                if (result.find(resultItem => typeof resultItem.error === 'object')) {\n                  return config.database.abortTransactionalSession().then(() => {\n                    return Promise.reject(result);\n                  });\n                } else {\n                  return config.database.commitTransactionalSession().then(() => {\n                    return result;\n                  });\n                }\n              } else {\n                return result;\n              }\n            })\n            .catch(error => {\n              if (\n                error &&\n                error.find(\n                  errorItem => typeof errorItem.error === 'object' && errorItem.error.code === 251\n                ) &&\n                transactionRetries > 0\n              ) {\n                return batch(transactionRetries - 1);\n              }\n              throw error;\n            });\n        });\n      };\n      return batch(5);\n    }\n\n    let query;\n    if (method === 'GET') {\n      query = data;\n    }\n\n    return new Promise((resolve, reject) => {\n      getAuth(options, config).then(auth => {\n        const request = {\n          body: data,\n          config,\n          auth,\n          info: {\n            applicationId: applicationId,\n            sessionToken: options.sessionToken,\n            installationId: options.installationId,\n            context: options.context || {},\n          },\n          query,\n        };\n        return Promise.resolve()\n          .then(() => {\n            return router.tryRouteRequest(method, path, request);\n          })\n          .then(\n            resp => {\n              const { response, status } = resp;\n              if (options.returnStatus) {\n                resolve({ ...response, _status: status });\n              } else {\n                resolve(response);\n              }\n            },\n            err => {\n              if (\n                err instanceof Parse.Error &&\n                err.code == Parse.Error.INVALID_JSON &&\n                err.message == `cannot route ${method} ${path}`\n              ) {\n                RESTController.request.apply(null, args).then(resolve, reject);\n              } else {\n                reject(err);\n              }\n            }\n          );\n      }, reject);\n    });\n  }\n\n  return {\n    request: handleRequest,\n    ajax: RESTController.ajax,\n    handleError: RESTController.handleError,\n  };\n}\n\nexport default ParseServerRESTController;\nexport { ParseServerRESTController };\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"29d7babd402ba7b3b55679334c2f406f6afcde94"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2qjhg2u0oy=function(){return actualCoverage;};}return actualCoverage;}cov_2qjhg2u0oy();cov_2qjhg2u0oy().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2qjhg2u0oy().s[1]++;exports.ParseServerRESTController=ParseServerRESTController;cov_2qjhg2u0oy().s[2]++;exports.default=void 0;function ownKeys(object,enumerableOnly){cov_2qjhg2u0oy().f[0]++;var keys=(cov_2qjhg2u0oy().s[3]++,Object.keys(object));cov_2qjhg2u0oy().s[4]++;if(Object.getOwnPropertySymbols){cov_2qjhg2u0oy().b[0][0]++;var symbols=(cov_2qjhg2u0oy().s[5]++,Object.getOwnPropertySymbols(object));cov_2qjhg2u0oy().s[6]++;if(enumerableOnly){cov_2qjhg2u0oy().b[1][0]++;cov_2qjhg2u0oy().s[7]++;symbols=symbols.filter(function(sym){cov_2qjhg2u0oy().f[1]++;cov_2qjhg2u0oy().s[8]++;return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}else{cov_2qjhg2u0oy().b[1][1]++;}cov_2qjhg2u0oy().s[9]++;keys.push.apply(keys,symbols);}else{cov_2qjhg2u0oy().b[0][1]++;}cov_2qjhg2u0oy().s[10]++;return keys;}function _objectSpread(target){cov_2qjhg2u0oy().f[2]++;cov_2qjhg2u0oy().s[11]++;for(var i=(cov_2qjhg2u0oy().s[12]++,1);i<arguments.length;i++){var source=(cov_2qjhg2u0oy().s[13]++,arguments[i]!=null?(cov_2qjhg2u0oy().b[2][0]++,arguments[i]):(cov_2qjhg2u0oy().b[2][1]++,{}));cov_2qjhg2u0oy().s[14]++;if(i%2){cov_2qjhg2u0oy().b[3][0]++;cov_2qjhg2u0oy().s[15]++;ownKeys(Object(source),true).forEach(function(key){cov_2qjhg2u0oy().f[3]++;cov_2qjhg2u0oy().s[16]++;_defineProperty(target,key,source[key]);});}else{cov_2qjhg2u0oy().b[3][1]++;cov_2qjhg2u0oy().s[17]++;if(Object.getOwnPropertyDescriptors){cov_2qjhg2u0oy().b[4][0]++;cov_2qjhg2u0oy().s[18]++;Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{cov_2qjhg2u0oy().b[4][1]++;cov_2qjhg2u0oy().s[19]++;ownKeys(Object(source)).forEach(function(key){cov_2qjhg2u0oy().f[4]++;cov_2qjhg2u0oy().s[20]++;Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}}cov_2qjhg2u0oy().s[21]++;return target;}function _defineProperty(obj,key,value){cov_2qjhg2u0oy().f[5]++;cov_2qjhg2u0oy().s[22]++;if(key in obj){cov_2qjhg2u0oy().b[5][0]++;cov_2qjhg2u0oy().s[23]++;Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{cov_2qjhg2u0oy().b[5][1]++;cov_2qjhg2u0oy().s[24]++;obj[key]=value;}cov_2qjhg2u0oy().s[25]++;return obj;}const Config=(cov_2qjhg2u0oy().s[26]++,require('./Config'));const Auth=(cov_2qjhg2u0oy().s[27]++,require('./Auth'));const RESTController=(cov_2qjhg2u0oy().s[28]++,require('parse/lib/node/RESTController'));const URL=(cov_2qjhg2u0oy().s[29]++,require('url'));const Parse=(cov_2qjhg2u0oy().s[30]++,require('parse/node'));function getSessionToken(options){cov_2qjhg2u0oy().f[6]++;cov_2qjhg2u0oy().s[31]++;if((cov_2qjhg2u0oy().b[7][0]++,options)&&(cov_2qjhg2u0oy().b[7][1]++,typeof options.sessionToken==='string')){cov_2qjhg2u0oy().b[6][0]++;cov_2qjhg2u0oy().s[32]++;return Promise.resolve(options.sessionToken);}else{cov_2qjhg2u0oy().b[6][1]++;}cov_2qjhg2u0oy().s[33]++;return Promise.resolve(null);}function getAuth(options=(cov_2qjhg2u0oy().b[8][0]++,{}),config){cov_2qjhg2u0oy().f[7]++;const installationId=(cov_2qjhg2u0oy().s[34]++,(cov_2qjhg2u0oy().b[9][0]++,options.installationId)||(cov_2qjhg2u0oy().b[9][1]++,'cloud'));cov_2qjhg2u0oy().s[35]++;if(options.useMasterKey){cov_2qjhg2u0oy().b[10][0]++;cov_2qjhg2u0oy().s[36]++;return Promise.resolve(new Auth.Auth({config,isMaster:true,installationId}));}else{cov_2qjhg2u0oy().b[10][1]++;}cov_2qjhg2u0oy().s[37]++;return getSessionToken(options).then(sessionToken=>{cov_2qjhg2u0oy().f[8]++;cov_2qjhg2u0oy().s[38]++;if(sessionToken){cov_2qjhg2u0oy().b[11][0]++;cov_2qjhg2u0oy().s[39]++;options.sessionToken=sessionToken;cov_2qjhg2u0oy().s[40]++;return Auth.getAuthForSessionToken({config,sessionToken:sessionToken,installationId});}else{cov_2qjhg2u0oy().b[11][1]++;cov_2qjhg2u0oy().s[41]++;return Promise.resolve(new Auth.Auth({config,installationId}));}});}function ParseServerRESTController(applicationId,router){cov_2qjhg2u0oy().f[9]++;function handleRequest(method,path,data=(cov_2qjhg2u0oy().b[12][0]++,{}),options=(cov_2qjhg2u0oy().b[13][0]++,{}),config){cov_2qjhg2u0oy().f[10]++;// Store the arguments, for later use if internal fails
const args=(cov_2qjhg2u0oy().s[42]++,arguments);cov_2qjhg2u0oy().s[43]++;if(!config){cov_2qjhg2u0oy().b[14][0]++;cov_2qjhg2u0oy().s[44]++;config=Config.get(applicationId);}else{cov_2qjhg2u0oy().b[14][1]++;}const serverURL=(cov_2qjhg2u0oy().s[45]++,URL.parse(config.serverURL));cov_2qjhg2u0oy().s[46]++;if(path.indexOf(serverURL.path)===0){cov_2qjhg2u0oy().b[15][0]++;cov_2qjhg2u0oy().s[47]++;path=path.slice(serverURL.path.length,path.length);}else{cov_2qjhg2u0oy().b[15][1]++;}cov_2qjhg2u0oy().s[48]++;if(path[0]!=='/'){cov_2qjhg2u0oy().b[16][0]++;cov_2qjhg2u0oy().s[49]++;path='/'+path;}else{cov_2qjhg2u0oy().b[16][1]++;}cov_2qjhg2u0oy().s[50]++;if(path==='/batch'){cov_2qjhg2u0oy().b[17][0]++;cov_2qjhg2u0oy().s[51]++;const batch=transactionRetries=>{cov_2qjhg2u0oy().f[11]++;let initialPromise=(cov_2qjhg2u0oy().s[52]++,Promise.resolve());cov_2qjhg2u0oy().s[53]++;if(data.transaction===true){cov_2qjhg2u0oy().b[18][0]++;cov_2qjhg2u0oy().s[54]++;initialPromise=config.database.createTransactionalSession();}else{cov_2qjhg2u0oy().b[18][1]++;}cov_2qjhg2u0oy().s[55]++;return initialPromise.then(()=>{cov_2qjhg2u0oy().f[12]++;const promises=(cov_2qjhg2u0oy().s[56]++,data.requests.map(request=>{cov_2qjhg2u0oy().f[13]++;cov_2qjhg2u0oy().s[57]++;return handleRequest(request.method,request.path,request.body,options,config).then(response=>{cov_2qjhg2u0oy().f[14]++;cov_2qjhg2u0oy().s[58]++;if(options.returnStatus){cov_2qjhg2u0oy().b[19][0]++;const status=(cov_2qjhg2u0oy().s[59]++,response._status);cov_2qjhg2u0oy().s[60]++;delete response._status;cov_2qjhg2u0oy().s[61]++;return{success:response,_status:status};}else{cov_2qjhg2u0oy().b[19][1]++;}cov_2qjhg2u0oy().s[62]++;return{success:response};},error=>{cov_2qjhg2u0oy().f[15]++;cov_2qjhg2u0oy().s[63]++;return{error:{code:error.code,error:error.message}};});}));cov_2qjhg2u0oy().s[64]++;return Promise.all(promises).then(result=>{cov_2qjhg2u0oy().f[16]++;cov_2qjhg2u0oy().s[65]++;if(data.transaction===true){cov_2qjhg2u0oy().b[20][0]++;cov_2qjhg2u0oy().s[66]++;if(result.find(resultItem=>{cov_2qjhg2u0oy().f[17]++;cov_2qjhg2u0oy().s[67]++;return typeof resultItem.error==='object';})){cov_2qjhg2u0oy().b[21][0]++;cov_2qjhg2u0oy().s[68]++;return config.database.abortTransactionalSession().then(()=>{cov_2qjhg2u0oy().f[18]++;cov_2qjhg2u0oy().s[69]++;return Promise.reject(result);});}else{cov_2qjhg2u0oy().b[21][1]++;cov_2qjhg2u0oy().s[70]++;return config.database.commitTransactionalSession().then(()=>{cov_2qjhg2u0oy().f[19]++;cov_2qjhg2u0oy().s[71]++;return result;});}}else{cov_2qjhg2u0oy().b[20][1]++;cov_2qjhg2u0oy().s[72]++;return result;}}).catch(error=>{cov_2qjhg2u0oy().f[20]++;cov_2qjhg2u0oy().s[73]++;if((cov_2qjhg2u0oy().b[23][0]++,error)&&(cov_2qjhg2u0oy().b[23][1]++,error.find(errorItem=>{cov_2qjhg2u0oy().f[21]++;cov_2qjhg2u0oy().s[74]++;return(cov_2qjhg2u0oy().b[24][0]++,typeof errorItem.error==='object')&&(cov_2qjhg2u0oy().b[24][1]++,errorItem.error.code===251);}))&&(cov_2qjhg2u0oy().b[23][2]++,transactionRetries>0)){cov_2qjhg2u0oy().b[22][0]++;cov_2qjhg2u0oy().s[75]++;return batch(transactionRetries-1);}else{cov_2qjhg2u0oy().b[22][1]++;}cov_2qjhg2u0oy().s[76]++;throw error;});});};cov_2qjhg2u0oy().s[77]++;return batch(5);}else{cov_2qjhg2u0oy().b[17][1]++;}let query;cov_2qjhg2u0oy().s[78]++;if(method==='GET'){cov_2qjhg2u0oy().b[25][0]++;cov_2qjhg2u0oy().s[79]++;query=data;}else{cov_2qjhg2u0oy().b[25][1]++;}cov_2qjhg2u0oy().s[80]++;return new Promise((resolve,reject)=>{cov_2qjhg2u0oy().f[22]++;cov_2qjhg2u0oy().s[81]++;getAuth(options,config).then(auth=>{cov_2qjhg2u0oy().f[23]++;const request=(cov_2qjhg2u0oy().s[82]++,{body:data,config,auth,info:{applicationId:applicationId,sessionToken:options.sessionToken,installationId:options.installationId,context:(cov_2qjhg2u0oy().b[26][0]++,options.context)||(cov_2qjhg2u0oy().b[26][1]++,{})},query});cov_2qjhg2u0oy().s[83]++;return Promise.resolve().then(()=>{cov_2qjhg2u0oy().f[24]++;cov_2qjhg2u0oy().s[84]++;return router.tryRouteRequest(method,path,request);}).then(resp=>{cov_2qjhg2u0oy().f[25]++;const{response,status}=(cov_2qjhg2u0oy().s[85]++,resp);cov_2qjhg2u0oy().s[86]++;if(options.returnStatus){cov_2qjhg2u0oy().b[27][0]++;cov_2qjhg2u0oy().s[87]++;resolve(_objectSpread(_objectSpread({},response),{},{_status:status}));}else{cov_2qjhg2u0oy().b[27][1]++;cov_2qjhg2u0oy().s[88]++;resolve(response);}},err=>{cov_2qjhg2u0oy().f[26]++;cov_2qjhg2u0oy().s[89]++;if((cov_2qjhg2u0oy().b[29][0]++,err instanceof Parse.Error)&&(cov_2qjhg2u0oy().b[29][1]++,err.code==Parse.Error.INVALID_JSON)&&(cov_2qjhg2u0oy().b[29][2]++,err.message==`cannot route ${method} ${path}`)){cov_2qjhg2u0oy().b[28][0]++;cov_2qjhg2u0oy().s[90]++;RESTController.request.apply(null,args).then(resolve,reject);}else{cov_2qjhg2u0oy().b[28][1]++;cov_2qjhg2u0oy().s[91]++;reject(err);}});},reject);});}cov_2qjhg2u0oy().s[92]++;return{request:handleRequest,ajax:RESTController.ajax,handleError:RESTController.handleError};}var _default=(cov_2qjhg2u0oy().s[93]++,ParseServerRESTController);cov_2qjhg2u0oy().s[94]++;exports.default=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9QYXJzZVNlcnZlclJFU1RDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkNvbmZpZyIsInJlcXVpcmUiLCJBdXRoIiwiUkVTVENvbnRyb2xsZXIiLCJVUkwiLCJQYXJzZSIsImdldFNlc3Npb25Ub2tlbiIsIm9wdGlvbnMiLCJzZXNzaW9uVG9rZW4iLCJQcm9taXNlIiwicmVzb2x2ZSIsImdldEF1dGgiLCJjb25maWciLCJpbnN0YWxsYXRpb25JZCIsInVzZU1hc3RlcktleSIsImlzTWFzdGVyIiwidGhlbiIsImdldEF1dGhGb3JTZXNzaW9uVG9rZW4iLCJQYXJzZVNlcnZlclJFU1RDb250cm9sbGVyIiwiYXBwbGljYXRpb25JZCIsInJvdXRlciIsImhhbmRsZVJlcXVlc3QiLCJtZXRob2QiLCJwYXRoIiwiZGF0YSIsImFyZ3MiLCJhcmd1bWVudHMiLCJnZXQiLCJzZXJ2ZXJVUkwiLCJwYXJzZSIsImluZGV4T2YiLCJzbGljZSIsImxlbmd0aCIsImJhdGNoIiwidHJhbnNhY3Rpb25SZXRyaWVzIiwiaW5pdGlhbFByb21pc2UiLCJ0cmFuc2FjdGlvbiIsImRhdGFiYXNlIiwiY3JlYXRlVHJhbnNhY3Rpb25hbFNlc3Npb24iLCJwcm9taXNlcyIsInJlcXVlc3RzIiwibWFwIiwicmVxdWVzdCIsImJvZHkiLCJyZXNwb25zZSIsInJldHVyblN0YXR1cyIsInN0YXR1cyIsIl9zdGF0dXMiLCJzdWNjZXNzIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsImFsbCIsInJlc3VsdCIsImZpbmQiLCJyZXN1bHRJdGVtIiwiYWJvcnRUcmFuc2FjdGlvbmFsU2Vzc2lvbiIsInJlamVjdCIsImNvbW1pdFRyYW5zYWN0aW9uYWxTZXNzaW9uIiwiY2F0Y2giLCJlcnJvckl0ZW0iLCJxdWVyeSIsImF1dGgiLCJpbmZvIiwiY29udGV4dCIsInRyeVJvdXRlUmVxdWVzdCIsInJlc3AiLCJlcnIiLCJFcnJvciIsIklOVkFMSURfSlNPTiIsImFwcGx5IiwiYWpheCIsImhh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LEtBQUssQ0FBQytELEtBQXJCLElBQ0FELEdBQUcsQ0FBQ2pCLElBQUosSUFBWTdDLEtBQUssQ0FBQytELEtBQU4sQ0FBWUMsWUFEeEIsSUFFQUYsR0FBRyxDQUFDaEIsT0FBSixJQUFnQixnQkFBZTdCLE1BQU8sSUFBR0MsSUFBSyxFQUhoRCxFQUlFO0FBQ0FwQixZQUFBQSxjQUFjLENBQUN1QyxPQUFmLENBQXVCNEIsS0FBdkIsQ0FBNkIsSUFBN0IsRUFBbUM3QyxJQUFuQyxFQUF5Q1QsSUFBekMsQ0FBOENOLE9BQTlDLEVBQXVEK0MsTUFBdkQ7QUFDRCxXQU5ELE1BTU87QUFDTEEsWUFBQUEsTUFBTSxDQUFDVSxHQUFELENBQU47QUFDRDtBQUNGLFNBdkJFLENBQVA7QUF5QkQsT0F0Q0QsRUFzQ0dWLE1BdENIO0FBdUNELEtBeENNLENBQVA7QUF5Q0Q7O0FBRUQsU0FBTztBQUNMZixJQUFBQSxPQUFPLEVBQUVyQixhQURKO0FBRUxrRCxJQUFBQSxJQUFJLEVBQUVwRSxjQUFjLENBQUNvRSxJQUZoQjtBQUdMQyxJQUFBQSxXQUFXLEVBQUVyRSxjQUFjLENBQUNxRTtBQUh2QixHQUFQO0FBS0Q7O2VBRWN0RCx5QiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IENvbmZpZyA9IHJlcXVpcmUoJy4vQ29uZmlnJyk7XG5jb25zdCBBdXRoID0gcmVxdWlyZSgnLi9BdXRoJyk7XG5jb25zdCBSRVNUQ29udHJvbGxlciA9IHJlcXVpcmUoJ3BhcnNlL2xpYi9ub2RlL1JFU1RDb250cm9sbGVyJyk7XG5jb25zdCBVUkwgPSByZXF1aXJlKCd1cmwnKTtcbmNvbnN0IFBhcnNlID0gcmVxdWlyZSgncGFyc2Uvbm9kZScpO1xuXG5mdW5jdGlvbiBnZXRTZXNzaW9uVG9rZW4ob3B0aW9ucykge1xuICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5zZXNzaW9uVG9rZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShvcHRpb25zLnNlc3Npb25Ub2tlbik7XG4gIH1cbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbn1cblxuZnVuY3Rpb24gZ2V0QXV0aChvcHRpb25zID0ge30sIGNvbmZpZykge1xuICBjb25zdCBpbnN0YWxsYXRpb25JZCA9IG9wdGlvbnMuaW5zdGFsbGF0aW9uSWQgfHwgJ2Nsb3VkJztcbiAgaWYgKG9wdGlvbnMudXNlTWFzdGVyS2V5KSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQXV0aC5BdXRoKHsgY29uZmlnLCBpc01hc3RlcjogdHJ1ZSwgaW5zdGFsbGF0aW9uSWQgfSkpO1xuICB9XG4gIHJldHVybiBnZXRTZXNzaW9uVG9rZW4ob3B0aW9ucykudGhlbihzZXNzaW9uVG9rZW4gPT4ge1xuICAgIGlmIChzZXNzaW9uVG9rZW4pIHtcbiAgICAgIG9wdGlvbnMuc2Vzc2lvblRva2VuID0gc2Vzc2lvblRva2VuO1xuICAgICAgcmV0dXJuIEF1dGguZ2V0QXV0aEZvclNlc3Npb25Ub2tlbih7XG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgc2Vzc2lvblRva2VuOiBzZXNzaW9uVG9rZW4sXG4gICAgICAgIGluc3RhbGxhdGlvbklkLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEF1dGguQXV0aCh7IGNvbmZpZywgaW5zdGFsbGF0aW9uSWQgfSkpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIFBhcnNlU2VydmVyUkVTVENvbnRyb2xsZXIoYXBwbGljYXRpb25JZCwgcm91dGVyKSB7XG4gIGZ1bmN0aW9uIGhhbmRsZVJlcXVlc3QobWV0aG9kLCBwYXRoLCBkYXRhID0ge30sIG9wdGlvbnMgPSB7fSwgY29uZmlnKSB7XG4gICAgLy8gU3RvcmUgdGhlIGFyZ3VtZW50cywgZm9yIGxhdGVyIHVzZSBpZiBpbnRlcm5hbCBmYWlsc1xuICAgIGNvbnN0IGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgY29uZmlnID0gQ29uZmlnLmdldChhcHBsaWNhdGlvbklkKTtcbiAgICB9XG4gICAgY29uc3Qgc2VydmVyVVJMID0gVVJMLnBhcnNlKGNvbmZpZy5zZXJ2ZXJVUkwpO1xuICAgIGlmIChwYXRoLmluZGV4T2Yoc2VydmVyVVJMLnBhdGgpID09PSAwKSB7XG4gICAgICBwYXRoID0gcGF0aC5zbGljZShzZXJ2ZXJVUkwucGF0aC5sZW5ndGgsIHBhdGgubGVuZ3RoKTtcbiAgICB9XG5cbiAgICBpZiAocGF0aFswXSAhPT0gJy8nKSB7XG4gICAgICBwYXRoID0gJy8nICsgcGF0aDtcbiAgICB9XG5cbiAgICBpZiAocGF0aCA9PT0gJy9iYXRjaCcpIHtcbiAgICAgIGNvbnN0IGJhdGNoID0gdHJhbnNhY3Rpb25SZXRyaWVzID0+IHtcbiAgICAgICAgbGV0IGluaXRpYWxQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIGlmIChkYXRhLnRyYW5zYWN0aW9uID09PSB0cnVlKSB7XG4gICAgICAgICAgaW5pdGlhbFByb21pc2UgPSBjb25maWcuZGF0YWJhc2UuY3JlYXRlVHJhbnNhY3Rpb25hbFNlc3Npb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5pdGlhbFByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBkYXRhLnJlcXVlc3RzLm1hcChyZXF1ZXN0ID0+IHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVSZXF1ZXN0KHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnBhdGgsIHJlcXVlc3QuYm9keSwgb3B0aW9ucywgY29uZmlnKS50aGVuKFxuICAgICAgICAgICAgICByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmV0dXJuU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXMgPSByZXNwb25zZS5fc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgZGVsZXRlIHJlc3BvbnNlLl9zdGF0dXM7XG4gICAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiByZXNwb25zZSwgX3N0YXR1czogc3RhdHVzIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHJlc3BvbnNlIH07XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgZXJyb3I6IHsgY29kZTogZXJyb3IuY29kZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcylcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgIGlmIChkYXRhLnRyYW5zYWN0aW9uID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5maW5kKHJlc3VsdEl0ZW0gPT4gdHlwZW9mIHJlc3VsdEl0ZW0uZXJyb3IgPT09ICdvYmplY3QnKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy5kYXRhYmFzZS5hYm9ydFRyYW5zYWN0aW9uYWxTZXNzaW9uKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBjb25maWcuZGF0YWJhc2UuY29tbWl0VHJhbnNhY3Rpb25hbFNlc3Npb24oKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGVycm9yICYmXG4gICAgICAgICAgICAgICAgZXJyb3IuZmluZChcbiAgICAgICAgICAgICAgICAgIGVycm9ySXRlbSA9PiB0eXBlb2YgZXJyb3JJdGVtLmVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvckl0ZW0uZXJyb3IuY29kZSA9PT0gMjUxXG4gICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uUmV0cmllcyA+IDBcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJhdGNoKHRyYW5zYWN0aW9uUmV0cmllcyAtIDEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBiYXRjaCg1KTtcbiAgICB9XG5cbiAgICBsZXQgcXVlcnk7XG4gICAgaWYgKG1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICAgIHF1ZXJ5ID0gZGF0YTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgZ2V0QXV0aChvcHRpb25zLCBjb25maWcpLnRoZW4oYXV0aCA9PiB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgICAgYm9keTogZGF0YSxcbiAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgYXV0aCxcbiAgICAgICAgICBpbmZvOiB7XG4gICAgICAgICAgICBhcHBsaWNhdGlvbklkOiBhcHBsaWNhdGlvbklkLFxuICAgICAgICAgICAgc2Vzc2lvblRva2VuOiBvcHRpb25zLnNlc3Npb25Ub2tlbixcbiAgICAgICAgICAgIGluc3RhbGxhdGlvbklkOiBvcHRpb25zLmluc3RhbGxhdGlvbklkLFxuICAgICAgICAgICAgY29udGV4dDogb3B0aW9ucy5jb250ZXh0IHx8IHt9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcXVlcnksXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByb3V0ZXIudHJ5Um91dGVSZXF1ZXN0KG1ldGhvZCwgcGF0aCwgcmVxdWVzdCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihcbiAgICAgICAgICAgIHJlc3AgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB7IHJlc3BvbnNlLCBzdGF0dXMgfSA9IHJlc3A7XG4gICAgICAgICAgICAgIGlmIChvcHRpb25zLnJldHVyblN0YXR1cykge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoeyAuLi5yZXNwb25zZSwgX3N0YXR1czogc3RhdHVzIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGVyciBpbnN0YW5jZW9mIFBhcnNlLkVycm9yICYmXG4gICAgICAgICAgICAgICAgZXJyLmNvZGUgPT0gUGFyc2UuRXJyb3IuSU5WQUxJRF9KU09OICYmXG4gICAgICAgICAgICAgICAgZXJyLm1lc3NhZ2UgPT0gYGNhbm5vdCByb3V0ZSAke21ldGhvZH0gJHtwYXRofWBcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgUkVTVENvbnRyb2xsZXIucmVxdWVzdC5hcHBseShudWxsLCBhcmdzKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgfSwgcmVqZWN0KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVxdWVzdDogaGFuZGxlUmVxdWVzdCxcbiAgICBhamF4OiBSRVNUQ29udHJvbGxlci5hamF4LFxuICAgIGhhbmRsZUVycm9yOiBSRVNUQ29udHJvbGxlci5oYW5kbGVFcnJvcixcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUGFyc2VTZXJ2ZXJSRVNUQ29udHJvbGxlcjtcbmV4cG9ydCB7IFBhcnNlU2VydmVyUkVTVENvbnRyb2xsZXIgfTtcbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9QYXJzZVNlcnZlclJFU1RDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkNvbmZpZyIsInJlcXVpcmUiLCJBdXRoIiwiUkVTVENvbnRyb2xsZXIiLCJVUkwiLCJQYXJzZSIsIm9wdGlvbnMiLCJQcm9taXNlIiwiaW5zdGFsbGF0aW9uSWQiLCJpc01hc3RlciIsInNlc3Npb25Ub2tlbiIsImRhdGEiLCJhcmdzIiwiY29uZmlnIiwic2VydmVyVVJMIiwicGF0aCIsImJhdGNoIiwidHJhbnNhY3Rpb25SZXRyaWVzIiwiaW5pdGlhbFByb21pc2UiLCJwcm9taXNlcyIsInJlcXVlc3QiLCJyZXNwb25zZSIsInN0YXR1cyIsInN1Y2Nlc3MiLCJfc3RhdHVzIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsInJlc3VsdCIsInJlc3VsdEl0ZW0iLCJlcnJvckl0ZW0iLCJtZXRob2QiLCJxdWVyeSIsImdldEF1dGgiLCJhdXRoIiwiYm9keSIsImluZm8iLCJhcHBsaWNhdGlvbklkIiwiY29udGV4dCIsInJvdXRlciIsInJlc3AiLCJyZXNvbHZlIiwiZXJyIiwicmVqZWN0IiwiYWpheCIsImhhbmRsZUVycm9yIiwiUGFyc2VTZXJ2ZXJSRVNUQ29udHJvbGxlciJdLCJtYXBwaW5ncyI6Ijt3eUVBQUEsS0FBTUEsQ0FBQUEsTUFBTSwyQkFBR0MsT0FBTyxDQUF0QixVQUFzQixDQUFWLENBQVosQ0FDQSxLQUFNQyxDQUFBQSxJQUFJLDJCQUFHRCxPQUFPLENBQXBCLFFBQW9CLENBQVYsQ0FBVixDQUNBLEtBQU1FLENBQUFBLGNBQWMsMkJBQUdGLE9BQU8sQ0FBOUIsK0JBQThCLENBQVYsQ0FBcEIsQ0FDQSxLQUFNRyxDQUFBQSxHQUFHLDJCQUFHSCxPQUFPLENBQW5CLEtBQW1CLENBQVYsQ0FBVCxDQUNBLEtBQU1JLENBQUFBLEtBQUssMkJBQUdKLE9BQU8sQ0FBckIsWUFBcUIsQ0FBVixDQUFYLENBRUEsUUFBQSxDQUFBLGVBQUEsQ0FBQSxPQUFBLENBQWtDLGtE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QUEsZ0NBQ0FBLEdBQUcsQ0FBSEEsSUFBQUEsRUFBWXJDLEtBQUssQ0FBTEEsS0FBQUEsQ0FEWnFDLFlBQUFBLGdDQUVBQSxHQUFHLENBQUhBLE9BQUFBLEVBQWdCLGdCQUFlWCxNQUFPLElBQUdoQixJQUgzQyxFQUNFMkIsQ0FERixDQUlFLHNEQUNBdkMsY0FBYyxDQUFkQSxPQUFBQSxDQUFBQSxLQUFBQSxDQUFBQSxJQUFBQSxDQUFBQSxJQUFBQSxFQUFBQSxJQUFBQSxDQUFBQSxPQUFBQSxDQUFBQSxNQUFBQSxFQUxGLENBQUEsSUFNTyxzREFDTHdDLE1BQU0sQ0FBTkEsR0FBTSxDQUFOQSxDQUNELENBdEJQLENBQU8sQ0FBUCxDQWJGVixDQUFBQSxDQUFBQSxNQUFBQSxFQURGLENBQU8sQ0FBUCxDQXlDRCxDQXhIdUQseUJBMEh4RCxNQUFPLENBQ0xiLE9BQU8sQ0FERixhQUFBLENBRUx3QixJQUFJLENBQUV6QyxjQUFjLENBRmYsSUFBQSxDQUdMMEMsV0FBVyxDQUFFMUMsY0FBYyxDQUFDMEMsV0FIdkIsQ0FBUCxDQUtELEMsdUNBRWNDLHlCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgQ29uZmlnID0gcmVxdWlyZSgnLi9Db25maWcnKTtcbmNvbnN0IEF1dGggPSByZXF1aXJlKCcuL0F1dGgnKTtcbmNvbnN0IFJFU1RDb250cm9sbGVyID0gcmVxdWlyZSgncGFyc2UvbGliL25vZGUvUkVTVENvbnRyb2xsZXInKTtcbmNvbnN0IFVSTCA9IHJlcXVpcmUoJ3VybCcpO1xuY29uc3QgUGFyc2UgPSByZXF1aXJlKCdwYXJzZS9ub2RlJyk7XG5cbmZ1bmN0aW9uIGdldFNlc3Npb25Ub2tlbihvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLnNlc3Npb25Ub2tlbiA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG9wdGlvbnMuc2Vzc2lvblRva2VuKTtcbiAgfVxuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xufVxuXG5mdW5jdGlvbiBnZXRBdXRoKG9wdGlvbnMgPSB7fSwgY29uZmlnKSB7XG4gIGNvbnN0IGluc3RhbGxhdGlvbklkID0gb3B0aW9ucy5pbnN0YWxsYXRpb25JZCB8fCAnY2xvdWQnO1xuICBpZiAob3B0aW9ucy51c2VNYXN0ZXJLZXkpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBBdXRoLkF1dGgoeyBjb25maWcsIGlzTWFzdGVyOiB0cnVlLCBpbnN0YWxsYXRpb25JZCB9KSk7XG4gIH1cbiAgcmV0dXJuIGdldFNlc3Npb25Ub2tlbihvcHRpb25zKS50aGVuKHNlc3Npb25Ub2tlbiA9PiB7XG4gICAgaWYgKHNlc3Npb25Ub2tlbikge1xuICAgICAgb3B0aW9ucy5zZXNzaW9uVG9rZW4gPSBzZXNzaW9uVG9rZW47XG4gICAgICByZXR1cm4gQXV0aC5nZXRBdXRoRm9yU2Vzc2lvblRva2VuKHtcbiAgICAgICAgY29uZmlnLFxuICAgICAgICBzZXNzaW9uVG9rZW46IHNlc3Npb25Ub2tlbixcbiAgICAgICAgaW5zdGFsbGF0aW9uSWQsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQXV0aC5BdXRoKHsgY29uZmlnLCBpbnN0YWxsYXRpb25JZCB9KSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gUGFyc2VTZXJ2ZXJSRVNUQ29udHJvbGxlcihhcHBsaWNhdGlvbklkLCByb3V0ZXIpIHtcbiAgZnVuY3Rpb24gaGFuZGxlUmVxdWVzdChtZXRob2QsIHBhdGgsIGRhdGEgPSB7fSwgb3B0aW9ucyA9IHt9LCBjb25maWcpIHtcbiAgICAvLyBTdG9yZSB0aGUgYXJndW1lbnRzLCBmb3IgbGF0ZXIgdXNlIGlmIGludGVybmFsIGZhaWxzXG4gICAgY29uc3QgYXJncyA9IGFyZ3VtZW50cztcblxuICAgIGlmICghY29uZmlnKSB7XG4gICAgICBjb25maWcgPSBDb25maWcuZ2V0KGFwcGxpY2F0aW9uSWQpO1xuICAgIH1cbiAgICBjb25zdCBzZXJ2ZXJVUkwgPSBVUkwucGFyc2UoY29uZmlnLnNlcnZlclVSTCk7XG4gICAgaWYgKHBhdGguaW5kZXhPZihzZXJ2ZXJVUkwucGF0aCkgPT09IDApIHtcbiAgICAgIHBhdGggPSBwYXRoLnNsaWNlKHNlcnZlclVSTC5wYXRoLmxlbmd0aCwgcGF0aC5sZW5ndGgpO1xuICAgIH1cblxuICAgIGlmIChwYXRoWzBdICE9PSAnLycpIHtcbiAgICAgIHBhdGggPSAnLycgKyBwYXRoO1xuICAgIH1cblxuICAgIGlmIChwYXRoID09PSAnL2JhdGNoJykge1xuICAgICAgY29uc3QgYmF0Y2ggPSB0cmFuc2FjdGlvblJldHJpZXMgPT4ge1xuICAgICAgICBsZXQgaW5pdGlhbFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgaWYgKGRhdGEudHJhbnNhY3Rpb24gPT09IHRydWUpIHtcbiAgICAgICAgICBpbml0aWFsUHJvbWlzZSA9IGNvbmZpZy5kYXRhYmFzZS5jcmVhdGVUcmFuc2FjdGlvbmFsU2Vzc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbml0aWFsUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IGRhdGEucmVxdWVzdHMubWFwKHJlcXVlc3QgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZVJlcXVlc3QocmVxdWVzdC5tZXRob2QsIHJlcXVlc3QucGF0aCwgcmVxdWVzdC5ib2R5LCBvcHRpb25zLCBjb25maWcpLnRoZW4oXG4gICAgICAgICAgICAgIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yZXR1cm5TdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHJlc3BvbnNlLl9zdGF0dXM7XG4gICAgICAgICAgICAgICAgICBkZWxldGUgcmVzcG9uc2UuX3N0YXR1cztcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHJlc3BvbnNlLCBfc3RhdHVzOiBzdGF0dXMgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogcmVzcG9uc2UgfTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICBlcnJvcjogeyBjb2RlOiBlcnJvci5jb2RlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKVxuICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgaWYgKGRhdGEudHJhbnNhY3Rpb24gPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmZpbmQocmVzdWx0SXRlbSA9PiB0eXBlb2YgcmVzdWx0SXRlbS5lcnJvciA9PT0gJ29iamVjdCcpKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnLmRhdGFiYXNlLmFib3J0VHJhbnNhY3Rpb25hbFNlc3Npb24oKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy5kYXRhYmFzZS5jb21taXRUcmFuc2FjdGlvbmFsU2Vzc2lvbigpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZXJyb3IgJiZcbiAgICAgICAgICAgICAgICBlcnJvci5maW5kKFxuICAgICAgICAgICAgICAgICAgZXJyb3JJdGVtID0+IHR5cGVvZiBlcnJvckl0ZW0uZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9ySXRlbS5lcnJvci5jb2RlID09PSAyNTFcbiAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25SZXRyaWVzID4gMFxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmF0Y2godHJhbnNhY3Rpb25SZXRyaWVzIC0gMSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIGJhdGNoKDUpO1xuICAgIH1cblxuICAgIGxldCBxdWVyeTtcbiAgICBpZiAobWV0aG9kID09PSAnR0VUJykge1xuICAgICAgcXVlcnkgPSBkYXRhO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBnZXRBdXRoKG9wdGlvbnMsIGNvbmZpZykudGhlbihhdXRoID0+IHtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAgICBib2R5OiBkYXRhLFxuICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICBhdXRoLFxuICAgICAgICAgIGluZm86IHtcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uSWQ6IGFwcGxpY2F0aW9uSWQsXG4gICAgICAgICAgICBzZXNzaW9uVG9rZW46IG9wdGlvbnMuc2Vzc2lvblRva2VuLFxuICAgICAgICAgICAgaW5zdGFsbGF0aW9uSWQ6IG9wdGlvbnMuaW5zdGFsbGF0aW9uSWQsXG4gICAgICAgICAgICBjb250ZXh0OiBvcHRpb25zLmNvbnRleHQgfHwge30sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBxdWVyeSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJvdXRlci50cnlSb3V0ZVJlcXVlc3QobWV0aG9kLCBwYXRoLCByZXF1ZXN0KTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKFxuICAgICAgICAgICAgcmVzcCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHsgcmVzcG9uc2UsIHN0YXR1cyB9ID0gcmVzcDtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmV0dXJuU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh7IC4uLnJlc3BvbnNlLCBfc3RhdHVzOiBzdGF0dXMgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnIgPT4ge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZXJyIGluc3RhbmNlb2YgUGFyc2UuRXJyb3IgJiZcbiAgICAgICAgICAgICAgICBlcnIuY29kZSA9PSBQYXJzZS5FcnJvci5JTlZBTElEX0pTT04gJiZcbiAgICAgICAgICAgICAgICBlcnIubWVzc2FnZSA9PSBgY2Fubm90IHJvdXRlICR7bWV0aG9kfSAke3BhdGh9YFxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBSRVNUQ29udHJvbGxlci5yZXF1ZXN0LmFwcGx5KG51bGwsIGFyZ3MpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICB9LCByZWplY3QpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByZXF1ZXN0OiBoYW5kbGVSZXF1ZXN0LFxuICAgIGFqYXg6IFJFU1RDb250cm9sbGVyLmFqYXgsXG4gICAgaGFuZGxlRXJyb3I6IFJFU1RDb250cm9sbGVyLmhhbmRsZUVycm9yLFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBQYXJzZVNlcnZlclJFU1RDb250cm9sbGVyO1xuZXhwb3J0IHsgUGFyc2VTZXJ2ZXJSRVNUQ29udHJvbGxlciB9O1xuIl19