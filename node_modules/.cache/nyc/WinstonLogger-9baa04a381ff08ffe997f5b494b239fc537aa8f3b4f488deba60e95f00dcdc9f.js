"use strict";function cov_2n8plkb7uu(){var path="/parse-server/lib/Adapters/Logger/WinstonLogger.js";var hash="2942c16f89f332fab9f7bba4428df3162b5c687e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/parse-server/lib/Adapters/Logger/WinstonLogger.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:42}},"2":{start:{line:7,column:0},end:{line:7,column:36}},"3":{start:{line:8,column:0},end:{line:8,column:42}},"4":{start:{line:9,column:0},end:{line:9,column:42}},"5":{start:{line:11,column:15},end:{line:11,column:58}},"6":{start:{line:13,column:10},end:{line:13,column:47}},"7":{start:{line:15,column:12},end:{line:15,column:51}},"8":{start:{line:17,column:30},end:{line:17,column:90}},"9":{start:{line:19,column:14},end:{line:19,column:55}},"10":{start:{line:21,column:16},end:{line:21,column:65}},"11":{start:{line:23,column:39},end:{line:23,column:93}},"12":{start:{line:25,column:49},end:{line:25,column:96}},"13":{start:{line:25,column:84},end:{line:25,column:96}},"14":{start:{line:25,column:121},end:{line:25,column:134}},"15":{start:{line:25,column:159},end:{line:25,column:172}},"16":{start:{line:25,column:174},end:{line:25,column:309}},"17":{start:{line:25,column:234},end:{line:25,column:292}},"18":{start:{line:27,column:53},end:{line:27,column:111}},"19":{start:{line:27,column:98},end:{line:27,column:109}},"20":{start:{line:27,column:112},end:{line:27,column:214}},"21":{start:{line:27,column:188},end:{line:27,column:212}},"22":{start:{line:27,column:227},end:{line:27,column:264}},"23":{start:{line:27,column:266},end:{line:27,column:321}},"24":{start:{line:27,column:297},end:{line:27,column:319}},"25":{start:{line:27,column:335},end:{line:27,column:337}},"26":{start:{line:27,column:367},end:{line:27,column:423}},"27":{start:{line:27,column:425},end:{line:27,column:726}},"28":{start:{line:27,column:448},end:{line:27,column:724}},"29":{start:{line:27,column:534},end:{line:27,column:606}},"30":{start:{line:27,column:608},end:{line:27,column:722}},"31":{start:{line:27,column:646},end:{line:27,column:687}},"32":{start:{line:27,column:697},end:{line:27,column:720}},"33":{start:{line:27,column:727},end:{line:27,column:748}},"34":{start:{line:27,column:749},end:{line:27,column:787}},"35":{start:{line:27,column:762},end:{line:27,column:785}},"36":{start:{line:27,column:788},end:{line:27,column:802}},"37":{start:{line:29,column:15},end:{line:29,column:46}},"38":{start:{line:31,column:0},end:{line:31,column:24}},"39":{start:{line:34,column:21},end:{line:34,column:23}},"40":{start:{line:36,column:2},end:{line:71,column:3}},"41":{start:{line:37,column:19},end:{line:37,column:33}},"42":{start:{line:38,column:4},end:{line:38,column:26}},"43":{start:{line:40,column:4},end:{line:61,column:5}},"44":{start:{line:41,column:6},end:{line:58,column:7}},"45":{start:{line:42,column:28},end:{line:46,column:20}},"46":{start:{line:47,column:8},end:{line:47,column:42}},"47":{start:{line:48,column:8},end:{line:48,column:37}},"48":{start:{line:49,column:33},end:{line:55,column:11}},"49":{start:{line:56,column:8},end:{line:56,column:53}},"50":{start:{line:57,column:8},end:{line:57,column:42}},"51":{start:{line:63,column:26},end:{line:63,column:90}},"52":{start:{line:64,column:27},end:{line:69,column:15}},"53":{start:{line:70,column:4},end:{line:70,column:77}},"54":{start:{line:73,column:2},end:{line:75,column:5}},"55":{start:{line:86,column:2},end:{line:88,column:3}},"56":{start:{line:87,column:4},end:{line:87,column:25}},"57":{start:{line:90,column:2},end:{line:90,column:36}},"58":{start:{line:91,column:18},end:{line:91,column:20}},"59":{start:{line:93,column:2},end:{line:103,column:3}},"60":{start:{line:94,column:4},end:{line:96,column:5}},"61":{start:{line:95,column:6},end:{line:95,column:68}},"62":{start:{line:98,column:4},end:{line:102,column:5}},"63":{start:{line:99,column:6},end:{line:99,column:40}},"64":{start:{line:105,column:2},end:{line:105,column:31}},"65":{start:{line:106,column:2},end:{line:106,column:27}},"66":{start:{line:107,column:2},end:{line:107,column:26}},"67":{start:{line:108,column:2},end:{line:108,column:33}},"68":{start:{line:110,column:2},end:{line:113,column:3}},"69":{start:{line:111,column:4},end:{line:111,column:24}},"70":{start:{line:112,column:4},end:{line:112,column:29}},"71":{start:{line:115,column:2},end:{line:115,column:31}},"72":{start:{line:121,column:2},end:{line:121,column:34}},"73":{start:{line:122,column:2},end:{line:122,column:24}},"74":{start:{line:126,column:28},end:{line:128,column:4}},"75":{start:{line:127,column:4},end:{line:127,column:84}},"76":{start:{line:130,column:2},end:{line:132,column:3}},"77":{start:{line:131,column:4},end:{line:131,column:37}},"78":{start:{line:135,column:15},end:{line:135,column:21}},"79":{start:{line:136,column:0},end:{line:136,column:27}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:23,column:9},end:{line:23,column:31}},loc:{start:{line:23,column:37},end:{line:23,column:95}},line:23},"1":{name:"_getRequireWildcardCache",decl:{start:{line:25,column:9},end:{line:25,column:33}},loc:{start:{line:25,column:47},end:{line:25,column:311}},line:25},"2":{name:"(anonymous_2)",decl:{start:{line:25,column:209},end:{line:25,column:210}},loc:{start:{line:25,column:232},end:{line:25,column:294}},line:25},"3":{name:"_interopRequireWildcard",decl:{start:{line:27,column:9},end:{line:27,column:32}},loc:{start:{line:27,column:51},end:{line:27,column:804}},line:27},"4":{name:"configureTransports",decl:{start:{line:33,column:9},end:{line:33,column:28}},loc:{start:{line:33,column:38},end:{line:76,column:1}},line:33},"5":{name:"configureLogger",decl:{start:{line:78,column:9},end:{line:78,column:24}},loc:{start:{line:85,column:8},end:{line:116,column:1}},line:85},"6":{name:"addTransport",decl:{start:{line:118,column:9},end:{line:118,column:21}},loc:{start:{line:118,column:33},end:{line:123,column:1}},line:118},"7":{name:"removeTransport",decl:{start:{line:125,column:9},end:{line:125,column:24}},loc:{start:{line:125,column:36},end:{line:133,column:1}},line:125},"8":{name:"(anonymous_8)",decl:{start:{line:126,column:51},end:{line:126,column:52}},loc:{start:{line:126,column:57},end:{line:128,column:3}},line:126}},branchMap:{"0":{loc:{start:{line:23,column:46},end:{line:23,column:92}},type:"cond-expr",locations:[{start:{line:23,column:70},end:{line:23,column:73}},{start:{line:23,column:76},end:{line:23,column:92}}],line:23},"1":{loc:{start:{line:23,column:46},end:{line:23,column:67}},type:"binary-expr",locations:[{start:{line:23,column:46},end:{line:23,column:49}},{start:{line:23,column:53},end:{line:23,column:67}}],line:23},"2":{loc:{start:{line:25,column:49},end:{line:25,column:96}},type:"if",locations:[{start:{line:25,column:49},end:{line:25,column:96}},{start:{line:25,column:49},end:{line:25,column:96}}],line:25},"3":{loc:{start:{line:25,column:241},end:{line:25,column:291}},type:"cond-expr",locations:[{start:{line:25,column:255},end:{line:25,column:271}},{start:{line:25,column:274},end:{line:25,column:291}}],line:25},"4":{loc:{start:{line:27,column:53},end:{line:27,column:111}},type:"if",locations:[{start:{line:27,column:53},end:{line:27,column:111}},{start:{line:27,column:53},end:{line:27,column:111}}],line:27},"5":{loc:{start:{line:27,column:57},end:{line:27,column:94}},type:"binary-expr",locations:[{start:{line:27,column:57},end:{line:27,column:69}},{start:{line:27,column:73},end:{line:27,column:76}},{start:{line:27,column:80},end:{line:27,column:94}}],line:27},"6":{loc:{start:{line:27,column:112},end:{line:27,column:214}},type:"if",locations:[{start:{line:27,column:112},end:{line:27,column:214}},{start:{line:27,column:112},end:{line:27,column:214}}],line:27},"7":{loc:{start:{line:27,column:116},end:{line:27,column:184}},type:"binary-expr",locations:[{start:{line:27,column:116},end:{line:27,column:128}},{start:{line:27,column:132},end:{line:27,column:155}},{start:{line:27,column:159},end:{line:27,column:184}}],line:27},"8":{loc:{start:{line:27,column:266},end:{line:27,column:321}},type:"if",locations:[{start:{line:27,column:266},end:{line:27,column:321}},{start:{line:27,column:266},end:{line:27,column:321}}],line:27},"9":{loc:{start:{line:27,column:270},end:{line:27,column:293}},type:"binary-expr",locations:[{start:{line:27,column:270},end:{line:27,column:275}},{start:{line:27,column:279},end:{line:27,column:293}}],line:27},"10":{loc:{start:{line:27,column:367},end:{line:27,column:423}},type:"binary-expr",locations:[{start:{line:27,column:367},end:{line:27,column:388}},{start:{line:27,column:392},end:{line:27,column:423}}],line:27},"11":{loc:{start:{line:27,column:448},end:{line:27,column:724}},type:"if",locations:[{start:{line:27,column:448},end:{line:27,column:724}},{start:{line:27,column:448},end:{line:27,column:724}}],line:27},"12":{loc:{start:{line:27,column:452},end:{line:27,column:519}},type:"binary-expr",locations:[{start:{line:27,column:452},end:{line:27,column:469}},{start:{line:27,column:473},end:{line:27,column:519}}],line:27},"13":{loc:{start:{line:27,column:534},end:{line:27,column:606}},type:"cond-expr",locations:[{start:{line:27,column:558},end:{line:27,column:599}},{start:{line:27,column:602},end:{line:27,column:606}}],line:27},"14":{loc:{start:{line:27,column:608},end:{line:27,column:722}},type:"if",locations:[{start:{line:27,column:608},end:{line:27,column:722}},{start:{line:27,column:608},end:{line:27,column:722}}],line:27},"15":{loc:{start:{line:27,column:612},end:{line:27,column:642}},type:"binary-expr",locations:[{start:{line:27,column:612},end:{line:27,column:616}},{start:{line:27,column:621},end:{line:27,column:629}},{start:{line:27,column:633},end:{line:27,column:641}}],line:27},"16":{loc:{start:{line:27,column:749},end:{line:27,column:787}},type:"if",locations:[{start:{line:27,column:749},end:{line:27,column:787}},{start:{line:27,column:749},end:{line:27,column:787}}],line:27},"17":{loc:{start:{line:36,column:2},end:{line:71,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:71,column:3}},{start:{line:36,column:2},end:{line:71,column:3}}],line:36},"18":{loc:{start:{line:41,column:6},end:{line:58,column:7}},type:"if",locations:[{start:{line:41,column:6},end:{line:58,column:7}},{start:{line:41,column:6},end:{line:58,column:7}}],line:41},"19":{loc:{start:{line:63,column:26},end:{line:63,column:90}},type:"cond-expr",locations:[{start:{line:63,column:41},end:{line:63,column:63}},{start:{line:63,column:66},end:{line:63,column:90}}],line:63},"20":{loc:{start:{line:78,column:25},end:{line:85,column:6}},type:"default-arg",locations:[{start:{line:85,column:4},end:{line:85,column:6}}],line:78},"21":{loc:{start:{line:79,column:2},end:{line:79,column:43}},type:"default-arg",locations:[{start:{line:79,column:15},end:{line:79,column:43}}],line:79},"22":{loc:{start:{line:80,column:2},end:{line:80,column:39}},type:"default-arg",locations:[{start:{line:80,column:13},end:{line:80,column:39}}],line:80},"23":{loc:{start:{line:81,column:2},end:{line:81,column:35}},type:"default-arg",locations:[{start:{line:81,column:13},end:{line:81,column:35}}],line:81},"24":{loc:{start:{line:82,column:2},end:{line:82,column:37}},type:"default-arg",locations:[{start:{line:82,column:12},end:{line:82,column:37}}],line:82},"25":{loc:{start:{line:83,column:2},end:{line:83,column:35}},type:"default-arg",locations:[{start:{line:83,column:11},end:{line:83,column:35}}],line:83},"26":{loc:{start:{line:86,column:2},end:{line:88,column:3}},type:"if",locations:[{start:{line:86,column:2},end:{line:88,column:3}},{start:{line:86,column:2},end:{line:88,column:3}}],line:86},"27":{loc:{start:{line:93,column:2},end:{line:103,column:3}},type:"if",locations:[{start:{line:93,column:2},end:{line:103,column:3}},{start:{line:93,column:2},end:{line:103,column:3}}],line:93},"28":{loc:{start:{line:94,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:96,column:5}},{start:{line:94,column:4},end:{line:96,column:5}}],line:94},"29":{loc:{start:{line:110,column:2},end:{line:113,column:3}},type:"if",locations:[{start:{line:110,column:2},end:{line:113,column:3}},{start:{line:110,column:2},end:{line:113,column:3}}],line:110},"30":{loc:{start:{line:127,column:11},end:{line:127,column:83}},type:"cond-expr",locations:[{start:{line:127,column:43},end:{line:127,column:64}},{start:{line:127,column:67},end:{line:127,column:83}}],line:127},"31":{loc:{start:{line:130,column:2},end:{line:132,column:3}},type:"if",locations:[{start:{line:130,column:2},end:{line:132,column:3}},{start:{line:130,column:2},end:{line:132,column:3}}],line:130}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0],"21":[0],"22":[0],"23":[0],"24":[0],"25":[0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0]},inputSourceMap:{version:3,sources:["../../../src/Adapters/Logger/WinstonLogger.js"],names:["logger","winston","createLogger","configureTransports","options","transports","silent","_","isNil","dirname","parseServer","DailyRotateFile","Object","assign","filename","json","format","combine","timestamp","splat","name","push","parseServerError","level","e","consoleFormat","simple","consoleOptions","colorize","Console","configure","configureLogger","logsFolder","defaults","jsonLogs","logLevel","verbose","maxLogFiles","path","isAbsolute","resolve","process","cwd","fs","mkdirSync","maxFiles","stringify","addTransport","transport","removeTransport","add","matchingTransport","find","t1","remove"],mappings:"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",sourcesContent:["import winston, { format } from 'winston';\nimport fs from 'fs';\nimport path from 'path';\nimport DailyRotateFile from 'winston-daily-rotate-file';\nimport _ from 'lodash';\nimport defaults from '../../defaults';\n\nconst logger = winston.createLogger();\n\nfunction configureTransports(options) {\n  const transports = [];\n  if (options) {\n    const silent = options.silent;\n    delete options.silent;\n\n    try {\n      if (!_.isNil(options.dirname)) {\n        const parseServer = new DailyRotateFile(\n          Object.assign(\n            {\n              filename: 'parse-server.info',\n              json: true,\n              format: format.combine(format.timestamp(), format.splat(), format.json()),\n            },\n            options\n          )\n        );\n        parseServer.name = 'parse-server';\n        transports.push(parseServer);\n\n        const parseServerError = new DailyRotateFile(\n          Object.assign(\n            {\n              filename: 'parse-server.err',\n              json: true,\n              format: format.combine(format.timestamp(), format.splat(), format.json()),\n            },\n            options,\n            { level: 'error' }\n          )\n        );\n        parseServerError.name = 'parse-server-error';\n        transports.push(parseServerError);\n      }\n    } catch (e) {\n      /* */\n    }\n\n    const consoleFormat = options.json ? format.json() : format.simple();\n    const consoleOptions = Object.assign(\n      {\n        colorize: true,\n        name: 'console',\n        silent,\n        format: format.combine(format.splat(), consoleFormat),\n      },\n      options\n    );\n\n    transports.push(new winston.transports.Console(consoleOptions));\n  }\n\n  logger.configure({\n    transports,\n  });\n}\n\nexport function configureLogger({\n  logsFolder = defaults.logsFolder,\n  jsonLogs = defaults.jsonLogs,\n  logLevel = winston.level,\n  verbose = defaults.verbose,\n  silent = defaults.silent,\n  maxLogFiles,\n} = {}) {\n  if (verbose) {\n    logLevel = 'verbose';\n  }\n\n  winston.level = logLevel;\n  const options = {};\n\n  if (logsFolder) {\n    if (!path.isAbsolute(logsFolder)) {\n      logsFolder = path.resolve(process.cwd(), logsFolder);\n    }\n    try {\n      fs.mkdirSync(logsFolder);\n    } catch (e) {\n      /* */\n    }\n  }\n  options.dirname = logsFolder;\n  options.level = logLevel;\n  options.silent = silent;\n  options.maxFiles = maxLogFiles;\n\n  if (jsonLogs) {\n    options.json = true;\n    options.stringify = true;\n  }\n  configureTransports(options);\n}\n\nexport function addTransport(transport) {\n  // we will remove the existing transport\n  // before replacing it with a new one\n  removeTransport(transport.name);\n\n  logger.add(transport);\n}\n\nexport function removeTransport(transport) {\n  const matchingTransport = logger.transports.find(t1 => {\n    return typeof transport === 'string' ? t1.name === transport : t1 === transport;\n  });\n\n  if (matchingTransport) {\n    logger.remove(matchingTransport);\n  }\n}\n\nexport { logger };\nexport default logger;\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2942c16f89f332fab9f7bba4428df3162b5c687e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2n8plkb7uu=function(){return actualCoverage;};}return actualCoverage;}cov_2n8plkb7uu();cov_2n8plkb7uu().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2n8plkb7uu().s[1]++;exports.configureLogger=configureLogger;cov_2n8plkb7uu().s[2]++;exports.addTransport=addTransport;cov_2n8plkb7uu().s[3]++;exports.removeTransport=removeTransport;cov_2n8plkb7uu().s[4]++;exports.default=exports.logger=void 0;var _winston=(cov_2n8plkb7uu().s[5]++,_interopRequireWildcard(require("winston")));var _fs=(cov_2n8plkb7uu().s[6]++,_interopRequireDefault(require("fs")));var _path=(cov_2n8plkb7uu().s[7]++,_interopRequireDefault(require("path")));var _winstonDailyRotateFile=(cov_2n8plkb7uu().s[8]++,_interopRequireDefault(require("winston-daily-rotate-file")));var _lodash=(cov_2n8plkb7uu().s[9]++,_interopRequireDefault(require("lodash")));var _defaults=(cov_2n8plkb7uu().s[10]++,_interopRequireDefault(require("../../defaults")));function _interopRequireDefault(obj){cov_2n8plkb7uu().f[0]++;cov_2n8plkb7uu().s[11]++;return(cov_2n8plkb7uu().b[1][0]++,obj)&&(cov_2n8plkb7uu().b[1][1]++,obj.__esModule)?(cov_2n8plkb7uu().b[0][0]++,obj):(cov_2n8plkb7uu().b[0][1]++,{default:obj});}function _getRequireWildcardCache(nodeInterop){cov_2n8plkb7uu().f[1]++;cov_2n8plkb7uu().s[12]++;if(typeof WeakMap!=="function"){cov_2n8plkb7uu().b[2][0]++;cov_2n8plkb7uu().s[13]++;return null;}else{cov_2n8plkb7uu().b[2][1]++;}var cacheBabelInterop=(cov_2n8plkb7uu().s[14]++,new WeakMap());var cacheNodeInterop=(cov_2n8plkb7uu().s[15]++,new WeakMap());cov_2n8plkb7uu().s[16]++;return(_getRequireWildcardCache=function(nodeInterop){cov_2n8plkb7uu().f[2]++;cov_2n8plkb7uu().s[17]++;return nodeInterop?(cov_2n8plkb7uu().b[3][0]++,cacheNodeInterop):(cov_2n8plkb7uu().b[3][1]++,cacheBabelInterop);})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){cov_2n8plkb7uu().f[3]++;cov_2n8plkb7uu().s[18]++;if((cov_2n8plkb7uu().b[5][0]++,!nodeInterop)&&(cov_2n8plkb7uu().b[5][1]++,obj)&&(cov_2n8plkb7uu().b[5][2]++,obj.__esModule)){cov_2n8plkb7uu().b[4][0]++;cov_2n8plkb7uu().s[19]++;return obj;}else{cov_2n8plkb7uu().b[4][1]++;}cov_2n8plkb7uu().s[20]++;if((cov_2n8plkb7uu().b[7][0]++,obj===null)||(cov_2n8plkb7uu().b[7][1]++,typeof obj!=="object")&&(cov_2n8plkb7uu().b[7][2]++,typeof obj!=="function")){cov_2n8plkb7uu().b[6][0]++;cov_2n8plkb7uu().s[21]++;return{default:obj};}else{cov_2n8plkb7uu().b[6][1]++;}var cache=(cov_2n8plkb7uu().s[22]++,_getRequireWildcardCache(nodeInterop));cov_2n8plkb7uu().s[23]++;if((cov_2n8plkb7uu().b[9][0]++,cache)&&(cov_2n8plkb7uu().b[9][1]++,cache.has(obj))){cov_2n8plkb7uu().b[8][0]++;cov_2n8plkb7uu().s[24]++;return cache.get(obj);}else{cov_2n8plkb7uu().b[8][1]++;}var newObj=(cov_2n8plkb7uu().s[25]++,{});var hasPropertyDescriptor=(cov_2n8plkb7uu().s[26]++,(cov_2n8plkb7uu().b[10][0]++,Object.defineProperty)&&(cov_2n8plkb7uu().b[10][1]++,Object.getOwnPropertyDescriptor));cov_2n8plkb7uu().s[27]++;for(var key in obj){cov_2n8plkb7uu().s[28]++;if((cov_2n8plkb7uu().b[12][0]++,key!=="default")&&(cov_2n8plkb7uu().b[12][1]++,Object.prototype.hasOwnProperty.call(obj,key))){cov_2n8plkb7uu().b[11][0]++;var desc=(cov_2n8plkb7uu().s[29]++,hasPropertyDescriptor?(cov_2n8plkb7uu().b[13][0]++,Object.getOwnPropertyDescriptor(obj,key)):(cov_2n8plkb7uu().b[13][1]++,null));cov_2n8plkb7uu().s[30]++;if((cov_2n8plkb7uu().b[15][0]++,desc)&&((cov_2n8plkb7uu().b[15][1]++,desc.get)||(cov_2n8plkb7uu().b[15][2]++,desc.set))){cov_2n8plkb7uu().b[14][0]++;cov_2n8plkb7uu().s[31]++;Object.defineProperty(newObj,key,desc);}else{cov_2n8plkb7uu().b[14][1]++;cov_2n8plkb7uu().s[32]++;newObj[key]=obj[key];}}else{cov_2n8plkb7uu().b[11][1]++;}}cov_2n8plkb7uu().s[33]++;newObj.default=obj;cov_2n8plkb7uu().s[34]++;if(cache){cov_2n8plkb7uu().b[16][0]++;cov_2n8plkb7uu().s[35]++;cache.set(obj,newObj);}else{cov_2n8plkb7uu().b[16][1]++;}cov_2n8plkb7uu().s[36]++;return newObj;}const logger=(cov_2n8plkb7uu().s[37]++,_winston.default.createLogger());cov_2n8plkb7uu().s[38]++;exports.logger=logger;function configureTransports(options){cov_2n8plkb7uu().f[4]++;const transports=(cov_2n8plkb7uu().s[39]++,[]);cov_2n8plkb7uu().s[40]++;if(options){cov_2n8plkb7uu().b[17][0]++;const silent=(cov_2n8plkb7uu().s[41]++,options.silent);cov_2n8plkb7uu().s[42]++;delete options.silent;cov_2n8plkb7uu().s[43]++;try{cov_2n8plkb7uu().s[44]++;if(!_lodash.default.isNil(options.dirname)){cov_2n8plkb7uu().b[18][0]++;const parseServer=(cov_2n8plkb7uu().s[45]++,new _winstonDailyRotateFile.default(Object.assign({filename:'parse-server.info',json:true,format:_winston.format.combine(_winston.format.timestamp(),_winston.format.splat(),_winston.format.json())},options)));cov_2n8plkb7uu().s[46]++;parseServer.name='parse-server';cov_2n8plkb7uu().s[47]++;transports.push(parseServer);const parseServerError=(cov_2n8plkb7uu().s[48]++,new _winstonDailyRotateFile.default(Object.assign({filename:'parse-server.err',json:true,format:_winston.format.combine(_winston.format.timestamp(),_winston.format.splat(),_winston.format.json())},options,{level:'error'})));cov_2n8plkb7uu().s[49]++;parseServerError.name='parse-server-error';cov_2n8plkb7uu().s[50]++;transports.push(parseServerError);}else{cov_2n8plkb7uu().b[18][1]++;}}catch(e){/* */}const consoleFormat=(cov_2n8plkb7uu().s[51]++,options.json?(cov_2n8plkb7uu().b[19][0]++,_winston.format.json()):(cov_2n8plkb7uu().b[19][1]++,_winston.format.simple()));const consoleOptions=(cov_2n8plkb7uu().s[52]++,Object.assign({colorize:true,name:'console',silent,format:_winston.format.combine(_winston.format.splat(),consoleFormat)},options));cov_2n8plkb7uu().s[53]++;transports.push(new _winston.default.transports.Console(consoleOptions));}else{cov_2n8plkb7uu().b[17][1]++;}cov_2n8plkb7uu().s[54]++;logger.configure({transports});}function configureLogger({logsFolder=(cov_2n8plkb7uu().b[21][0]++,_defaults.default.logsFolder),jsonLogs=(cov_2n8plkb7uu().b[22][0]++,_defaults.default.jsonLogs),logLevel=(cov_2n8plkb7uu().b[23][0]++,_winston.default.level),verbose=(cov_2n8plkb7uu().b[24][0]++,_defaults.default.verbose),silent=(cov_2n8plkb7uu().b[25][0]++,_defaults.default.silent),maxLogFiles}=(cov_2n8plkb7uu().b[20][0]++,{})){cov_2n8plkb7uu().f[5]++;cov_2n8plkb7uu().s[55]++;if(verbose){cov_2n8plkb7uu().b[26][0]++;cov_2n8plkb7uu().s[56]++;logLevel='verbose';}else{cov_2n8plkb7uu().b[26][1]++;}cov_2n8plkb7uu().s[57]++;_winston.default.level=logLevel;const options=(cov_2n8plkb7uu().s[58]++,{});cov_2n8plkb7uu().s[59]++;if(logsFolder){cov_2n8plkb7uu().b[27][0]++;cov_2n8plkb7uu().s[60]++;if(!_path.default.isAbsolute(logsFolder)){cov_2n8plkb7uu().b[28][0]++;cov_2n8plkb7uu().s[61]++;logsFolder=_path.default.resolve(process.cwd(),logsFolder);}else{cov_2n8plkb7uu().b[28][1]++;}cov_2n8plkb7uu().s[62]++;try{cov_2n8plkb7uu().s[63]++;_fs.default.mkdirSync(logsFolder);}catch(e){/* */}}else{cov_2n8plkb7uu().b[27][1]++;}cov_2n8plkb7uu().s[64]++;options.dirname=logsFolder;cov_2n8plkb7uu().s[65]++;options.level=logLevel;cov_2n8plkb7uu().s[66]++;options.silent=silent;cov_2n8plkb7uu().s[67]++;options.maxFiles=maxLogFiles;cov_2n8plkb7uu().s[68]++;if(jsonLogs){cov_2n8plkb7uu().b[29][0]++;cov_2n8plkb7uu().s[69]++;options.json=true;cov_2n8plkb7uu().s[70]++;options.stringify=true;}else{cov_2n8plkb7uu().b[29][1]++;}cov_2n8plkb7uu().s[71]++;configureTransports(options);}function addTransport(transport){cov_2n8plkb7uu().f[6]++;cov_2n8plkb7uu().s[72]++;// we will remove the existing transport
// before replacing it with a new one
removeTransport(transport.name);cov_2n8plkb7uu().s[73]++;logger.add(transport);}function removeTransport(transport){cov_2n8plkb7uu().f[7]++;const matchingTransport=(cov_2n8plkb7uu().s[74]++,logger.transports.find(t1=>{cov_2n8plkb7uu().f[8]++;cov_2n8plkb7uu().s[75]++;return typeof transport==='string'?(cov_2n8plkb7uu().b[30][0]++,t1.name===transport):(cov_2n8plkb7uu().b[30][1]++,t1===transport);}));cov_2n8plkb7uu().s[76]++;if(matchingTransport){cov_2n8plkb7uu().b[31][0]++;cov_2n8plkb7uu().s[77]++;logger.remove(matchingTransport);}else{cov_2n8plkb7uu().b[31][1]++;}}var _default=(cov_2n8plkb7uu().s[78]++,logger);cov_2n8plkb7uu().s[79]++;exports.default=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9Mb2dnZXIvV2luc3RvbkxvZ2dlci5qcyJdLCJuYW1lcyI6WyJsb2dnZXIiLCJ3aW5zdG9uIiwiY3JlYXRlTG9nZ2VyIiwiY29uZmlndXJlVHJhbnNwb3J0cyIsIm9wdGlvbnMiLCJ0cmFuc3BvcnRzIiwic2lsZW50IiwiXyIsImlzTmlsIiwiZGlybmFtZSIsInBhcnNlU2VydmVyIiwiRGFpbHlSb3RhdGVGaWxlIiwiT2JqZWN0IiwiYXNzaWduIiwiZmlsZW5hbWUiLCJqc29uIiwiZm9ybWF0IiwiY29tYmluZSIsInRpbWVzdGFtcCIsInNwbGF0IiwibmFtZSIsInB1c2giLCJwYXJzZVNlcnZlckVycm9yIiwibGV2ZWwiLCJlIiwiY29uc29sZUZvcm1hdCIsInNpbXBsZSIsImNvbnNvbGVPcHRpb25zIiwiY29sb3JpemUiLCJDb25zb2xlIiwiY29uZmlndXJlIiwiY29uZmlndXJlTG9nZ2VyIiwibG9nc0ZvbGRlciIsImRlZmF1bHRzIiwianNvbkxvZ3MiLCJsb2dMZXZlbCIsInZlcmJvc2UiLCJtYXhMb2dGaWxlcyIsInBhdGgiLCJpc0Fic29sdXRlIiwicmVzb2x2ZSIsInByb2Nlc3MiLCJjd2QiLCJmcyIsIm1rZGlyU3luYyIsIm1heEZpbGVzIiwic3RyaW5naWZ5IiwiYWRkVHJhbnNwb3J0IiwidHJhbnNwb3J0IiwicmVtb3ZlVHJhbnNwb3J0IiwiYWRkIiwibWF0Y2hpbmdUcmFuc3BvcnQiLCJmaW5kIiwidDEiLCJyZW1vdmUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLGlCQUFRQyxZQUFSLEVBQWY7Ozs7QUFFQSxTQUFTQyxtQkFBVCxDQUE2QkMsT0FBN0IsRUFBc0M7QUFDcEMsUUFBTUMsVUFBVSxHQUFHLEVBQW5COztBQUNBLE1BQUlELE9BQUosRUFBYTtBQUNYLFVBQU1FLE1BQU0sR0FBR0Ys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aUJBQWQ7QUFDRDtBQUNGOztlQUdjbkQsTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB3aW5zdG9uLCB7IGZvcm1hdCB9IGZyb20gJ3dpbnN0b24nO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IERhaWx5Um90YXRlRmlsZSBmcm9tICd3aW5zdG9uLWRhaWx5LXJvdGF0ZS1maWxlJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi4vLi4vZGVmYXVsdHMnO1xuXG5jb25zdCBsb2dnZXIgPSB3aW5zdG9uLmNyZWF0ZUxvZ2dlcigpO1xuXG5mdW5jdGlvbiBjb25maWd1cmVUcmFuc3BvcnRzKG9wdGlvbnMpIHtcbiAgY29uc3QgdHJhbnNwb3J0cyA9IFtdO1xuICBpZiAob3B0aW9ucykge1xuICAgIGNvbnN0IHNpbGVudCA9IG9wdGlvbnMuc2lsZW50O1xuICAgIGRlbGV0ZSBvcHRpb25zLnNpbGVudDtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoIV8uaXNOaWwob3B0aW9ucy5kaXJuYW1lKSkge1xuICAgICAgICBjb25zdCBwYXJzZVNlcnZlciA9IG5ldyBEYWlseVJvdGF0ZUZpbGUoXG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZmlsZW5hbWU6ICdwYXJzZS1zZXJ2ZXIuaW5mbycsXG4gICAgICAgICAgICAgIGpzb246IHRydWUsXG4gICAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0LmNvbWJpbmUoZm9ybWF0LnRpbWVzdGFtcCgpLCBmb3JtYXQuc3BsYXQoKSwgZm9ybWF0Lmpzb24oKSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgICAgcGFyc2VTZXJ2ZXIubmFtZSA9ICdwYXJzZS1zZXJ2ZXInO1xuICAgICAgICB0cmFuc3BvcnRzLnB1c2gocGFyc2VTZXJ2ZXIpO1xuXG4gICAgICAgIGNvbnN0IHBhcnNlU2VydmVyRXJyb3IgPSBuZXcgRGFpbHlSb3RhdGVGaWxlKFxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGZpbGVuYW1lOiAncGFyc2Utc2VydmVyLmVycicsXG4gICAgICAgICAgICAgIGpzb246IHRydWUsXG4gICAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0LmNvbWJpbmUoZm9ybWF0LnRpbWVzdGFtcCgpLCBmb3JtYXQuc3BsYXQoKSwgZm9ybWF0Lmpzb24oKSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIHsgbGV2ZWw6ICdlcnJvcicgfVxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgICAgcGFyc2VTZXJ2ZXJFcnJvci5uYW1lID0gJ3BhcnNlLXNlcnZlci1lcnJvcic7XG4gICAgICAgIHRyYW5zcG9ydHMucHVzaChwYXJzZVNlcnZlckVycm9yKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvKiAqL1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnNvbGVGb3JtYXQgPSBvcHRpb25zLmpzb24gPyBmb3JtYXQuanNvbigpIDogZm9ybWF0LnNpbXBsZSgpO1xuICAgIGNvbnN0IGNvbnNvbGVPcHRpb25zID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIHtcbiAgICAgICAgY29sb3JpemU6IHRydWUsXG4gICAgICAgIG5hbWU6ICdjb25zb2xlJyxcbiAgICAgICAgc2lsZW50LFxuICAgICAgICBmb3JtYXQ6IGZvcm1hdC5jb21iaW5lKGZvcm1hdC5zcGxhdCgpLCBjb25zb2xlRm9ybWF0KSxcbiAgICAgIH0sXG4gICAgICBvcHRpb25zXG4gICAgKTtcblxuICAgIHRyYW5zcG9ydHMucHVzaChuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkNvbnNvbGUoY29uc29sZU9wdGlvbnMpKTtcbiAgfVxuXG4gIGxvZ2dlci5jb25maWd1cmUoe1xuICAgIHRyYW5zcG9ydHMsXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29uZmlndXJlTG9nZ2VyKHtcbiAgbG9nc0ZvbGRlciA9IGRlZmF1bHRzLmxvZ3NGb2xkZXIsXG4gIGpzb25Mb2dzID0gZGVmYXVsdHMuanNvbkxvZ3MsXG4gIGxvZ0xldmVsID0gd2luc3Rvbi5sZXZlbCxcbiAgdmVyYm9zZSA9IGRlZmF1bHRzLnZlcmJvc2UsXG4gIHNpbGVudCA9IGRlZmF1bHRzLnNpbGVudCxcbiAgbWF4TG9nRmlsZXMsXG59ID0ge30pIHtcbiAgaWYgKHZlcmJvc2UpIHtcbiAgICBsb2dMZXZlbCA9ICd2ZXJib3NlJztcbiAgfVxuXG4gIHdpbnN0b24ubGV2ZWwgPSBsb2dMZXZlbDtcbiAgY29uc3Qgb3B0aW9ucyA9IHt9O1xuXG4gIGlmIChsb2dzRm9sZGVyKSB7XG4gICAgaWYgKCFwYXRoLmlzQWJzb2x1dGUobG9nc0ZvbGRlcikpIHtcbiAgICAgIGxvZ3NGb2xkZXIgPSBwYXRoLnJlc29sdmUocHJvY2Vzcy5jd2QoKSwgbG9nc0ZvbGRlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBmcy5ta2RpclN5bmMobG9nc0ZvbGRlcik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLyogKi9cbiAgICB9XG4gIH1cbiAgb3B0aW9ucy5kaXJuYW1lID0gbG9nc0ZvbGRlcjtcbiAgb3B0aW9ucy5sZXZlbCA9IGxvZ0xldmVsO1xuICBvcHRpb25zLnNpbGVudCA9IHNpbGVudDtcbiAgb3B0aW9ucy5tYXhGaWxlcyA9IG1heExvZ0ZpbGVzO1xuXG4gIGlmIChqc29uTG9ncykge1xuICAgIG9wdGlvbnMuanNvbiA9IHRydWU7XG4gICAgb3B0aW9ucy5zdHJpbmdpZnkgPSB0cnVlO1xuICB9XG4gIGNvbmZpZ3VyZVRyYW5zcG9ydHMob3B0aW9ucyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRUcmFuc3BvcnQodHJhbnNwb3J0KSB7XG4gIC8vIHdlIHdpbGwgcmVtb3ZlIHRoZSBleGlzdGluZyB0cmFuc3BvcnRcbiAgLy8gYmVmb3JlIHJlcGxhY2luZyBpdCB3aXRoIGEgbmV3IG9uZVxuICByZW1vdmVUcmFuc3BvcnQodHJhbnNwb3J0Lm5hbWUpO1xuXG4gIGxvZ2dlci5hZGQodHJhbnNwb3J0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVRyYW5zcG9ydCh0cmFuc3BvcnQpIHtcbiAgY29uc3QgbWF0Y2hpbmdUcmFuc3BvcnQgPSBsb2dnZXIudHJhbnNwb3J0cy5maW5kKHQxID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIHRyYW5zcG9ydCA9PT0gJ3N0cmluZycgPyB0MS5uYW1lID09PSB0cmFuc3BvcnQgOiB0MSA9PT0gdHJhbnNwb3J0O1xuICB9KTtcblxuICBpZiAobWF0Y2hpbmdUcmFuc3BvcnQpIHtcbiAgICBsb2dnZXIucmVtb3ZlKG1hdGNoaW5nVHJhbnNwb3J0KTtcbiAgfVxufVxuXG5leHBvcnQgeyBsb2dnZXIgfTtcbmV4cG9ydCBkZWZhdWx0IGxvZ2dlcjtcbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BZGFwdGVycy9Mb2dnZXIvV2luc3RvbkxvZ2dlci5qcyJdLCJuYW1lcyI6WyJsb2dnZXIiLCJ3aW5zdG9uIiwidHJhbnNwb3J0cyIsInNpbGVudCIsIm9wdGlvbnMiLCJfIiwicGFyc2VTZXJ2ZXIiLCJEYWlseVJvdGF0ZUZpbGUiLCJmaWxlbmFtZSIsImpzb24iLCJmb3JtYXQiLCJwYXJzZVNlcnZlckVycm9yIiwibGV2ZWwiLCJjb25zb2xlRm9ybWF0IiwiY29uc29sZU9wdGlvbnMiLCJjb2xvcml6ZSIsIm5hbWUiLCJsb2dzRm9sZGVyIiwiZGVmYXVsdHMiLCJqc29uTG9ncyIsImxvZ0xldmVsIiwidmVyYm9zZSIsIm1heExvZ0ZpbGVzIiwicGF0aCIsInByb2Nlc3MiLCJmcyIsImNvbmZpZ3VyZVRyYW5zcG9ydHMiLCJyZW1vdmVUcmFuc3BvcnQiLCJ0cmFuc3BvcnQiLCJtYXRjaGluZ1RyYW5zcG9ydCIsInQxIl0sIm1hcHBpbmdzIjoiO29hQUFBLEdBQUEsQ0FBQSxRQUFBLDBCQUFBLHVCQUFBLENBQUEsT0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsQ0FDQSxHQUFBLENBQUEsR0FBQSwwQkFBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxDQUFBLENBQ0EsR0FBQSxDQUFBLEtBQUEsMEJBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsTUFBQSxDQUFBLENBQUEsQ0FBQSxDQUNBLEdBQUEsQ0FBQSx1QkFBQSwwQkFBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSwyQkFBQSxDQUFBLENBQUEsQ0FBQSxDQUNBLEdBQUEsQ0FBQSxPQUFBLDBCQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLENBQUEsQ0FDQSxHQUFBLENBQUEsU0FBQSwyQkFBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxnQkFBQSxDQUFBLENBQUEsQ0FBQSxDLG0zRkFFQSxLQUFNQSxDQUFBQSxNQUFNLDJCQUFHQyxRQUFB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TSx5QkFtQk5BLE9BQU8sQ0FBUEEsS0FBQUEsQ0FBQUEsUUFBQUEsQ0FuQk0seUJBb0JOQSxPQUFPLENBQVBBLE1BQUFBLENBQUFBLE1BQUFBLENBcEJNLHlCQXFCTkEsT0FBTyxDQUFQQSxRQUFBQSxDQUFBQSxXQUFBQSxDQXJCTSx5QkF1Qk4sR0FBQSxRQUFBLENBQWMsc0RBQ1pBLE9BQU8sQ0FBUEEsSUFBQUEsQ0FBQUEsSUFBQUEsQ0FEWSx5QkFFWkEsT0FBTyxDQUFQQSxTQUFBQSxDQUFBQSxJQUFBQSxDQUNELENBSEQsa0NBdkJNLHlCQTJCTnNCLG1CQUFtQixDQUFuQkEsT0FBbUIsQ0FBbkJBLENBQ0QsQ0FFTSxRQUFBLENBQUEsWUFBQSxDQUFBLFNBQUEsQ0FBaUMsa0RBQ3RDO0FBQ0E7QUFDQUMsZUFBZSxDQUFDQyxTQUFTLENBQXpCRCxJQUFlLENBQWZBLENBSHNDLHlCQUt0QzNCLE1BQU0sQ0FBTkEsR0FBQUEsQ0FBQUEsU0FBQUEsRUFDRCxDQUVNLFFBQUEsQ0FBQSxlQUFBLENBQUEsU0FBQSxDQUFvQyx5QkFDekMsS0FBTTZCLENBQUFBLGlCQUFpQiwyQkFBRyxNQUFNLENBQU4sVUFBQSxDQUFBLElBQUEsQ0FBdUJDLEVBQUUsRUFBSSxrREFDckQsTUFBTyxPQUFBLENBQUEsU0FBQSxHQUFBLFFBQUEsOEJBQWdDQSxFQUFFLENBQUZBLElBQUFBLEdBQWhDLFNBQUEsK0JBQXdEQSxFQUFFLEdBQWpFLFNBQU8sQ0FBUCxDQURGLENBQTBCLENBQUgsQ0FBdkIsQ0FEeUMseUJBS3pDLEdBQUEsaUJBQUEsQ0FBdUIsc0RBQ3JCOUIsTUFBTSxDQUFOQSxNQUFBQSxDQUFBQSxpQkFBQUEsRUFDRCxDQUZELGtDQUdELEMsdUNBR2NBLE0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgd2luc3RvbiwgeyBmb3JtYXQgfSBmcm9tICd3aW5zdG9uJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBEYWlseVJvdGF0ZUZpbGUgZnJvbSAnd2luc3Rvbi1kYWlseS1yb3RhdGUtZmlsZSc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGRlZmF1bHRzIGZyb20gJy4uLy4uL2RlZmF1bHRzJztcblxuY29uc3QgbG9nZ2VyID0gd2luc3Rvbi5jcmVhdGVMb2dnZXIoKTtcblxuZnVuY3Rpb24gY29uZmlndXJlVHJhbnNwb3J0cyhvcHRpb25zKSB7XG4gIGNvbnN0IHRyYW5zcG9ydHMgPSBbXTtcbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBjb25zdCBzaWxlbnQgPSBvcHRpb25zLnNpbGVudDtcbiAgICBkZWxldGUgb3B0aW9ucy5zaWxlbnQ7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKCFfLmlzTmlsKG9wdGlvbnMuZGlybmFtZSkpIHtcbiAgICAgICAgY29uc3QgcGFyc2VTZXJ2ZXIgPSBuZXcgRGFpbHlSb3RhdGVGaWxlKFxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGZpbGVuYW1lOiAncGFyc2Utc2VydmVyLmluZm8nLFxuICAgICAgICAgICAgICBqc29uOiB0cnVlLFxuICAgICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdC5jb21iaW5lKGZvcm1hdC50aW1lc3RhbXAoKSwgZm9ybWF0LnNwbGF0KCksIGZvcm1hdC5qc29uKCkpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIHBhcnNlU2VydmVyLm5hbWUgPSAncGFyc2Utc2VydmVyJztcbiAgICAgICAgdHJhbnNwb3J0cy5wdXNoKHBhcnNlU2VydmVyKTtcblxuICAgICAgICBjb25zdCBwYXJzZVNlcnZlckVycm9yID0gbmV3IERhaWx5Um90YXRlRmlsZShcbiAgICAgICAgICBPYmplY3QuYXNzaWduKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBmaWxlbmFtZTogJ3BhcnNlLXNlcnZlci5lcnInLFxuICAgICAgICAgICAgICBqc29uOiB0cnVlLFxuICAgICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdC5jb21iaW5lKGZvcm1hdC50aW1lc3RhbXAoKSwgZm9ybWF0LnNwbGF0KCksIGZvcm1hdC5qc29uKCkpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICB7IGxldmVsOiAnZXJyb3InIH1cbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIHBhcnNlU2VydmVyRXJyb3IubmFtZSA9ICdwYXJzZS1zZXJ2ZXItZXJyb3InO1xuICAgICAgICB0cmFuc3BvcnRzLnB1c2gocGFyc2VTZXJ2ZXJFcnJvcik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLyogKi9cbiAgICB9XG5cbiAgICBjb25zdCBjb25zb2xlRm9ybWF0ID0gb3B0aW9ucy5qc29uID8gZm9ybWF0Lmpzb24oKSA6IGZvcm1hdC5zaW1wbGUoKTtcbiAgICBjb25zdCBjb25zb2xlT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICB7XG4gICAgICAgIGNvbG9yaXplOiB0cnVlLFxuICAgICAgICBuYW1lOiAnY29uc29sZScsXG4gICAgICAgIHNpbGVudCxcbiAgICAgICAgZm9ybWF0OiBmb3JtYXQuY29tYmluZShmb3JtYXQuc3BsYXQoKSwgY29uc29sZUZvcm1hdCksXG4gICAgICB9LFxuICAgICAgb3B0aW9uc1xuICAgICk7XG5cbiAgICB0cmFuc3BvcnRzLnB1c2gobmV3IHdpbnN0b24udHJhbnNwb3J0cy5Db25zb2xlKGNvbnNvbGVPcHRpb25zKSk7XG4gIH1cblxuICBsb2dnZXIuY29uZmlndXJlKHtcbiAgICB0cmFuc3BvcnRzLFxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ3VyZUxvZ2dlcih7XG4gIGxvZ3NGb2xkZXIgPSBkZWZhdWx0cy5sb2dzRm9sZGVyLFxuICBqc29uTG9ncyA9IGRlZmF1bHRzLmpzb25Mb2dzLFxuICBsb2dMZXZlbCA9IHdpbnN0b24ubGV2ZWwsXG4gIHZlcmJvc2UgPSBkZWZhdWx0cy52ZXJib3NlLFxuICBzaWxlbnQgPSBkZWZhdWx0cy5zaWxlbnQsXG4gIG1heExvZ0ZpbGVzLFxufSA9IHt9KSB7XG4gIGlmICh2ZXJib3NlKSB7XG4gICAgbG9nTGV2ZWwgPSAndmVyYm9zZSc7XG4gIH1cblxuICB3aW5zdG9uLmxldmVsID0gbG9nTGV2ZWw7XG4gIGNvbnN0IG9wdGlvbnMgPSB7fTtcblxuICBpZiAobG9nc0ZvbGRlcikge1xuICAgIGlmICghcGF0aC5pc0Fic29sdXRlKGxvZ3NGb2xkZXIpKSB7XG4gICAgICBsb2dzRm9sZGVyID0gcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksIGxvZ3NGb2xkZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgZnMubWtkaXJTeW5jKGxvZ3NGb2xkZXIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8qICovXG4gICAgfVxuICB9XG4gIG9wdGlvbnMuZGlybmFtZSA9IGxvZ3NGb2xkZXI7XG4gIG9wdGlvbnMubGV2ZWwgPSBsb2dMZXZlbDtcbiAgb3B0aW9ucy5zaWxlbnQgPSBzaWxlbnQ7XG4gIG9wdGlvbnMubWF4RmlsZXMgPSBtYXhMb2dGaWxlcztcblxuICBpZiAoanNvbkxvZ3MpIHtcbiAgICBvcHRpb25zLmpzb24gPSB0cnVlO1xuICAgIG9wdGlvbnMuc3RyaW5naWZ5ID0gdHJ1ZTtcbiAgfVxuICBjb25maWd1cmVUcmFuc3BvcnRzKG9wdGlvbnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkVHJhbnNwb3J0KHRyYW5zcG9ydCkge1xuICAvLyB3ZSB3aWxsIHJlbW92ZSB0aGUgZXhpc3RpbmcgdHJhbnNwb3J0XG4gIC8vIGJlZm9yZSByZXBsYWNpbmcgaXQgd2l0aCBhIG5ldyBvbmVcbiAgcmVtb3ZlVHJhbnNwb3J0KHRyYW5zcG9ydC5uYW1lKTtcblxuICBsb2dnZXIuYWRkKHRyYW5zcG9ydCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVUcmFuc3BvcnQodHJhbnNwb3J0KSB7XG4gIGNvbnN0IG1hdGNoaW5nVHJhbnNwb3J0ID0gbG9nZ2VyLnRyYW5zcG9ydHMuZmluZCh0MSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiB0cmFuc3BvcnQgPT09ICdzdHJpbmcnID8gdDEubmFtZSA9PT0gdHJhbnNwb3J0IDogdDEgPT09IHRyYW5zcG9ydDtcbiAgfSk7XG5cbiAgaWYgKG1hdGNoaW5nVHJhbnNwb3J0KSB7XG4gICAgbG9nZ2VyLnJlbW92ZShtYXRjaGluZ1RyYW5zcG9ydCk7XG4gIH1cbn1cblxuZXhwb3J0IHsgbG9nZ2VyIH07XG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XG4iXX0=